import{j as z,_ as E,e as Z,y as q,n as G}from"./index-0.0.0-dataease2.js";import{p as y}from"./index-0.0.0-dataease.js";import{E as H}from"./el-row-0.0.0-dataease.js";import"./el-tag-0.0.0-dataease.js";import{E as J,a as Q}from"./el-select-0.0.0-dataease.js";import"./el-popper-0.0.0-dataease.js";import{E as W}from"./el-col-0.0.0-dataease.js";import{K as C,E as X}from"./ApiTestModel-0.0.0-dataease.js";import{i as Y}from"./icon_drag_outlined-0.0.0-dataease.js";import{i as ee}from"./icon_delete-trash_outlined-0.0.0-dataease.js";import{i as ae}from"./icon_add_outlined-0.0.0-dataease.js";import{d as le}from"./vuedraggable-es-0.0.0-dataease.js";import{d as oe,m as N,t as te,al as ne,R as de,f as n,M as V,k as t,i as o,N as ue,j as l,g as r,a0 as i,Z as x,aa as U,a6 as se,a7 as re}from"./vue-0.0.0-dataease.js";const ce={class:"api-key-value"},ie={style:{"margin-bottom":"16px"}},Ue=oe({__name:"ApiKeyValue",props:{keyPlaceholder:y.string.def(""),valuePlaceholder:y.string.def(""),unShowSelect:y.bool.def(!1),isReadOnly:y.bool.def(!1),needMock:y.bool.def(!1),showDesc:y.bool.def(!1),items:{type:Array,default:()=>[]},valueList:{type:Array,default:()=>[]},suggestions:{type:Array,default:()=>[]}},setup(d){const b=d,{t:s}=z(),g=N(()=>b.keyPlaceholder||s("datasource.key")),S=N(()=>b.valuePlaceholder||s("datasource.value")),{suggestions:v,items:c}=te(b);ne(()=>{(!c.value.length||c.value[c.value.length-1].name)&&c.value.push(new C({enable:!0,name:"",value:""}));for(let u=0;u<c.value.length;u++)c.value[u].hasOwnProperty("nameType")||(c.value[u].nameType="fixed")});const m=de("api-active-name"),O=u=>{T()||c.value.splice(u,1)},R=()=>{c.value.push(new C({enable:!0,nameType:"fixed"}))},T=()=>c.value.length===1,A=(u,f)=>{const h=u?v.value.filter(D(u)):v.value;f(h)},B=u=>{u.value=""},D=u=>f=>f.value.toLowerCase().indexOf(u.toLowerCase())===0,F=[{label:s("data_source.parameter"),value:"params"},{label:s("data_source.fixed_value"),value:"fixed"},{label:s("data_source.time_function"),value:"timeFun"},{label:s("data_source.customize"),value:"custom"}],L=[{label:s("data_source.that_day")+"（yyyy-MM-dd）",value:"currentDay yyyy-MM-dd"},{label:s("data_source.that_day")+"（yyyy/MM/dd）",value:"currentDay yyyy/MM/dd"}];return(u,f)=>{const h=E,P=Z,_=q,I=X,p=W,k=J,w=Q,M=G,K=H,j=E;return n(),V("div",ce,[t(l(le),{tag:"div",list:l(c),handle:".handle"},{item:o(({element:a,index:$})=>[ue("div",ie,[t(K,{gutter:8},{default:o(()=>[t(P,{class:"drag handle"},{default:o(()=>[t(h,{name:"icon_drag_outlined"},{default:o(()=>[t(l(Y),{class:"svg-icon"})]),_:1})]),_:1}),d.unShowSelect?i("",!0):(n(),r(p,{key:0,span:l(m)==="params"?8:6},{default:o(()=>[l(v)?(n(),r(I,{key:1,modelValue:a.name,"onUpdate:modelValue":e=>a.name=e,disabled:d.isReadOnly,maxlength:400,"fetch-suggestions":A,placeholder:g.value,"show-word-limit":""},null,8,["modelValue","onUpdate:modelValue","disabled","placeholder"])):(n(),r(_,{key:0,modelValue:a.name,"onUpdate:modelValue":e=>a.name=e,disabled:d.isReadOnly,maxlength:"200",placeholder:g.value,"show-word-limit":""},null,8,["modelValue","onUpdate:modelValue","disabled","placeholder"]))]),_:2},1032,["span"])),l(m)==="table"?(n(),r(p,{key:1,span:3},{default:o(()=>[t(w,{modelValue:a.nameType,"onUpdate:modelValue":e=>a.nameType=e,onChange:e=>B(a)},{default:o(()=>[(n(),V(x,null,U(F,e=>t(k,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])),64))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])]),_:2},1024)):i("",!0),d.unShowSelect?(n(),r(p,{key:2,span:8},{default:o(()=>[l(v).length?(n(),r(_,{key:0,modelValue:a.name,"onUpdate:modelValue":e=>a.name=e,disabled:d.isReadOnly,maxlength:"200",placeholder:g.value,"show-word-limit":""},null,8,["modelValue","onUpdate:modelValue","disabled","placeholder"])):i("",!0)]),_:2},1024)):i("",!0),t(p,{span:l(m)==="params"?7:6},{default:o(()=>[!d.needMock&&l(m)==="params"?(n(),r(_,{key:0,modelValue:a.value,"onUpdate:modelValue":e=>a.value=e,disabled:d.isReadOnly,placeholder:d.unShowSelect?l(s)("common.description"):S.value,"show-word-limit":""},null,8,["modelValue","onUpdate:modelValue","disabled","placeholder"])):i("",!0),!d.needMock&&l(m)==="table"&&a.nameType==="params"?(n(),r(w,{key:1,modelValue:a.value,"onUpdate:modelValue":e=>a.value=e},{default:o(()=>[(n(!0),V(x,null,U(d.valueList,e=>(n(),r(k,{key:e.originName,label:e.name,value:e.originName},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])):i("",!0),!d.needMock&&l(m)==="table"&&a.nameType==="timeFun"?(n(),r(w,{key:2,modelValue:a.value,"onUpdate:modelValue":e=>a.value=e},{default:o(()=>[(n(),V(x,null,U(L,e=>t(k,{key:e.originName,label:e.label,value:e.value},null,8,["label","value"])),64))]),_:2},1032,["modelValue","onUpdate:modelValue"])):i("",!0),!d.needMock&&l(m)==="table"&&a.nameType!=="params"&&a.nameType!=="timeFun"?(n(),r(_,{key:3,modelValue:a.value,"onUpdate:modelValue":e=>a.value=e,disabled:d.isReadOnly,placeholder:a.nameType==="fixed"?l(s)("data_source.value"):l(s)("data_source.name_use_parameters"),"show-word-limit":""},null,8,["modelValue","onUpdate:modelValue","disabled","placeholder"])):i("",!0)]),_:2},1032,["span"]),d.showDesc?(n(),r(p,{key:3,span:7},{default:o(()=>[t(_,{modelValue:a.description,"onUpdate:modelValue":e=>a.description=e,maxlength:"200",placeholder:l(s)("common.description"),"show-word-limit":""},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1024)):i("",!0),t(p,{span:1},{default:o(()=>[t(M,{text:"",disabled:T(),onClick:e=>O($)},{icon:o(()=>[t(h,{name:"icon_delete-trash_outlined"},{default:o(()=>[t(l(ee),{class:"svg-icon"})]),_:1})]),_:2},1032,["disabled","onClick"])]),_:2},1024)]),_:2},1024)])]),_:1},8,["list"]),t(M,{onClick:R,text:""},{icon:o(()=>[t(j,{name:"icon_add_outlined"},{default:o(()=>[t(l(ae),{class:"svg-icon"})]),_:1})]),default:o(()=>[se(" "+re(l(s)("data_source.add_parameters")),1)]),_:1})])}}});export{Ue as _};
