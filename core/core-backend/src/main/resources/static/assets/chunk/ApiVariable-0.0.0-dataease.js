import{j as G,_ as M,e as H,y as J,n as Q}from"./index-0.0.0-dataease2.js";import{p as f}from"./index-0.0.0-dataease.js";import{E as W}from"./el-row-0.0.0-dataease.js";import{E as X}from"./el-col-0.0.0-dataease.js";import{K as R,E as Y}from"./ApiTestModel-0.0.0-dataease.js";import"./el-popper-0.0.0-dataease.js";import"./el-tag-0.0.0-dataease.js";import{E as ee,a as ae}from"./el-select-0.0.0-dataease.js";import{i as le}from"./icon_drag_outlined-0.0.0-dataease.js";import{i as te}from"./icon_delete-trash_outlined-0.0.0-dataease.js";import{i as oe}from"./icon_add_outlined-0.0.0-dataease.js";import{g as O}from"./util-0.0.0-dataease.js";import{d as ne}from"./vuedraggable-es-0.0.0-dataease.js";import{d as de,m as N,t as ue,al as se,R as ie,f as n,M as y,a7 as A,a0 as c,k as l,i as o,j as d,g as i,Z as x,aa as T,a6 as re}from"./vue-0.0.0-dataease.js";import{_ as ce}from"./_plugin-vue_export-helper-0.0.0-dataease.js";import"./axios-0.0.0-dataease.js";import"./lodash-0.0.0-dataease.js";import"./library-0.0.0-dataease.js";import"./echarts-0.0.0-dataease.js";import"./tinymce-0.0.0-dataease.js";import"./user-0.0.0-dataease.js";import"./row-0.0.0-dataease.js";import"./index-0.0.0-dataease4.js";import"./index-0.0.0-dataease14.js";import"./strings-0.0.0-dataease.js";import"./index-0.0.0-dataease5.js";const pe={class:"api-variable"},me={key:0,class:"kv-description"},ye=de({__name:"ApiVariable",props:{keyPlaceholder:f.string.def(""),valuePlaceholder:f.string.def(""),description:f.string.def(""),type:f.string.def(""),isReadOnly:f.bool.def(!1),parameters:{type:Array,default:()=>[]},valueList:{type:Array,default:()=>[]},suggestions:{type:Array,default:()=>[]}},setup(u){const V=u,{t:s}=G(),U=N(()=>V.keyPlaceholder||s("datasource.key")),F=N(()=>V.valuePlaceholder||s("datasource.value")),{parameters:r,suggestions:k}=ue(V);se(()=>{(r.value.length===0||r.value[r.value.length-1].name)&&r.value.push(new R({type:"text",nameType:"fixed",enable:!0,required:!0,uuid:O(),contentType:"text/plain"}))});const L=t=>{t.type==="file"?t.contentType="application/octet-stream":t.type==="text"?t.contentType="text/plain":t.contentType="application/json"},j=t=>{w()||r.value.splice(t,1)},B=()=>{r.value.push(new R({type:"text",enable:!0,nameType:"fixed",uuid:O(),contentType:"text/plain"}))},w=()=>r.value.length===1,I=(t,m)=>{const h=t?k.value.filter($(t)):k.value;m(h)},$=t=>m=>m.value.toLowerCase().indexOf(t.toLowerCase())===0,D=t=>{t.value=""},p=ie("api-active-name"),P=[{label:s("data_source.parameter"),value:"params"},{label:s("data_source.fixed_value"),value:"fixed"},{label:s("data_source.time_function"),value:"timeFun"},{label:s("data_source.customize"),value:"custom"}],K=[{label:s("data_source.that_day")+"（yyyy-MM-dd）",value:"currentDay yyyy-MM-dd"},{label:s("data_source.that_day")+"（yyyy/MM/dd）",value:"currentDay yyyy/MM/dd"}];return(t,m)=>{const h=M,S=H,_=ee,b=ae,g=J,q=Y,v=X,C=Q,z=W,Z=M;return n(),y("div",pe,[u.description?(n(),y("span",me,A(u.description),1)):c("",!0),l(d(ne),{tag:"div",list:d(r),handle:".handle"},{item:o(({element:a,index:E})=>[(n(),y("div",{key:E,style:{"margin-bottom":"16px"}},[l(z,{gutter:8},{default:o(()=>[l(S,{class:"drag handle"},{default:o(()=>[l(h,{name:"icon_drag_outlined"},{default:o(()=>[l(d(le),{class:"svg-icon"})]),_:1})]),_:1}),l(v,{span:6},{default:o(()=>[d(k)?(n(),i(q,{key:1,modelValue:a.name,"onUpdate:modelValue":e=>a.name=e,disabled:u.isReadOnly,"fetch-suggestions":I,placeholder:U.value,"show-word-limit":""},null,8,["modelValue","onUpdate:modelValue","disabled","placeholder"])):(n(),i(g,{key:0,modelValue:a.name,"onUpdate:modelValue":e=>a.name=e,disabled:u.isReadOnly,maxlength:"200",placeholder:U.value,"show-word-limit":""},{prepend:o(()=>[u.type==="body"?(n(),i(b,{key:0,modelValue:a.type,"onUpdate:modelValue":e=>a.type=e,disabled:u.isReadOnly,class:"kv-type",onChange:m[0]||(m[0]=e=>L(t.item))},{default:o(()=>[l(_,{value:"text"}),l(_,{value:"json"})]),_:2},1032,["modelValue","onUpdate:modelValue","disabled"])):c("",!0)]),_:2},1032,["modelValue","onUpdate:modelValue","disabled","placeholder"]))]),_:2},1024),d(p)==="table"?(n(),i(v,{key:0,span:3},{default:o(()=>[l(b,{modelValue:a.nameType,"onUpdate:modelValue":e=>a.nameType=e,onChange:e=>D(a)},{default:o(()=>[(n(),y(x,null,T(P,e=>l(_,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])),64))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])]),_:2},1024)):c("",!0),a.type!=="file"?(n(),i(v,{key:1,span:6},{default:o(()=>[d(p)==="params"?(n(),i(g,{key:0,modelValue:a.value,"onUpdate:modelValue":e=>a.value=e,disabled:u.isReadOnly,class:"input-with-autocomplete",placeholder:F.value,"value-key":"name","highlight-first-item":""},null,8,["modelValue","onUpdate:modelValue","disabled","placeholder"])):c("",!0),!t.needMock&&d(p)==="table"&&a.nameType==="params"?(n(),i(b,{key:1,modelValue:a.value,"onUpdate:modelValue":e=>a.value=e},{default:o(()=>[(n(!0),y(x,null,T(u.valueList,e=>(n(),i(_,{key:e.originName,label:e.name,value:e.originName},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])):c("",!0),!t.needMock&&d(p)==="table"&&a.nameType==="timeFun"?(n(),i(b,{key:2,modelValue:a.value,"onUpdate:modelValue":e=>a.value=e},{default:o(()=>[(n(),y(x,null,T(K,e=>l(_,{key:e.originName,label:e.label,value:e.value},null,8,["label","value"])),64))]),_:2},1032,["modelValue","onUpdate:modelValue"])):c("",!0),d(p)==="table"&&a.nameType!=="params"&&a.nameType!=="timeFun"?(n(),i(g,{key:3,modelValue:a.value,"onUpdate:modelValue":e=>a.value=e,disabled:u.isReadOnly,class:"input-with-autocomplete",placeholder:a.nameType==="fixed"?d(s)("data_source.value"):d(s)("data_source.name_use_parameters"),"value-key":"name","highlight-first-item":""},null,8,["modelValue","onUpdate:modelValue","disabled","placeholder"])):c("",!0)]),_:2},1024)):c("",!0),l(v,{span:d(p)==="params"?10:7},{default:o(()=>[l(g,{modelValue:a.description,"onUpdate:modelValue":e=>a.description=e,maxlength:"200",placeholder:t.$t("common.description"),"show-word-limit":""},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1032,["span"]),l(v,{span:1},{default:o(()=>[l(C,{text:"",disabled:w()||u.isReadOnly,onClick:e=>j(E)},{icon:o(()=>[l(h,{name:"icon_delete-trash_outlined"},{default:o(()=>[l(d(te),{class:"svg-icon"})]),_:1})]),_:2},1032,["disabled","onClick"])]),_:2},1024)]),_:2},1024)]))]),_:1},8,["list"]),l(C,{onClick:B,text:""},{icon:o(()=>[l(Z,{name:"icon_add_outlined"},{default:o(()=>[l(d(oe),{class:"svg-icon"})]),_:1})]),default:o(()=>[re(" "+A(d(s)("data_source.add_parameters")),1)]),_:1})])}}});const Pe=ce(ye,[["__scopeId","data-v-a6cc3b16"]]);export{Pe as default};
