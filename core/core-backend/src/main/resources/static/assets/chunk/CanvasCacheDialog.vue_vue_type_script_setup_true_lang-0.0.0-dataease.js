import{p as ee,P as Je,a as dt}from"./index-0.0.0-dataease.js";import"./el-form-0.0.0-dataease.js";import{E as ut}from"./el-collapse-item-0.0.0-dataease.js";import{E as Be}from"./el-radio-button-0.0.0-dataease.js";import{j as be,y as Me,e as ie,_ as te,J as O,n as Fe,w as He,k as ct}from"./index-0.0.0-dataease2.js";import{E as mt}from"./el-input-number-0.0.0-dataease.js";import{E as pt,a as ft}from"./el-radio-0.0.0-dataease.js";import"./el-radio-group-0.0.0-dataease.js";import{E as Xe}from"./el-divider-0.0.0-dataease.js";import{E as pe}from"./el-row-0.0.0-dataease.js";import{E as me}from"./el-col-0.0.0-dataease.js";import{E as _t}from"./el-slider-0.0.0-dataease.js";import"./el-tooltip-0.0.0-dataease.js";import"./el-popper-0.0.0-dataease.js";import{a as ae,E as Pe}from"./el-form-item-0.0.0-dataease.js";import{E as Ae}from"./el-checkbox-0.0.0-dataease.js";import{d as he}from"./dvMain-0.0.0-dataease.js";import{a as gt,C as ze,b as ht,c as vt,F as Ct,d as bt,S as yt,e as wt,f as Vt,g as xt,h as St,i as kt,j as It}from"./chart-0.0.0-dataease.js";import{e as ve}from"./eventBus-0.0.0-dataease.js";import{d as W,r as le,t as re,m as se,_ as Ie,ai as Ee,o as Oe,n as Se,f as d,M as b,k as t,i as l,N as a,j as e,g as L,V,a0 as Z,a6 as B,a7 as E,ac as Ne,p as Re,U as X,X as ne,w as Et,e as ke,q as ge,Z as ce,aa as fe,ab as Lt,W as qe,aj as $t,B as Tt,ag as Mt}from"./vue-0.0.0-dataease.js";import Ht from"./CustomColorStyleSelect-0.0.0-dataease.js";import{e as Nt}from"./antv-0.0.0-dataease.js";import{s as ye}from"./snapshot-0.0.0-dataease.js";import{_ as Y}from"./_plugin-vue_export-helper-0.0.0-dataease.js";import"./el-tag-0.0.0-dataease.js";import{E as et,a as tt}from"./el-select-0.0.0-dataease.js";import{i as Te}from"./icon_info_outlined-0.0.0-dataease.js";import{L as Pt,D as At,b as Dt}from"./canvasStyle-0.0.0-dataease.js";import{C as Ut,a as Bt}from"./dataVisualization-0.0.0-dataease2.js";import{E as Ft}from"./el-space-0.0.0-dataease.js";import{E as lt}from"./index-0.0.0-dataease4.js";import{E as zt}from"./el-upload-0.0.0-dataease.js";import"./el-progress-0.0.0-dataease.js";import{b as Ot,u as je,i as Ke}from"./imgUtils-0.0.0-dataease.js";import Rt from"./ImgViewDialog-0.0.0-dataease.js";import{d as Gt}from"./lodash-0.0.0-dataease.js";import{E as Zt}from"./el-popover-0.0.0-dataease.js";import{i as ot}from"./chart-list-0.0.0-dataease.js";import{c as Le,a as $e}from"./canvasUtils-0.0.0-dataease.js";import{i as Wt}from"./chart-dark-list-0.0.0-dataease.js";import{e as qt,i as jt}from"./MultiplexPreviewShow-0.0.0-dataease.js";import{E as at}from"./el-dialog-0.0.0-dataease.js";import{E as Kt,a as Qt}from"./el-tabs-0.0.0-dataease.js";import{E as Yt}from"./el-tree-0.0.0-dataease.js";import{_ as Jt,i as Xt}from"./HandleMore.vue_vue_type_style_index_0_lang-0.0.0-dataease.js";import{i as el}from"./icon_dataset-0.0.0-dataease.js";import{g as tl}from"./DeShortcutKey-0.0.0-dataease.js";import{q as ll,u as ol}from"./outerParams-0.0.0-dataease.js";import{b as al,v as nl}from"./dataVisualization-0.0.0-dataease.js";import{f as Qe}from"./attr-0.0.0-dataease20.js";import{E as sl}from"./EmptyBackground-0.0.0-dataease.js";import{i as rl}from"./field-list-0.0.0-dataease.js";const il={style:{width:"100%",padding:"16px 8px 0"}},dl={class:"alpha-setting"},ul={style:{padding:"0 8px 8px"}},cl=W({__name:"ComponentColorSelector",props:{themes:{type:String,default:"light"}},emits:["onColorChange"],setup(i,{emit:n}){const{t:g}=be(),s=ye(),_=i;let h=le(!1);const{themes:p}=re(_),f=n,I=le(null),o=se(()=>H.value.component.chartColor),C=se(()=>H.value.component.seniorStyleSetting),$=ze,v=Ie({basicStyleForm:JSON.parse(JSON.stringify(gt)),customColor:null,colorIndex:0}),y=he(),{canvasStyleData:H}=Ee(y),z=()=>{v.customColor=o.value.basicStyle.colors[0],setTimeout(()=>{v.basicStyleForm=H.value.component.chartColor.basicStyle,h.value=!0},1e3);const T=o.value.tableHeader,u=o.value.tableCell;T.tableHeaderFontColor=T.tableHeaderFontColor??u.tableFontColor},k=(T="value")=>{o.value.basicStyle=v.basicStyleForm,x(T)},A=()=>{s.recordSnapshotCache()},x=T=>{o.value.modifyName=T,f("onColorChange",o.value)},S=le(),F=le(),D=se(()=>F.value<=240?108:197);return Oe(()=>{var u;z(),ve.on("onThemeColorChange",z);const T=Nt();F.value=(u=S.value)==null?void 0:u.offsetWidth,T.listenTo(S.value,()=>{Se(()=>{var J;F.value=(J=S.value)==null?void 0:J.offsetWidth})})}),(T,u)=>{const J=Ae,R=ae,de=_t,q=me,K=Me,Ce=pe,De=Xe,m=Be,r=ut,w=Pe;return d(),b("div",{style:{width:"100%"},ref_key:"containerRef",ref:S},[t(w,{ref_key:"colorFormRef",ref:I,model:o.value,size:"small",style:{width:"100%","padding-bottom":"8px"}},{default:l(()=>[a("div",il,[e(h)?(d(),L(Ht,{key:0,class:V(["custom-color-pick",{"custom-dark":e(p)==="dark"}]),modelValue:v,"onUpdate:modelValue":u[0]||(u[0]=c=>v=c),themes:e(p),onChangeBasicStyle:u[1]||(u[1]=c=>k("value"))},null,8,["class","modelValue","themes"])):Z("",!0),t(R,{class:V(["form-item","form-item-"+e(p)])},{default:l(()=>[t(J,{size:"small",effect:e(p),modelValue:o.value.basicStyle.gradient,"onUpdate:modelValue":u[2]||(u[2]=c=>o.value.basicStyle.gradient=c),onChange:u[3]||(u[3]=c=>x("gradient"))},{default:l(()=>[B(E(T.$t("chart.gradient"))+E(T.$t("chart.color")),1)]),_:1},8,["effect","modelValue"])]),_:1},8,["class"]),a("div",dl,[a("label",{class:V(["alpha-label",{dark:e(p)==="dark"}])},E(e(g)("chart.not_alpha")),3),t(Ce,{style:{flex:"1"},gutter:8},{default:l(()=>[t(q,{span:13},{default:l(()=>[t(R,{class:V(["form-item alpha-slider","form-item-"+e(p)])},{default:l(()=>[t(de,{effect:e(p),modelValue:o.value.basicStyle.alpha,"onUpdate:modelValue":u[4]||(u[4]=c=>o.value.basicStyle.alpha=c),onChange:u[5]||(u[5]=c=>x("alpha"))},null,8,["effect","modelValue"])]),_:1},8,["class"])]),_:1}),t(q,{span:11},{default:l(()=>[t(R,{style:{"padding-top":"4px"},class:V(["form-item","form-item-"+e(p)])},{default:l(()=>[t(K,{type:"number",effect:e(p),modelValue:o.value.basicStyle.alpha,"onUpdate:modelValue":u[6]||(u[6]=c=>o.value.basicStyle.alpha=c),min:0,max:100,class:"alpha-input-number",controls:!1,onChange:u[7]||(u[7]=c=>x("alpha"))},{suffix:l(()=>u[21]||(u[21]=[B(" % ")])),_:1},8,["effect","modelValue"])]),_:1},8,["class"])]),_:1})]),_:1})]),t(De,{class:V(["m-divider","m-divider-"+e(p)])},null,8,["class"])]),t(r,{title:e(g)("visualization.table_color_matching"),name:"table_color_matching",class:V(["inner-collapse",`inner-collapse_${e(p)}`])},{default:l(()=>[a("div",ul,[t(Ce,{gutter:8},{default:l(()=>[t(q,{span:12},{default:l(()=>[t(R,{label:e(g)("chart.table_header_bg"),class:"form-item"},{default:l(()=>[t(m,{"trigger-width":D.value,modelValue:o.value.tableHeader.tableHeaderBgColor,"onUpdate:modelValue":u[8]||(u[8]=c=>o.value.tableHeader.tableHeaderBgColor=c),size:"small",predefine:e($),"is-custom":"",effect:e(p),onChange:u[9]||(u[9]=c=>x("tableHeaderBgColor"))},null,8,["trigger-width","modelValue","predefine","effect"])]),_:1},8,["label"])]),_:1}),t(q,{span:12},{default:l(()=>[t(R,{label:e(g)("chart.table_item_bg"),class:"form-item"},{default:l(()=>[t(m,{"trigger-width":D.value,modelValue:o.value.tableCell.tableItemBgColor,"onUpdate:modelValue":u[10]||(u[10]=c=>o.value.tableCell.tableItemBgColor=c),size:"small",predefine:e($),effect:e(p),"is-custom":"",onChange:u[11]||(u[11]=c=>x("tableItemBgColor"))},null,8,["trigger-width","modelValue","predefine","effect"])]),_:1},8,["label"])]),_:1})]),_:1}),t(Ce,{gutter:8},{default:l(()=>[t(q,{span:12},{default:l(()=>[t(R,{label:e(g)("chart.table_header_font_color"),class:"form-item"},{default:l(()=>[t(m,{"trigger-width":D.value,modelValue:o.value.tableHeader.tableHeaderFontColor,"onUpdate:modelValue":u[12]||(u[12]=c=>o.value.tableHeader.tableHeaderFontColor=c),effect:e(p),size:"small",predefine:e($),"is-custom":"",onChange:u[13]||(u[13]=c=>x("tableHeaderFontColor"))},null,8,["trigger-width","modelValue","effect","predefine"])]),_:1},8,["label"])]),_:1}),t(q,{span:12},{default:l(()=>[t(R,{label:e(g)("chart.table_item_font_color"),class:"form-item"},{default:l(()=>[t(m,{"trigger-width":D.value,modelValue:o.value.tableCell.tableFontColor,"onUpdate:modelValue":u[14]||(u[14]=c=>o.value.tableCell.tableFontColor=c),size:"small",predefine:e($),effect:e(p),"is-custom":"",onChange:u[15]||(u[15]=c=>x("tableFontColor"))},null,8,["trigger-width","modelValue","predefine","effect"])]),_:1},8,["label"])]),_:1})]),_:1}),t(Ce,{gutter:8},{default:l(()=>[t(q,{span:12},{default:l(()=>[t(R,{label:e(g)("chart.table_border_color"),class:"form-item"},{default:l(()=>[t(m,{"trigger-width":D.value,modelValue:o.value.basicStyle.tableBorderColor,"onUpdate:modelValue":u[16]||(u[16]=c=>o.value.basicStyle.tableBorderColor=c),size:"small",predefine:e($),effect:e(p),"is-custom":"",onChange:u[17]||(u[17]=c=>x("tableBorderColor"))},null,8,["trigger-width","modelValue","predefine","effect"])]),_:1},8,["label"])]),_:1}),t(q,{span:12},{default:l(()=>[t(R,{label:e(g)("chart.table_scroll_bar_color"),class:"form-item"},{default:l(()=>[t(m,{"trigger-width":D.value,modelValue:o.value.basicStyle.tableScrollBarColor,"onUpdate:modelValue":u[18]||(u[18]=c=>o.value.basicStyle.tableScrollBarColor=c),size:"small",predefine:e($),"color-format":"rgb",effect:e(p),"show-alpha":"","is-custom":"",onChange:u[19]||(u[19]=c=>x("tableScrollBarColor"))},null,8,["trigger-width","modelValue","predefine","effect"])]),_:1},8,["label"])]),_:1}),t(q,{span:12},{default:l(()=>[t(R,{label:e(g)("components.pager_color"),class:"form-item"},{default:l(()=>[t(m,{"trigger-width":D.value,modelValue:C.value.pagerColor,"onUpdate:modelValue":u[20]||(u[20]=c=>C.value.pagerColor=c),size:"small",predefine:e($),"color-format":"rgb",effect:e(p),"show-alpha":"","is-custom":"",onChange:A},null,8,["trigger-width","modelValue","predefine","effect"])]),_:1},8,["label"])]),_:1})]),_:1})])]),_:1},8,["title","class"])]),_:1},8,["model"])],512)}}});const Vn=Y(cl,[["__scopeId","data-v-a243e233"]]),ml={class:"color-button-main"},pl={class:"text-area"},fl=W({__name:"ColorButton",props:{colorType:{type:String,default:"light"},label:{type:String,default:null}},emits:["onClick"],setup(i,{emit:n}){const g=n,s=i,{colorType:_,label:h}=re(s),p=se(()=>h.value===_.value),f=()=>{g("onClick",_.value)};return(I,o)=>(d(),b("div",ml,[a("div",{class:V(["color-button-outer",p.value?"color-button-active":""]),onClick:Ne(f,["stop"])},[a("div",{class:V(["color-button-inner","color-button-inner-"+e(_)])},null,2)],2),a("span",pl,[Re(I.$slots,"default",{},void 0,!0)])]))}});const Ye=Y(fl,[["__scopeId","data-v-ccb464e4"]]),_l={class:"color-btn-text"},gl={class:"color-btn-text"},hl={class:"data-area-label"},vl={style:{"margin-right":"4px"}},Cl={class:"data-area-label"},bl=W({__name:"OverallSetting",props:{themes:{type:String,default:"light"}},setup(i){const{t:n}=be(),g=he(),{canvasStyleData:s,dvInfo:_}=Ee(g),h=ye(),p=i,f=se(()=>p.themes==="dark"?"ndark":"dark"),I=se(()=>_.value.type==="dashboard"?n("work_branch.dashboard"):n("dashboard.big_data_screen")),o=v=>{if(v===""||parseFloat(v).toString()==="NaN"||parseFloat(v)<1){s.value.refreshTime=1;return}else parseFloat(v)>3600&&(s.value.refreshTime=3600);C()},C=v=>{v==="themeColor"&&(s.value.component.chartCommonStyle.backgroundColorSelect=!0,s.value.backgroundColorSelect=!0,s.value.dashboard.themeColor==="light"?(s.value.backgroundColor=Pt,s.value.component.chartCommonStyle=O(Ut),s.value.component.chartTitle=O(ht),s.value.component.chartColor=O(vt),s.value.component.filterStyle=O(Ct),s.value.component.tabStyle=O(bt),s.value.component.seniorStyleSetting=O(yt)):(s.value.backgroundColor=At,s.value.component.chartCommonStyle=O(Bt),s.value.component.chartTitle=O(wt),s.value.component.chartColor=O(Vt),s.value.component.filterStyle=O(xt),s.value.component.tabStyle=O(St),s.value.component.seniorStyleSetting=O(kt)),Dt()),h.recordSnapshotCache("renderChart")},$=v=>{v!==s.value.dashboard.themeColor?(s.value.dashboard.themeColor=v,C("themeColor")):s.value.dashboard.themeColor=v};return(v,y)=>{const H=pt,z=ft,k=Ae,A=et,x=tt,S=Me,F=lt,D=mt,T=Pe;return d(),L(T,{"label-position":"top"},{default:l(()=>[e(_).type==="dashboard"?(d(),L(e(ae),{key:0,class:V(["form-item","form-item-"+i.themes]),label:e(n)("visualization.theme_color")},{default:l(()=>[t(e(Ft),{size:24},{default:l(()=>[t(Ye,{"color-type":"light",label:e(s).dashboard.themeColor,onOnClick:$},{default:l(()=>[a("div",_l,E(e(n)("visualization.theme_color_light")),1)]),_:1},8,["label"]),t(Ye,{"color-type":"dark",label:e(s).dashboard.themeColor,onOnClick:$},{default:l(()=>[a("div",gl,E(e(n)("visualization.theme_color_dark")),1)]),_:1},8,["label"])]),_:1})]),_:1},8,["class","label"])):Z("",!0),e(_).type==="dashboard"?(d(),L(e(ae),{key:1,class:V(["form-item","form-item-"+i.themes]),label:e(n)("visualization.component_gap")},{default:l(()=>[t(z,{modelValue:e(s).dashboard.gap,"onUpdate:modelValue":y[0]||(y[0]=u=>e(s).dashboard.gap=u),onChange:C},{default:l(()=>[t(H,{effect:i.themes,label:"yes"},{default:l(()=>[B(E(e(n)("visualization.gap")),1)]),_:1},8,["effect"]),t(H,{effect:i.themes,label:"no"},{default:l(()=>[B(E(e(n)("visualization.no_gap")),1)]),_:1},8,["effect"])]),_:1},8,["modelValue"])]),_:1},8,["class","label"])):Z("",!0),t(e(ae),{class:V(["form-item","form-item-"+i.themes]),style:{"margin-bottom":"8px"}},{default:l(()=>[t(k,{effect:i.themes,size:"small",modelValue:e(s).refreshViewEnable,"onUpdate:modelValue":y[1]||(y[1]=u=>e(s).refreshViewEnable=u),onChange:C},{default:l(()=>[B(E(e(n)("visualization.refresh_frequency")),1)]),_:1},8,["effect","modelValue"])]),_:1},8,["class"]),t(e(ae),{class:V(["form-item","form-item-"+i.themes]),style:{"padding-left":"20px"}},{default:l(()=>[t(S,{modelValue:e(s).refreshTime,"onUpdate:modelValue":y[3]||(y[3]=u=>e(s).refreshTime=u),effect:i.themes,class:V(["time-input-number",[e(_).type==="dashboard"&&"padding20",i.themes==="dark"&&"dv-dark"]]),type:"number",min:1,max:3600,size:"middle",disabled:!e(s).refreshViewEnable,onChange:o},{append:l(()=>[t(x,{modelValue:e(s).refreshUnit,"onUpdate:modelValue":y[2]||(y[2]=u=>e(s).refreshUnit=u),size:"middle",effect:i.themes,disabled:!e(s).refreshViewEnable,style:{width:"90px"},onChange:C},{default:l(()=>[t(A,{label:e(n)("visualization.minute"),value:"minute"},null,8,["label"]),t(A,{label:e(n)("visualization.second"),value:"second"},null,8,["label"])]),_:1},8,["modelValue","effect","disabled"])]),_:1},8,["modelValue","effect","class","disabled"])]),_:1},8,["class"]),t(e(ae),{class:V(["form-item","form-item-"+i.themes]),style:{"margin-bottom":"8px"}},{default:l(()=>[t(k,{effect:i.themes,size:"small",modelValue:e(s).refreshBrowserEnable,"onUpdate:modelValue":y[4]||(y[4]=u=>e(s).refreshBrowserEnable=u),onChange:C},{default:l(()=>[B(E(e(n)("components.overall_refresh")),1)]),_:1},8,["effect","modelValue"]),t(F,{class:"item",effect:f.value,placement:"bottom"},{content:l(()=>[a("div",null,E(e(n)("components.previews_take_effect")),1)]),default:l(()=>[t(e(ie),{class:V(["hint-icon",{"hint-icon--dark":i.themes==="dark"}]),style:{"margin-left":"4px"}},{default:l(()=>[t(te,{name:"icon_info_outlined"},{default:l(()=>[t(e(Te),{class:"svg-icon"})]),_:1})]),_:1},8,["class"])]),_:1},8,["effect"])]),_:1},8,["class"]),t(e(ae),{class:V(["form-item","form-item-"+i.themes]),style:{"padding-left":"20px"}},{default:l(()=>[t(S,{modelValue:e(s).refreshBrowserTime,"onUpdate:modelValue":y[6]||(y[6]=u=>e(s).refreshBrowserTime=u),effect:i.themes,class:V(["time-input-number",[e(_).type==="dashboard"&&"padding20",i.themes==="dark"&&"dv-dark"]]),type:"number",min:1,max:3600,size:"middle",disabled:!e(s).refreshBrowserEnable,onChange:o},{append:l(()=>[t(x,{modelValue:e(s).refreshBrowserUnit,"onUpdate:modelValue":y[5]||(y[5]=u=>e(s).refreshBrowserUnit=u),size:"middle",effect:i.themes,disabled:!e(s).refreshBrowserEnable,style:{width:"90px"},onChange:C},{default:l(()=>[t(A,{label:e(n)("visualization.minute"),value:"minute"},null,8,["label"]),t(A,{label:e(n)("visualization.second"),value:"second"},null,8,["label"])]),_:1},8,["modelValue","effect","disabled"])]),_:1},8,["modelValue","effect","class","disabled"])]),_:1},8,["class"]),t(e(ae),{class:V(["form-item","form-item-"+i.themes])},{default:l(()=>[t(k,{effect:i.themes,size:"small",modelValue:e(s).refreshViewLoading,"onUpdate:modelValue":y[7]||(y[7]=u=>e(s).refreshViewLoading=u),onChange:C},{default:l(()=>[B(E(e(n)("visualization.enable_view_loading")),1)]),_:1},8,["effect","modelValue"])]),_:1},8,["class"]),t(e(ae),{class:V(["form-item","form-item-"+i.themes]),style:{"margin-bottom":"8px"}},{label:l(()=>[a("span",hl,[a("span",vl,E(e(n)("visualization.panel_view_result_show")),1),t(F,{class:"item",effect:f.value,placement:"bottom"},{content:l(()=>[a("div",null,E(e(n)("visualization.panel_view_result_tips",[I.value])),1)]),default:l(()=>[t(e(ie),{class:V(["hint-icon",{"hint-icon--dark":i.themes==="dark"}])},{default:l(()=>[t(te,{name:"icon_info_outlined"},{default:l(()=>[t(e(Te),{class:"svg-icon"})]),_:1})]),_:1},8,["class"])]),_:1},8,["effect"])])]),default:l(()=>[t(z,{effect:i.themes,modelValue:e(s).dashboard.resultMode,"onUpdate:modelValue":y[8]||(y[8]=u=>e(s).dashboard.resultMode=u),class:"radio-span",onChange:C},{default:l(()=>[t(H,{label:"all",effect:i.themes},{default:l(()=>[B(E(e(n)("visualization.view")),1)]),_:1},8,["effect"]),t(H,{label:"custom",effect:i.themes},{default:l(()=>[B(E(I.value),1)]),_:1},8,["effect"])]),_:1},8,["effect","modelValue"])]),_:1},8,["class"]),X(t(e(ae),{class:V(["form-item","form-item-"+i.themes])},{default:l(()=>[t(D,{modelValue:e(s).dashboard.resultCount,"onUpdate:modelValue":y[9]||(y[9]=u=>e(s).dashboard.resultCount=u),effect:i.themes,"controls-position":"right",size:"middle",min:1,max:1e4,onChange:C,disabled:e(s).dashboard.resultMode==="all"},null,8,["modelValue","effect","disabled"])]),_:1},8,["class"]),[[ne,e(s).dashboard.resultMode==="custom"]]),t(e(ae),{style:{"margin-top":"16px","margin-bottom":"8px"},class:V("form-item-"+i.themes)},{default:l(()=>[t(k,{effect:i.themes,size:"small",modelValue:e(s).suspensionButtonAvailable,"onUpdate:modelValue":y[10]||(y[10]=u=>e(s).suspensionButtonAvailable=u),onChange:C},{default:l(()=>[a("span",Cl,[y[12]||(y[12]=a("span",{style:{"margin-right":"4px"}}," 显示放大、导出等悬浮按钮 ",-1)),t(F,{class:"item",effect:f.value,placement:"bottom"},{content:l(()=>y[11]||(y[11]=[a("div",null,"预览时启用",-1)])),default:l(()=>[t(e(ie),{class:V(["hint-icon",{"hint-icon--dark":i.themes==="dark"}])},{default:l(()=>[t(te,{name:"icon_info_outlined"},{default:l(()=>[t(e(Te),{class:"svg-icon"})]),_:1})]),_:1},8,["class"])]),_:1},8,["effect"])])]),_:1},8,["effect","modelValue"])]),_:1},8,["class"])]),_:1})}}});const xn=Y(bl,[["__scopeId","data-v-d146e9fa"]]),yl={class:"indented-container"},wl={class:"indented-item"},Vl={class:"indented-container"},xl=15e6,Sl=50,kl=W({__name:"CanvasBackground",props:{themes:{default:"dark"}},setup(i){const n=ye(),{t:g}=be(),s=le(null),_=he(),{canvasStyleData:h,dvInfo:p}=Ee(_),f=Ie({BackgroundShowMap:{},checked:!1,backgroundOrigin:{},fileList:[],dialogImageUrl:"",dialogVisible:!1,uploadDisabled:!1,predefineColors:ze}),I=se(()=>{var x,S,F,D;return p.value.watermarkInfo&&((S=(x=p.value.watermarkInfo)==null?void 0:x.settingContent)==null?void 0:S.enable)&&((D=(F=p.value.watermarkInfo)==null?void 0:F.settingContent)==null?void 0:D.enablePanelCustom)}),o=()=>{s.value.click()},C=()=>{He.success("图片大小不符合")},$=x=>{const S=x.target.files[0];if(S.size>xl){C();return}je(S,F=>{h.value.background=F,f.fileList=[{url:Ke(h.value.background)}],k()})},v=()=>{h.value.background?f.fileList.push({url:Ke(h.value.background)}):f.fileList=[]},y=()=>{f.uploadDisabled=!1,h.value.background=null,f.fileList=[],k()},H=x=>{f.dialogImageUrl=x.url,f.dialogVisible=!0},z=x=>{je(x.file,S=>{h.value.background=S,k()})},k=()=>{n.recordSnapshotCache()},A=le();return Oe(()=>{v()}),Et(()=>h.value.background,()=>{v()}),(x,S)=>{const F=Ae,D=ae,T=Be,u=ke("Plus"),J=ie,R=zt,de=pe,q=Pe;return d(),b("div",{style:{width:"100%"},ref_key:"bgForm",ref:A},[a("input",{id:"input",ref_key:"files",ref:s,type:"file",accept:".jpeg,.jpg,.png,.gif,.svg",hidden:"",onClick:S[0]||(S[0]=K=>{K.target.value=""}),onChange:$},null,544),t(q,{"label-position":"top",style:{width:"100%","margin-bottom":"16px"}},{default:l(()=>[I.value?(d(),L(D,{key:0,class:V(["form-item","form-item-"+x.themes])},{default:l(()=>[t(F,{size:"small",effect:x.themes,modelValue:e(p).selfWatermarkStatus,"onUpdate:modelValue":S[1]||(S[1]=K=>e(p).selfWatermarkStatus=K),onChange:k},{default:l(()=>S[6]||(S[6]=[B(" 水印 ")])),_:1},8,["effect","modelValue"])]),_:1},8,["class"])):Z("",!0),t(D,{class:V(["form-item no-margin-bottom","form-item-"+x.themes])},{default:l(()=>[t(F,{size:"small",effect:x.themes,modelValue:e(h).backgroundColorSelect,"onUpdate:modelValue":S[2]||(S[2]=K=>e(h).backgroundColorSelect=K),onChange:k},{default:l(()=>[B(E(x.$t("chart.color")),1)]),_:1},8,["effect","modelValue"])]),_:1},8,["class"]),a("div",yl,[a("div",wl,[t(D,{class:V(["form-item","form-item-"+x.themes])},{default:l(()=>[t(T,{modelValue:e(h).backgroundColor,"onUpdate:modelValue":S[3]||(S[3]=K=>e(h).backgroundColor=K),effect:x.themes,disabled:!e(h).backgroundColorSelect,"trigger-width":Sl,"is-custom":"","show-alpha":"",class:"color-picker-style",predefine:f.predefineColors,onChange:k},null,8,["modelValue","effect","disabled","predefine"])]),_:1},8,["class"])])]),t(D,{class:V(["form-item no-margin-bottom","form-item-"+x.themes])},{default:l(()=>[t(F,{size:"small",effect:x.themes,modelValue:e(h).backgroundImageEnable,"onUpdate:modelValue":S[4]||(S[4]=K=>e(h).backgroundImageEnable=K),onChange:k},{default:l(()=>[B(E(e(g)("visualization.background")),1)]),_:1},8,["effect","modelValue"])]),_:1},8,["class"]),a("div",Vl,[a("div",{class:V(["indented-item",{disabled:!e(h).backgroundImageEnable}])},[a("div",{class:V(["avatar-uploader-container",`img-area_${x.themes}`])},[t(R,{action:"",effect:x.themes,accept:".jpeg,.jpg,.png,.gif,.svg",class:"avatar-uploader","list-type":"picture-card","on-preview":H,"on-remove":y,"before-upload":e(Ot),"http-request":z,"file-list":f.fileList,disabled:!e(h).backgroundImageEnable},{default:l(()=>[t(J,null,{default:l(()=>[t(u)]),_:1})]),_:1},8,["effect","before-upload","file-list","disabled"]),t(de,null,{default:l(()=>[e(h).background?Z("",!0):(d(),b("span",{key:0,style:{"margin-top":"2px"},class:V(["image-hint",`image-hint_${x.themes}`])}," 支持JPG、PNG、GIF、SVG ",2)),e(h).background?(d(),L(e(Fe),{key:1,size:"small",style:{margin:"8px 0 0 -4px"},text:"",onClick:o,disabled:!e(h).backgroundImageEnable},{default:l(()=>S[7]||(S[7]=[B(" 重新上传 ")])),_:1},8,["disabled"])):Z("",!0)]),_:1})],2),t(Rt,{modelValue:f.dialogVisible,"onUpdate:modelValue":S[5]||(S[5]=K=>f.dialogVisible=K),"image-url":f.dialogImageUrl},null,8,["modelValue","image-url"])],2)])]),_:1})],512)}}});const Sn=Y(kl,[["__scopeId","data-v-bd5111e5"]]),Il={style:{width:"100%","padding-bottom":"8px"}},El={style:{width:"100%",padding:"16px 8px 0"}},Ll=W({__name:"SeniorStyleSetting",props:{themes:{type:String,default:"light"}},setup(i){const{t:n}=be(),g=he(),s=ye(),_=se(()=>g.canvasStyleData.component.seniorStyleSetting),h=Ie({fontSize:[],isSetting:!1,predefineColors:ze}),p=()=>{},f=()=>{g.canvasStyleData.component.seniorStyleSetting=Gt(_.value),s.recordSnapshotCache("seniorStyleSettingSimpleSelector-themeChange")};return Oe(()=>{ve.on("onThemeColorChange",p)}),(I,o)=>{const C=Be,$=ae,v=me,y=pe,H=Pe;return d(),b("div",Il,[t(H,{"label-position":"top",style:{width:"100%"}},{default:l(()=>[a("div",El,[t(y,{gutter:8},{default:l(()=>[t(v,{span:12},{default:l(()=>[t($,{effect:i.themes,class:V(["form-item","form-item-"+i.themes]),label:e(n)("components.jump_icon_color")},{default:l(()=>[t(C,{effect:i.themes,modelValue:_.value.linkageIconColor,"onUpdate:modelValue":o[0]||(o[0]=z=>_.value.linkageIconColor=z),"trigger-width":197,"is-custom":"",predefine:h.predefineColors,onChange:f},null,8,["effect","modelValue","predefine"])]),_:1},8,["effect","class","label"])]),_:1}),t(v,{span:12},{default:l(()=>[t($,{effect:i.themes,class:V(["form-item","form-item-"+i.themes]),label:e(n)("components.level_display_color")},{default:l(()=>[t(C,{modelValue:_.value.drillLayerColor,"onUpdate:modelValue":o[1]||(o[1]=z=>_.value.drillLayerColor=z),effect:i.themes,"trigger-width":197,"is-custom":"",predefine:h.predefineColors,onChange:f},null,8,["modelValue","effect","predefine"])]),_:1},8,["effect","class","label"])]),_:1})]),_:1})])]),_:1})])}}});const kn=Y(Ll,[["__scopeId","data-v-05ac14c3"]]),$l={width:"20",height:"20",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"};function Tl(i,n){return d(),b("svg",$l,n[0]||(n[0]=[a("path",{d:"M13.3337 9.52522L17.9468 6.7715C18.0296 6.72207 18.1003 6.66005 18.1579 6.58933C18.2643 6.51383 18.3337 6.38969 18.3337 6.24935V6.16871C18.34 6.11084 18.3401 6.05212 18.3337 5.99359V2.49935C18.3337 2.26923 18.2404 2.0609 18.0896 1.91009C17.9388 1.75929 17.7304 1.66602 17.5003 1.66602H2.50033C2.04009 1.66602 1.66699 2.03911 1.66699 2.49935V6.24935C1.66699 6.37491 1.72254 6.48751 1.81039 6.5639C1.874 6.65742 1.95848 6.73887 2.06184 6.80066L6.66699 9.55366V15.5752C6.66699 15.733 6.75616 15.8773 6.89732 15.9478L12.7307 18.8645C13.0077 19.003 13.3337 18.8016 13.3337 18.4918V9.52522Z"},null,-1)]))}const In={render:Tl},Ml={xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20"};function Hl(i,n){return d(),b("svg",Ml,n[0]||(n[0]=[a("path",{d:"M2.49935 2.5C2.03912 2.5 1.66602 2.8731 1.66602 3.33333V16.6667C1.66602 17.1269 2.03912 17.5 2.49935 17.5H17.4993C17.9596 17.5 18.3327 17.1269 18.3327 16.6667V3.33333C18.3327 2.8731 17.9596 2.5 17.4993 2.5H2.49935ZM16.666 4.1666V12.5001L14.8773 10.7113C14.7146 10.5487 14.4508 10.5487 14.288 10.7113L11.9607 13.0387C11.7979 13.2015 11.5341 13.2015 11.3713 13.0387L6.96064 8.628C6.79792 8.46533 6.53411 8.46533 6.37139 8.628L3.33268 11.6667V4.1666H16.666ZM13.3327 6.25C13.1026 6.25 12.916 6.43655 12.916 6.66667V7.91667C12.916 8.14678 13.1026 8.33333 13.3327 8.33333H14.5827C14.8128 8.33333 14.9993 8.14678 14.9993 7.91667V6.66667C14.9993 6.43655 14.8128 6.25 14.5827 6.25H13.3327Z"},null,-1)]))}const En={render:Hl},Nl={width:"21",height:"20",viewBox:"0 0 21 20",xmlns:"http://www.w3.org/2000/svg"};function Pl(i,n){return d(),b("svg",Nl,n[0]||(n[0]=[a("path",{d:"M8.83342 1.66669H3.00008C2.53984 1.66669 2.16675 2.03978 2.16675 2.50002V8.33335C2.16675 8.79359 2.53984 9.16669 3.00008 9.16669H8.83342C9.29365 9.16669 9.66675 8.79359 9.66675 8.33335V2.50002C9.66675 2.03978 9.29365 1.66669 8.83342 1.66669Z"},null,-1),a("path",{d:"M8.83342 10.8334H3.00008C2.53984 10.8334 2.16675 11.2064 2.16675 11.6667V17.5C2.16675 17.9603 2.53984 18.3334 3.00008 18.3334H8.83342C9.29365 18.3334 9.66675 17.9603 9.66675 17.5V11.6667C9.66675 11.2064 9.29365 10.8334 8.83342 10.8334Z"},null,-1),a("path",{d:"M18.0001 1.66669H12.1667C11.7065 1.66669 11.3334 2.03978 11.3334 2.50002V8.33335C11.3334 8.79359 11.7065 9.16669 12.1667 9.16669H18.0001C18.4603 9.16669 18.8334 8.79359 18.8334 8.33335V2.50002C18.8334 2.03978 18.4603 1.66669 18.0001 1.66669Z"},null,-1),a("path",{d:"M17.9511 10.8334H12.2158C11.7285 10.8334 11.3334 11.2284 11.3334 11.7157V17.451C11.3334 17.9383 11.7285 18.3334 12.2158 18.3334H17.9511C18.4384 18.3334 18.8334 17.9383 18.8334 17.451V11.7157C18.8334 11.2284 18.4384 10.8334 17.9511 10.8334Z"},null,-1)]))}const Ln={render:Pl},Al={width:"20",height:"20",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"};function Dl(i,n){return d(),b("svg",Al,n[0]||(n[0]=[a("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M18.0893 1.91058C17.933 1.7543 17.721 1.6665 17.5 1.6665H2.50002C2.27901 1.6665 2.06705 1.7543 1.91076 1.91058C1.75448 2.06686 1.66669 2.27882 1.66669 2.49984V17.4998C1.66669 17.7209 1.75448 17.9328 1.91076 18.0891C2.06705 18.2454 2.27901 18.3332 2.50002 18.3332H17.5C17.721 18.3332 17.933 18.2454 18.0893 18.0891C18.2456 17.9328 18.3334 17.7209 18.3334 17.4998V2.49984C18.3334 2.27882 18.2456 2.06686 18.0893 1.91058ZM10.8334 5.83323H13.75C13.8605 5.83323 13.9665 5.87713 14.0446 5.95527C14.1228 6.03341 14.1667 6.13939 14.1667 6.2499V7.08323C14.1667 7.19374 14.1228 7.29972 14.0446 7.37786C13.9665 7.456 13.8605 7.4999 13.75 7.4999H10.8334V13.7499C10.8334 13.8046 10.8226 13.8588 10.8016 13.9094C10.7807 13.9599 10.75 14.0058 10.7113 14.0445C10.6726 14.0832 10.6267 14.1139 10.5761 14.1348C10.5256 14.1558 10.4714 14.1666 10.4167 14.1666H9.58335C9.52864 14.1666 9.47446 14.1558 9.4239 14.1348C9.37335 14.1139 9.32742 14.0832 9.28873 14.0445C9.25004 14.0058 9.21934 13.9599 9.1984 13.9094C9.17747 13.8588 9.16669 13.8046 9.16669 13.7499V7.4999H6.25002C6.13951 7.4999 6.03353 7.456 5.95539 7.37786C5.87725 7.29972 5.83335 7.19374 5.83335 7.08323V6.2499C5.83335 6.13939 5.87725 6.03341 5.95539 5.95527C6.03353 5.87713 6.13951 5.83323 6.25002 5.83323H9.16669C9.16669 5.83323 10.8334 5.85657 10.8334 5.83323Z"},null,-1)]))}const $n={render:Dl},Ul={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function Bl(i,n){return d(),b("svg",Ul,n[0]||(n[0]=[a("path",{d:"M9.71952 18.0526C13.8471 18.0526 17.2237 14.8374 17.4815 10.7749C17.499 10.4994 17.2734 10.2748 16.9973 10.2748C14.5714 10.2748 12.1454 10.2748 9.71952 10.2748C9.71952 7.40872 9.71952 4.98267 9.71952 2.99669C9.71952 2.72055 9.49501 2.4954 9.21942 2.51289C5.15692 2.77069 1.94174 6.1473 1.94174 10.2748C1.94174 14.5704 5.42397 18.0526 9.71952 18.0526Z",fill:"#3370FF"},null,-1),a("path",{d:"M12.1306 8.60807C11.7192 8.60807 11.3857 8.2746 11.3857 7.86325V2.49351C11.3857 2.19784 11.6417 1.96535 11.9329 2.01629C15.011 2.55462 17.4392 4.9828 17.9775 8.0609C18.0285 8.35215 17.796 8.60807 17.5003 8.60807H12.1306Z",fill:"#00D6B9"},null,-1)]))}const Tn={render:Bl},Fl={width:"20",height:"20",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"};function zl(i,n){return d(),b("svg",Fl,n[0]||(n[0]=[a("path",{d:"M6.43791 2.26348L2.3524 6.34898C2.17884 6.52255 2.17884 6.80395 2.3524 6.97752L6.83075 11.4559C7.00431 11.6294 7.28572 11.6294 7.45929 11.4559L8.00926 10.9059C8.18283 10.7323 8.18283 10.4509 8.00926 10.2774L4.9589 7.22552L12.2222 7.22219V7.22698C14.5234 7.22698 16.3889 9.09246 16.3889 11.3937C16.3889 13.6948 14.5234 15.5603 12.2222 15.5603V15.5555L8.9696 15.5597C8.72436 15.5601 8.52573 15.759 8.52573 16.0042V16.782C8.52573 16.9967 8.67808 17.1759 8.8806 17.2174L8.97075 17.2264L12 17.2214L12.2222 17.227C15.4439 17.227 18.0556 14.6153 18.0556 11.3937C18.0556 8.17199 15.4439 5.56032 12.2222 5.56032V5.55552L5.4989 5.55886L7.61642 3.44199C7.78999 3.26842 7.78999 2.98701 7.61642 2.81345L7.06645 2.26348C6.89288 2.08991 6.61148 2.08991 6.43791 2.26348Z"},null,-1)]))}const Mn={render:zl},Ol={width:"16",height:"16",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg"};function Rl(i,n){return d(),b("svg",Ol,n[0]||(n[0]=[a("path",{d:"M11.0036 1.80702L14.272 5.07542C14.4108 5.21428 14.4108 5.4394 14.272 5.57826L10.6893 9.16093C10.5505 9.29978 10.3253 9.29978 10.1865 9.16093L9.7465 8.72095C9.60765 8.5821 9.60765 8.35698 9.7465 8.21812L12.1858 5.77755L6.44444 5.77783C4.60349 5.77783 3.1111 7.27021 3.1111 9.11116C3.1111 10.9521 4.60349 12.4445 6.44444 12.4445H8.97777C9.17414 12.4445 9.33333 12.6037 9.33333 12.8V13.4223C9.33333 13.6186 9.17414 13.7778 8.97777 13.7778H6.22222C3.74827 13.6568 1.77777 11.6141 1.77777 9.11116C1.77777 6.6082 3.74827 4.56548 6.22259 4.44967L6.22222 4.44449L11.7555 4.44421L10.0608 2.74983C9.92192 2.61098 9.92192 2.38585 10.0608 2.247L10.5008 1.80702C10.6396 1.66817 10.8647 1.66817 11.0036 1.80702Z"},null,-1)]))}const Hn={render:Rl},Gl=W({__name:"ComponentButton",props:{title:ee.string,tips:ee.string,iconName:ee.string,showSplitLine:ee.bool,active:ee.bool},emits:["customClick"],setup(i,{emit:n}){const g=i,{title:s,tips:_,iconName:h,showSplitLine:p}=re(g),f=n;return(I,o)=>{const C=ie,$=pe;return d(),L($,{class:V(["group_icon",{"group-right-border":e(p)}]),title:e(_),onClick:o[0]||(o[0]=v=>f("customClick"))},{default:l(()=>[t(e(me),{span:24,class:V(["group_inner",{"inner-active":i.active}])},{default:l(()=>[t(C,{class:"toolbar-icon"},{default:l(()=>[t(te,null,{default:l(()=>[(d(),L(ge(e(h))))]),_:1})]),_:1}),a("span",null,E(e(s)),1)]),_:1},8,["class"])]),_:1},8,["title","class"])}}});const Zl=Y(Gl,[["__scopeId","data-v-ef74e40f"]]),Wl={class:"flex-align-center"},ql=W({__name:"ComponentButtonLabel",props:{title:ee.string,tips:ee.string,iconName:ee.string,showSplitLine:ee.bool,active:ee.bool},emits:["customClick"],setup(i,{emit:n}){const g=i,{title:s,tips:_,iconName:h,showSplitLine:p}=re(g),f=n;return(I,o)=>{const C=pe,$=Xe;return d(),b("div",Wl,[t(C,{class:"group_icon",title:e(_),onClick:o[0]||(o[0]=v=>f("customClick"))},{default:l(()=>[t(e(me),{span:24,class:V(["group_inner",{"inner-active":i.active}])},{default:l(()=>[t(te,null,{default:l(()=>[(d(),L(ge(e(h)),{class:"svg-icon toolbar-icon"}))]),_:1}),a("span",null,E(e(s)),1)]),_:1},8,["class"])]),_:1},8,["title"]),e(p)?(d(),L($,{key:0,class:"group-right-border",direction:"vertical"})):Z("",!0)])}}});const jl=Y(ql,[["__scopeId","data-v-fbaabbeb"]]),Nn=W({__name:"ComponentGroup",props:{title:ee.string,iconName:ee.string,showSplitLine:ee.bool,baseWidth:{required:!1,type:Number,default:200},isLabel:ee.bool.def(!1),themes:{type:String,default:"dark"},placement:{type:String,default:"bottom-start"}},setup(i){const n=i,{title:g,iconName:s,baseWidth:_,themes:h}=re(n);return(p,f)=>{const I=Zt;return d(),L(I,{placement:i.placement,width:e(_),trigger:"click","show-arrow":!1,"popper-class":"custom-popover-"+e(h)},{reference:l(()=>[(d(),L(ge(i.isLabel?jl:Zl),{title:e(g),"icon-name":e(s),"show-split-line":i.showSplitLine},null,8,["title","icon-name","show-split-line"]))]),default:l(()=>[Re(p.$slots,"default")]),_:3},8,["placement","width","popper-class"])}}}),Kl={class:"group-left"},Ql={class:"ul-custom"},Yl=["onClick"],Jl=["onClick","data-id"],Xl={class:"item-bottom"},eo=W({__name:"UserViewGroup",props:{propValue:{type:Array,default:()=>[]},dvModel:{type:String,default:"dv"},element:{type:Object,default(){return{propValue:null}}},themes:{type:String,default:"dark"}},setup(i){const n=i,{dvModel:g}=re(n),s=le(),_=Ie({curCategory:"quota",chartGroupList:It}),h=v=>{s==null||s.value.setScrollTop(v)},p=v=>{const y=document.querySelector(v);h(y.offsetTop)},f=(v,y)=>{ve.emit("handleNew",{componentName:"UserView",innerType:v,staticMap:y})},I=v=>{Le(v,g.value)},o=v=>{$e(v,g.value)},C=v=>{_.curCategory=v,p("#"+v)},$=v=>{v.forEach(y=>{const{category:H,title:z,render:k,chartValue:A,chartTitle:x,icon:S,staticMap:F}=y,D={render:k,category:H,icon:S,value:A,title:x,isPlugin:!0,staticMap:F},T=[..._.chartGroupList];let u=!1;for(;T!=null&&T.length;){const J=T.pop();J.category===H&&(J.details.find(de=>de.value===D.value)||J.details.push(D),u=!0)}u||_.chartGroupList.push({category:H,title:z,display:"show",details:[D]})})};return(v,y)=>{const H=pe,z=me;return d(),b(ce,null,[t(H,{class:V(["group",i.themes]),onDragstart:I,onDragend:o},{default:l(()=>[a("div",Kl,[a("ul",Ql,[(d(!0),b(ce,null,fe(_.chartGroupList,k=>X((d(),b("li",{class:V(["li-custom",{"li-custom-active":_.curCategory===k.category}]),key:k.category,onClick:A=>C(k.category)},E(k.title),11,Yl)),[[ne,k.display!=="hidden"]])),128))])]),t(e(Je),{ref_key:"userViewGroup",ref:s,class:"group-right",height:"392px"},{default:l(()=>[(d(!0),b(ce,null,fe(_.chartGroupList,k=>X((d(),L(H,{id:k.category,key:k.title},{default:l(()=>[t(H,{class:"group-title"},{default:l(()=>[B(E(k.title),1)]),_:2},1024),t(H,{style:{width:"100%"}},{default:l(()=>[(d(!0),b(ce,null,fe(k.details,A=>(d(),L(z,{class:"item",span:8,key:A.title},{default:l(()=>[a("div",{onClick:x=>f(A.value,A.staticMap),class:"item-top",draggable:"true","data-id":"UserView&"+A.value},[A.isPlugin?(d(),L(te,{key:0,"class-name":"item-top-icon","static-content":A.icon},null,8,["static-content"])):(d(),L(te,{key:1,"class-name":"item-top-icon"},{default:l(()=>[(d(),L(ge(n.themes==="dark"?e(Wt)[`${A.icon}-dark`]:e(ot)[A.icon]),{class:"svg-icon item-top-icon"}))]),_:2},1024))],8,Jl),a("div",Xl,[a("span",null,E(A.title),1)])]),_:2},1024))),128))]),_:2},1024)]),_:2},1032,["id"])),[[ne,k.display!=="hidden"]])),128))]),_:1},512)]),_:1},8,["class"]),t(e(ct),{jsname:"L2NvbXBvbmVudC9wbHVnaW5zLWhhbmRsZXIvVmlld0NhdGVnb3J5SGFuZGxlcg==",onLoadPluginCategory:$})],64)}}});const Pn=Y(eo,[["__scopeId","data-v-21be9927"]]),to={width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function lo(i,n){return d(),b("svg",to,n[0]||(n[0]=[a("path",{d:"M4.99919 5C4.07872 5 3.33252 5.7462 3.33252 6.66667V33.3333C3.33252 34.2538 4.07872 35 4.99919 35H34.9992C35.9197 35 36.6659 34.2538 36.6659 33.3333V6.66667C36.6659 5.7462 35.9197 5 34.9992 5H4.99919ZM33.3325 8.3332V25.0002L29.7552 21.4227C29.4297 21.0973 28.902 21.0973 28.5765 21.4227L23.9219 26.0775C23.5964 26.403 23.0687 26.403 22.7432 26.0775L13.9218 17.256C13.5963 16.9307 13.0687 16.9307 12.7433 17.256L6.66585 23.3335V8.3332H33.3325ZM26.6659 12.5C26.2057 12.5 25.8325 12.8731 25.8325 13.3333V15.8333C25.8325 16.2936 26.2057 16.6667 26.6659 16.6667H29.1659C29.626 16.6667 29.9992 16.2936 29.9992 15.8333V13.3333C29.9992 12.8731 29.626 12.5 29.1659 12.5H26.6659Z",fill:"#3370FF"},null,-1)]))}const oo={render:lo},ao={width:"40",height:"40",viewBox:"0 0 40 40",xmlns:"http://www.w3.org/2000/svg"};function no(i,n){return d(),b("svg",ao,n[0]||(n[0]=[a("path",{d:"M3.33251 3.33334C2.41205 3.33334 1.66585 4.07954 1.66585 5.00001V28.3333C1.66585 29.2538 2.41205 30 3.33251 30H29.9992C30.9197 30 31.6658 29.2538 31.6658 28.3333V5.00001C31.6658 4.07954 30.9197 3.33334 29.9992 3.33334H3.33251ZM28.3325 6.66654V21.6668L24.7552 18.0893C24.4297 17.764 23.902 17.764 23.5765 18.0893L18.9218 22.7442C18.5963 23.0697 18.0687 23.0697 17.7432 22.7442L10.5884 15.5893C10.263 15.264 9.73536 15.264 9.40993 15.5893L4.99918 20.0002V6.66654H28.3325ZM21.6658 9.16668C21.2057 9.16668 20.8325 9.53978 20.8325 10V12.5C20.8325 12.9602 21.2057 13.3333 21.6658 13.3333H24.1658C24.626 13.3333 24.9992 12.9602 24.9992 12.5V10C24.9992 9.53978 24.626 9.16668 24.1658 9.16668H21.6658Z"},null,-1),a("path",{d:"M38.3333 35C38.3333 35.4603 38.1468 35.8769 37.8452 36.1785C37.5436 36.4801 37.1269 36.6667 36.6667 36.6667H19.1667C18.7064 36.6667 18.3333 36.2936 18.3333 35.8333V34.1667C18.3333 33.7064 18.7064 33.3333 19.1667 33.3333H35V14.1667C35 13.7064 35.3731 13.3333 35.8333 13.3333H37.5C37.9602 13.3333 38.3333 13.7064 38.3333 14.1667V35Z"},null,-1)]))}const so={render:no},ro=["data-id"],io={key:0,class:"label-content"},uo={class:"label-content"},co=W({__name:"DragComponent",props:{icon:{type:String,required:!1},name:{type:String,required:!1},label:{type:String,required:!0,default:""},dragInfo:{type:String,required:!0,default:""},themes:{type:String,default:"dark"}},setup(i){const n=i,{icon:g,name:s,label:_,dragInfo:h,themes:p}=re(n);return(f,I)=>(d(),b("div",{class:V(["drag-component","drag-"+e(p)])},[a("div",{draggable:"true","data-id":e(h),class:"icon-content"},[e(s)?(d(),b("span",io,E(e(s)),1)):Z("",!0),e(g)?(d(),L(te,{key:1,class:"drag-icon"},{default:l(()=>[(d(),L(ge(e(g)),{class:"svg-icon drag-icon"}))]),_:1})):Z("",!0)],8,ro),a("div",uo,[a("span",null,E(e(_)),1)])],2))}});const _e=Y(co,[["__scopeId","data-v-20dde548"]]),mo=W({__name:"MediaGroup",props:{propValue:{type:Array,default:()=>[]},dvModel:{type:String,default:"dv"},element:{type:Object,default(){return{propValue:null}}},themes:{type:String,default:"dark"}},setup(i){const n=i,{dvModel:g}=re(n),s=(p,f)=>{ve.emit("handleNew",{componentName:p,innerType:f})},_=p=>{Le(p,g.value)},h=p=>{$e(p,g.value)};return(p,f)=>(d(),b("div",{class:"group",onDragstart:_,onDragend:h},[t(_e,{class:"media-component",themes:i.themes,icon:e(oo),label:"图片","drag-info":"Picture&Picture",onClick:f[0]||(f[0]=I=>s("Picture","Picture"))},null,8,["themes","icon"]),t(_e,{class:"media-component",themes:i.themes,icon:e(qt),label:"视频","drag-info":"DeVideo&DeVideo",onClick:f[1]||(f[1]=I=>s("DeVideo","DeVideo"))},null,8,["themes","icon"]),t(_e,{class:"media-component",themes:i.themes,icon:e(jt),label:"流媒体","drag-info":"DeStreamMedia&DeStreamMedia",onClick:f[2]||(f[2]=I=>s("DeStreamMedia","DeStreamMedia"))},null,8,["themes","icon"]),t(_e,{class:"media-component",themes:i.themes,icon:e(so),label:"图片组","drag-info":"UserView&picture-group",onClick:f[3]||(f[3]=I=>s("UserView","picture-group"))},null,8,["themes","icon"])],32))}});const An=Y(mo,[["__scopeId","data-v-cd73d957"]]),po={width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function fo(i,n){return d(),b("svg",po,n[0]||(n[0]=[a("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M36.1782 3.82019C35.8656 3.50763 35.4417 3.33203 34.9997 3.33203H4.99967C4.55765 3.33203 4.13372 3.50763 3.82116 3.82019C3.5086 4.13275 3.33301 4.55667 3.33301 4.9987V34.9987C3.33301 35.4407 3.5086 35.8647 3.82116 36.1772C4.13372 36.4898 4.55765 36.6654 4.99967 36.6654H34.9997C35.4417 36.6654 35.8656 36.4898 36.1782 36.1772C36.4908 35.8647 36.6663 35.4407 36.6663 34.9987V4.9987C36.6663 4.55667 36.4908 4.13275 36.1782 3.82019ZM21.6663 11.6655H27.4997C27.7207 11.6655 27.9327 11.7533 28.0889 11.9096C28.2452 12.0659 28.333 12.2778 28.333 12.4988V14.1655C28.333 14.3865 28.2452 14.5985 28.0889 14.7547C27.9327 14.911 27.7207 14.9988 27.4997 14.9988H21.6663V27.4988C21.6663 27.6083 21.6448 27.7166 21.6029 27.8177C21.561 27.9188 21.4996 28.0107 21.4223 28.0881C21.3449 28.1655 21.253 28.2268 21.1519 28.2687C21.0508 28.3106 20.9424 28.3322 20.833 28.3322H19.1663C19.0569 28.3322 18.9485 28.3106 18.8474 28.2687C18.7463 28.2268 18.6545 28.1655 18.5771 28.0881C18.4997 28.0107 18.4383 27.9188 18.3964 27.8177C18.3546 27.7166 18.333 27.6083 18.333 27.4988V14.9988H12.4997C12.2787 14.9988 12.0667 14.911 11.9104 14.7547C11.7541 14.5985 11.6663 14.3865 11.6663 14.1655V12.4988C11.6663 12.2778 11.7541 12.0659 11.9104 11.9096C12.0667 11.7533 12.2787 11.6655 12.4997 11.6655H18.333C18.333 11.6655 21.6663 11.7122 21.6663 11.6655Z",fill:"#3370FF"},null,-1)]))}const _o={render:fo},go={t:"1716529317390",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1706","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"200",height:"200"};function ho(i,n){return d(),b("svg",go,n[0]||(n[0]=[a("path",{d:"M810.666667 128H213.333333c-46.933333 0-85.333333 38.4-85.333333 85.333333v597.333334c0 46.933333 38.4 85.333333 85.333333 85.333333h597.333334c46.933333 0 85.333333-38.4 85.333333-85.333333V213.333333c0-46.933333-38.4-85.333333-85.333333-85.333333z m0 640c0 23.466667-19.2 42.666667-42.666667 42.666667H256c-23.466667 0-42.666667-19.2-42.666667-42.666667V256c0-23.466667 19.2-42.666667 42.666667-42.666667h512c23.466667 0 42.666667 19.2 42.666667 42.666667v512z",fill:"#297AFF","p-id":"1707"},null,-1),a("path",{d:"M725.333333 317.866667c0-12.8-8.533333-21.333333-21.333333-21.333334H320c-12.8 0-21.333333 8.533333-21.333333 21.333334v42.666666c0 12.8 8.533333 21.333333 21.333333 21.333334h149.333333v234.666666c0 12.8 8.533333 21.333333 21.333334 21.333334h42.666666c12.8 0 21.333333-8.533333 21.333334-21.333334v-234.666666h149.333333c12.8 0 21.333333-8.533333 21.333333-21.333334v-42.666666zM714.666667 682.666667H358.4v-32c0-2.133333-4.266667-4.266667-6.4-2.133334l-40.533333 40.533334c-8.533333 8.533333-8.533333 21.333333 0 29.866666l40.533333 40.533334c2.133333 2.133333 6.4 0 6.4-2.133334V725.333333h356.266667c6.4 0 10.666667-4.266667 10.666666-10.666666v-21.333334c0-6.4-4.266667-10.666667-10.666666-10.666666z",fill:"#297AFF","p-id":"1708"},null,-1)]))}const vo={render:ho},Co=W({__name:"TextGroup",props:{propValue:{type:Array,default:()=>[]},dvModel:{type:String,default:"dataV"},element:{type:Object,default(){return{propValue:null}}},themes:{type:String,default:"dark"}},setup(i){const n=i,{dvModel:g,themes:s}=re(n),_=f=>{Le(f,g.value)},h=f=>{$e(f,g.value)},p=(f,I)=>{ve.emit("handleNew",{componentName:f,innerType:I})};return(f,I)=>(d(),b("div",{class:"group",onDragstart:_,onDragend:h},[t(_e,{themes:e(s),icon:e(_o),label:"富文本","drag-info":"UserView&rich-text",onClick:I[0]||(I[0]=o=>p("UserView","rich-text"))},null,8,["themes","icon"]),e(g)==="dataV"?(d(),L(_e,{key:0,themes:e(s),icon:e(vo),label:"跑马灯","drag-info":"ScrollText&ScrollText",onClick:I[1]||(I[1]=o=>p("ScrollText","ScrollText"))},null,8,["themes","icon"])):Z("",!0)],32))}});const Dn=Y(Co,[["__scopeId","data-v-d2aeaa42"]]),bo={width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function yo(i,n){return d(),b("svg",bo,n[0]||(n[0]=[a("path",{d:"M26.6663 19.0504L35.8926 13.543C36.0582 13.4441 36.1997 13.3201 36.3149 13.1787C36.5276 13.0277 36.6663 12.7794 36.6663 12.4987V12.3374C36.679 12.2217 36.6792 12.1042 36.6663 11.9872V4.9987C36.6663 4.53846 36.4798 4.12179 36.1782 3.82019C35.8766 3.51858 35.4599 3.33203 34.9997 3.33203H4.99967C4.0792 3.33203 3.33301 4.07822 3.33301 4.9987V12.4987C3.33301 12.7498 3.44409 12.975 3.61981 13.1278C3.74703 13.3148 3.91598 13.4777 4.12271 13.6013L13.333 19.1073V31.1503C13.333 31.466 13.5113 31.7545 13.7937 31.8957L25.4603 37.729C26.0144 38.0061 26.6663 37.6032 26.6663 36.9837V19.0504Z",fill:"#3370FF"},null,-1)]))}const wo={render:yo},Vo=W({__name:"QueryGroup",props:{propValue:{type:Array,default:()=>[]},dvModel:{type:String,default:"dv"},element:{type:Object,default(){return{propValue:null}}},themes:{type:String,default:"dark"}},setup(i){const n=i,{dvModel:g}=re(n),s=p=>{Le(p,g.value)},_=p=>{$e(p,g.value)},h=p=>{ve.emit("handleNew",{componentName:p,innerType:p})};return(p,f)=>(d(),b("div",{class:"group",onDragstart:s,onDragend:_,onClick:f[0]||(f[0]=I=>h("VQuery"))},[t(_e,{themes:i.themes,icon:e(wo),label:"查询组件","drag-info":"VQuery&VQuery"},null,8,["themes","icon"])],32))}});const Un=Y(Vo,[["__scopeId","data-v-7e5a5bf9"]]),xo={class:"icon",width:"200px",height:"200.00px",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg"};function So(i,n){return d(),b("svg",xo,n[0]||(n[0]=[a("path",{d:"M847.743 223.953H640.639c-3.132-68.921-60.177-124.029-129.858-124.029s-126.726 55.108-129.858 124.029H173.256c-17.673 0-32 14.327-32 32s14.327 32 32 32h674.487c17.673 0 32-14.327 32-32s-14.327-32-32-32z m-336.962-60.03c34.379 0 62.689 26.426 65.718 60.029H445.064c3.029-33.603 31.338-60.029 65.717-60.029zM767.743 351.79c-17.673 0-32 14.327-32 32v478.173H288.256V383.79c0-17.673-14.327-32-32-32s-32 14.327-32 32v510.173c0 17.673 14.327 32 32 32h511.487c17.673 0 32-14.327 32-32V383.79c0-17.673-14.327-32-32-32z"},null,-1),a("path",{d:"M449.306 732.802V448.208c0-17.673-14.327-32-32-32s-32 14.327-32 32v284.593c0 17.673 14.327 32 32 32s32-14.326 32-31.999zM640.84 732.802V448.208c0-17.673-14.327-32-32-32s-32 14.327-32 32v284.593c0 17.673 14.327 32 32 32s32-14.326 32-31.999z"},null,-1)]))}const ko={render:So},Io={class:"icon",width:"200px",height:"200.00px",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg"};function Eo(i,n){return d(),b("svg",Io,n[0]||(n[0]=[a("path",{d:"M928 365.664a32 32 0 0 0-32 32V864a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V160a32 32 0 0 1 32-32h429.6a32 32 0 0 0 0-64H160a96 96 0 0 0-96 96v704a96 96 0 0 0 96 96h704a96 96 0 0 0 96-96V397.664a32 32 0 0 0-32-32z"},null,-1),a("path",{d:"M231.616 696.416a38.4 38.4 0 0 0 44.256 53.792l148-38.368L950.496 185.248 814.72 49.472 290.432 573.76l-58.816 122.656z m111.808-85.12L814.72 140l45.248 45.248-468.992 468.992-77.824 20.16 30.272-63.104z"},null,-1)]))}const Lo={render:Eo},$o={width:"16",height:"16",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg"};function To(i,n){return d(),b("svg",$o,n[0]||(n[0]=[a("path",{d:"M10.6666 7.62068L14.3571 5.4177C14.4233 5.37816 14.4799 5.32854 14.526 5.27196C14.6111 5.21156 14.6666 5.11225 14.6666 4.99998V4.93547C14.6717 4.88918 14.6717 4.84219 14.6666 4.79537V1.99998C14.6666 1.81588 14.592 1.64922 14.4713 1.52858C14.3507 1.40793 14.184 1.33331 13.9999 1.33331H1.99992C1.63173 1.33331 1.33325 1.63179 1.33325 1.99998V4.99998C1.33325 5.10043 1.37769 5.19051 1.44797 5.25162C1.49886 5.32643 1.56644 5.3916 1.64913 5.44103L5.33325 7.64343V12.4606C5.33325 12.5869 5.40459 12.7023 5.51751 12.7588L10.1842 15.0921C10.4058 15.2029 10.6666 15.0418 10.6666 14.794V7.62068Z"},null,-1)]))}const Mo={render:To},Ho={class:"head-filter"},No={class:"custom-tree-node"},Po={class:"auth-span"},Ao=["id"],Do={key:1,class:"tree-select-field"},Uo={key:2,class:"tree-select-field"},Bo={class:"icon-more"},Fo={style:{display:"flex"},class:"inner-content"},zo={style:{width:"16px","margin-top":"2px"},class:"expand-custom-outer"},Oo={class:"expand-custom"},Ro={class:"outer-filter-content"},Go={style:{flex:"1","line-height":"32px"}},Zo={style:{flex:"1"}},Wo={style:{"font-size":"12px"}},qo={style:{display:"flex"},class:"inner-content"},jo={style:{width:"16px","margin-top":"2px"},class:"expand-custom-outer"},Ko={class:"expand-custom"},Qo={class:"outer-dataset-content"},Yo={style:{display:"flex",width:"100%"}},Jo={style:{width:"16px","margin-top":"7px"},class:"expand-custom-outer"},Xo={class:"expand-custom"},ea={style:{flex:"1",display:"flex","line-height":"32px"}},ta={style:{width:"16px","margin-top":"2px","margin-right":"4px"}},la={style:{flex:"1","margin-left":"-16px"}},oa={style:{"font-size":"12px"}},aa={class:"ds-view-content"},na={style:{display:"flex",width:"100%",height:"22px"}},sa={style:{display:"flex","flex-wrap":"wrap",width:"100%"}},ra={style:{"font-size":"12px"}},ia={key:1,class:"empty"},da=W({__name:"OuterParamsSet",setup(i,{expose:n}){const g=he(),{dvInfo:s,componentData:_}=Ee(g),h=le(null),{t:p}=be(),f=le(null),I=ye(),o=Ie({filterExpand:!0,datasetExpand:!0,loading:!1,outerParamsSetVisible:!1,optMenu:[{label:"重命名",svgName:Lo,command:"rename"},{label:"删除",svgName:ko,command:"delete"}],treeProp:{id:"paramsInfoId",label:"paramName",children:"children"},outerParams:{checked:!1,outerParamsInfoArray:[]},baseDatasetInfo:[],baseFilterInfo:[],outerParamsInfoArray:[],mapOuterParamsInfoArray:{},panelList:[],curNodeId:null,outerParamsInfo:{content:"",linkType:"",required:!1,enabledDefault:!1,defaultValue:null,targetViewInfoList:[],paramsInfoId:null},currentFiledTreeNode:null,defaultOuterParamsInfo:{paramName:"",checked:!0,required:!1,enabledDefault:!1,defaultValue:null,targetViewInfoList:[]},defaultTargetViewInfo:{targetViewId:null,targetFieldId:null},currentLinkPanelViewArray:[],viewIdFieldArrayMap:{},widgetSubjectsTrans:{timeYearWidget:"年份过滤组件",timeMonthWidget:"年月过滤组件",timeDateWidget:"日期过滤组件",timeDateRangeWidget:"日期范围过滤组件",textSelectWidget:"文本下拉过滤组件",textSelectGridWidget:"文本列表过滤组件",textInputWidget:"文本搜索过滤组件",textSelectTreeWidget:"下拉树过滤组件",numberSelectWidget:"数字下拉过滤组件",numberSelectGridWidget:"数字列表过滤组件",numberRangeWidget:"数值区间过滤组件"}}),C=le({}),$=(m,r)=>{m&&(C.value[r]=m)},v=(m,r)=>{const c=C.value[r].input;if(m===null||m===""||typeof m>"u"){c.style.color=null,c.parentNode.removeAttribute("style");const N=c.parentNode.querySelector(".error-msg");return N&&c.parentNode.removeChild(N),!0}try{JSON.parse(m),c.style.color=null,c.parentNode.removeAttribute("style");const N=c.parentNode.querySelector(".error-msg");return N&&c.parentNode.removeChild(N),!0}catch{if(c.style.color="red",c.parentNode.setAttribute("style","box-shadow: 0 0 0 1px red inset;"),!c.parentNode.querySelector(".error-msg")){const Q=document.createElement("div");Q.className="error-msg",Q.innerText="格式错误",c.parentNode.appendChild(Q)}return!1}};se(()=>{var m,r;return(r=(m=o.outerParamsInfo)==null?void 0:m.targetViewInfoList)==null?void 0:r.map(w=>w.targetViewId)});const y=()=>{f.value=null},H=(m,r,w)=>{m==="rename"?f.value=w.paramsInfoId:m==="delete"&&q(r,w)},z=async()=>{o.baseFilterInfo=[],o.baseDatasetInfo=[],_.value.forEach(m=>{m.component==="VQuery"?o.baseFilterInfo.push(m):m.component==="Group"?m.propValue.forEach(r=>{r.component==="VQuery"&&o.baseFilterInfo.push(r)}):m.component==="DeTabs"&&m.propValue.forEach(r=>{r.componentData.forEach(w=>{w.component==="VQuery"&&o.baseFilterInfo.push(w)})})}),await al(s.value.id).then(m=>{o.baseDatasetInfo=m.data}),ll(s.value.id).then(m=>{var r;if(o.outerParams=m.data,o.outerParamsInfoArray=(r=o.outerParams)==null?void 0:r.outerParamsInfoArray,o.outerParamsInfoArray.length>=1){o.outerParamsInfoArray.forEach(c=>{const N=O(o.baseFilterInfo),M=O(o.baseDatasetInfo);x(c,N,M),o.mapOuterParamsInfoArray[c.paramsInfoId]=c}),o.curNodeId=null;const w=o.outerParamsInfoArray[0];Se(()=>{h.value.setCurrentKey(w.paramsInfoId),T(w)})}}),u(s.value.id)},k=(m,r)=>m==="parameterList"?r.filter(w=>w.attachId.indexOf("DE")>-1):r.filter(w=>w.attachId.indexOf("DE")===-1),A=m=>{let r=0;m.datasetViews.forEach(w=>{w.checked&&r++}),m.checkAll=r===m.datasetViews.length,m.checkAllIsIndeterminate=r>0&&r<m.datasetViews.length},x=(m,r,w)=>{const c={},N=[];m.targetViewInfoList.forEach(M=>{N.push(M.targetViewId),c[M.targetDsId]=M.targetFieldId==="empty"?M.targetViewId:M.targetFieldId}),w&&w.forEach(M=>{M.fieldIdSelected=c[M.id],M.viewExpand=!0;let Q=0;M.datasetViews.forEach(j=>{N.includes(j.chartId)?(j.checked=!0,Q++):j.checked=!1}),M.checkAll=Q===M.datasetViews.length,M.checkAllIsIndeterminate=Q>0&&Q<M.datasetViews.length,M.fieldIdSelected&&M.fieldIdSelected.indexOf("DE")>-1?M.activelist="parameterList":M.activelist="dimensionList"}),r&&r.forEach(M=>{M.filterSelected=c[M.id]}),m.filterInfo=r,m.datasetInfo=w},S=()=>{o.outerParamsSetVisible=!1},F=m=>{try{return JSON.parse(m)instanceof Array}catch{return!1}},D=()=>{var c;const m=O(o.outerParams);let r=0,w="";if((c=m.outerParamsInfoArray)==null||c.forEach(N=>{var M,Q;N.defaultValue&&!F(N.defaultValue)&&(r++,w=w+`【${N.paramName}】`),N.targetViewInfoList=[],(M=N.filterInfo)==null||M.forEach(j=>{j.filterSelected&&N.targetViewInfoList.push({targetViewId:j.filterSelected,targetDsId:j.id,targetFieldId:"empty"})}),(Q=N.datasetInfo)==null||Q.forEach(j=>{var we;j.fieldIdSelected&&((we=j.datasetViews)==null||we.forEach(Ve=>{Ve.checked&&N.targetViewInfoList.push({targetViewId:Ve.chartId,targetDsId:j.id,targetFieldId:j.fieldIdSelected})}))})}),r>0){He({message:`参数${w}默认值格式不正确！`,type:"warning",showClose:!0});return}ol(m).then(()=>{He({message:p("commons.save_success"),type:"success",showClose:!0}),I.recordSnapshotCache("renderChart"),S()})},T=m=>{o.outerParamsInfo=o.mapOuterParamsInfoArray[m.paramsInfoId],o.curNodeId=m.paramsInfoId},u=m=>{nl(m).then(r=>{o.viewIdFieldArrayMap={},o.currentLinkPanelViewArray=r.data,o.currentLinkPanelViewArray&&o.currentLinkPanelViewArray.forEach(w=>{o.viewIdFieldArrayMap[w.id]=w.tableFields}),_.value.forEach(w=>{w.component==="VQuery"&&w.propValue.forEach(c=>{o.currentLinkPanelViewArray.push({id:c.id,type:"filter",name:c.name,title:c.name}),o.viewIdFieldArrayMap[c.id]=[{id:"empty",name:p("visualization.filter_no_select")}]})})})},J=m=>{Se(()=>{h.value.setCurrentKey(m.paramsInfoId),T(m)})},R=m=>{m.checked&&(o.outerParams.checked=!0),Se(()=>{h.value.setCurrentKey(m.paramsInfoId),T(m)})},de=()=>{o.outerParams.checked=!0;const m=O(o.defaultOuterParamsInfo);m.paramsInfoId=tl();const r=O(o.baseFilterInfo),w=O(o.baseDatasetInfo);x(m,r,w),o.outerParamsInfoArray.push(m),o.mapOuterParamsInfoArray[m.paramsInfoId]=m,f.value=m.paramsInfoId,J(m)},q=(m,r)=>{const w=m.parent,c=w.data.children||w.data,N=c.findIndex(M=>M.paramsInfoId===r.paramsInfoId);c.splice(N,1),r.paramsInfoId===o.outerParamsInfo.paramsInfoId&&(delete o.mapOuterParamsInfoArray[r.paramsInfoId],o.curNodeId=null)},K=(m,r)=>{r.datasetViews.forEach(w=>{w.checked=m}),r.checkAll=m,r.checkAllIsIndeterminate=!1},Ce=()=>{z(),o.outerParamsSetVisible=!0},De=m=>{var r;return(r=g.canvasViewInfo[m])==null?void 0:r.title};return n({optInit:Ce}),(m,r)=>{const w=Fe,c=pe,N=Ae,M=Yt,Q=ke("CaretBottom"),j=ke("CaretRight"),we=et,Ve=tt,Ge=Kt,nt=Qt,st=lt,rt=at,it=Lt("loading");return d(),L(rt,{class:"params-class","append-to-body":!0,title:"外部参数设置",modelValue:o.outerParamsSetVisible,"onUpdate:modelValue":r[9]||(r[9]=G=>o.outerParamsSetVisible=G),width:"80vw",top:"10vh",trigger:"click"},{default:l(()=>[t(c,{style:{height:"550px"}},{default:l(()=>[X((d(),L(c,null,{default:l(()=>[t(c,{class:"preview"},{default:l(()=>[t(e(me),{span:6,class:"preview-left"},{default:l(()=>[t(c,{class:"tree-head"},{default:l(()=>[r[10]||(r[10]=a("span",{class:"head-text"},"参数列表",-1)),a("span",Ho,[t(w,{type:"primary",icon:"Plus",text:"",onClick:de})])]),_:1}),t(c,{class:"tree-content"},{default:l(()=>[t(M,{class:"custom-tree",menu:"",ref_key:"outerParamsInfoTree",ref:h,data:o.outerParamsInfoArray,"node-key":"paramsInfoId","highlight-current":"",props:o.treeProp,onNodeClick:T},{default:l(({node:G,data:oe})=>[a("span",No,[a("span",null,[a("div",{onClick:r[0]||(r[0]=Ne(()=>{},["stop"]))},[a("span",Po,[t(N,{modelValue:oe.checked,"onUpdate:modelValue":ue=>oe.checked=ue,onChange:ue=>R(oe)},null,8,["modelValue","onUpdate:modelValue","onChange"])])])]),a("span",{id:"paramName-"+oe.paramsInfoId},[f.value===oe.paramsInfoId?(d(),L(e(Me),{key:0,modelValue:oe.paramName,"onUpdate:modelValue":ue=>oe.paramName=ue,size:"small",placeholder:m.$t("visualization.input_param_name"),onBlur:y},null,8,["modelValue","onUpdate:modelValue","placeholder"])):oe.paramName?(d(),b("span",Do,E(oe.paramName),1)):(d(),b("span",Uo," 未配置参数名 "))],8,Ao),a("span",Bo,[t(Jt,{style:{"margin-right":"16px"},onHandleCommand:ue=>H(ue,G,oe),"menu-list":o.optMenu,"icon-name":e(Xt),placement:"bottom-start"},null,8,["onHandleCommand","menu-list","icon-name"])])])]),_:1},8,["data","props"])]),_:1})]),_:1}),t(e(me),{span:13,class:"preview-show"},{default:l(()=>[o.curNodeId?(d(),L(c,{key:0},{default:l(()=>{var G,oe,ue,Ze;return[t(c,{class:"new-params-title"},{default:l(()=>r[11]||(r[11]=[B(" 选择参数关联组件 ")])),_:1}),(oe=(G=o.outerParamsInfo)==null?void 0:G.filterInfo)!=null&&oe.length?(d(),L(c,{key:0,class:"new-params-filter"},{default:l(()=>{var xe;return[a("div",Fo,[a("div",zo,[a("div",Oo,[t(e(ie),{onClick:r[1]||(r[1]=()=>o.filterExpand=!o.filterExpand)},{default:l(()=>[X(t(Q,null,null,512),[[ne,o.filterExpand]]),X(t(j,null,null,512),[[ne,!o.filterExpand]])]),_:1})])]),r[12]||(r[12]=a("div",{style:{flex:"1"}},"查询组件",-1)),r[13]||(r[13]=a("div",{style:{flex:"1"}},"关联条件",-1))]),a("div",Ro,[(d(!0),b(ce,null,fe((xe=o.outerParamsInfo)==null?void 0:xe.filterInfo,(U,Ue)=>X((d(),b("div",{style:{display:"flex"},class:"inner-filter-content",key:Ue},[r[14]||(r[14]=a("div",{style:{width:"16px"}},null,-1)),a("div",Go,[t(te,{name:"filter-params"},{default:l(()=>[t(e(Mo),{style:{"margin-top":"4px"},class:"svg-icon view-type-icon"})]),_:1}),a("span",null,E(De(U.id)),1)]),a("div",Zo,[t(Ve,{modelValue:U.filterSelected,"onUpdate:modelValue":P=>U.filterSelected=P,filterable:"",style:{width:"100%"},placeholder:"请选择查询条件",clearable:""},{default:l(()=>[(d(!0),b(ce,null,fe(U.propValue,P=>(d(),L(we,{key:P.id,label:P.name,value:P.id},{default:l(()=>[a("span",Wo,E(P.name),1)]),_:2},1032,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])])])),[[ne,o.filterExpand]])),128))])]}),_:1})):Z("",!0),(Ze=(ue=o.outerParamsInfo)==null?void 0:ue.datasetInfo)!=null&&Ze.length?(d(),L(c,{key:1,class:"new-params-ds"},{default:l(()=>{var xe;return[a("div",qo,[a("div",jo,[a("div",Ko,[t(e(ie),{onClick:r[2]||(r[2]=()=>o.datasetExpand=!o.datasetExpand)},{default:l(()=>[X(t(Q,null,null,512),[[ne,o.datasetExpand]]),X(t(j,null,null,512),[[ne,!o.datasetExpand]])]),_:1})])]),r[15]||(r[15]=a("div",{style:{flex:"1"}},"图表",-1)),r[16]||(r[16]=a("div",{style:{flex:"1"}},"关联字段或参数",-1))]),a("div",Qo,[(d(!0),b(ce,null,fe((xe=o.outerParamsInfo)==null?void 0:xe.datasetInfo,(U,Ue)=>X((d(),b("div",{class:"inner-dataset-content",key:Ue},[a("div",Yo,[a("div",Jo,[a("div",Xo,[t(e(ie),{onClick:()=>U.viewExpand=!U.viewExpand},{default:l(()=>[X(t(Q,null,null,512),[[ne,U.viewExpand]]),X(t(j,null,null,512),[[ne,!U.viewExpand]])]),_:2},1032,["onClick"])])]),a("div",ea,[a("div",ta,[t(e(ie),null,{default:l(()=>[t(te,{name:"icon_dataset"},{default:l(()=>[t(e(el),{class:"svg-icon"})]),_:1})]),_:1})]),a("span",null,E(U.name),1)]),a("div",la,[t(Ve,{modelValue:U.fieldIdSelected,"onUpdate:modelValue":P=>U.fieldIdSelected=P,filterable:"",clearable:"",style:{width:"100%"},placeholder:e(p)("common.selectText")},{header:l(()=>[t(nt,{class:"params-select--header",modelValue:U.activelist,"onUpdate:modelValue":P=>U.activelist=P},{default:l(()=>[t(Ge,{label:"字段",name:"dimensionList"}),t(Ge,{label:"参数",name:"parameterList"})]),_:2},1032,["modelValue","onUpdate:modelValue"])]),default:l(()=>[(d(!0),b(ce,null,fe(k(U.activelist,U.datasetFields),P=>(d(),L(we,{key:P.attachId,label:P.name,value:P.attachId},{default:l(()=>[t(te,null,{default:l(()=>[(d(),L(ge(e(rl)[e(Qe)[P.deType]]),{class:V(["svg-icon",`field-icon-${e(Qe)[P.deType]}`]),style:{width:"14px",height:"14px"}},null,8,["class"]))]),_:2},1024),a("span",oa,E(P.name),1)]),_:2},1032,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"])])]),X(a("div",aa,[a("div",na,[r[18]||(r[18]=a("div",{class:"ds-content-title"},"选择关联的图表",-1)),r[19]||(r[19]=a("div",{class:"custom-view-diver"},null,-1)),a("div",null,[t(N,{style:{"margin-top":"-4px"},modelValue:U.checkAll,"onUpdate:modelValue":P=>U.checkAll=P,indeterminate:U.checkAllIsIndeterminate,disabled:!U.fieldIdSelected,onChange:P=>K(P,U)},{default:l(()=>r[17]||(r[17]=[B("全选")])),_:2},1032,["modelValue","onUpdate:modelValue","indeterminate","disabled","onChange"])])]),a("div",sa,[(d(!0),b(ce,null,fe(U.datasetViews,P=>(d(),b("div",{class:"view-item",key:P},[a("div",null,[t(N,{modelValue:P.checked,"onUpdate:modelValue":We=>P.checked=We,disabled:!U.fieldIdSelected,onChange:We=>A(U)},null,8,["modelValue","onUpdate:modelValue","disabled","onChange"])]),a("div",null,[t(te,null,{default:l(()=>[(d(),L(ge(e(ot)[P.chartType]),{class:"svg-icon view-type-icon",style:{margin:"0 4px"}}))]),_:2},1024)]),a("span",ra,E(P.chartName),1)]))),128))])],512),[[ne,U.viewExpand]])])),[[ne,o.datasetExpand]])),128))])]}),_:1})):Z("",!0)]}),_:1})):(d(),b("div",ia,[t(sl,{description:"请配置参数","img-type":"noneWhite"})]))]),_:1}),t(e(me),{span:5,class:"params-attach-setting"},{default:l(()=>[o.curNodeId?(d(),L(c,{key:0},{default:l(()=>[t(c,{class:"new-params-title"},{default:l(()=>r[20]||(r[20]=[B(" 参数配置 ")])),_:1}),t(c,{class:"params-attach-content"},{default:l(()=>[t(c,null,{default:l(()=>[t(N,{modelValue:o.outerParamsInfo.required,"onUpdate:modelValue":r[3]||(r[3]=G=>o.outerParamsInfo.required=G)},{default:l(()=>r[21]||(r[21]=[B("必填 ")])),_:1},8,["modelValue"])]),_:1}),t(c,null,{default:l(()=>[t(N,{modelValue:o.outerParamsInfo.enabledDefault,"onUpdate:modelValue":r[4]||(r[4]=G=>o.outerParamsInfo.enabledDefault=G)},{default:l(()=>r[22]||(r[22]=[B("默认值 ")])),_:1},8,["modelValue"]),t(st,{class:"item",placement:"bottom"},{content:l(()=>r[23]||(r[23]=[a("div",null,[B(" 请使用JSON数组格式 示例: "),a("br"),B('单值 ["name1"], 多值 ["name1","name2"] ')],-1)])),default:l(()=>[t(e(ie),{class:"hint-icon"},{default:l(()=>[t(te,{name:"icon_info_outlined"},{default:l(()=>[t(e(Te),{class:"svg-icon"})]),_:1})]),_:1})]),_:1})]),_:1}),t(e(Me),{ref:G=>$(G,o.outerParamsInfo.paramsInfoId),placeholder:'请输入参数,如:["name1"]',modelValue:o.outerParamsInfo.defaultValue,"onUpdate:modelValue":r[5]||(r[5]=G=>o.outerParamsInfo.defaultValue=G),type:"textarea",autosize:{minRows:4,maxRows:8},onChange:r[6]||(r[6]=G=>v(o.outerParamsInfo.defaultValue,o.outerParamsInfo.paramsInfoId))},null,8,["modelValue"])]),_:1})]),_:1})):Z("",!0)]),_:1})]),_:1})]),_:1})),[[it,o.loading]]),t(c,{class:"root-class"},{default:l(()=>[t(w,{onClick:r[7]||(r[7]=G=>S())},{default:l(()=>[B(E(e(p)("commons.cancel")),1)]),_:1}),t(w,{type:"primary",onClick:r[8]||(r[8]=G=>D())},{default:l(()=>[B(E(e(p)("commons.confirm")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])}}});const Bn=Y(da,[["__scopeId","data-v-be658062"]]),ua={width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function ca(i,n){return d(),b("svg",ua,n[0]||(n[0]=[a("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M1.66699 4.9987C1.66699 4.07822 2.41318 3.33203 3.33366 3.33203H8.33366V13.332H38.3337L38.3337 34.9987C38.3337 35.9192 37.5875 36.6654 36.667 36.6654H3.33366C2.41318 36.6654 1.66699 35.9192 1.66699 34.9987V4.9987ZM38.3337 9.9987L38.3337 4.9987C38.3337 4.07822 37.5875 3.33203 36.667 3.33203H26.667V9.9987H38.3337ZM23.3337 3.33203H11.667V9.9987H23.3337V3.33203Z",fill:"#3370FF"},null,-1)]))}const ma={render:ca},pa=W({__name:"TabsGroup",props:{propValue:{type:Array,default:()=>[]},dvModel:{type:String,default:"dv"},element:{type:Object,default(){return{propValue:null}}},themes:{type:String,default:"dark"}},setup(i){const n=i,{dvModel:g}=re(n),s=()=>{ve.emit("handleNew",{componentName:"DeTabs",innerType:"DeTabs"})},_=p=>{Le(p,g.value)},h=p=>{$e(p,g.value)};return(p,f)=>(d(),b("div",{class:"group",onDragstart:_,onDragend:h,onClick:s},[t(_e,{themes:i.themes,icon:e(ma),label:"Tab","drag-info":"DeTabs&DeTabs"},null,8,["themes","icon"])],32))}});const Fn=Y(pa,[["__scopeId","data-v-23f39738"]]),fa=["id"],_a={key:0,class:"main-content"},ga={key:1,class:"collapse-title"},ha=["effect"],va=W({__name:"DvSidebar",props:{scrollWidth:{required:!1,type:Number,default:6},width:{required:!1,type:Number,default:200},themeInfo:{required:!1,type:String,default:"dark"},asidePosition:{required:!1,type:String,default:"left"},sideName:{required:!1,type:String,default:"defaultSide"},view:{type:Object,required:!1},slideIndex:{type:Number,required:!1,default:0},themes:{type:String,default:"light"},title:String},setup(i){const n=he(),{canvasCollapse:g}=Ee(n);let s=le(!1),_=le(""),h=le(null);const p=ye(),f=i,{width:I,asidePosition:o,sideName:C,themeInfo:$,view:v,themes:y}=re(f),H=()=>{g.value[C.value]=!g.value[C.value]},z=se(()=>`${g.value[C.value]?36:I.value}px`),k=se(()=>v.value&&["picture-group"].includes(v.value.type)),A=se(()=>({"--de-scroll-width":f.scrollWidth+"px",width:z.value})),x=()=>{if(s.value=!1,!(!_.value||!_.value.trim())&&_.value.trim()!==v.value.title){if(_.value.trim().length>64||_.value.trim().length<2){He.warning("名称字段长度2-64个字符"),S();return}v.value.title=_.value,_.value=""}},S=()=>{k.value&&(s.value=!0,_.value=v.value.title,Se(()=>{h.value.focus()}))},F=()=>{p.recordSnapshotCache()};return(D,T)=>{const u=ke("Expand"),J=ke("Fold"),R=pe,de=Je;return d(),b("div",{onKeyup:T[1]||(T[1]=Ne(()=>{},["stop"])),onKeydown:T[2]||(T[2]=Ne(()=>{},["stop"])),class:V(["dv-aside",["aside-"+e(o)+"-"+e($),"aside-area-"+e($)]]),style:qe(A.value)},[t(R,{align:"middle",class:V("title-"+e($)),justify:"space-between"},{default:l(()=>[e(g)[e(C)]?Z("",!0):(d(),b("div",{key:0,id:"attr-slide-component-name"+i.slideIndex,class:V(["name-area-attr",{"component-name-dark":e($)==="dark"}]),style:qe([{"max-width":"180px","text-overflow":"ellipsis","white-space":"nowrap"},{width:e(s)?"300px":"auto"}]),onDblclick:S},E(k.value?e(v).title:i.title),47,fa)),t(e(ie),{title:i.title,class:V(["custom-icon-"+e($),"collapse-icon-"+e($)]),size:"20px",onClick:H},{default:l(()=>[e(g)[e(C)]&&e(o)==="left"||!e(g)[e(C)]&&e(o)==="right"?(d(),L(u,{key:0})):(d(),L(J,{key:1}))]),_:1},8,["title","class"])]),_:1},8,["class"]),e(g)[e(C)]?Z("",!0):(d(),b("div",_a,[t(de,null,{default:l(()=>[Re(D.$slots,"default",{},void 0,!0)]),_:3})])),e(g)[e(C)]?(d(),b("div",ga,[a("span",null,E(i.title),1)])):Z("",!0),e(s)?(d(),L(Mt,{key:2,to:"#attr-slide-component-name"+i.slideIndex},[X(a("input",{ref_key:"componentNameInputAttr",ref:h,"onUpdate:modelValue":T[0]||(T[0]=q=>Tt(_)?_.value=q:_=q),width:"100%",effect:e($),onChange:F,onBlur:x},null,40,ha),[[$t,e(_)]])],8,["to"])):Z("",!0)],38)}}});const zn=Y(va,[["__scopeId","data-v-8330a82f"]]),Ca={t:"1715734866524",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"4224","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"200",height:"200"};function ba(i,n){return d(),b("svg",Ca,n[0]||(n[0]=[a("path",{d:"M512 64c247.424 0 448 200.576 448 448S759.424 960 512 960 64 759.424 64 512 264.576 64 512 64z m64 608H448v128h128V672z m32-448H416l64 400h64l64-400z",fill:"#E6960C","p-id":"4225"},null,-1)]))}const ya={render:ba},wa={style:{"font-size":"13px","margin-left":"10px","font-weight":"bold","line-height":"20px"}},Va={class:"dialog-footer"},On=W({__name:"CanvasCacheDialog",emits:["doUseCache"],setup(i,{expose:n,emit:g}){he();const s=le(!1),{t:_}=be();dt();const h=g,p={resourceId:null,title:"",tips:""},f=o=>{const C=o.canvasType==="dataV"?_("work_branch.big_data_screen"):_("work_branch.dashboard");p.resourceId=o.resourceId,p.title="存在未保存的"+C,p.tips=C+"存在未保存的修改，立即恢复？",s.value=!0},I=o=>{h("doUseCache",o),s.value=!1};return n({dialogInit:f}),(o,C)=>{const $=te,v=me,y=pe,H=Fe,z=at;return d(),L(z,{ref:"canvasCacheDialogRef","append-to-body":!0,modelValue:s.value,"onUpdate:modelValue":C[2]||(C[2]=k=>s.value=k),width:"340px","show-close":!1,trigger:"click"},{footer:l(()=>[a("div",Va,[t(H,{size:"mini",onClick:C[0]||(C[0]=k=>I(!1))},{default:l(()=>C[3]||(C[3]=[B("否 ")])),_:1}),t(H,{type:"primary",size:"mini",onClick:C[1]||(C[1]=k=>I(!0))},{default:l(()=>C[4]||(C[4]=[B("是 ")])),_:1})])]),default:l(()=>[t(y,{style:{height:"20px"}},{default:l(()=>[t(v,{span:3},{default:l(()=>[t($,{name:"warn-tree"},{default:l(()=>[t(e(ya),{style:{width:"20px",height:"20px",float:"right"},class:"svg-icon"})]),_:1})]),_:1}),t(v,{span:21},{default:l(()=>[a("span",wa,E(p.tips),1)]),_:1})]),_:1})]),_:1},8,["modelValue"])}}});export{Sn as C,_e as D,An as M,xn as O,Un as Q,kn as S,Dn as T,Pn as U,Nn as _,Vn as a,jl as b,Bn as c,Hn as d,Tn as e,In as f,$n as g,En as h,Mn as i,Fn as j,Ln as k,Zl as l,On as m,zn as n,so as p};
