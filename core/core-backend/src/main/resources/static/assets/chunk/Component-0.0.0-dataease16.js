import{k as B}from"./DeShortcutKey-0.0.0-dataease.js";import{e as P}from"./eventBus-0.0.0-dataease.js";import{d as S}from"./dvMain-0.0.0-dataease.js";import{d as A,r,t as D,ai as K,a as R,j as i,f as u,M as m,N as d,V as E,W as v,n as I}from"./vue-0.0.0-dataease.js";import{_ as N}from"./_plugin-vue_export-helper-0.0.0-dataease.js";import"./snapshot-0.0.0-dataease.js";import"./index-0.0.0-dataease.js";import"./library-0.0.0-dataease.js";import"./lodash-0.0.0-dataease.js";import"./index-0.0.0-dataease2.js";import"./axios-0.0.0-dataease.js";import"./echarts-0.0.0-dataease.js";import"./tinymce-0.0.0-dataease.js";import"./user-0.0.0-dataease.js";import"./dataVisualization-0.0.0-dataease2.js";import"./chart-0.0.0-dataease.js";import"./formatter-0.0.0-dataease.js";import"./util-0.0.0-dataease.js";import"./canvasStyle-0.0.0-dataease.js";import"./translate-0.0.0-dataease.js";import"./style-0.0.0-dataease.js";import"./imgUtils-0.0.0-dataease.js";import"./util-0.0.0-dataease2.js";import"./chart-0.0.0-dataease2.js";import"./app-0.0.0-dataease.js";import"./canvasUtils-0.0.0-dataease.js";import"./dataVisualization-0.0.0-dataease.js";import"./antv-0.0.0-dataease.js";import"./extends-0.0.0-dataease.js";import"./sysParameter-0.0.0-dataease.js";import"./TableTooltip-0.0.0-dataease.js";import"./el-col-0.0.0-dataease.js";import"./row-0.0.0-dataease.js";import"./el-row-0.0.0-dataease.js";import"./_commonjs-dynamic-modules-0.0.0-dataease.js";import"./appearance-0.0.0-dataease.js";import"./font-0.0.0-dataease.js";const j=["contenteditable","innerHTML"],z={key:1,class:"v-text preview"},O=["innerHTML"],W=A({__name:"Component",props:{propValue:{type:String,required:!0,default:""},element:{type:Object,default(){return{id:null,propValue:""}}}},emits:["input"],setup(f,{emit:_}){const o=r(!1),s=r(17),l=r(!1),p=_,c=r(null),y=f,{element:t}=D(y),g=S(),{editMode:k,curComponent:x}=K(g),C=()=>{x.value.id!==t.value.id&&(o.value=!1)},M=e=>{p("input",t.value,e.target.innerHTML)},T=e=>{o.value&&e.stopPropagation(),e.keyCode==s.value?l.value=!0:(l.value&&o.value&&B.includes(e.keyCode)||e.keyCode==46)&&e.stopPropagation()},h=e=>{o.value&&e.stopPropagation(),e.keyCode==s.value&&(l.value=!1)},V=e=>{o.value&&e.stopPropagation()},b=e=>{e.preventDefault();const a=e.clipboardData.getData("text/plain")||"";a!==""&&document.execCommand("insertText",!1,a),p("input",t.value,e.target.innerHTML)},L=e=>{t.value.propValue=e.target.innerHTML||"&nbsp;",e.target.innerHTML!==""?t.value.propValue=e.target.innerHTML:(t.value.propValue="",I(function(){t.value.propValue="&nbsp;"})),o.value=!1},H=()=>{t.value.isLock||(o.value=!0,w(c.value))},w=e=>{const n=window.getSelection(),a=document.createRange();a.selectNodeContents(e),n.removeAllRanges(),n.addRange(a)};return R(()=>{P.off("componentClick",C)}),(e,n)=>i(k)=="edit"?(u(),m("div",{key:0,class:"v-text",onKeydown:T,onKeyup:h},[d("div",{ref_key:"text",ref:c,contenteditable:o.value,class:E({"can-edit":o.value}),tabindex:"0",style:v({verticalAlign:i(t).style.verticalAlign}),onDblclick:H,onPaste:b,onMousedown:V,onBlur:L,onInput:M,innerHTML:i(t).propValue},null,46,j)],32)):(u(),m("div",z,[d("div",{style:v({verticalAlign:i(t).style.verticalAlign}),innerHTML:i(t).propValue},null,12,O)]))}});const Le=N(W,[["__scopeId","data-v-2f5b7359"]]);export{Le as default};
