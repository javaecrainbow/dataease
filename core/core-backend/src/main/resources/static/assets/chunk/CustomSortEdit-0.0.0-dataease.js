import{a as C,P as E}from"./index-0.0.0-dataease.js";import{_ as q,e as k}from"./index-0.0.0-dataease2.js";import{i as D}from"./icon_drag_outlined-0.0.0-dataease.js";import{d as j}from"./vuedraggable-es-0.0.0-dataease.js";import{b as w,e as B}from"./chart-0.0.0-dataease2.js";import{d as I,r as L,_ as O,w as T,ab as F,f as d,g as f,i as r,U as M,j as h,M as N,k as m,N as A,a7 as R}from"./vue-0.0.0-dataease.js";import{_ as U}from"./_plugin-vue_export-helper-0.0.0-dataease.js";import"./library-0.0.0-dataease.js";import"./lodash-0.0.0-dataease.js";import"./axios-0.0.0-dataease.js";import"./echarts-0.0.0-dataease.js";import"./tinymce-0.0.0-dataease.js";import"./user-0.0.0-dataease.js";const V=["title"],P={class:"item-span"},$=I({__name:"CustomSortEdit",props:{chart:{type:Object,required:!0},field:{type:Object,required:!0},fieldType:{type:String,required:!0}},emits:["onSortChange"],setup(g,{emit:v}){const{wsCache:y}=C(),a=L(!1),o=O({sortList:[]}),e=g,b=v;T(()=>e.chart,()=>{_()},{deep:!0});const _=()=>{a.value=!0;const t=e.chart;t.chartExtRequest||(t.chartExtRequest={user:y.get("user.uid")});const s={fieldId:e.field.id,fieldType:e.fieldType,data:t};(e.fieldType==="drillFields"?w:B)(s).then(i=>{const n=i.data;o.sortList=n.map(c=>S(c)),p(),a.value=!1}).catch(()=>{a.value=!1})},p=()=>{const t=o.sortList.map(s=>x(s));b("onSortChange",t)},S=t=>({name:"name",value:t}),x=t=>t.value;return _(),(t,s)=>{const u=q,i=k,n=E,c=F("loading");return d(),f(n,{height:"100%","max-height":"599px"},{default:r(()=>[M((d(),f(h(j),{list:o.sortList,animation:"300",class:"drag-list","item-key":"name",onUpdate:p},{item:r(({element:l})=>[(d(),N("span",{key:l.value,class:"item-dimension",title:l.value},[m(i,{class:"item-icon"},{default:r(()=>[m(u,{name:"icon_drag_outlined"},{default:r(()=>[m(h(D),{class:"svg-icon"})]),_:1})]),_:1}),A("span",P,R(l.value),1)],8,V))]),_:1},8,["list"])),[[c,a.value]])]),_:1})}}});const st=U($,[["__scopeId","data-v-79b7ef9d"]]);export{st as default};
