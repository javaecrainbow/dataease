import{d as Cj,r as Ic,ai as Tj,t as Oj,_ as kj,n as Ef,m as Gm,w as OA,o as Aj,f as _y,M as kA,g as AA,a0 as XT,W as MA,j as EA,V as DA,a7 as Mj,ac as _A}from"./vue-0.0.0-dataease.js";import{b as Ej,u as JT}from"./index-0.0.0-dataease.js";import{t as xu}from"./tinymce-0.0.0-dataease.js";import{b as Dj}from"./library-0.0.0-dataease.js";import{c as zA}from"./lodash-0.0.0-dataease.js";import{s as _j}from"./snapshot-0.0.0-dataease.js";import{e as RA}from"./eventBus-0.0.0-dataease.js";import{g as zj}from"./util-0.0.0-dataease.js";import{a as Rj}from"./chart-0.0.0-dataease2.js";import{d as Bj,b as BA}from"./dvMain-0.0.0-dataease.js";import Fj from"./ChartError-0.0.0-dataease.js";import{v as Hj}from"./formatter-0.0.0-dataease.js";import{p as Ij}from"./util-0.0.0-dataease2.js";import{G as $j}from"./chart-0.0.0-dataease.js";import{useAppearanceStoreWithOut as Lj}from"./appearance-0.0.0-dataease.js";import{_ as Pj}from"./_plugin-vue_export-helper-0.0.0-dataease.js";import"./index-0.0.0-dataease2.js";import"./axios-0.0.0-dataease.js";import"./echarts-0.0.0-dataease.js";import"./user-0.0.0-dataease.js";import"./dataVisualization-0.0.0-dataease2.js";import"./antv-0.0.0-dataease.js";import"./extends-0.0.0-dataease.js";import"./sysParameter-0.0.0-dataease.js";import"./TableTooltip-0.0.0-dataease.js";import"./el-col-0.0.0-dataease.js";import"./row-0.0.0-dataease.js";import"./el-row-0.0.0-dataease.js";import"./_commonjs-dynamic-modules-0.0.0-dataease.js";import"./app-0.0.0-dataease.js";import"./font-0.0.0-dataease.js";const FA=Ej(),YT=nn=>FA.baseUrl?`${FA.baseUrl}${nn}`:nn;(function(){var nn=function(e){var t=typeof e;return e===null?"null":t==="object"&&(Array.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="Array")?"array":t==="object"&&(String.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="String")?"string":t},Mt=function(e){return function(t){return nn(t)===e}},Fn=function(e){return function(t){return typeof t===e}},Qt=function(e){return function(t){return e===t}},dt=Mt("string"),Kt=Mt("object"),kt=Mt("array"),$t=Qt(null),Ze=Fn("boolean"),mn=Qt(void 0),Lt=function(e){return e==null},Oe=function(e){return!Lt(e)},tt=Fn("function"),jt=Fn("number"),We=function(e,t){if(kt(e)){for(var n=0,a=e.length;n<a;++n)if(!t(e[n]))return!1;return!0}return!1},be=function(){},en=function(e){return function(){return e()}},Ae=function(e,t){return function(){for(var n=[],a=0;a<arguments.length;a++)n[a]=arguments[a];return e(t.apply(null,n))}},wt=function(e,t){return function(n){return e(t(n))}},j=function(e){return function(){return e}},je=function(e){return e},Ge=function(e,t){return e===t};function Pn(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return function(){for(var a=[],i=0;i<arguments.length;i++)a[i]=arguments[i];var c=t.concat(a);return e.apply(null,c)}}var rn=function(e){return function(t){return!e(t)}},ge=function(e){return function(){throw new Error(e)}},Le=j(!1),qe=j(!0),gn=tinymce.util.Tools.resolve("tinymce.ThemeManager"),L=function(){return L=Object.assign||function(t){for(var n,a=1,i=arguments.length;a<i;a++){n=arguments[a];for(var c in n)Object.prototype.hasOwnProperty.call(n,c)&&(t[c]=n[c])}return t},L.apply(this,arguments)};function _(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,a=Object.getOwnPropertySymbols(e);i<a.length;i++)t.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(e,a[i])&&(n[a[i]]=e[a[i]]);return n}function He(e,t,n){if(n||arguments.length===2)for(var a=0,i=t.length,c;a<i;a++)(c||!(a in t))&&(c||(c=Array.prototype.slice.call(t,0,a)),c[a]=t[a]);return e.concat(c||Array.prototype.slice.call(t))}var Ft=function(){return Gt},Gt=function(){var e=function(a){return a()},t=je,n={fold:function(a,i){return a()},isSome:Le,isNone:qe,getOr:t,getOrThunk:e,getOrDie:function(a){throw new Error(a||"error: getOrDie called on none.")},getOrNull:j(null),getOrUndefined:j(void 0),or:t,orThunk:e,map:Ft,each:be,bind:Ft,exists:Le,forall:qe,filter:function(){return Ft()},toArray:function(){return[]},toString:j("none()")};return n}(),Xt=function(e){var t=j(e),n=function(){return i},a=function(c){return c(e)},i={fold:function(c,l){return l(e)},isSome:qe,isNone:Le,getOr:t,getOrThunk:t,getOrDie:t,getOrNull:t,getOrUndefined:t,or:n,orThunk:n,map:function(c){return Xt(c(e))},each:function(c){c(e)},bind:a,exists:a,forall:a,filter:function(c){return c(e)?i:Gt},toArray:function(){return[e]},toString:function(){return"some("+e+")"}};return i},Ct=function(e){return e==null?Gt:Xt(e)},p={some:Xt,none:Ft,from:Ct},tn=Array.prototype.slice,Ne=Array.prototype.indexOf,it=Array.prototype.push,Gn=function(e,t){return Ne.call(e,t)},Dr=function(e,t){var n=Gn(e,t);return n===-1?p.none():p.some(n)},It=function(e,t){return Gn(e,t)>-1},Hn=function(e,t){for(var n=0,a=e.length;n<a;n++){var i=e[n];if(t(i,n))return!0}return!1},or=function(e,t){for(var n=[],a=0;a<e;a++)n.push(t(a));return n},_r=function(e,t){for(var n=[],a=0;a<e.length;a+=t){var i=tn.call(e,a,a+t);n.push(i)}return n},Se=function(e,t){for(var n=e.length,a=new Array(n),i=0;i<n;i++){var c=e[i];a[i]=t(c,i)}return a},Ke=function(e,t){for(var n=0,a=e.length;n<a;n++){var i=e[n];t(i,n)}},$r=function(e,t){for(var n=e.length-1;n>=0;n--){var a=e[n];t(a,n)}},xe=function(e,t){for(var n=[],a=[],i=0,c=e.length;i<c;i++){var l=e[i],v=t(l,i)?n:a;v.push(l)}return{pass:n,fail:a}},Ce=function(e,t){for(var n=[],a=0,i=e.length;a<i;a++){var c=e[a];t(c,a)&&n.push(c)}return n},X=function(e,t,n){return $r(e,function(a,i){n=t(n,a,i)}),n},ce=function(e,t,n){return Ke(e,function(a,i){n=t(n,a,i)}),n},Y=function(e,t,n){for(var a=0,i=e.length;a<i;a++){var c=e[a];if(t(c,a))return p.some(c);if(n(c,a))break}return p.none()},Z=function(e,t){return Y(e,t,Le)},Me=function(e,t){for(var n=0,a=e.length;n<a;n++){var i=e[n];if(t(i,n))return p.some(n)}return p.none()},ze=function(e){for(var t=[],n=0,a=e.length;n<a;++n){if(!kt(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);it.apply(t,e[n])}return t},mt=function(e,t){return ze(Se(e,t))},gt=function(e,t){for(var n=0,a=e.length;n<a;++n){var i=e[n];if(t(i,n)!==!0)return!1}return!0},Re=function(e){var t=tn.call(e,0);return t.reverse(),t},cn=function(e,t){return Ce(e,function(n){return!It(t,n)})},cr=function(e,t){for(var n={},a=0,i=e.length;a<i;a++){var c=e[a];n[String(c)]=t(c,a)}return n},ir=function(e){return[e]},Eo=function(e,t){var n=tn.call(e,0);return n.sort(t),n},wo=function(e,t){return t>=0&&t<e.length?p.some(e[t]):p.none()},Xn=function(e){return wo(e,0)},Cr=function(e){return wo(e,e.length-1)},zr=tt(Array.from)?Array.from:function(e){return tn.call(e)},qn=function(e,t){for(var n=0;n<e.length;n++){var a=t(e[n],n);if(a.isSome())return a}return p.none()},Zn=Object.keys,So=Object.hasOwnProperty,sr=function(e,t){for(var n=Zn(e),a=0,i=n.length;a<i;a++){var c=n[a],l=e[c];t(l,c)}},Qn=function(e,t){return oe(e,function(n,a){return{k:a,v:t(n,a)}})},oe=function(e,t){var n={};return sr(e,function(a,i){var c=t(a,i);n[c.k]=c.v}),n},Xe=function(e){return function(t,n){e[n]=t}},st=function(e,t,n,a){var i={};return sr(e,function(c,l){(t(c,l)?n:a)(c,l)}),i},ft=function(e,t){var n={};return st(e,t,Xe(n),be),n},hn=function(e,t){var n=[];return sr(e,function(a,i){n.push(t(a,i))}),n},yn=function(e,t){for(var n=Zn(e),a=0,i=n.length;a<i;a++){var c=n[a],l=e[c];if(t(l,c,e))return p.some(l)}return p.none()},Tr=function(e){return hn(e,je)},ct=function(e,t){return pn(e,t)?p.from(e[t]):p.none()},pn=function(e,t){return So.call(e,t)},mr=function(e,t){return pn(e,t)&&e[t]!==void 0&&e[t]!==null},Aa=function(e,t,n){return n===void 0&&(n=Ge),e.exists(function(a){return n(a,t)})},Go=function(e,t,n){return n===void 0&&(n=Ge),vi(e,t,n).getOr(e.isNone()&&t.isNone())},Xr=function(e){for(var t=[],n=function(i){t.push(i)},a=0;a<e.length;a++)e[a].each(n);return t},Ji=function(e){for(var t=[],n=0;n<e.length;n++){var a=e[n];if(a.isSome())t.push(a.getOrDie());else return p.none()}return p.some(t)},vi=function(e,t,n){return e.isSome()&&t.isSome()?p.some(n(e.getOrDie(),t.getOrDie())):p.none()},Zi=function(e,t,n,a){return e.isSome()&&t.isSome()&&n.isSome()?p.some(a(e.getOrDie(),t.getOrDie(),n.getOrDie())):p.none()},no=function(e,t){return e!=null?p.some(t(e)):p.none()},Fa=function(e,t){return e?p.some(t):p.none()},Qi=function(e,t){return e+t},Ri=function(e,t){return e.substring(t)},eu=function(e,t,n){return t===""||e.length>=t.length&&e.substr(n,n+t.length)===t},Va=function(e,t){return Cu(e,t)?Ri(e,t.length):e},tu=function(e,t){return Do(e,t)?e:Qi(e,t)},In=function(e,t){return e.indexOf(t)!==-1},Cu=function(e,t){return eu(e,t,0)},Do=function(e,t){return eu(e,t,e.length-t.length)},nu=function(e){return function(t){return t.replace(e,"")}},Bi=nu(/^\s+|\s+$/g),_o=function(e){return e.length>0},Ma=function(e){return!_o(e)},xo=function(e){return e.style!==void 0&&tt(e.style.getPropertyValue)},Tu=function(e,t){var n=t||document,a=n.createElement("div");if(a.innerHTML=e,!a.hasChildNodes()||a.childNodes.length>1)throw console.error("HTML does not have a single root node",e),new Error("HTML must have a single root node");return B(a.childNodes[0])},ro=function(e,t){var n=t||document,a=n.createElement(e);return B(a)},Ou=function(e,t){var n=t||document,a=n.createTextNode(e);return B(a)},B=function(e){if(e==null)throw new Error("Node cannot be null or undefined");return{dom:e}},G=function(e,t,n){return p.from(e.dom.elementFromPoint(t,n)).map(B)},$={fromHtml:Tu,fromTag:ro,fromText:Ou,fromDom:B,fromPoint:G};typeof window<"u"||Function("return this;")();var ee=9,Ie=11,Qe=1,xt=3,Et=function(e){var t=e.dom.nodeName;return t.toLowerCase()},wn=function(e){return e.dom.nodeType},gr=function(e){return function(t){return wn(t)===e}},Dn=gr(Qe),Rr=gr(xt),yr=gr(ee),zo=gr(Ie),ia=function(e){var t=!1,n;return function(){for(var a=[],i=0;i<arguments.length;i++)a[i]=arguments[i];return t||(t=!0,n=e.apply(null,a)),n}},ru=function(e,t,n,a){var i=e.isiOS()&&/ipad/i.test(n)===!0,c=e.isiOS()&&!i,l=e.isiOS()||e.isAndroid(),v=l||a("(pointer:coarse)"),d=i||!c&&l&&a("(min-device-width:768px)"),g=c||l&&!d,y=t.isSafari()&&e.isiOS()&&/safari/i.test(n)===!1,S=!g&&!d&&!y;return{isiPad:j(i),isiPhone:j(c),isTablet:j(d),isPhone:j(g),isTouch:j(v),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:j(y),isDesktop:j(S)}},Fi=function(e,t){for(var n=0;n<e.length;n++){var a=e[n];if(a.test(t))return a}},wr=function(e,t){var n=Fi(e,t);if(!n)return{major:0,minor:0};var a=function(i){return Number(t.replace(n,"$"+i))};return Wr(a(1),a(2))},ua=function(e,t){var n=String(t).toLowerCase();return e.length===0?ke():wr(e,n)},ke=function(){return Wr(0,0)},Wr=function(e,t){return{major:e,minor:t}},di={nu:Wr,detect:ua,unknown:ke},$c=function(e,t){return qn(t.brands,function(n){var a=n.brand.toLowerCase();return Z(e,function(i){var c;return a===((c=i.brand)===null||c===void 0?void 0:c.toLowerCase())}).map(function(i){return{current:i.name,version:di.nu(parseInt(n.version,10),0)}})})},ku=function(e,t){var n=String(t).toLowerCase();return Z(e,function(a){return a.search(n)})},sn=function(e,t){return ku(e,t).map(function(n){var a=di.detect(n.versionRegexes,t);return{current:n.name,version:a}})},nc=function(e,t){return ku(e,t).map(function(n){var a=di.detect(n.versionRegexes,t);return{current:n.name,version:a}})},mi=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Sr=function(e){return function(t){return In(t,e)}},au=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){return In(e,"edge/")&&In(e,"chrome")&&In(e,"safari")&&In(e,"applewebkit")}},{name:"Chrome",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,mi],search:function(e){return In(e,"chrome")&&!In(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return In(e,"msie")||In(e,"trident")}},{name:"Opera",versionRegexes:[mi,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Sr("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Sr("firefox")},{name:"Safari",versionRegexes:[mi,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(In(e,"safari")||In(e,"mobile/"))&&In(e,"applewebkit")}}],Ua=[{name:"Windows",search:Sr("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return In(e,"iphone")||In(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Sr("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:Sr("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Sr("linux"),versionRegexes:[]},{name:"Solaris",search:Sr("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Sr("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Sr("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],ao={browsers:j(au),oses:j(Ua)},er="Edge",Au="Chrome",Mu="IE",ou="Opera",rc="Firefox",gi="Safari",qo=function(){return ac({current:void 0,version:di.unknown()})},ac=function(e){var t=e.current,n=e.version,a=function(i){return function(){return t===i}};return{current:t,version:n,isEdge:a(er),isChrome:a(Au),isIE:a(Mu),isOpera:a(ou),isFirefox:a(rc),isSafari:a(gi)}},Co={unknown:qo,nu:ac,edge:j(er),chrome:j(Au),ie:j(Mu),opera:j(ou),firefox:j(rc),safari:j(gi)},oo="Windows",A="iOS",N="Android",J="Linux",ve="OSX",Ee="Solaris",St="FreeBSD",_n="ChromeOS",Un=function(){return $n({current:void 0,version:di.unknown()})},$n=function(e){var t=e.current,n=e.version,a=function(i){return function(){return t===i}};return{current:t,version:n,isWindows:a(oo),isiOS:a(A),isAndroid:a(N),isOSX:a(ve),isLinux:a(J),isSolaris:a(Ee),isFreeBSD:a(St),isChromeOS:a(_n)}},ga={unknown:Un,nu:$n,windows:j(oo),ios:j(A),android:j(N),linux:j(J),osx:j(ve),solaris:j(Ee),freebsd:j(St),chromeos:j(_n)},ca=function(e,t,n){var a=ao.browsers(),i=ao.oses(),c=t.bind(function(d){return $c(a,d)}).orThunk(function(){return sn(a,e)}).fold(Co.unknown,Co.nu),l=nc(i,e).fold(ga.unknown,ga.nu),v=ru(l,c,e,n);return{browser:c,os:l,deviceType:v}},Hi={detect:ca},ha=function(e){return window.matchMedia(e).matches},hi=ia(function(){return Hi.detect(navigator.userAgent,p.from(navigator.userAgentData),ha)}),Ha=function(){return hi()},Lc=function(e,t,n){return(e.compareDocumentPosition(t)&n)!==0},wl=function(e,t){return Lc(e,t,Node.DOCUMENT_POSITION_CONTAINED_BY)},Tn=function(e,t){var n=e.dom;if(n.nodeType!==Qe)return!1;var a=n;if(a.matches!==void 0)return a.matches(t);if(a.msMatchesSelector!==void 0)return a.msMatchesSelector(t);if(a.webkitMatchesSelector!==void 0)return a.webkitMatchesSelector(t);if(a.mozMatchesSelector!==void 0)return a.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")},Ss=function(e){return e.nodeType!==Qe&&e.nodeType!==ee&&e.nodeType!==Ie||e.childElementCount===0},Pc=function(e,t){var n=t===void 0?document:t.dom;return Ss(n)?[]:Se(n.querySelectorAll(e),$.fromDom)},Df=function(e,t){var n=t===void 0?document:t.dom;return Ss(n)?p.none():p.from(n.querySelector(e)).map($.fromDom)},Wn=function(e,t){return e.dom===t.dom},Ko=function(e,t){var n=e.dom,a=t.dom;return n===a?!1:n.contains(a)},_f=function(e,t){return wl(e.dom,t.dom)},Xo=function(e,t){return Ha().browser.isIE()?_f(e,t):Ko(e,t)},Br=function(e){return $.fromDom(e.dom.ownerDocument)},iu=function(e){return yr(e)?e:Br(e)},oc=function(e){return $.fromDom(iu(e).dom.documentElement)},ic=function(e){return $.fromDom(iu(e).dom.defaultView)},Or=function(e){return p.from(e.dom.parentNode).map($.fromDom)},Sl=function(e){return Or(e)},xs=function(e){return p.from(e.dom.offsetParent).map($.fromDom)},w=function(e){return p.from(e.dom.nextSibling).map($.fromDom)},E=function(e){return Se(e.dom.childNodes,$.fromDom)},I=function(e,t){var n=e.dom.childNodes;return p.from(n[t]).map($.fromDom)},te=function(e){return I(e,0)},Ye=function(e,t){return{element:e,offset:t}},Ht=function(e,t){var n=E(e);return n.length>0&&t<n.length?Ye(n[t],0):Ye(e,t)},On=function(e){return zo(e)&&Oe(e.dom.host)},Ia=tt(Element.prototype.attachShadow)&&tt(Node.prototype.getRootNode),Ii=j(Ia),sa=Ia?function(e){return $.fromDom(e.dom.getRootNode())}:iu,Wa=function(e){return On(e)?e:$.fromDom(iu(e).dom.body)},uc=function(e){return xl(e).isSome()},xl=function(e){var t=sa(e);return On(t)?p.some(t):p.none()},pi=function(e){return $.fromDom(e.dom.host)},zf=function(e){if(Ii()&&Oe(e.target)){var t=$.fromDom(e.target);if(Dn(t)&&Cl(t)&&e.composed&&e.composedPath){var n=e.composedPath();if(n)return Xn(n)}}return p.from(e.target)},Cl=function(e){return Oe(e.dom.shadowRoot)},kr=function(e){var t=Rr(e)?e.dom.parentNode:e.dom;if(t==null||t.ownerDocument===null)return!1;var n=t.ownerDocument;return xl($.fromDom(t)).fold(function(){return n.body.contains(t)},wt(kr,pi))},Yo=function(){return Cs($.fromDom(document))},Cs=function(e){var t=e.dom.body;if(t==null)throw new Error("Body is not available yet");return $.fromDom(t)},cc=function(e,t,n){if(dt(n)||Ze(n)||jt(n))e.setAttribute(t,n+"");else throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple")},Vt=function(e,t,n){cc(e.dom,t,n)},Ro=function(e,t){var n=e.dom;sr(t,function(a,i){cc(n,i,a)})},pa=function(e,t){var n=e.dom.getAttribute(t);return n===null?void 0:n},ja=function(e,t){return p.from(pa(e,t))},Uv=function(e,t){var n=e.dom;return n&&n.hasAttribute?n.hasAttribute(t):!1},ba=function(e,t){e.dom.removeAttribute(t)},Rf=function(e,t,n){if(!dt(n))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",n,":: Element ",e),new Error("CSS value must be a string: "+n);xo(e)&&e.style.setProperty(t,n)},uu=function(e,t){xo(e)&&e.style.removeProperty(t)},_t=function(e,t,n){var a=e.dom;Rf(a,t,n)},Bo=function(e,t){var n=e.dom;sr(t,function(a,i){Rf(n,i,a)})},Ar=function(e,t){var n=e.dom;sr(t,function(a,i){a.fold(function(){uu(n,i)},function(c){Rf(n,i,c)})})},Ga=function(e,t){var n=e.dom,a=window.getComputedStyle(n),i=a.getPropertyValue(t);return i===""&&!kr(e)?Yr(n,t):i},Yr=function(e,t){return xo(e)?e.style.getPropertyValue(t):""},Lr=function(e,t){var n=e.dom,a=Yr(n,t);return p.from(a).filter(function(i){return i.length>0})},qm=function(e){var t={},n=e.dom;if(xo(n))for(var a=0;a<n.style.length;a++){var i=n.style.item(a);t[i]=n.style[i]}return t},Eu=function(e,t,n){var a=$.fromTag(e);_t(a,t,n);var i=Lr(a,t);return i.isSome()},zn=function(e,t){var n=e.dom;uu(n,t),Aa(ja(e,"style").map(Bi),"")&&ba(e,"style")},ur=function(e){return e.dom.offsetWidth},Ts=function(e,t){var n=function(v,d){if(!jt(d)&&!d.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+d);var g=v.dom;xo(g)&&(g.style[e]=d+"px")},a=function(v){var d=t(v);if(d<=0||d===null){var g=Ga(v,e);return parseFloat(g)||0}return d},i=a,c=function(v,d){return ce(d,function(g,y){var S=Ga(v,y),T=S===void 0?0:parseInt(S,10);return isNaN(T)?g:g+T},0)},l=function(v,d,g){var y=c(v,g),S=d>y?d-y:0;return S};return{set:n,get:a,getOuter:i,aggregate:c,max:l}},Nc=Ts("height",function(e){var t=e.dom;return kr(e)?t.getBoundingClientRect().height:t.offsetHeight}),Jr=function(e){return Nc.get(e)},bi=function(e){return Nc.getOuter(e)},Km=function(e,t){var n=["margin-top","border-top-width","padding-top","padding-bottom","border-bottom-width","margin-bottom"],a=Nc.max(e,t,n);_t(e,"max-height",a+"px")},sc=function(e,t){var n=function(a,i){return sc(e+a,t+i)};return{left:e,top:t,translate:n}},Yn=sc,$i=function(e){var t=e.getBoundingClientRect();return Yn(t.left,t.top)},Du=function(e,t){return e!==void 0?e:t!==void 0?t:0},cu=function(e){var t=e.dom.ownerDocument,n=t.body,a=t.defaultView,i=t.documentElement;if(n===e.dom)return Yn(n.offsetLeft,n.offsetTop);var c=Du(a==null?void 0:a.pageYOffset,i.scrollTop),l=Du(a==null?void 0:a.pageXOffset,i.scrollLeft),v=Du(i.clientTop,n.clientTop),d=Du(i.clientLeft,n.clientLeft);return Pr(e).translate(l-d,c-v)},Pr=function(e){var t=e.dom,n=t.ownerDocument,a=n.body;return a===t?Yn(a.offsetLeft,a.offsetTop):kr(e)?$i(t):Yn(0,0)},_u=Ts("width",function(e){return e.dom.offsetWidth}),su=function(e,t){return _u.set(e,t)},$a=function(e){return _u.get(e)},io=function(e){return _u.getOuter(e)},zu=function(e,t){var n=["margin-left","border-left-width","padding-left","padding-right","border-right-width","margin-right"],a=_u.max(e,t,n);_t(e,"max-width",a+"px")},Wv=function(e,t,n,a,i,c,l){return{target:e,x:t,y:n,stop:a,prevent:i,kill:c,raw:l}},Li=function(e){var t=$.fromDom(zf(e).getOr(e.target)),n=function(){return e.stopPropagation()},a=function(){return e.preventDefault()},i=Ae(a,n);return Wv(t,e.clientX,e.clientY,n,a,i,e)},Tl=function(e,t){return function(n){e(n)&&t(Li(n))}},Os=function(e,t,n,a,i){var c=Tl(n,a);return e.dom.addEventListener(t,c,i),{unbind:Pn(ks,e,t,c,i)}},jv=function(e,t,n,a){return Os(e,t,n,a,!1)},Ol=function(e,t,n,a){return Os(e,t,n,a,!0)},ks=function(e,t,n,a){e.dom.removeEventListener(t,n,a)},lc=function(e,t){var n=Or(e);n.each(function(a){a.dom.insertBefore(t.dom,e.dom)})},Vc=function(e,t){var n=w(e);n.fold(function(){var a=Or(e);a.each(function(i){qa(i,t)})},function(a){lc(a,t)})},Bf=function(e,t){var n=te(e);n.fold(function(){qa(e,t)},function(a){e.dom.insertBefore(t.dom,a.dom)})},qa=function(e,t){e.dom.appendChild(t.dom)},kl=function(e,t,n){I(e,n).fold(function(){qa(e,t)},function(a){lc(a,t)})},fc=function(e,t){Ke(t,function(n){lc(e,n)})},Uc=function(e,t){Ke(t,function(n){qa(e,n)})},vr=function(e){e.dom.textContent="",Ke(E(e),function(t){Jo(t)})},Jo=function(e){var t=e.dom;t.parentNode!==null&&t.parentNode.removeChild(t)},Gv=function(e){var t=E(e);t.length>0&&fc(e,t),Jo(e)},Zo=function(e){var t=e!==void 0?e.dom:document,n=t.body.scrollLeft||t.documentElement.scrollLeft,a=t.body.scrollTop||t.documentElement.scrollTop;return Yn(n,a)},Ff=function(e,t,n){var a=n!==void 0?n.dom:document,i=a.defaultView;i&&i.scrollTo(e,t)},qv=function(e){var t=e===void 0?window:e;return Ha().browser.isFirefox()?p.none():p.from(t.visualViewport)},Kv=function(e,t,n,a){return{x:e,y:t,width:n,height:a,right:e+n,bottom:t+a}},Wc=function(e){var t=e===void 0?window:e,n=t.document,a=Zo($.fromDom(n));return qv(t).fold(function(){var i=t.document.documentElement,c=i.clientWidth,l=i.clientHeight;return Kv(a.left,a.top,c,l)},function(i){return Kv(Math.max(i.pageLeft,a.left),Math.max(i.pageTop,a.top),i.width,i.height)})},Hf=function(e,t){var n=e.view(t);return n.fold(j([]),function(a){var i=e.owner(a),c=Hf(e,i);return[a].concat(c)})},As=function(e,t){var n=t.owner(e),a=Hf(t,n);return p.some(a)},Xv=function(e){var t,n=e.dom===document?p.none():p.from((t=e.dom.defaultView)===null||t===void 0?void 0:t.frameElement);return n.map($.fromDom)},Xm=function(e){return Br(e)},Qo=Object.freeze({__proto__:null,view:Xv,owner:Xm}),Ka=function(e){var t=$.fromDom(document),n=Zo(t),a=As(e,Qo);return a.fold(Pn(cu,e),function(i){var c=Pr(e),l=X(i,function(v,d){var g=Pr(d);return{left:v.left+g.left,top:v.top+g.top}},{left:0,top:0});return Yn(l.left+c.left+n.left,l.top+c.top+n.top)})},ei=function(e,t,n){return{point:e,width:t,height:n}},Ea=function(e,t,n,a){return{x:e,y:t,width:n,height:a}},Zr=function(e,t,n,a){return{x:e,y:t,width:n,height:a,right:e+n,bottom:t+a}},Da=function(e){var t=cu(e),n=io(e),a=bi(e);return Zr(t.left,t.top,n,a)},vc=function(e){var t=Ka(e),n=io(e),a=bi(e);return Zr(t.left,t.top,n,a)},Xa=function(){return Wc(window)},lu=function(e){var t=function(S){return lu(e)},n=function(S){return lu(e)},a=function(S){return lu(S(e))},i=function(S){return lu(e)},c=function(S){S(e)},l=function(S){return S(e)},v=function(S,T){return T(e)},d=function(S){return S(e)},g=function(S){return S(e)},y=function(){return p.some(e)};return{isValue:qe,isError:Le,getOr:j(e),getOrThunk:j(e),getOrDie:j(e),or:t,orThunk:n,fold:v,map:a,mapError:i,each:c,bind:l,exists:d,forall:g,toOptional:y}},dc=function(e){var t=function(g){return g()},n=function(){return ge(String(e))()},a=je,i=function(g){return g()},c=function(g){return dc(e)},l=function(g){return dc(g(e))},v=function(g){return dc(e)},d=function(g,y){return g(e)};return{isValue:Le,isError:qe,getOr:je,getOrThunk:t,getOrDie:n,or:a,orThunk:i,fold:d,map:c,mapError:l,each:be,bind:v,exists:Le,forall:qe,toOptional:p.none}},Ym=function(e,t){return e.fold(function(){return dc(t)},lu)},Ut={value:lu,error:dc,fromOption:Ym},ti;(function(e){e[e.Error=0]="Error",e[e.Value=1]="Value"})(ti||(ti={}));var Al=function(e,t,n){return e.stype===ti.Error?t(e.serror):n(e.svalue)},Jm=function(e){var t=[],n=[];return Ke(e,function(a){Al(a,function(i){return n.push(i)},function(i){return t.push(i)})}),{values:t,errors:n}},Zm=function(e,t){return e.stype===ti.Error?{stype:ti.Error,serror:t(e.serror)}:e},Qm=function(e,t){return e.stype===ti.Value?{stype:ti.Value,svalue:t(e.svalue)}:e},If=function(e,t){return e.stype===ti.Value?t(e.svalue):e},Yv=function(e,t){return e.stype===ti.Error?t(e.serror):e},Wt=function(e){return{stype:ti.Value,svalue:e}},Jv=function(e){return{stype:ti.Error,serror:e}},eg=function(e){return Al(e,Ut.error,Ut.value)},tg=function(e){return e.fold(Jv,Wt)},Mr={fromResult:tg,toResult:eg,svalue:Wt,partition:Jm,serror:Jv,bind:If,bindError:Yv,map:Qm,mapError:Zm,fold:Al},$f=function(e,t,n,a){return{tag:"field",key:e,newKey:t,presence:n,prop:a}},h=function(e,t){return{tag:"custom",newKey:e,instantiator:t}},C=function(e,t,n){switch(e.tag){case"field":return t(e.key,e.newKey,e.presence,e.prop);case"custom":return n(e.newKey,e.instantiator)}},O=function(e,t){return t},F=function(e,t){var n=Kt(e)&&Kt(t);return n?fe(e,t):t},q=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(t.length===0)throw new Error("Can't merge zero objects");for(var a={},i=0;i<t.length;i++){var c=t[i];for(var l in c)pn(c,l)&&(a[l]=e(a[l],c[l]))}return a}},fe=q(F),ot=q(O),Dt=function(){return{tag:"required",process:{}}},an=function(e){return{tag:"defaultedThunk",process:e}},ln=function(e){return an(j(e))},tr=function(){return{tag:"option",process:{}}},Ya=function(e){return{tag:"mergeWithThunk",process:e}},Er=function(e){return Ya(j(e))},zy=function(e,t){return e.length>0?Mr.svalue(fe(t,ot.apply(void 0,e))):Mr.svalue(t)},Jp=function(e){return Ae(Mr.serror,ze)(e)},Ry=function(e,t){var n=Mr.partition(e);return n.errors.length>0?Jp(n.errors):zy(n.values,t)},By=function(e){var t=Mr.partition(e);return t.errors.length>0?Jp(t.errors):Mr.svalue(t.values)},Ru={consolidateObj:Ry,consolidateArr:By},Lf=function(e){return Kt(e)&&Zn(e).length>100?" removed due to size":JSON.stringify(e,null,2)},Fo=function(e){var t=e.length>10?e.slice(0,10).concat([{path:[],getErrorInfo:j("... (only showing first ten failures)")}]):e;return Se(t,function(n){return"Failed path: ("+n.path.join(" > ")+`)
`+n.getErrorInfo()})},Pf=function(e,t){return Mr.serror([{path:e,getErrorInfo:t}])},Fy=function(e,t,n){return Pf(e,function(){return'Could not find valid *required* value for "'+t+'" in '+Lf(n)})},ng=function(e,t){return Pf(e,function(){return'Choice schema did not contain choice key: "'+t+'"'})},Zv=function(e,t,n){return Pf(e,function(){return'The chosen schema: "'+n+'" did not exist in branches: '+Lf(t)})},Zp=function(e,t){return Pf(e,function(){return"There are unsupported fields: ["+t.join(", ")+"] specified"})},Hy=function(e,t){return Pf(e,j(t))},Ml=function(e){var t=function(a,i){return Mr.bindError(e(i),function(c){return Hy(a,c)})},n=j("val");return{extract:t,toString:n}},Nf=Ml(Mr.svalue),Iy=function(e,t,n,a){return ct(t,n).fold(function(){return Fy(e,n,t)},a)},Qp=function(e,t,n,a){var i=ct(e,t).getOrThunk(function(){return n(e)});return a(i)},$y=function(e,t,n){return n(ct(e,t))},Ly=function(e,t,n,a){var i=ct(e,t).map(function(c){return c===!0?n(e):c});return a(i)},Py=function(e,t,n,a,i){var c=function(v){return i.extract(t.concat([a]),v)},l=function(v){return v.fold(function(){return Mr.svalue(p.none())},function(d){var g=i.extract(t.concat([a]),d);return Mr.map(g,p.some)})};switch(e.tag){case"required":return Iy(t,n,a,c);case"defaultedThunk":return Qp(n,a,e.process,c);case"option":return $y(n,a,l);case"defaultedOptionThunk":return Ly(n,a,e.process,l);case"mergeWithThunk":return Qp(n,a,j({}),function(v){var d=fe(e.process(n),v);return c(d)})}},Ny=function(e,t,n){for(var a={},i=[],c=0,l=n;c<l.length;c++){var v=l[c];C(v,function(d,g,y,S){var T=Py(y,e,t,d,S);Mr.fold(T,function(k){i.push.apply(i,k)},function(k){a[g]=k})},function(d,g){a[d]=g(t)})}return i.length>0?Mr.serror(i):Mr.svalue(a)},e1=function(e){var t=function(a,i){return e().extract(a,i)},n=function(){return e().toString()};return{extract:t,toString:n}},Vy=function(e){return Zn(ft(e,Oe))},Ho=function(e){var t=pt(e),n=X(e,function(i,c){return C(c,function(l){var v;return fe(i,(v={},v[l]=!0,v))},j(i))},{}),a=function(i,c){var l=Ze(c)?[]:Vy(c),v=Ce(l,function(d){return!mr(n,d)});return v.length===0?t.extract(i,c):Zp(i,v)};return{extract:a,toString:t.toString}},pt=function(e){var t=function(a,i){return Ny(a,i,e)},n=function(){var a=Se(e,function(i){return C(i,function(c,l,v,d){return c+" -> "+d.toString()},function(c,l){return"state("+c+")"})});return`obj{
`+a.join(`
`)+"}"};return{extract:t,toString:n}},jc=function(e){var t=function(a,i){var c=Se(i,function(l,v){return e.extract(a.concat(["["+v+"]"]),l)});return Ru.consolidateArr(c)},n=function(){return"array("+e.toString()+")"};return{extract:t,toString:n}},Qv=function(e){var t=function(a,i){for(var c=[],l=0,v=e;l<v.length;l++){var d=v[l],g=d.extract(a,i);if(g.stype===ti.Value)return g;c.push(g)}return Ru.consolidateArr(c)},n=function(){return"oneOf("+Se(e,function(a){return a.toString()}).join(", ")+")"};return{extract:t,toString:n}},ed=function(e,t){var n=function(c,l){return jc(Ml(e)).extract(c,l)},a=function(c,l){var v=Zn(l),d=n(c,v);return Mr.bind(d,function(g){var y=Se(g,function(S){return $f(S,S,Dt(),t)});return pt(y).extract(c,l)})},i=function(){return"setOf("+t.toString()+")"};return{extract:a,toString:i}},rg=function(e,t){var n=ia(t),a=function(c,l){return n().extract(c,l)},i=function(){return n().toString()};return{extract:a,toString:i}},ag=Ae(jc,pt),Pi=j(Nf),td=function(e,t){return Ml(function(n){var a=typeof n;return e(n)?Mr.svalue(n):Mr.serror("Expected type: "+t+" but got: "+a)})},og=td(jt,"number"),jr=td(dt,"string"),nd=td(Ze,"boolean"),ig=td(tt,"function"),Bu=function(e){if(Object(e)!==e)return!0;switch({}.toString.call(e).slice(8,-1)){case"Boolean":case"Number":case"String":case"Date":case"RegExp":case"Blob":case"FileList":case"ImageData":case"ImageBitmap":case"ArrayBuffer":return!0;case"Array":case"Object":return Object.keys(e).every(function(t){return Bu(e[t])});default:return!1}},ug=Ml(function(e){return Bu(e)?Mr.svalue(e):Mr.serror("Expected value to be acceptable for sending via postMessage")}),cg=function(e,t,n,a){var i=ct(n,a);return i.fold(function(){return Zv(e,n,a)},function(c){return c.extract(e.concat(["branch: "+a]),t)})},rd=function(e,t){var n=function(i,c){var l=ct(c,e);return l.fold(function(){return ng(i,e)},function(v){return cg(i,c,t,v)})},a=function(){return"chooseOn("+e+"). Possible values: "+Zn(t)};return{extract:n,toString:a}},Uy=function(){return jc(Nf)},Vf=function(e){return Ml(function(t){return e(t).fold(Mr.serror,Mr.svalue)})},t1=function(e,t){return ed(function(n){return Mr.fromResult(e(n))},t)},Wy=function(e,t,n){var a=t.extract([e],n);return Mr.mapError(a,function(i){return{input:n,errors:i}})},hr=function(e,t,n){return Mr.toResult(Wy(e,t,n))},fu=function(e){return e.fold(function(t){throw new Error(Gc(t))},je)},ya=function(e,t,n){return fu(hr(e,t,n))},Gc=function(e){return`Errors: 
`+Fo(e.errors).join(`
`)+`

Input object: `+Lf(e.input)},yi=function(e,t){return rd(e,Qn(t,pt))},jy=function(e,t){return rg(e,t)},Qr=$f,uo=h,n1=function(e){return Vf(function(t){return It(e,t)?Ut.value(t):Ut.error('Unsupported value: "'+t+'", choose one of "'+e.join(", ")+'".')})},de=function(e){return Qr(e,e,Dt(),Pi())},To=function(e,t){return Qr(e,e,Dt(),t)},r1=function(e){return To(e,og)},Tt=function(e){return To(e,jr)},Uf=function(e,t){return Qr(e,e,Dt(),n1(t))},Gy=function(e){return To(e,nd)},Oo=function(e){return To(e,ig)},qy=function(e,t){return Qr(e,e,tr(),Ml(function(n){return Mr.serror("The field: "+e+" is forbidden. "+t)}))},mc=function(e,t){return Qr(e,e,Dt(),pt(t))},Fu=function(e,t){return Qr(e,e,Dt(),ag(t))},Io=function(e,t){return Qr(e,e,Dt(),jc(t))},kn=function(e){return Qr(e,e,tr(),Pi())},qc=function(e,t){return Qr(e,e,tr(),t)},ad=function(e){return qc(e,og)},nr=function(e){return qc(e,jr)},El=function(e){return qc(e,ig)},a1=function(e,t){return qc(e,jc(t))},$o=function(e,t){return qc(e,pt(t))},Ky=function(e,t){return qc(e,Ho(t))},K=function(e,t){return Qr(e,e,ln(t),Pi())},ni=function(e,t,n){return Qr(e,e,ln(t),n)},od=function(e,t){return ni(e,t,og)},Dl=function(e,t){return ni(e,t,jr)},gc=function(e,t,n){return ni(e,t,n1(n))},lr=function(e,t){return ni(e,t,nd)},pr=function(e,t){return ni(e,t,ig)},id=function(e,t){return ni(e,t,ug)},Kc=function(e,t,n){return ni(e,t,jc(n))},sg=function(e,t,n){return ni(e,t,pt(n))},bt=function(e){var t=e,n=function(){return t},a=function(i){t=i};return{get:n,set:a}},o1=function(e){if(!kt(e))throw new Error("cases must be an array");if(e.length===0)throw new Error("there must be at least one case");var t=[],n={};return Ke(e,function(a,i){var c=Zn(a);if(c.length!==1)throw new Error("one and only one name per case");var l=c[0],v=a[l];if(n[l]!==void 0)throw new Error("duplicate key detected:"+l);if(l==="cata")throw new Error("cannot have a case named cata (sorry)");if(!kt(v))throw new Error("case arguments must be an array");t.push(l),n[l]=function(){for(var d=[],g=0;g<arguments.length;g++)d[g]=arguments[g];var y=d.length;if(y!==v.length)throw new Error("Wrong number of arguments to case "+l+". Expected "+v.length+" ("+v+"), got "+y);var S=function(T){var k=Zn(T);if(t.length!==k.length)throw new Error("Wrong number of arguments to match. Expected: "+t.join(",")+`
Actual: `+k.join(","));var D=gt(t,function(H){return It(k,H)});if(!D)throw new Error("Not all branches were specified when using match. Specified: "+k.join(", ")+`
Required: `+t.join(", "));return T[l].apply(null,d)};return{fold:function(){for(var T=[],k=0;k<arguments.length;k++)T[k]=arguments[k];if(T.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+T.length);var D=T[i];return D.apply(null,d)},match:S,log:function(T){console.log(T,{constructors:t,constructor:l,params:d})}}}}),n},ri={generate:o1};ri.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);var i1=function(e){var t=[],n=[];return Ke(e,function(a){a.fold(function(i){t.push(i)},function(i){n.push(i)})}),{errors:t,values:n}},u1=function(e,t){var n={};return sr(e,function(a,i){It(t,i)||(n[i]=a)}),n},c1=function(e,t){var n;return n={},n[e]=t,n},lg=function(e){var t={};return Ke(e,function(n){t[n.key]=n.value}),t},Xy=function(e,t){return u1(e,t)},hc=function(e,t){return c1(e,t)},Xc=function(e){return lg(e)},Yy=function(e,t){return e.length===0?Ut.value(t):Ut.value(fe(t,ot.apply(void 0,e)))},fg=function(e){return Ut.error(ze(e))},Jy=function(e,t){var n=i1(e);return n.errors.length>0?fg(n.errors):Yy(n.values,t)},s1=function(e){return tt(e)?e:Le},ud=function(e,t,n){for(var a=e.dom,i=s1(n);a.parentNode;){a=a.parentNode;var c=$.fromDom(a),l=t(c);if(l.isSome())return l;if(i(c))break}return p.none()},_l=function(e,t,n){var a=t(e),i=s1(n);return a.orThunk(function(){return i(e)?p.none():ud(e,t,i)})},l1=function(e,t){return Wn(e.element,t.event.target)},Zy={can:qe,abort:Le,run:be},zl=function(e){if(!mr(e,"can")&&!mr(e,"abort")&&!mr(e,"run"))throw new Error("EventHandler defined by: "+JSON.stringify(e,null,2)+" does not have can, abort, or run!");return L(L({},Zy),e)},Qy=function(e,t){return function(){for(var n=[],a=0;a<arguments.length;a++)n[a]=arguments[a];return ce(e,function(i,c){return i&&t(c).apply(void 0,n)},!0)}},f1=function(e,t){return function(){for(var n=[],a=0;a<arguments.length;a++)n[a]=arguments[a];return ce(e,function(i,c){return i||t(c).apply(void 0,n)},!1)}},ew=function(e){return tt(e)?{can:qe,abort:Le,run:e}:e},tw=function(e){var t=Qy(e,function(i){return i.can}),n=f1(e,function(i){return i.abort}),a=function(){for(var i=[],c=0;c<arguments.length;c++)i[c]=arguments[c];Ke(e,function(l){l.run.apply(void 0,i)})};return{can:t,abort:n,run:a}},wa=j,Hu=wa("touchstart"),Rl=wa("touchmove"),Yc=wa("touchend"),v1=wa("touchcancel"),Ni=wa("mousedown"),cd=wa("mousemove"),vg=wa("mouseout"),dg=wa("mouseup"),pc=wa("mouseover"),wi=wa("focusin"),nw=wa("focusout"),sd=wa("keydown"),d1=wa("keyup"),Ms=wa("input"),Wf=wa("change"),Bl=wa("click"),rw=wa("transitioncancel"),Fl=wa("transitionend"),aw=wa("transitionstart"),ow=wa("selectstart"),Nr=function(e){return j("alloy."+e)},iw={tap:Nr("tap")},Jc=Nr("focus"),mg=Nr("blur.post"),gg=Nr("paste.post"),Es=Nr("receive"),ai=Nr("execute"),Ds=Nr("focus.item"),_s=iw.tap,m1=Nr("longpress"),ld=Nr("sandbox.close"),hg=Nr("typeahead.cancel"),Hl=Nr("system.init"),g1=Nr("system.touchmove"),uw=Nr("system.touchend"),pg=Nr("system.scroll"),zs=Nr("system.resize"),Zc=Nr("system.attached"),Il=Nr("system.detached"),Rs=Nr("system.dismissRequested"),h1=Nr("system.repositionRequested"),p1=Nr("focusmanager.shifted"),Qc=Nr("slotcontainer.visibility"),b1=Nr("change.tab"),y1=Nr("dismiss.tab"),w1=Nr("highlight"),bg=Nr("dehighlight"),Sn=function(e,t){Iu(e,e.element,t,{})},yt=function(e,t,n){Iu(e,e.element,t,n)},Bs=function(e){Sn(e,ai())},yg=function(e,t,n){Iu(e,t,n,{})},Iu=function(e,t,n,a){var i=L({target:t},a);e.getSystem().triggerEvent(n,t,i)},S1=function(e,t,n,a){e.getSystem().triggerEvent(n,t,a.event)},rr=function(e){return Xc(e)},wg=function(e,t){return{key:e,value:zl({abort:t})}},fd=function(e,t){return{key:e,value:zl({can:t})}},vd=function(e){return{key:e,value:zl({run:function(t,n){n.event.prevent()}})}},we=function(e,t){return{key:e,value:zl({run:t})}},Sg=function(e,t,n){return{key:e,value:zl({run:function(a,i){t.apply(void 0,[a,i].concat(n))}})}},xg=function(e){return function(t){return we(e,t)}},$l=function(e){return function(t){return{key:e,value:zl({run:function(n,a){l1(n,a)&&t(n,a)}})}}},x1=function(e,t){return we(e,function(n,a){n.getSystem().getByUid(t).each(function(i){S1(i,i.element,e,a)})})},Fs=function(e,t,n){var a=t.partUids[n];return x1(e,a)},Cg=function(e,t){return we(e,function(n,a){var i=a.event,c=n.getSystem().getByDom(i.target).getOrThunk(function(){var l=_l(i.target,function(v){return n.getSystem().getByDom(v).toOptional()},Le);return l.getOr(n)});t(n,c,a)})},Hs=function(e){return we(e,function(t,n){n.cut()})},cw=function(e){return we(e,function(t,n){n.stop()})},Ll=function(e,t){return $l(e)(t)},br=$l(Zc()),vu=$l(Il()),sw=$l(Hl()),du=xg(ai()),lw=function(e,t){var n=t||document,a=n.createElement("div");return a.innerHTML=e,E($.fromDom(a))},bc=function(e){return e.dom.innerHTML},Pl=function(e,t){var n=Br(e),a=n.dom,i=$.fromDom(a.createDocumentFragment()),c=lw(t,a);Uc(i,c),vr(e),qa(e,i)},C1=function(e){var t=$.fromTag("div"),n=$.fromDom(e.dom.cloneNode(!0));return qa(t,n),bc(t)},yc=function(e,t){return $.fromDom(e.dom.cloneNode(t))},fw=function(e){return yc(e,!1)},$u=function(e){if(On(e))return"#shadow-root";var t=fw(e);return C1(t)},oi=function(e){return $u(e)},vw=function(e,t,n){return Wn(t,e.element)&&!Wn(t,n)},dw=rr([fd(Jc(),function(e,t){var n=t.event,a=n.originator,i=n.target;return vw(e,a,i)?(console.warn(Jc()+` did not get interpreted by the desired target. 
Originator: `+oi(a)+`
Target: `+oi(i)+`
Check the `+Jc()+" event handlers"),!1):!0})]),mw=Object.freeze({__proto__:null,events:dw}),Is=0,rt=function(e){var t=new Date,n=t.getTime(),a=Math.floor(Math.random()*1e9);return Is++,e+"_"+a+Is+String(n)},dd=j("alloy-id-"),gw=j("data-alloy-id"),hw=dd(),jf=gw(),pw=function(e,t){var n=rt(hw+e);return Tg(t,n),n},Tg=function(e,t){Object.defineProperty(e.dom,jf,{value:t,writable:!0})},$s=function(e){var t=Dn(e)?e.dom[jf]:null;return p.from(t)},Nl=function(e){return rt(e)},Og=je,md=function(e){var t=function(i){return"The component must be in a context to execute: "+i+(e?`
`+oi(e().element)+" is not in context.":"")},n=function(i){return function(){throw new Error(t(i))}},a=function(i){return function(){console.warn(t(i))}};return{debugInfo:j("fake"),triggerEvent:a("triggerEvent"),triggerFocus:a("triggerFocus"),triggerEscape:a("triggerEscape"),broadcast:a("broadcast"),broadcastOn:a("broadcastOn"),broadcastEvent:a("broadcastEvent"),build:n("build"),addToWorld:n("addToWorld"),removeFromWorld:n("removeFromWorld"),addToGui:n("addToGui"),removeFromGui:n("removeFromGui"),getByUid:n("getByUid"),getByDom:n("getByDom"),isConnected:Le}},bw=md(),Ls=function(e,t,n){var a=n.toString(),i=a.indexOf(")")+1,c=a.indexOf("("),l=a.substring(c+1,i-1).split(/,\s*/);return e.toFunctionAnnotation=function(){return{name:t,parameters:kg(l.slice(0,1).concat(l.slice(3)))}},e},kg=function(e){return Se(e,function(t){return Do(t,"/*")?t.substring(0,t.length-2):t})},Ps=function(e,t){var n=e.toString(),a=n.indexOf(")")+1,i=n.indexOf("("),c=n.substring(i+1,a-1).split(/,\s*/);return e.toFunctionAnnotation=function(){return{name:t,parameters:kg(c)}},e},yw=function(e,t){var n=t.toString(),a=n.indexOf(")")+1,i=n.indexOf("("),c=n.substring(i+1,a-1).split(/,\s*/);return e.toFunctionAnnotation=function(){return{name:"OVERRIDE",parameters:kg(c.slice(1))}},e},T1=rt("alloy-premade"),O1=function(e){return hc(T1,e)},k1=function(e){return ct(e,T1)},Vl=function(e){return yw(function(t){for(var n=[],a=1;a<arguments.length;a++)n[a-1]=arguments[a];return e.apply(void 0,He([t.getApis(),t],n,!1))},e)},ii={init:function(){return Ja({readState:j("No State required")})}},Ja=function(e){return e},ww=function(e,t){var n=Se(t,function(i){return $o(i.name(),[de("config"),K("state",ii)])}),a=hr("component.behaviours",pt(n),e.behaviours).fold(function(i){throw new Error(Gc(i)+`
Complete spec:
`+JSON.stringify(e,null,2))},je);return{list:t,data:Qn(a,function(i){var c=i.map(function(l){return{config:l.config,state:l.state.init(l.config)}});return j(c)})}},Sw=function(e){return e.list},xw=function(e){return e.data},A1=function(e,t){var n={};return sr(e,function(a,i){sr(a,function(c,l){var v=ct(n,l).getOr([]);n[l]=v.concat([t(i,c)])})}),n},Vi=function(e){return{classes:mn(e.classes)?[]:e.classes,attributes:mn(e.attributes)?{}:e.attributes,styles:mn(e.styles)?{}:e.styles}},Cw=function(e,t){return L(L({},e),{attributes:L(L({},e.attributes),t.attributes),styles:L(L({},e.styles),t.styles),classes:e.classes.concat(t.classes)})},Ul=function(e,t,n,a){var i=L({},t);Ke(n,function(y){i[y.name()]=y.exhibit(e,a)});var c=A1(i,function(y,S){return{name:y,modification:S}}),l=function(y){return X(y,function(S,T){return L(L({},T.modification),S)},{})},v=X(c.classes,function(y,S){return S.modification.concat(y)},[]),d=l(c.attributes),g=l(c.styles);return Vi({classes:v,attributes:d,styles:g})},Tw=function(e,t,n,a){try{var i=Eo(n,function(c,l){var v=c[t],d=l[t],g=a.indexOf(v),y=a.indexOf(d);if(g===-1)throw new Error("The ordering for "+e+" does not have an entry for "+v+`.
Order specified: `+JSON.stringify(a,null,2));if(y===-1)throw new Error("The ordering for "+e+" does not have an entry for "+d+`.
Order specified: `+JSON.stringify(a,null,2));return g<y?-1:y<g?1:0});return Ut.value(i)}catch(c){return Ut.error([c])}},Ow=function(e,t){return{handler:e,purpose:t}},M1=function(e,t){return{cHandler:e,purpose:t}},kw=function(e,t){return M1(Pn.apply(void 0,[e.handler].concat(t)),e.purpose)},Ag=function(e){return e.cHandler},Aw=function(e,t){return{name:e,handler:t}},Mw=function(e,t){var n={};return Ke(e,function(a){n[a.name()]=a.handlers(t)}),n},Ew=function(e,t,n){var a=L(L({},n),Mw(t,e));return A1(a,Aw)},Dw=function(e,t,n,a){var i=Ew(e,n,a);return zw(i,t)},Mg=function(e){var t=ew(e);return function(n,a){for(var i=[],c=2;c<arguments.length;c++)i[c-2]=arguments[c];var l=[n,a].concat(i);t.abort.apply(void 0,l)?a.stop():t.can.apply(void 0,l)&&t.run.apply(void 0,l)}},E1=function(e,t){return Ut.error(["The event ("+e+`) has more than one behaviour that listens to it.
When this occurs, you must specify an event ordering for the behaviours in your spec (e.g. [ "listing", "toggling" ]).
The behaviours that can trigger it are: `+JSON.stringify(Se(t,function(n){return n.name}),null,2)])},_w=function(e,t,n){var a=t[n];return a?Tw("Event: "+n,"name",e,a).map(function(i){var c=Se(i,function(l){return l.handler});return tw(c)}):E1(n,e)},zw=function(e,t){var n=hn(e,function(a,i){var c=a.length===1?Ut.value(a[0].handler):_w(a,t,i);return c.map(function(l){var v=Mg(l),d=a.length>1?Ce(t[i],function(g){return Hn(a,function(y){return y.name===g})}).join(" > "):a[0].name;return hc(i,Ow(v,d))})});return Jy(n,{})},mu,Lu="alloy.base.behaviour",D1=pt([Qr("dom","dom",Dt(),pt([de("tag"),K("styles",{}),K("classes",[]),K("attributes",{}),kn("value"),kn("innerHtml")])),de("components"),de("uid"),K("events",{}),K("apis",{}),Qr("eventOrder","eventOrder",Er((mu={},mu[ai()]=["disabling",Lu,"toggling","typeaheadevents"],mu[Jc()]=[Lu,"focusing","keying"],mu[Hl()]=[Lu,"disabling","toggling","representing"],mu[Ms()]=[Lu,"representing","streaming","invalidating"],mu[Il()]=[Lu,"representing","item-events","tooltipping"],mu[Ni()]=["focusing",Lu,"item-type-events"],mu[Hu()]=["focusing",Lu,"item-type-events"],mu[pc()]=["item-type-events","tooltipping"],mu[Es()]=["receiving","reflecting","tooltipping"],mu)),Pi()),kn("domModification")]),_1=function(e){return hr("custom.definition",D1,e)},gd=function(e){return L(L({},e.dom),{uid:e.uid,domChildren:Se(e.components,function(t){return t.element})})},Rw=function(e){return e.domModification.fold(function(){return Vi({})},Vi)},z1=function(e){return e.events},Gf=function(e,t){var n=pa(e,t);return n===void 0||n===""?[]:n.split(" ")},Bw=function(e,t,n){var a=Gf(e,t),i=a.concat([n]);return Vt(e,t,i.join(" ")),!0},Fw=function(e,t,n){var a=Ce(Gf(e,t),function(i){return i!==n});return a.length>0?Vt(e,t,a.join(" ")):ba(e,t),!1},hd=function(e){return e.dom.classList!==void 0},Eg=function(e){return Gf(e,"class")},qf=function(e,t){return Bw(e,"class",t)},R1=function(e,t){return Fw(e,"class",t)},Sa=function(e,t){hd(e)?e.dom.classList.add(t):qf(e,t)},Ns=function(e){var t=hd(e)?e.dom.classList:Eg(e);t.length===0&&ba(e,"class")},Gr=function(e,t){if(hd(e)){var n=e.dom.classList;n.remove(t)}else R1(e,t);Ns(e)},Si=function(e,t){return hd(e)&&e.dom.classList.contains(t)},Vs=function(e,t){Ke(t,function(n){Sa(e,n)})},Pu=function(e,t){Ke(t,function(n){Gr(e,n)})},B1=function(e,t){return gt(t,function(n){return Si(e,n)})},Nu=function(e){return e.dom.value},Kf=function(e,t){if(t===void 0)throw new Error("Value.set was undefined");e.dom.value=t},Hw=function(e){var t=$.fromTag(e.tag);Ro(t,e.attributes),Vs(t,e.classes),Bo(t,e.styles),e.innerHtml.each(function(a){return Pl(t,a)});var n=e.domChildren;if(Uc(t,n),e.value.each(function(a){Kf(t,a)}),!e.uid)debugger;return Tg(t,e.uid),t},Iw=function(e){var t=ct(e,"behaviours").getOr({});return mt(Zn(t),function(n){var a=t[n];return Oe(a)?[a.me]:[]})},$w=function(e,t){return ww(e,t)},Lw=function(e){var t=Iw(e);return $w(e,t)},Pw=function(e,t,n){var a=gd(e),i=Rw(e),c={"alloy.base.modification":i},l=t.length>0?Ul(n,c,t,a):i;return Cw(a,l)},Nw=function(e,t,n){var a={"alloy.base.behaviour":z1(e)};return Dw(n,e.eventOrder,t,a).getOrDie()},F1=function(e){var t=function(){return W},n=bt(bw),a=fu(_1(e)),i=Lw(e),c=Sw(i),l=xw(i),v=Pw(a,c,l),d=Hw(v),g=Nw(a,c,l),y=bt(a.components),S=function(re){n.set(re)},T=function(){n.set(md(t))},k=function(){var re=E(d),ne=mt(re,function(U){return n.get().getByDom(U).fold(function(){return[]},ir)});y.set(ne)},D=function(re){var ne=l,U=tt(ne[re.name()])?ne[re.name()]:function(){throw new Error("Could not find "+re.name()+" in "+JSON.stringify(e,null,2))};return U()},H=function(re){return tt(l[re.name()])},V=function(){return a.apis},z=function(re){return l[re]().map(function(ne){return ne.state.readState()}).getOr("not enabled")},W={uid:e.uid,getSystem:n.get,config:D,hasConfigured:H,spec:e,readState:z,getApis:V,connect:S,disconnect:T,element:d,syncComponents:k,components:y.get,events:g};return W},H1=function(e){var t=ct(e,"components").getOr([]);return Se(t,ea)},I1=function(e){var t=Og(e),n=t.events,a=_(t,["events"]),i=H1(a),c=L(L({},a),{events:L(L({},mw),n),components:i});return Ut.value(F1(c))},es=function(e){var t=$.fromText(e);return pd({element:t})},pd=function(e){var t=ya("external.component",Ho([de("element"),kn("uid")]),e),n=bt(md()),a=function(v){n.set(v)},i=function(){n.set(md(function(){return l}))},c=t.uid.getOrThunk(function(){return Nl("external")});Tg(t.element,c);var l={uid:c,getSystem:n.get,config:p.none,hasConfigured:Le,connect:a,disconnect:i,getApis:function(){return{}},element:t.element,spec:e,readState:j("No state"),syncComponents:be,components:j([]),events:{}};return O1(l)},Dg=Nl,Ui=function(e){return pn(e,"uid")},ea=function(e){return k1(e).getOrThunk(function(){var t=Ui(e)?e:L({uid:Dg("")},e);return I1(t).getOrDie()})},xi=O1;function Wl(e,t,n,a,i){return e(n,a)?p.some(n):tt(i)&&i(n)?p.none():t(n,a,i)}var $1=function(e,t,n){for(var a=e.dom,i=tt(n)?n:Le;a.parentNode;){a=a.parentNode;var c=$.fromDom(a);if(t(c))return p.some(c);if(i(c))break}return p.none()},L1=function(e,t,n){var a=function(i,c){return c(i)};return Wl(a,$1,e,t,n)},Vw=function(e,t){var n=function(i){return t($.fromDom(i))},a=Z(e.dom.childNodes,n);return a.map($.fromDom)},Uw=function(e,t){var n=function(a){for(var i=0;i<a.childNodes.length;i++){var c=$.fromDom(a.childNodes[i]);if(t(c))return p.some(c);var l=n(a.childNodes[i]);if(l.isSome())return l}return p.none()};return n(e.dom)},P1=function(e,t,n){return L1(e,t,n).isSome()},bd=function(e,t,n){return $1(e,function(a){return Tn(a,t)},n)},Ww=function(e,t){return Vw(e,function(n){return Tn(n,t)})},ta=function(e,t){return Df(t,e)},Ci=function(e,t,n){var a=function(i,c){return Tn(i,c)};return Wl(a,bd,e,t,n)},jw=function(e){var t=L1(e,function(n){if(!Dn(n))return!1;var a=pa(n,"id");return a!==void 0&&a.indexOf("aria-owns")>-1});return t.bind(function(n){var a=pa(n,"id"),i=sa(n);return ta(i,'[aria-owns="'+a+'"]')})},N1=function(){var e=rt("aria-owns"),t=function(a){Vt(a,"aria-owns",e)},n=function(a){ba(a,"aria-owns")};return{id:e,link:t,unlink:n}},Gw=function(e,t){return jw(t).exists(function(n){return Us(e,n)})},Us=function(e,t){return P1(t,function(n){return Wn(n,e.element)},Le)||Gw(e,t)},V1="unknown",jl;(function(e){e[e.STOP=0]="STOP",e[e.NORMAL=1]="NORMAL",e[e.LOGGING=2]="LOGGING"})(jl||(jl={}));var _g=bt({}),qw=function(e,t){var n=[],a=new Date().getTime();return{logEventCut:function(i,c,l){n.push({outcome:"cut",target:c,purpose:l})},logEventStopped:function(i,c,l){n.push({outcome:"stopped",target:c,purpose:l})},logNoParent:function(i,c,l){n.push({outcome:"no-parent",target:c,purpose:l})},logEventNoHandlers:function(i,c){n.push({outcome:"no-handlers-left",target:c})},logEventResponse:function(i,c,l){n.push({outcome:"response",purpose:l,target:c})},write:function(){var i=new Date().getTime();It(["mousemove","mouseover","mouseout",Hl()],e)||console.log(e,{event:e,time:i-a,target:t.dom,sequence:Se(n,function(c){return It(["cut","stopped","response"],c.outcome)?"{"+c.purpose+"} "+c.outcome+" at ("+oi(c.target)+")":c.outcome})})}}},U1=function(e,t,n){var a=ct(_g.get(),e).orThunk(function(){var l=Zn(_g.get());return qn(l,function(v){return e.indexOf(v)>-1?p.some(_g.get()[v]):p.none()})}).getOr(jl.NORMAL);switch(a){case jl.NORMAL:return n(Jw());case jl.LOGGING:{var i=qw(e,t),c=n(i);return i.write(),c}case jl.STOP:return!0}},Kw=["alloy/data/Fields","alloy/debugging/Debugging"],Xw=function(){var e=new Error;if(e.stack!==void 0){var t=e.stack.split(`
`);return Z(t,function(n){return n.indexOf("alloy")>0&&!Hn(Kw,function(a){return n.indexOf(a)>-1})}).getOr(V1)}else return V1},Yw={logEventCut:be,logEventStopped:be,logNoParent:be,logEventNoHandlers:be,logEventResponse:be,write:be},zg=function(e,t,n){return U1(e,t,n)},Jw=j(Yw),Ws=j([de("menu"),de("selectedMenu")]),js=j([de("item"),de("selectedItem")]);j(pt(js().concat(Ws())));var Rg=j(pt(js())),Zw=mc("initSize",[de("numColumns"),de("numRows")]),Qw=function(){return To("markers",Rg())},Gs=function(){return mc("markers",[de("backgroundMenu")].concat(Ws()).concat(js()))},qs=function(e){return mc("markers",Se(e,de))},yd=function(e,t,n){return Xw(),Qr(t,t,n,Vf(function(a){return Ut.value(function(){for(var i=[],c=0;c<arguments.length;c++)i[c]=arguments[c];return a.apply(void 0,i)})}))},An=function(e){return yd("onHandler",e,ln(be))},na=function(e){return yd("onKeyboardHandler",e,ln(p.none))},Ks=function(e){return yd("onHandler",e,Dt())},Bg=function(e){return yd("onKeyboardHandler",e,Dt())},Jn=function(e,t){return uo(e,j(t))},Fg=function(e){return uo(e,je)},W1=j(Zw),xa=function(e,t,n,a,i,c,l,v){return v===void 0&&(v=!1),{x:e,y:t,bubble:n,direction:a,placement:i,restriction:c,label:l+"-"+i,alwaysFit:v}},ts=ri.generate([{southeast:[]},{southwest:[]},{northeast:[]},{northwest:[]},{south:[]},{north:[]},{east:[]},{west:[]}]),e3=function(e,t,n,a,i,c,l,v,d){return e.fold(t,n,a,i,c,l,v,d)},t3=function(e,t,n,a){return e.fold(t,t,a,a,t,a,n,n)},n3=function(e,t,n,a){return e.fold(t,a,t,a,n,n,t,a)},wd=ts.southeast,Hg=ts.southwest,Ig=ts.northeast,Sd=ts.northwest,Xf=ts.south,$g=ts.north,j1=ts.east,Yf=ts.west,Gl=function(e,t,n,a){var i=e+t;return i>a?n:i<n?a:i},Ti=function(e,t,n){return Math.min(Math.max(e,t),n)},r3=function(e,t){switch(t){case 1:return e.x;case 0:return e.x+e.width;case 2:return e.y;case 3:return e.y+e.height}},_a=function(e,t){return cr(["left","right","top","bottom"],function(n){return ct(t,n).map(function(a){return r3(e,a)})})},Lg=function(e,t,n){var a=function(d,g){return t[d].map(function(y){var S=d==="top"||d==="bottom",T=S?n.top:n.left,k=d==="left"||d==="top"?Math.max:Math.min,D=k(y,g)+T;return S?Ti(D,e.y,e.bottom):Ti(D,e.x,e.right)}).getOr(g)},i=a("left",e.x),c=a("top",e.y),l=a("right",e.right),v=a("bottom",e.bottom);return Zr(i,c,l-i,v-c)},wc="layout",Pg=function(e){return e.x},Ng=function(e,t){return e.x+e.width/2-t.width/2},G1=function(e,t){return e.x+e.width-t.width},Vg=function(e,t){return e.y-t.height},Jf=function(e){return e.y+e.height},Ug=function(e,t){return e.y+e.height/2-t.height/2},a3=function(e){return e.x+e.width},o3=function(e,t){return e.x-t.width},La=function(e,t,n){return xa(Pg(e),Jf(e),n.southeast(),wd(),"southeast",_a(e,{left:1,top:3}),wc)},la=function(e,t,n){return xa(G1(e,t),Jf(e),n.southwest(),Hg(),"southwest",_a(e,{right:0,top:3}),wc)},co=function(e,t,n){return xa(Pg(e),Vg(e,t),n.northeast(),Ig(),"northeast",_a(e,{left:1,bottom:2}),wc)},ko=function(e,t,n){return xa(G1(e,t),Vg(e,t),n.northwest(),Sd(),"northwest",_a(e,{right:0,bottom:2}),wc)},Lo=function(e,t,n){return xa(Ng(e,t),Vg(e,t),n.north(),$g(),"north",_a(e,{bottom:2}),wc)},Pa=function(e,t,n){return xa(Ng(e,t),Jf(e),n.south(),Xf(),"south",_a(e,{top:3}),wc)},Wg=function(e,t,n){return xa(a3(e),Ug(e,t),n.east(),j1(),"east",_a(e,{left:0}),wc)},jg=function(e,t,n){return xa(o3(e,t),Ug(e,t),n.west(),Yf(),"west",_a(e,{right:1}),wc)},q1=function(){return[La,la,co,ko,Pa,Lo,Wg,jg]},K1=function(){return[la,La,ko,co,Pa,Lo,Wg,jg]},X1=function(){return[co,ko,La,la,Lo,Pa]},Gg=function(){return[ko,co,la,La,Lo,Pa]},xd=function(){return[La,la,co,ko,Pa,Lo]},qg=function(){return[la,La,ko,co,Pa,Lo]},i3=function(e,t){return t.universal?e:Ce(e,function(n){return It(t.channels,n)})},u3=function(e){return rr([we(Es(),function(t,n){var a=e.channels,i=Zn(a),c=n,l=i3(i,c);Ke(l,function(v){var d=a[v],g=d.schema,y=ya("channel["+v+`] data
Receiver: `+oi(t.element),g,c.data);d.onReceive(t,y)})})])},c3=Object.freeze({__proto__:null,events:u3}),Vu=[To("channels",t1(Ut.value,Ho([Ks("onReceive"),K("schema",Pi())])))],Cd=function(e,t,n){return du(function(a){n(a,e,t)})},ra=function(e,t,n){return sw(function(a,i){n(a,e,t)})},s3=function(e,t,n,a,i,c){var l=Ho(e),v=$o(t,[Ky("config",e)]);return Y1(l,v,t,n,a,i,c)},l3=function(e,t,n,a,i,c){var l=e,v=$o(t,[qc("config",e)]);return Y1(l,v,t,n,a,i,c)},Kg=function(e,t,n){var a=function(i){for(var c=[],l=1;l<arguments.length;l++)c[l-1]=arguments[l];var v=[i].concat(c);return i.config({name:j(e)}).fold(function(){throw new Error("We could not find any behaviour configuration for: "+e+". Using API: "+n)},function(d){var g=Array.prototype.slice.call(v,1);return t.apply(void 0,[i,d.config,d.state].concat(g))})};return Ls(a,n,t)},f3=function(e){return{key:e,value:void 0}},Y1=function(e,t,n,a,i,c,l){var v=function(S){return mr(S,n)?S[n]():p.none()},d=Qn(i,function(S,T){return Kg(n,S,T)}),g=Qn(c,function(S,T){return Ps(S,T)}),y=L(L(L({},g),d),{revoke:Pn(f3,n),config:function(S){var T=ya(n+"-config",e,S);return{key:n,value:{config:T,me:y,configAsRaw:ia(function(){return ya(n+"-config",e,S)}),initialConfig:S,state:l}}},schema:j(t),exhibit:function(S,T){return vi(v(S),ct(a,"exhibit"),function(k,D){return D(T,k.config,k.state)}).getOrThunk(function(){return Vi({})})},name:j(n),handlers:function(S){return v(S).map(function(T){var k=ct(a,"events").getOr(function(){return{}});return k(T.config,T.state)}).getOr({})}});return y},Be=function(e){return Xc(e)},v3=Ho([de("fields"),de("name"),K("active",{}),K("apis",{}),K("state",ii),K("extra",{})]),fa=function(e){var t=ya("Creating behaviour: "+e.name,v3,e);return s3(t.fields,t.name,t.active,t.apis,t.extra,t.state)},Xg=Ho([de("branchKey"),de("branches"),de("name"),K("active",{}),K("apis",{}),K("state",ii),K("extra",{})]),Yg=function(e){var t=ya("Creating behaviour: "+e.name,Xg,e);return l3(yi(t.branchKey,t.branches),t.name,t.active,t.apis,t.extra,t.state)},J1=j(void 0),ui=fa({fields:Vu,name:"receiving",active:c3}),Jg=function(e,t){return Vi({classes:[],styles:t.useFixed()?{}:{position:"relative"}})},Zg=Object.freeze({__proto__:null,exhibit:Jg}),Z1=function(){return $.fromDom(document)},Sc=function(e){return e.dom.focus()},Qg=function(e){return e.dom.blur()},Td=function(e){var t=sa(e).dom;return e.dom===t.activeElement},Po=function(e){return e===void 0&&(e=Z1()),p.from(e.dom.activeElement).map($.fromDom)},gu=function(e){return Po(sa(e)).filter(function(t){return e.dom.contains(t.dom)})},Q1=function(e,t){var n=sa(t),a=Po(n).bind(function(c){var l=function(v){return Wn(c,v)};return l(t)?p.some(t):Uw(t,l)}),i=e(t);return a.each(function(c){Po(n).filter(function(l){return Wn(l,c)}).fold(function(){Sc(c)},be)}),i},so=function(e,t,n,a,i){var c=function(l){return l+"px"};return{position:e,left:t.map(c),top:n.map(c),right:a.map(c),bottom:i.map(c)}},eh=function(e){return L(L({},e),{position:p.some(e.position)})},e0=function(e,t){Ar(e,eh(t))},Zf=ri.generate([{none:[]},{relative:["x","y","width","height"]},{fixed:["x","y","width","height"]}]),Qf=function(e,t,n,a,i,c){var l=t.rect,v=l.x-n,d=l.y-a,g=l.width,y=l.height,S=i-(v+g),T=c-(d+y),k=p.some(v),D=p.some(d),H=p.some(S),V=p.some(T),z=p.none();return e3(t.direction,function(){return so(e,k,D,z,z)},function(){return so(e,z,D,H,z)},function(){return so(e,k,z,z,V)},function(){return so(e,z,z,H,V)},function(){return so(e,k,D,z,z)},function(){return so(e,k,z,z,V)},function(){return so(e,k,D,z,z)},function(){return so(e,z,D,H,z)})},ql=function(e,t){return e.fold(function(){var n=t.rect;return so("absolute",p.some(n.x),p.some(n.y),p.none(),p.none())},function(n,a,i,c){return Qf("absolute",t,n,a,i,c)},function(n,a,i,c){return Qf("fixed",t,n,a,i,c)})},Kl=function(e,t){var n=Pn(Ka,t),a=e.fold(n,n,function(){var l=Zo();return Ka(t).translate(-l.left,-l.top)}),i=io(t),c=bi(t);return Zr(a.left,a.top,i,c)},d3=function(e,t){return t.fold(function(){return e.fold(Xa,Xa,Zr)},function(n){return e.fold(n,n,function(){var a=n(),i=t0(e,a.x,a.y);return Zr(i.left,i.top,a.width,a.height)})})},t0=function(e,t,n){var a=Yn(t,n),i=function(){var c=Zo();return a.translate(-c.left,-c.top)};return e.fold(j(a),j(a),i)},n0=function(e,t,n,a){return e.fold(t,n,a)};Zf.none;var th=Zf.relative,r0=Zf.fixed,a0=function(e,t){return{anchorBox:e,origin:t}},o0=function(e,t){return a0(e,t)},nh="data-alloy-placement",i0=function(e,t){Vt(e,nh,t)},rh=function(e){return ja(e,nh)},u0=function(e){return ba(e,nh)},Xs=ri.generate([{fit:["reposition"]},{nofit:["reposition","visibleW","visibleH","isVisible"]}]),m3=function(e,t){var n=t.x,a=t.y,i=t.right,c=t.bottom,l=e.x,v=e.y,d=e.right,g=e.bottom,y=e.width,S=e.height,T=l>=n&&l<=i,k=v>=a&&v<=c,D=T&&k,H=d<=i&&d>=n,V=g<=c&&g>=a,z=H&&V,W=Math.min(y,l>=n?i-l:d-n),re=Math.min(S,v>=a?c-v:g-a);return{originInBounds:D,sizeInBounds:z,visibleW:W,visibleH:re}},g3=function(e,t){var n=t.x,a=t.y,i=t.right,c=t.bottom,l=e.x,v=e.y,d=e.width,g=e.height,y=Math.max(n,i-d),S=Math.max(a,c-g),T=Ti(l,n,y),k=Ti(v,a,S),D=Math.min(T+d,i)-T,H=Math.min(k+g,c)-k;return Zr(T,k,D,H)},h3=function(e,t,n){var a=j(t.bottom-n.y),i=j(n.bottom-t.y),c=t3(e,i,i,a),l=j(t.right-n.x),v=j(n.right-t.x),d=n3(e,v,v,l);return{maxWidth:d,maxHeight:c}},ev=function(e,t,n,a){var i=e.bubble,c=i.offset,l=Lg(a,e.restriction,c),v=e.x+c.left,d=e.y+c.top,g=Zr(v,d,t,n),y=m3(g,l),S=y.originInBounds,T=y.sizeInBounds,k=y.visibleW,D=y.visibleH,H=S&&T,V=H?g:g3(g,l),z=V.width>0&&V.height>0,W=h3(e.direction,V,a),re=W.maxWidth,ne=W.maxHeight,U={rect:V,maxHeight:ne,maxWidth:re,direction:e.direction,placement:e.placement,classes:{on:i.classesOn,off:i.classesOff},layout:e.label,testY:d};return H||e.alwaysFit?Xs.fit(U):Xs.nofit(U,k,D,z)},ah=function(e,t,n,a,i,c){var l=a.width,v=a.height,d=function(y,S,T,k,D){var H=y(n,a,i,e,c),V=ev(H,l,v,c);return V.fold(j(V),function(z,W,re,ne){var U=D===ne?re>k||W>T:!D&&ne;return U?V:Xs.nofit(S,T,k,D)})},g=ce(t,function(y,S){var T=Pn(d,S);return y.fold(j(y),T)},Xs.nofit({rect:n,maxHeight:a.height,maxWidth:a.width,direction:wd(),placement:"southeast",classes:{on:[],off:[]},layout:"none",testY:n.y},-1,-1,!1));return g.fold(je,je)},Od=function(e){var t=bt(p.none()),n=function(){return t.get().each(e)},a=function(){n(),t.set(p.none())},i=function(){return t.get().isSome()},c=function(){return t.get()},l=function(v){n(),t.set(p.some(v))};return{clear:a,isSet:i,get:c,set:l}},c0=function(){return Od(function(e){return e.destroy()})},Xl=function(){return Od(function(e){return e.unbind()})},p3=function(){var e=c0(),t=function(n){return e.get().each(n)};return L(L({},e),{run:t})},Fr=function(){var e=Od(be),t=function(n){return e.get().each(n)};return L(L({},e),{on:t})},kd=qe,Vr=function(e,t,n){return jv(e,t,kd,n)},Ad=function(e,t,n){return Ol(e,t,kd,n)},Yl=Li,oh=["top","bottom","right","left"],tv="data-alloy-transition-timer",s0=function(e,t){return B1(e,t.classes)},b3=function(e,t,n){return n.exists(function(a){var i=e.mode;return i==="all"?!0:a[i]!==t[i]})},y3=function(e,t){var n=function(a){return parseFloat(a).toFixed(3)};return yn(t,function(a,i){var c=e[i].map(n),l=a.map(n);return!Go(c,l)}).isSome()},w3=function(e){var t=function(c){var l=Ga(e,c),v=dt(l)?l.split(/\s*,\s*/):[];return Ce(v,_o)},n=function(c){if(dt(c)&&/^[\d.]+/.test(c)){var l=parseFloat(c);return Do(c,"ms")?l:l*1e3}else return 0},a=t("transition-delay"),i=t("transition-duration");return ce(i,function(c,l,v){var d=n(a[v])+n(l);return Math.max(c,d)},0)},S3=function(e,t){var n=Xl(),a=Xl(),i,c=function(y){var S,T=(S=y.raw.pseudoElement)!==null&&S!==void 0?S:"";return Wn(y.target,e)&&Ma(T)&&It(oh,y.raw.propertyName)},l=function(y){if(Lt(y)||c(y)){n.clear(),a.clear();var S=y==null?void 0:y.raw.type;(Lt(S)||S===Fl())&&(clearTimeout(i),ba(e,tv),Pu(e,t.classes))}},v=function(){n.set(Vr(e,Fl(),l)),a.set(Vr(e,rw(),l))};if("ontransitionstart"in e.dom)var d=Vr(e,aw(),function(y){c(y)&&(d.unbind(),v())});else v();var g=w3(e);requestAnimationFrame(function(){i=setTimeout(l,g+17),Vt(e,tv,i)})},Md=function(e,t){Vs(e,t.classes),ja(e,tv).each(function(n){clearTimeout(parseInt(n,10)),ba(e,tv)}),S3(e,t)},Ed=function(e,t,n,a,i,c){var l=b3(a,i,c);if(l||s0(e,a)){_t(e,"position",n.position);var v=Kl(t,e),d=ql(t,L(L({},i),{rect:v})),g=cr(oh,function(y){return d[y]});y3(n,g)&&(Ar(e,g),l&&Md(e,a),ur(e))}else Pu(e,a.classes)},x3=function(e){return{width:io(e),height:bi(e)}},l0=function(e,t,n,a){zn(t,"max-height"),zn(t,"max-width");var i=x3(t);return ah(t,a.preference,e,i,n,a.bounds)},ih=function(e,t){var n=t.classes;Pu(e,n.off),Vs(e,n.on)},C3=function(e,t,n){var a=n.maxHeightFunction;a(e,t.maxHeight)},T3=function(e,t,n){var a=n.maxWidthFunction;a(e,t.maxWidth)},uh=function(e,t,n){var a=ql(n.origin,t);n.transition.each(function(i){Ed(e,n.origin,a,i,t,n.lastPlacement)}),e0(e,a)},ch=function(e,t){i0(e,t.placement)},sh=function(e,t){Km(e,Math.floor(t))},f0=j(function(e,t){sh(e,t),Bo(e,{"overflow-x":"hidden","overflow-y":"auto"})}),Jl=j(function(e,t){sh(e,t)}),v0=function(e,t,n){return e[t]===void 0?n:e[t]},O3=function(e,t,n,a,i,c,l,v){var d=v0(l,"maxHeightFunction",f0()),g=v0(l,"maxWidthFunction",be),y=e.anchorBox,S=e.origin,T={bounds:d3(S,c),origin:S,preference:a,maxHeightFunction:d,maxWidthFunction:g,lastPlacement:i,transition:v};return nv(y,t,n,T)},nv=function(e,t,n,a){var i=l0(e,t,n,a);return uh(t,i,a),ch(t,i),ih(t,i),C3(t,i,a),T3(t,i,a),{layout:i.layout,placement:i.placement}},rv=["valignCentre","alignLeft","alignRight","alignCentre","top","bottom","left","right","inset"],Ys=function(e,t,n,a){a===void 0&&(a=1);var i=e*a,c=t*a,l=function(d){return ct(n,d).getOr([])},v=function(d,g,y){var S=cn(rv,y);return{offset:Yn(d,g),classesOn:mt(y,l),classesOff:mt(S,l)}};return{southeast:function(){return v(-e,t,["top","alignLeft"])},southwest:function(){return v(e,t,["top","alignRight"])},south:function(){return v(-e/2,t,["top","alignCentre"])},northeast:function(){return v(-e,-t,["bottom","alignLeft"])},northwest:function(){return v(e,-t,["bottom","alignRight"])},north:function(){return v(-e/2,-t,["bottom","alignCentre"])},east:function(){return v(e,-t/2,["valignCentre","left"])},west:function(){return v(-e,-t/2,["valignCentre","right"])},insetNortheast:function(){return v(i,c,["top","alignLeft","inset"])},insetNorthwest:function(){return v(-i,c,["top","alignRight","inset"])},insetNorth:function(){return v(-i/2,c,["top","alignCentre","inset"])},insetSoutheast:function(){return v(i,-c,["bottom","alignLeft","inset"])},insetSouthwest:function(){return v(-i,-c,["bottom","alignRight","inset"])},insetSouth:function(){return v(-i/2,-c,["bottom","alignCentre","inset"])},insetEast:function(){return v(-i,-c/2,["valignCentre","right","inset"])},insetWest:function(){return v(i,-c/2,["valignCentre","left","inset"])}}},Dd=function(){return Ys(0,0,{})},_d=je,lh=function(e,t){return function(n){return k3(n)==="rtl"?t:e}},k3=function(e){return Ga(e,"direction")==="rtl"?"rtl":"ltr"},xc;(function(e){e.TopToBottom="toptobottom",e.BottomToTop="bottomtotop"})(xc||(xc={}));var zd="data-alloy-vertical-dir",A3=function(e){return P1(e,function(t){return Dn(t)&&pa(t,"data-alloy-vertical-dir")===xc.BottomToTop})},ns=function(){return $o("layouts",[de("onLtr"),de("onRtl"),kn("onBottomLtr"),kn("onBottomRtl")])},rs=function(e,t,n,a,i,c,l){var v=l.map(A3).getOr(!1),d=t.layouts.map(function(k){return k.onLtr(e)}),g=t.layouts.map(function(k){return k.onRtl(e)}),y=v?t.layouts.bind(function(k){return k.onBottomLtr.map(function(D){return D(e)})}).or(d).getOr(i):d.getOr(n),S=v?t.layouts.bind(function(k){return k.onBottomRtl.map(function(D){return D(e)})}).or(g).getOr(c):g.getOr(a),T=lh(y,S);return T(e)},M3=function(e,t,n){var a=t.hotspot,i=Kl(n,a.element),c=rs(e.element,t,xd(),qg(),X1(),Gg(),p.some(t.hotspot.element));return p.some(_d({anchorBox:i,bubble:t.bubble.getOr(Dd()),overrides:t.overrides,layouts:c,placer:p.none()}))},Rd=[de("hotspot"),kn("bubble"),K("overrides",{}),ns(),Jn("placement",M3)],fh=function(e,t,n){var a=t0(n,t.x,t.y),i=Zr(a.left,a.top,t.width,t.height),c=rs(e.element,t,q1(),K1(),q1(),K1(),p.none());return p.some(_d({anchorBox:i,bubble:t.bubble,overrides:t.overrides,layouts:c,placer:p.none()}))},vh=[de("x"),de("y"),K("height",0),K("width",0),K("bubble",Dd()),K("overrides",{}),ns(),Jn("placement",fh)],Ca=ri.generate([{screen:["point"]},{absolute:["point","scrollLeft","scrollTop"]}]),E3=function(e){return e.fold(je,function(t,n,a){return t.translate(-n,-a)})},dh=function(e){return e.fold(je,je)},d0=function(e){return ce(e,function(t,n){return t.translate(n.left,n.top)},Yn(0,0))},D3=function(e){var t=Se(e,E3);return d0(t)},hu=function(e){var t=Se(e,dh);return d0(t)},Cc=Ca.screen,_3=Ca.absolute,m0=function(e,t,n){var a=ic(n.root).dom,i=function(c){var l=Br(c),v=Br(e.element);return Wn(l,v)};return p.from(a.frameElement).map($.fromDom).filter(i).map(cu)},mh=function(e,t,n){var a=Br(e.element),i=Zo(a),c=m0(e,t,n).getOr(i);return _3(c,i.left,i.top)},gh=function(e,t,n,a){var i=Cc(Yn(e,t));return p.some(ei(i,n,a))},g0=function(e,t,n,a,i){return e.map(function(c){var l=[t,c.point],v=n0(a,function(){return hu(l)},function(){return hu(l)},function(){return D3(l)}),d=Ea(v.left,v.top,c.width,c.height),g=n.showAbove?X1():xd(),y=n.showAbove?Gg():qg(),S=rs(i,n,g,y,g,y,p.none());return _d({anchorBox:d,bubble:n.bubble.getOr(Dd()),overrides:n.overrides,layouts:S,placer:p.none()})})},h0=function(e,t,n){var a=mh(e,n,t);return t.node.filter(kr).bind(function(i){var c=i.dom.getBoundingClientRect(),l=gh(c.left,c.top,c.width,c.height),v=t.node.getOr(e.element);return g0(l,a,t,n,v)})},z3=[de("node"),de("root"),kn("bubble"),ns(),K("overrides",{}),K("showAbove",!1),Jn("placement",h0)],R3="\uFEFF",B3="",Zl=function(e,t,n,a){return{start:e,soffset:t,finish:n,foffset:a}},Js={create:Zl},hh=ri.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),p0=function(e,t,n,a){return e.fold(t,n,a)},F3=function(e){return e.fold(je,je,je)},b0=hh.before,y0=hh.on,ph=hh.after,H3={before:b0,on:y0,after:ph,cata:p0,getStart:F3},Bd=ri.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),I3=function(e){return Bd.exact(e.start,e.soffset,e.finish,e.foffset)},av=function(e){return e.match({domRange:function(t){return $.fromDom(t.startContainer)},relative:function(t,n){return H3.getStart(t)},exact:function(t,n,a,i){return t}})},$3=Bd.domRange,L3=Bd.relative,P3=Bd.exact,w0=function(e){var t=av(e);return ic(t)},N3=Js.create,Ql={domRange:$3,relative:L3,exact:P3,exactFromRange:I3,getWin:w0,range:N3},S0=function(e,t){t.fold(function(n){e.setStartBefore(n.dom)},function(n,a){e.setStart(n.dom,a)},function(n){e.setStartAfter(n.dom)})},V3=function(e,t){t.fold(function(n){e.setEndBefore(n.dom)},function(n,a){e.setEnd(n.dom,a)},function(n){e.setEndAfter(n.dom)})},bh=function(e,t,n){var a=e.document.createRange();return S0(a,t),V3(a,n),a},x0=function(e,t,n,a,i){var c=e.document.createRange();return c.setStart(t.dom,n),c.setEnd(a.dom,i),c},yh=function(e){return{left:e.left,top:e.top,right:e.right,bottom:e.bottom,width:e.width,height:e.height}},U3=function(e){var t=e.getClientRects(),n=t.length>0?t[0]:e.getBoundingClientRect();return n.width>0||n.height>0?p.some(n).map(yh):p.none()},W3=function(e){var t=e.getBoundingClientRect();return t.width>0||t.height>0?p.some(t).map(yh):p.none()},ov=ri.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),C0=function(e,t,n){return t($.fromDom(n.startContainer),n.startOffset,$.fromDom(n.endContainer),n.endOffset)},T0=function(e,t){return t.match({domRange:function(n){return{ltr:j(n),rtl:p.none}},relative:function(n,a){return{ltr:ia(function(){return bh(e,n,a)}),rtl:ia(function(){return p.some(bh(e,a,n))})}},exact:function(n,a,i,c){return{ltr:ia(function(){return x0(e,n,a,i,c)}),rtl:ia(function(){return p.some(x0(e,i,c,n,a))})}}})},j3=function(e,t){var n=t.ltr();if(n.collapsed){var a=t.rtl().filter(function(i){return i.collapsed===!1});return a.map(function(i){return ov.rtl($.fromDom(i.endContainer),i.endOffset,$.fromDom(i.startContainer),i.startOffset)}).getOrThunk(function(){return C0(e,ov.ltr,n)})}else return C0(e,ov.ltr,n)},G3=function(e,t){var n=T0(e,t);return j3(e,n)},wh=function(e,t){var n=G3(e,t);return n.match({ltr:function(a,i,c,l){var v=e.document.createRange();return v.setStart(a.dom,i),v.setEnd(c.dom,l),v},rtl:function(a,i,c,l){var v=e.document.createRange();return v.setStart(c.dom,l),v.setEnd(a.dom,i),v}})};ov.ltr,ov.rtl;var q3=function(e,t){var n=function(c){if(!e(c))throw new Error("Can only get "+t+" value of a "+t+" node");return a(c).getOr("")},a=function(c){return e(c)?p.from(c.dom.nodeValue):p.none()},i=function(c,l){if(!e(c))throw new Error("Can only set raw "+t+" value of a "+t+" node");c.dom.nodeValue=l};return{get:n,getOption:a,set:i}},O0=q3(Rr,"text"),k0=function(e){return O0.get(e)},Fd=function(e){return O0.getOption(e)},A0=function(e){return Et(e)==="img"?1:Fd(e).fold(function(){return E(e).length},function(t){return t.length})},K3=function(e){return Fd(e).filter(function(t){return t.trim().length!==0||t.indexOf(B3)>-1}).isSome()},M0=["img","br"],X3=function(e){var t=K3(e);return t||It(M0,Et(e))},E0=function(e){return ef(e,X3)},ef=function(e,t){var n=function(a){for(var i=E(a),c=i.length-1;c>=0;c--){var l=i[c];if(t(l))return p.some(l);var v=n(l);if(v.isSome())return v}return p.none()};return n(e)},Za=function(e,t){return Pc(t,e)},D0=function(e,t,n,a){var i=Br(e),c=i.dom.createRange();return c.setStart(e.dom,t),c.setEnd(n.dom,a),c},_0=function(e,t,n,a){var i=D0(e,t,n,a),c=Wn(e,n)&&t===a;return i.collapsed&&!c},Y3=function(e){return p.from(e.getSelection())},z0=function(e){if(e.rangeCount>0){var t=e.getRangeAt(0),n=e.getRangeAt(e.rangeCount-1);return p.some(Js.create($.fromDom(t.startContainer),t.startOffset,$.fromDom(n.endContainer),n.endOffset))}else return p.none()},J3=function(e){if(e.anchorNode===null||e.focusNode===null)return z0(e);var t=$.fromDom(e.anchorNode),n=$.fromDom(e.focusNode);return _0(t,e.anchorOffset,n,e.focusOffset)?p.some(Js.create(t,e.anchorOffset,n,e.focusOffset)):z0(e)},R0=function(e){return Y3(e).filter(function(t){return t.rangeCount>0}).bind(J3)},B0=function(e,t){var n=wh(e,t);return U3(n)},No=function(e,t){var n=wh(e,t);return W3(n)},Hd=function(e,t){return{element:e,offset:t}},Z3=function(e,t){var n=E(e);if(n.length===0)return Hd(e,t);if(t<n.length)return Hd(n[t],0);var a=n[n.length-1],i=Rr(a)?k0(a).length:E(a).length;return Hd(a,i)},F0=function(e,t){return Rr(e)?Hd(e,t):Z3(e,t)},H0=function(e,t){var n=t.getSelection.getOrThunk(function(){return function(){return R0(e)}});return n().map(function(a){var i=F0(a.start,a.soffset),c=F0(a.finish,a.foffset);return Ql.range(i.element,i.offset,c.element,c.offset)})},Sh=function(e,t,n){var a=ic(t.root).dom,i=mh(e,n,t),c=H0(a,t).bind(function(d){var g=No(a,Ql.exactFromRange(d)).orThunk(function(){var y=$.fromText(R3);lc(d.start,y);var S=B0(a,Ql.exact(y,0,y,1));return Jo(y),S});return g.bind(function(y){return gh(y.left,y.top,y.width,y.height)})}),l=H0(a,t).bind(function(d){return Dn(d.start)?p.some(d.start):Sl(d.start)}),v=l.getOr(e.element);return g0(c,i,t,n,v)},xh=[kn("getSelection"),de("root"),kn("bubble"),ns(),K("overrides",{}),K("showAbove",!1),Jn("placement",Sh)],Id="link-layout",I0=function(e){return e.x+e.width},$0=function(e,t){return e.x-t.width},Ch=function(e,t){return e.y-t.height+e.height},Th=function(e){return e.y},iv=function(e,t,n){return xa(I0(e),Th(e),n.southeast(),wd(),"southeast",_a(e,{left:0,top:2}),Id)},L0=function(e,t,n){return xa($0(e,t),Th(e),n.southwest(),Hg(),"southwest",_a(e,{right:1,top:2}),Id)},P0=function(e,t,n){return xa(I0(e),Ch(e,t),n.northeast(),Ig(),"northeast",_a(e,{left:0,bottom:3}),Id)},lo=function(e,t,n){return xa($0(e,t),Ch(e,t),n.northwest(),Sd(),"northwest",_a(e,{right:1,bottom:3}),Id)},uv=function(){return[iv,L0,P0,lo]},N0=function(){return[L0,iv,lo,P0]},Q3=function(e,t,n){var a=Kl(n,t.item.element),i=rs(e.element,t,uv(),N0(),uv(),N0(),p.none());return p.some(_d({anchorBox:a,bubble:Dd(),overrides:t.overrides,layouts:i,placer:p.none()}))},e4=[de("item"),ns(),K("overrides",{}),Jn("placement",Q3)],t4=yi("type",{selection:xh,node:z3,hotspot:Rd,submenu:e4,makeshift:vh}),n4=[Io("classes",jr),gc("mode","all",["all","layout","placement"])],r4=[K("useFixed",Le),kn("getBounds")],a4=[To("anchor",t4),$o("transition",n4)],o4=function(){var e=document.documentElement;return r0(0,0,e.clientWidth,e.clientHeight)},Oh=function(e){var t=cu(e.element),n=e.element.dom.getBoundingClientRect();return th(t.left,t.top,n.width,n.height)},i4=function(e,t,n,a,i,c,l){var v=o0(n.anchorBox,t);return O3(v,i.element,n.bubble,n.layouts,c,a,n.overrides,l)},u4=function(e,t,n,a,i){V0(e,t,n,a,i,p.none())},V0=function(e,t,n,a,i,c){var l=c.map(Da);return U0(e,t,n,a,i,l)},U0=function(e,t,n,a,i,c){var l=ya("placement.info",pt(a4),i),v=l.anchor,d=a.element,g=n.get(a.uid);Q1(function(){_t(d,"position","fixed");var y=Lr(d,"visibility");_t(d,"visibility","hidden");var S=t.useFixed()?o4():Oh(e),T=v.placement,k=c.map(j).or(t.getBounds);T(e,v,S).each(function(D){var H=D.placer.getOr(i4),V=H(e,S,D,k,a,g,l.transition);n.set(a.uid,V)}),y.fold(function(){zn(d,"visibility")},function(D){_t(d,"visibility",D)}),Lr(d,"left").isNone()&&Lr(d,"top").isNone()&&Lr(d,"right").isNone()&&Lr(d,"bottom").isNone()&&Aa(Lr(d,"position"),"fixed")&&zn(d,"position")},d)},c4=function(e,t,n){return t.useFixed()?"fixed":"absolute"},s4=function(e,t,n,a){var i=a.element;Ke(["position","left","right","top","bottom"],function(c){return zn(i,c)}),u0(i),n.clear(a.uid)},l4=Object.freeze({__proto__:null,position:u4,positionWithin:V0,positionWithinBounds:U0,getMode:c4,reset:s4}),f4=function(){var e={},t=function(i,c){e[i]=c},n=function(i){return ct(e,i)},a=function(i){Oe(i)?delete e[i]:e={}};return Ja({readState:function(){return e},clear:a,set:t,get:n})},$d=Object.freeze({__proto__:null,init:f4}),fo=fa({fields:r4,name:"positioning",active:Zg,apis:l4,state:$d}),Ld=function(e){Sn(e,Il());var t=e.components();Ke(t,Ld)},Pd=function(e){var t=e.components();Ke(t,Pd),Sn(e,Zc())},W0=function(e,t){qa(e.element,t.element)},v4=function(e){Ke(e.components(),function(t){return Jo(t.element)}),vr(e.element),e.syncComponents()},j0=function(e,t){var n=e.components();v4(e);var a=cn(n,t);Ke(a,function(i){Ld(i),e.getSystem().removeFromWorld(i)}),Ke(t,function(i){i.getSystem().isConnected()?W0(e,i):(e.getSystem().addToWorld(i),W0(e,i),kr(e.element)&&Pd(i)),e.syncComponents()})},Zs=function(e,t){Nd(e,t,qa)},Nd=function(e,t,n){e.getSystem().addToWorld(t),n(e.element,t.element),kr(e.element)&&Pd(t),e.syncComponents()},Vd=function(e){Ld(e),Jo(e.element),e.getSystem().removeFromWorld(e)},as=function(e){var t=Or(e.element).bind(function(n){return e.getSystem().getByDom(n).toOptional()});Vd(e),t.each(function(n){n.syncComponents()})},kh=function(e){var t=e.components();Ke(t,Vd),vr(e.element),e.syncComponents()},Ud=function(e,t){q0(e,t,qa)},G0=function(e,t){q0(e,t,Vc)},q0=function(e,t,n){n(e,t.element);var a=E(t.element);Ke(a,function(i){t.getByDom(i).each(Pd)})},Ah=function(e){var t=E(e.element);Ke(t,function(n){e.getByDom(n).each(Ld)}),Jo(e.element)},Wd=function(e,t,n,a){n.get().each(function(l){kh(e)});var i=t.getAttachPoint(e);Zs(i,e);var c=e.getSystem().build(a);return Zs(e,c),n.set(c),c},cv=function(e,t,n,a){var i=Wd(e,t,n,a);return t.onOpen(e,i),i},d4=function(e,t,n,a){return n.get().map(function(){return Wd(e,t,n,a)})},m4=function(e,t,n,a,i){Y0(e,t),cv(e,t,n,a),i(),J0(e,t)},K0=function(e,t,n){n.get().each(function(a){kh(e),as(e),t.onClose(e,a),n.clear()})},X0=function(e,t,n){return n.isOpen()},g4=function(e,t,n,a){return X0(e,t,n)&&n.get().exists(function(i){return t.isPartOf(e,i,a)})},h4=function(e,t,n){return n.get()},p4=function(e,t,n,a){Lr(e.element,t).fold(function(){ba(e.element,n)},function(i){Vt(e.element,n,i)}),_t(e.element,t,a)},b4=function(e,t,n){ja(e.element,n).fold(function(){return zn(e.element,t)},function(a){return _t(e.element,t,a)})},Y0=function(e,t,n){var a=t.getAttachPoint(e);_t(e.element,"position",fo.getMode(a)),p4(e,"visibility",t.cloakVisibilityAttr,"hidden")},y4=function(e){return Hn(["top","left","right","bottom"],function(t){return Lr(e,t).isSome()})},J0=function(e,t,n){y4(e.element)||zn(e.element,"position"),b4(e,"visibility",t.cloakVisibilityAttr)},w4=Object.freeze({__proto__:null,cloak:Y0,decloak:J0,open:cv,openWhileCloaked:m4,close:K0,isOpen:X0,isPartOf:g4,getState:h4,setContent:d4}),S4=function(e,t){return rr([we(ld(),function(n,a){K0(n,e,t)})])},x4=Object.freeze({__proto__:null,events:S4}),C4=[An("onOpen"),An("onClose"),de("isPartOf"),de("getAttachPoint"),K("cloakVisibilityAttr","data-precloak-visibility")],T4=function(){var e=Fr(),t=j("not-implemented");return Ja({readState:t,isOpen:e.isSet,clear:e.clear,set:e.set,get:e.get})},O4=Object.freeze({__proto__:null,init:T4}),fn=fa({fields:C4,name:"sandboxing",active:x4,apis:w4,state:O4}),Qs=j("dismiss.popups"),tf=j("reposition.popups"),Mh=j("mouse.released"),k4=Ho([K("isExtraPart",Le),$o("fireEventInstead",[K("event",Rs())])]),jd=function(e){var t,n=ya("Dismissal",k4,e);return t={},t[Qs()]={schema:Ho([de("target")]),onReceive:function(a,i){if(fn.isOpen(a)){var c=fn.isPartOf(a,i.target)||n.isExtraPart(a,i.target);c||n.fireEventInstead.fold(function(){return fn.close(a)},function(l){return Sn(a,l.event)})}}},t},A4=Ho([$o("fireEventInstead",[K("event",h1())]),Oo("doReposition")]),Eh=function(e){var t,n=ya("Reposition",A4,e);return t={},t[tf()]={onReceive:function(a){fn.isOpen(a)&&n.fireEventInstead.fold(function(){return n.doReposition(a)},function(i){return Sn(a,i.event)})}},t},Dh=function(e,t,n){t.store.manager.onLoad(e,t,n)},Z0=function(e,t,n){t.store.manager.onUnload(e,t,n)},M4=function(e,t,n,a){t.store.manager.setValue(e,t,n,a)},E4=function(e,t,n){return t.store.manager.getValue(e,t,n)},D4=function(e,t,n){return n},Q0=Object.freeze({__proto__:null,onLoad:Dh,onUnload:Z0,setValue:M4,getValue:E4,getState:D4}),_4=function(e,t){var n=e.resetOnDom?[br(function(a,i){Dh(a,e,t)}),vu(function(a,i){Z0(a,e,t)})]:[ra(e,t,Dh)];return rr(n)},z4=Object.freeze({__proto__:null,events:_4}),eb=function(){var e=bt(null),t=function(){return{mode:"memory",value:e.get()}},n=function(){return e.get()===null},a=function(){e.set(null)};return Ja({set:e.set,get:e.get,isNotSet:n,clear:a,readState:t})},R4=function(){var e=be;return Ja({readState:e})},tb=function(){var e=bt({}),t=bt({}),n=function(){return{mode:"dataset",dataByValue:e.get(),dataByText:t.get()}},a=function(){e.set({}),t.set({})},i=function(l){return ct(e.get(),l).orThunk(function(){return ct(t.get(),l)})},c=function(l){var v=e.get(),d=t.get(),g={},y={};Ke(l,function(S){g[S.value]=S,ct(S,"meta").each(function(T){ct(T,"text").each(function(k){y[k]=S})})}),e.set(L(L({},v),g)),t.set(L(L({},d),y))};return Ja({readState:n,lookup:i,update:c,clear:a})},B4=function(e){return e.store.manager.state(e)},F4=Object.freeze({__proto__:null,memory:eb,dataset:tb,manual:R4,init:B4}),_h=function(e,t,n,a){var i=t.store;n.update([a]),i.setValue(e,a),t.onSetValue(e,a)},nb=function(e,t,n){var a=t.store,i=a.getDataKey(e);return n.lookup(i).getOrThunk(function(){return a.getFallbackEntry(i)})},rb=function(e,t,n){var a=t.store;a.initialValue.each(function(i){_h(e,t,n,i)})},ab=function(e,t,n){n.clear()},H4=[kn("initialValue"),de("getFallbackEntry"),de("getDataKey"),de("setValue"),Jn("manager",{setValue:_h,getValue:nb,onLoad:rb,onUnload:ab,state:tb})],I4=function(e,t,n){return t.store.getValue(e)},ob=function(e,t,n,a){t.store.setValue(e,a),t.onSetValue(e,a)},$4=function(e,t,n){t.store.initialValue.each(function(a){t.store.setValue(e,a)})},L4=[de("getValue"),K("setValue",be),kn("initialValue"),Jn("manager",{setValue:ob,getValue:I4,onLoad:$4,onUnload:be,state:ii.init})],P4=function(e,t,n,a){n.set(a),t.onSetValue(e,a)},N4=function(e,t,n){return n.get()},ib=function(e,t,n){t.store.initialValue.each(function(a){n.isNotSet()&&n.set(a)})},Gd=function(e,t,n){n.clear()},zh=[kn("initialValue"),Jn("manager",{setValue:P4,getValue:N4,onLoad:ib,onUnload:Gd,state:eb})],V4=[ni("store",{mode:"memory"},yi("mode",{memory:zh,manual:L4,dataset:H4})),An("onSetValue"),K("resetOnDom",!1)],Ve=fa({fields:V4,name:"representing",active:z4,apis:Q0,extra:{setValueFrom:function(e,t){var n=Ve.getValue(t);Ve.setValue(e,n)}},state:F4}),va=function(e,t){return sg(e,{},Se(t,function(n){return qy(n.name(),"Cannot configure "+n.name()+" for "+e)}).concat([uo("dump",je)]))},nf=function(e){return e.dump},Ta=function(e,t){return L(L({},Be(t)),e.dump)},Wi={field:va,augment:Ta,get:nf},ub="placeholder",qd=ri.generate([{single:["required","valueThunk"]},{multiple:["required","valueThunks"]}]),Rh=function(e){return pn(e,"uiType")},U4=function(e,t,n,a){return e.exists(function(i){return i!==n.owner})?qd.single(!0,j(n)):ct(a,n.name).fold(function(){throw new Error("Unknown placeholder component: "+n.name+`
Known: [`+Zn(a)+`]
Namespace: `+e.getOr("none")+`
Spec: `+JSON.stringify(n,null,2))},function(i){return i.replace()})},Bh=function(e,t,n,a){return Rh(n)&&n.uiType===ub?U4(e,t,n,a):qd.single(!1,j(n))},Fh=function(e,t,n,a){var i=Bh(e,t,n,a);return i.fold(function(c,l){var v=Rh(n)?l(t,n.config,n.validated):l(t),d=ct(v,"components").getOr([]),g=mt(d,function(y){return Fh(e,t,y,a)});return[L(L({},v),{components:g})]},function(c,l){if(Rh(n)){var v=l(t,n.config,n.validated),d=n.validated.preprocess.getOr(je);return d(v)}else return l(t)})},W4=function(e,t,n,a){return mt(n,function(i){return Fh(e,t,i,a)})},j4=function(e,t){var n=!1,a=function(){return n},i=function(){if(n)throw new Error("Trying to use the same placeholder more than once: "+e);return n=!0,t},c=function(){return t.fold(function(l,v){return l},function(l,v){return l})};return{name:j(e),required:c,used:a,replace:i}},Hh=function(e,t,n,a){var i=Qn(a,function(l,v){return j4(v,l)}),c=W4(e,t,n,i);return sr(i,function(l){if(l.used()===!1&&l.required())throw new Error("Placeholder: "+l.name()+` was not found in components list
Namespace: `+e.getOr("none")+`
Components: `+JSON.stringify(t.components,null,2))}),c},Ih=qd.single,G4=qd.multiple,cb=j(ub),os=ri.generate([{required:["data"]},{external:["data"]},{optional:["data"]},{group:["data"]}]),sv=K("factory",{sketch:je}),$h=K("schema",[]),rf=de("name"),Lh=Qr("pname","pname",an(function(e){return"<alloy."+rt(e.name)+">"}),Pi()),Ph=uo("schema",function(){return[kn("preprocess")]}),is=K("defaults",j({})),Uu=K("overrides",j({})),af=pt([sv,$h,rf,Lh,is,Uu]),lv=pt([sv,$h,rf,is,Uu]),fv=pt([sv,$h,rf,Lh,is,Uu]),Kd=pt([sv,Ph,rf,de("unit"),Lh,is,Uu]),Nh=function(e){return e.fold(p.some,p.none,p.some,p.some)},Vh=function(e){var t=function(n){return n.name};return e.fold(t,t,t,t)},q4=function(e){return e.fold(je,je,je,je)},Xd=function(e,t){return function(n){var a=ya("Converting part type",t,n);return e(a)}},za=Xd(os.required,af),ci=Xd(os.external,lv),ji=Xd(os.optional,fv),Wu=Xd(os.group,Kd),of=j("entirety"),Uh=Object.freeze({__proto__:null,required:za,external:ci,optional:ji,group:Wu,asNamedPart:Nh,name:Vh,asCommon:q4,original:of}),Yd=function(e,t,n,a){return fe(t.defaults(e,n,a),n,{uid:e.partUids[t.name]},t.overrides(e,n,a))},sb=function(e,t,n){var a={},i={};return Ke(n,function(c){c.fold(function(l){a[l.pname]=Ih(!0,function(v,d,g){return l.factory.sketch(Yd(v,l,d,g))})},function(l){var v=t.parts[l.name];i[l.name]=j(l.factory.sketch(Yd(t,l,v[of()]),v))},function(l){a[l.pname]=Ih(!1,function(v,d,g){return l.factory.sketch(Yd(v,l,d,g))})},function(l){a[l.pname]=G4(!0,function(v,d,g){var y=v[l.name];return Se(y,function(S){return l.factory.sketch(fe(l.defaults(v,S,g),S,l.overrides(v,S)))})})})}),{internals:j(a),externals:j(i)}},vv=function(e,t){var n={};return Ke(t,function(a){Nh(a).each(function(i){var c=K4(e,i.pname);n[i.name]=function(l){var v=ya("Part: "+i.name+" in "+e,pt(i.schema),l);return L(L({},c),{config:l,validated:v})}})}),n},K4=function(e,t){return{uiType:cb(),owner:e,name:t}},Wh=function(e,t,n){return{uiType:cb(),owner:e,name:t,config:n,validated:{}}},lb=function(e){return mt(e,function(t){return t.fold(p.none,p.some,p.none,p.none).map(function(n){return mc(n.name,n.schema.concat([Fg(of())]))}).toArray()})},fb=function(e){return Se(e,Vh)},jh=function(e,t,n){return sb(e,t,n)},Gh=function(e,t,n){return Hh(p.some(e),t,t.components,n)},jn=function(e,t,n){var a=t.partUids[n];return e.getSystem().getByUid(a).toOptional()},ju=function(e,t,n){return jn(e,t,n).getOrDie("Could not find part: "+n)},vb=function(e,t,n){var a={},i=t.partUids,c=e.getSystem();return Ke(n,function(l){a[l]=j(c.getByUid(i[l]))}),a},db=function(e,t){var n=e.getSystem();return Qn(t.partUids,function(a,i){return j(n.getByUid(a))})},mb=function(e){return Zn(e.partUids)},qh=function(e,t,n){var a={},i=t.partUids,c=e.getSystem();return Ke(n,function(l){a[l]=j(c.getByUid(i[l]).getOrDie())}),a},gb=function(e,t){var n=fb(t);return Xc(Se(n,function(a){return{key:a,value:e+"-"+a}}))},Kh=function(e){return Qr("partUids","partUids",Ya(function(t){return gb(t.uid,e)}),Pi())},X4=Object.freeze({__proto__:null,generate:vv,generateOne:Wh,schemas:lb,names:fb,substitutes:jh,components:Gh,defaultUids:gb,defaultUidsSchema:Kh,getAllParts:db,getAllPartNames:mb,getPart:jn,getPartOrDie:ju,getParts:vb,getPartsOrDie:qh}),Y4=function(e,t){var n=e.length>0?[mc("parts",e)]:[];return n.concat([de("uid"),K("dom",{}),K("components",[]),Fg("originalSpec"),K("debug.sketcher",{})]).concat(t)},hb=function(e,t,n,a,i){var c=Y4(a,i);return ya(e+" [SpecSchema]",Ho(c.concat(t)),n)},pb=function(e,t,n,a){var i=bb(a),c=hb(e,t,i,[],[]);return n(c,i)},Xh=function(e,t,n,a,i){var c=bb(i),l=lb(n),v=Kh(n),d=hb(e,t,c,l,[v]),g=jh(e,d,n),y=Gh(e,d,g.internals());return a(d,y,c,g.externals())},J4=function(e){return pn(e,"uid")},bb=function(e){return J4(e)?e:L(L({},e),{uid:Nl("uid")})},Z4=function(e){return e.uid!==void 0},Q4=Ho([de("name"),de("factory"),de("configFields"),K("apis",{}),K("extraApis",{})]),eS=Ho([de("name"),de("factory"),de("configFields"),de("partFields"),K("apis",{}),K("extraApis",{})]),Oi=function(e){var t=ya("Sketcher for "+e.name,Q4,e),n=function(c){return pb(t.name,t.configFields,t.factory,c)},a=Qn(t.apis,Vl),i=Qn(t.extraApis,function(c,l){return Ps(c,l)});return L(L({name:t.name,configFields:t.configFields,sketch:n},a),i)},vo=function(e){var t=ya("Sketcher for "+e.name,eS,e),n=function(l){return Xh(t.name,t.configFields,t.partFields,t.factory,l)},a=vv(t.name,t.partFields),i=Qn(t.apis,Vl),c=Qn(t.extraApis,function(l,v){return Ps(l,v)});return L(L({name:t.name,partFields:t.partFields,configFields:t.configFields,sketch:n,parts:a},i),c)},us=function(e){return Et(e)==="input"&&pa(e,"type")!=="radio"||Et(e)==="textarea"},tS=function(e,t,n){return t.find(e)},nS=Object.freeze({__proto__:null,getCurrent:tS}),yb=[de("find")],Zt=fa({fields:yb,name:"composing",apis:nS}),rS=["input","button","textarea","select"],wb=function(e,t,n){var a=t.disabled()?Jh:el;a(e,t)},Yh=function(e,t){return t.useNative===!0&&It(rS,Et(e.element))},aS=function(e){return Uv(e.element,"disabled")},Sb=function(e){Vt(e.element,"disabled","disabled")},uf=function(e){ba(e.element,"disabled")},oS=function(e){return pa(e.element,"aria-disabled")==="true"},iS=function(e){Vt(e.element,"aria-disabled","true")},xb=function(e){Vt(e.element,"aria-disabled","false")},Jh=function(e,t,n){t.disableClass.each(function(i){Sa(e.element,i)});var a=Yh(e,t)?Sb:iS;a(e),t.onDisabled(e)},el=function(e,t,n){t.disableClass.each(function(i){Gr(e.element,i)});var a=Yh(e,t)?uf:xb;a(e),t.onEnabled(e)},Jd=function(e,t){return Yh(e,t)?aS(e):oS(e)},Cb=function(e,t,n,a){var i=a?Jh:el;i(e,t)},uS=Object.freeze({__proto__:null,enable:el,disable:Jh,isDisabled:Jd,onLoad:wb,set:Cb}),cS=function(e,t){return Vi({classes:t.disabled()?t.disableClass.toArray():[]})},sS=function(e,t){return rr([wg(ai(),function(n,a){return Jd(n,e)}),ra(e,t,wb)])},dv=Object.freeze({__proto__:null,exhibit:cS,events:sS}),Zh=[pr("disabled",Le),K("useNative",!0),kn("disableClass"),An("onDisabled"),An("onEnabled")],lt=fa({fields:Zh,name:"disabling",active:dv,apis:uS}),Tb=function(e,t,n,a){var i=Za(e.element,"."+t.highlightClass);Ke(i,function(c){Hn(a,function(l){return l.element===c})||(Gr(c,t.highlightClass),e.getSystem().getByDom(c).each(function(l){t.onDehighlight(e,l),Sn(l,bg())}))})},lS=function(e,t,n){return Tb(e,t,n,[])},fS=function(e,t,n,a){Qh(e,t,n,a)&&(Gr(a.element,t.highlightClass),t.onDehighlight(e,a),Sn(a,bg()))},mv=function(e,t,n,a){Tb(e,t,n,[a]),Qh(e,t,n,a)||(Sa(a.element,t.highlightClass),t.onHighlight(e,a),Sn(a,w1()))},mo=function(e,t,n){Ob(e,t).each(function(a){mv(e,t,n,a)})},Zd=function(e,t,n){kb(e,t).each(function(a){mv(e,t,n,a)})},vS=function(e,t,n,a){gS(e,t,n,a).fold(function(i){throw i},function(i){mv(e,t,n,i)})},dS=function(e,t,n,a){var i=Ab(e,t),c=Z(i,a);c.each(function(l){mv(e,t,n,l)})},Qh=function(e,t,n,a){return Si(a.element,t.highlightClass)},mS=function(e,t,n){return ta(e.element,"."+t.highlightClass).bind(function(a){return e.getSystem().getByDom(a).toOptional()})},gS=function(e,t,n,a){var i=Za(e.element,"."+t.itemClass);return p.from(i[a]).fold(function(){return Ut.error(new Error("No element found with index "+a))},e.getSystem().getByDom)},Ob=function(e,t,n){return ta(e.element,"."+t.itemClass).bind(function(a){return e.getSystem().getByDom(a).toOptional()})},kb=function(e,t,n){var a=Za(e.element,"."+t.itemClass),i=a.length>0?p.some(a[a.length-1]):p.none();return i.bind(function(c){return e.getSystem().getByDom(c).toOptional()})},Tc=function(e,t,n,a){var i=Za(e.element,"."+t.itemClass),c=Me(i,function(l){return Si(l,t.highlightClass)});return c.bind(function(l){var v=Gl(l,a,0,i.length-1);return e.getSystem().getByDom(i[v]).toOptional()})},hS=function(e,t,n){return Tc(e,t,n,-1)},pS=function(e,t,n){return Tc(e,t,n,1)},Ab=function(e,t,n){var a=Za(e.element,"."+t.itemClass);return Xr(Se(a,function(i){return e.getSystem().getByDom(i).toOptional()}))},bS=Object.freeze({__proto__:null,dehighlightAll:lS,dehighlight:fS,highlight:mv,highlightFirst:mo,highlightLast:Zd,highlightAt:vS,highlightBy:dS,isHighlighted:Qh,getHighlighted:mS,getFirst:Ob,getLast:kb,getPrevious:hS,getNext:pS,getCandidates:Ab}),yS=[de("highlightClass"),de("itemClass"),An("onHighlight"),An("onDehighlight")],Rn=fa({fields:yS,name:"highlighting",apis:bS}),Qd=[8],cs=[9],Gu=[13],ss=[27],Ao=[32],em=[37],gv=[38],cf=[39],ls=[40],wS=function(e,t,n){var a=Re(e.slice(0,t)),i=Re(e.slice(t+1));return Z(a.concat(i),n)},Mb=function(e,t,n){var a=Re(e.slice(0,t));return Z(a,n)},SS=function(e,t,n){var a=e.slice(0,t),i=e.slice(t+1);return Z(i.concat(a),n)},xS=function(e,t,n){var a=e.slice(t+1);return Z(a,n)},on=function(e){return function(t){var n=t.raw;return It(e,n.which)}},Gi=function(e){return function(t){return gt(e,function(n){return n(t)})}},sf=function(e){var t=e.raw;return t.shiftKey===!0},Eb=function(e){var t=e.raw;return t.ctrlKey===!0},hv=rn(sf),vn=function(e,t){return{matches:e,classification:t}},Db=function(e,t){var n=Z(e,function(a){return a.matches(t)});return n.map(function(a){return a.classification})},_b=function(e,t,n){var a=t.exists(function(i){return n.exists(function(c){return Wn(c,i)})});a||yt(e,p1(),{prevFocus:t,newFocus:n})},tm=function(){var e=function(n){return gu(n.element)},t=function(n,a){var i=e(n);n.getSystem().triggerFocus(a,n.element);var c=e(n);_b(n,i,c)};return{get:e,set:t}},zb=function(){var e=function(n){return Rn.getHighlighted(n).map(function(a){return a.element})},t=function(n,a){var i=e(n);n.getSystem().getByDom(a).fold(be,function(l){Rn.highlight(n,l)});var c=e(n);_b(n,i,c)};return{get:e,set:t}},nm;(function(e){e.OnFocusMode="onFocus",e.OnEnterOrSpaceMode="onEnterOrSpace",e.OnApiMode="onApi"})(nm||(nm={}));var tl=function(e,t,n,a,i){var c=function(){return e.concat([K("focusManager",tm()),ni("focusInside","onFocus",Vf(function(g){return It(["onFocus","onEnterOrSpace","onApi"],g)?Ut.value(g):Ut.error("Invalid value for focusInside")})),Jn("handler",d),Jn("state",t),Jn("sendFocusIn",i)])},l=function(g,y,S,T,k){var D=S(g,y,T,k);return Db(D,y.event).bind(function(H){return H(g,y,T,k)})},v=function(g,y){var S=g.focusInside!==nm.OnFocusMode?p.none():i(g).map(function(D){return we(Jc(),function(H,V){D(H,g,y),V.stop()})}),T=function(D,H){var V=on(Ao.concat(Gu))(H.event);g.focusInside===nm.OnEnterOrSpaceMode&&V&&l1(D,H)&&i(g).each(function(z){z(D,g,y),H.stop()})},k=[we(sd(),function(D,H){l(D,H,n,g,y).fold(function(){T(D,H)},function(V){H.stop()})}),we(d1(),function(D,H){l(D,H,a,g,y).each(function(V){H.stop()})})];return rr(S.toArray().concat(k))},d={schema:c,processKey:l,toEvents:v};return d},Rb=function(e){var t=[kn("onEscape"),kn("onEnter"),K("selector",'[data-alloy-tabstop="true"]:not(:disabled)'),K("firstTabstop",0),K("useTabstopAt",qe),kn("visibilitySelector")].concat([e]),n=function(H,V){var z=H.visibilitySelector.bind(function(W){return Ci(V,W)}).getOr(V);return Jr(z)>0},a=function(H,V){var z=Za(H.element,V.selector),W=Ce(z,function(re){return n(V,re)});return p.from(W[V.firstTabstop])},i=function(H,V){return V.focusManager.get(H).bind(function(z){return Ci(z,V.selector)})},c=function(H,V){return n(H,V)&&H.useTabstopAt(V)},l=function(H,V,z){a(H,V).each(function(W){V.focusManager.set(H,W)})},v=function(H,V,z,W,re){return re(V,z,function(ne){return c(W,ne)}).fold(function(){return W.cyclic?p.some(!0):p.none()},function(ne){return W.focusManager.set(H,ne),p.some(!0)})},d=function(H,V,z,W){var re=Za(H.element,z.selector);return i(H,z).bind(function(ne){var U=Me(re,Pn(Wn,ne));return U.bind(function(Q){return v(H,re,Q,z,W)})})},g=function(H,V,z){var W=z.cyclic?wS:Mb;return d(H,V,z,W)},y=function(H,V,z){var W=z.cyclic?SS:xS;return d(H,V,z,W)},S=function(H,V,z){return z.onEnter.bind(function(W){return W(H,V)})},T=function(H,V,z){return z.onEscape.bind(function(W){return W(H,V)})},k=j([vn(Gi([sf,on(cs)]),g),vn(on(cs),y),vn(on(ss),T),vn(Gi([hv,on(Gu)]),S)]),D=j([]);return tl(t,ii.init,k,D,function(){return p.some(l)})},CS=Rb(uo("cyclic",Le)),TS=Rb(uo("cyclic",qe)),OS=function(e,t,n){return yg(e,n,ai()),p.some(!0)},fs=function(e,t,n){var a=us(n)&&on(Ao)(t.event);return a?p.none():OS(e,t,n)},nl=function(e,t){return p.some(!0)},ep=[K("execute",fs),K("useSpace",!1),K("useEnter",!0),K("useControlEnter",!1),K("useDown",!1)],Bb=function(e,t,n){return n.execute(e,t,e.element)},kS=function(e,t,n,a){var i=n.useSpace&&!us(e.element)?Ao:[],c=n.useEnter?Gu:[],l=n.useDown?ls:[],v=i.concat(c).concat(l);return[vn(on(v),Bb)].concat(n.useControlEnter?[vn(Gi([Eb,on(Gu)]),Bb)]:[])},AS=function(e,t,n,a){return n.useSpace&&!us(e.element)?[vn(on(Ao),nl)]:[]},rm=tl(ep,ii.init,kS,AS,function(){return p.none()}),tp=function(){var e=Fr(),t=function(i,c){e.set({numRows:i,numColumns:c})},n=function(){return e.get().map(function(i){return i.numRows})},a=function(){return e.get().map(function(i){return i.numColumns})};return Ja({readState:function(){return e.get().map(function(i){return{numRows:String(i.numRows),numColumns:String(i.numColumns)}}).getOr({numRows:"?",numColumns:"?"})},setGridSize:t,getNumRows:n,getNumColumns:a})},np=function(e){return e.state(e)},MS=Object.freeze({__proto__:null,flatgrid:tp,init:np}),rp=function(e){return function(t,n,a,i){var c=e(t.element);return op(c,t,n,a,i)}},am=function(e,t){var n=lh(e,t);return rp(n)},om=function(e,t){var n=lh(t,e);return rp(n)},ap=function(e){return function(t,n,a,i){return op(e,t,n,a,i)}},op=function(e,t,n,a,i){var c=a.focusManager.get(t).bind(function(l){return e(t.element,l,a,i)});return c.map(function(l){return a.focusManager.set(t,l),!0})},Fb=ap,ip=ap,im=ap,Hb=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0},Ib=function(e){return!Hb(e.dom)},ES=function(e,t){return Me(e,t).map(function(n){return{index:n,candidates:e}})},$b=function(e,t,n){var a=function(l){return Wn(l,t)},i=Za(e,n),c=Ce(i,Ib);return ES(c,a)},Lb=function(e,t){return Me(e,function(n){return Wn(t,n)})},up=function(e,t,n,a){var i=Math.floor(t/n),c=t%n;return a(i,c).bind(function(l){var v=l.row*n+l.column;return v>=0&&v<e.length?p.some(e[v]):p.none()})},Pb=function(e,t,n,a,i){return up(e,t,a,function(c,l){var v=c===n-1,d=v?e.length-c*a:a,g=Gl(l,i,0,d-1);return p.some({row:c,column:g})})},Nb=function(e,t,n,a,i){return up(e,t,a,function(c,l){var v=Gl(c,i,0,n-1),d=v===n-1,g=d?e.length-v*a:a,y=Ti(l,0,g-1);return p.some({row:v,column:y})})},Vb=function(e,t,n,a){return Pb(e,t,n,a,1)},DS=function(e,t,n,a){return Pb(e,t,n,a,-1)},_S=function(e,t,n,a){return Nb(e,t,n,a,-1)},zS=function(e,t,n,a){return Nb(e,t,n,a,1)},lf=[de("selector"),K("execute",fs),na("onEscape"),K("captureTab",!1),W1()],RS=function(e,t,n){ta(e.element,t.selector).each(function(a){t.focusManager.set(e,a)})},Ub=function(e,t){return t.focusManager.get(e).bind(function(n){return Ci(n,t.selector)})},Wb=function(e,t,n,a){return Ub(e,n).bind(function(i){return n.execute(e,t,i)})},rl=function(e){return function(t,n,a,i){return $b(t,n,a.selector).bind(function(c){return e(c.candidates,c.index,i.getNumRows().getOr(a.initSize.numRows),i.getNumColumns().getOr(a.initSize.numColumns))})}},jb=function(e,t,n){return n.captureTab?p.some(!0):p.none()},Gb=function(e,t,n){return n.onEscape(e,t)},qb=rl(DS),um=rl(Vb),Kb=rl(_S),ff=rl(zS),pv=j([vn(on(em),am(qb,um)),vn(on(cf),om(qb,um)),vn(on(gv),Fb(Kb)),vn(on(ls),ip(ff)),vn(Gi([sf,on(cs)]),jb),vn(Gi([hv,on(cs)]),jb),vn(on(ss),Gb),vn(on(Ao.concat(Gu)),Wb)]),BS=j([vn(on(Ao),nl)]),Xb=tl(lf,tp,pv,BS,function(){return p.some(RS)}),cm=function(e,t,n,a){var i=function(l){return Et(l)==="button"&&pa(l,"disabled")==="disabled"},c=function(l,v,d){var g=Gl(v,a,0,d.length-1);return g===l?p.none():i(d[g])?c(l,g,d):p.from(d[g])};return $b(e,n,t).bind(function(l){var v=l.index,d=l.candidates;return c(v,v,d)})},FS=[de("selector"),K("getInitial",p.none),K("execute",fs),na("onEscape"),K("executeOnMove",!1),K("allowVertical",!0)],Yb=function(e,t){return t.focusManager.get(e).bind(function(n){return Ci(n,t.selector)})},bv=function(e,t,n){return Yb(e,n).bind(function(a){return n.execute(e,t,a)})},HS=function(e,t,n){t.getInitial(e).orThunk(function(){return ta(e.element,t.selector)}).each(function(a){t.focusManager.set(e,a)})},Jb=function(e,t,n){return cm(e,n.selector,t,-1)},cp=function(e,t,n){return cm(e,n.selector,t,1)},Zb=function(e){return function(t,n,a,i){return e(t,n,a,i).bind(function(){return a.executeOnMove?bv(t,n,a):p.some(!0)})}},IS=function(e,t,n){return n.onEscape(e,t)},Qb=function(e,t,n,a){var i=em.concat(n.allowVertical?gv:[]),c=cf.concat(n.allowVertical?ls:[]);return[vn(on(i),Zb(am(Jb,cp))),vn(on(c),Zb(om(Jb,cp))),vn(on(Gu),bv),vn(on(Ao),bv),vn(on(ss),IS)]},e2=j([vn(on(Ao),nl)]),sm=tl(FS,ii.init,Qb,e2,function(){return p.some(HS)}),yv=function(e,t,n){return p.from(e[t]).bind(function(a){return p.from(a[n]).map(function(i){return{rowIndex:t,columnIndex:n,cell:i}})})},sp=function(e,t,n,a){var i=e[t],c=i.length,l=Gl(n,a,0,c-1);return yv(e,t,l)},t2=function(e,t,n,a){var i=Gl(n,a,0,e.length-1),c=e[i].length,l=Ti(t,0,c-1);return yv(e,i,l)},n2=function(e,t,n,a){var i=e[t],c=i.length,l=Ti(n+a,0,c-1);return yv(e,t,l)},r2=function(e,t,n,a){var i=Ti(n+a,0,e.length-1),c=e[i].length,l=Ti(t,0,c-1);return yv(e,i,l)},lm=function(e,t,n){return sp(e,t,n,1)},$S=function(e,t,n){return sp(e,t,n,-1)},LS=function(e,t,n){return t2(e,n,t,-1)},PS=function(e,t,n){return t2(e,n,t,1)},NS=function(e,t,n){return n2(e,t,n,-1)},vf=function(e,t,n){return n2(e,t,n,1)},VS=function(e,t,n){return r2(e,n,t,-1)},US=function(e,t,n){return r2(e,n,t,1)},WS=[mc("selectors",[de("row"),de("cell")]),K("cycles",!0),K("previousSelector",p.none),K("execute",fs)],lp=function(e,t,n){var a=t.previousSelector(e).orThunk(function(){var i=t.selectors;return ta(e.element,i.cell)});a.each(function(i){t.focusManager.set(e,i)})},fp=function(e,t,n){return gu(e.element).bind(function(a){return n.execute(e,t,a)})},jS=function(e,t){return Se(e,function(n){return Za(n,t.selectors.cell)})},fm=function(e,t){return function(n,a,i){var c=i.cycles?e:t;return Ci(a,i.selectors.row).bind(function(l){var v=Za(l,i.selectors.cell);return Lb(v,a).bind(function(d){var g=Za(n,i.selectors.row);return Lb(g,l).bind(function(y){var S=jS(g,i);return c(S,y,d).map(function(T){return T.cell})})})})}},a2=fm($S,NS),o2=fm(lm,vf),GS=fm(LS,VS),vm=fm(PS,US),dm=j([vn(on(em),am(a2,o2)),vn(on(cf),om(a2,o2)),vn(on(gv),Fb(GS)),vn(on(ls),ip(vm)),vn(on(Ao.concat(Gu)),fp)]),i2=j([vn(on(Ao),nl)]),qS=tl(WS,ii.init,dm,i2,function(){return p.some(lp)}),KS=[de("selector"),K("execute",fs),K("moveOnTab",!1)],u2=function(e,t,n){return n.focusManager.get(e).bind(function(a){return n.execute(e,t,a)})},mm=function(e,t,n){ta(e.element,t.selector).each(function(a){t.focusManager.set(e,a)})},vp=function(e,t,n){return cm(e,n.selector,t,-1)},dp=function(e,t,n){return cm(e,n.selector,t,1)},c2=function(e,t,n,a){return n.moveOnTab?im(vp)(e,t,n,a):p.none()},Oc=function(e,t,n,a){return n.moveOnTab?im(dp)(e,t,n,a):p.none()},XS=j([vn(on(gv),im(vp)),vn(on(ls),im(dp)),vn(Gi([sf,on(cs)]),c2),vn(Gi([hv,on(cs)]),Oc),vn(on(Gu),u2),vn(on(Ao),u2)]),qu=j([vn(on(Ao),nl)]),YS=tl(KS,ii.init,XS,qu,function(){return p.some(mm)}),s2=[na("onSpace"),na("onEnter"),na("onShiftEnter"),na("onLeft"),na("onRight"),na("onTab"),na("onShiftTab"),na("onUp"),na("onDown"),na("onEscape"),K("stopSpaceKeyup",!1),kn("focusIn")],JS=function(e,t,n){return[vn(on(Ao),n.onSpace),vn(Gi([hv,on(Gu)]),n.onEnter),vn(Gi([sf,on(Gu)]),n.onShiftEnter),vn(Gi([sf,on(cs)]),n.onShiftTab),vn(Gi([hv,on(cs)]),n.onTab),vn(on(gv),n.onUp),vn(on(ls),n.onDown),vn(on(em),n.onLeft),vn(on(cf),n.onRight),vn(on(Ao),n.onSpace),vn(on(ss),n.onEscape)]},ZS=function(e,t,n){return n.stopSpaceKeyup?[vn(on(Ao),nl)]:[]},QS=tl(s2,ii.init,JS,ZS,function(e){return e.focusIn}),ex=CS.schema(),tx=TS.schema(),nx=sm.schema(),mp=Xb.schema(),rx=qS.schema(),ax=rm.schema(),ox=YS.schema(),l2=QS.schema(),wv=Object.freeze({__proto__:null,acyclic:ex,cyclic:tx,flow:nx,flatgrid:mp,matrix:rx,execution:ax,menu:ox,special:l2}),ix=function(e){return mr(e,"setGridSize")},ht=Yg({branchKey:"mode",branches:wv,name:"keying",active:{events:function(e,t){var n=e.handler;return n.toEvents(e,t)}},apis:{focusIn:function(e,t,n){t.sendFocusIn(t).fold(function(){e.getSystem().triggerFocus(e.element,e.element)},function(a){a(e,t,n)})},setGridSize:function(e,t,n,a,i){ix(n)?n.setGridSize(a,i):console.error("Layout does not support setGridSize")}},state:MS}),gp=function(e,t,n,a){Q1(function(){var i=Se(a,e.getSystem().build);j0(e,i)},e.element)},gm=function(e,t,n,a){var i=e.getSystem().build(a);Nd(e,i,n)},f2=function(e,t,n,a){gm(e,t,qa,a)},ux=function(e,t,n,a){gm(e,t,Bf,a)},v2=function(e,t,n,a){var i=hm(e),c=Z(i,function(l){return Wn(a.element,l.element)});c.each(as)},hm=function(e,t){return e.components()},hp=function(e,t,n,a,i){var c=hm(e);return p.from(c[a]).map(function(l){return v2(e,t,n,l),i.each(function(v){gm(e,t,function(d,g){kl(d,g,a)},v)}),l})},d2=function(e,t,n,a,i){var c=hm(e);return Me(c,a).bind(function(l){return hp(e,t,n,l,i)})},cx=Object.freeze({__proto__:null,append:f2,prepend:ux,remove:v2,replaceAt:hp,replaceBy:d2,set:gp,contents:hm}),zt=fa({fields:[],name:"replacing",apis:cx}),m2=function(e,t){var n=rr(t);return fa({fields:[de("enabled")],name:e,active:{events:j(n)}})},Nt=function(e,t){var n=m2(e,t);return{key:e,value:{config:{},me:n,configAsRaw:j({}),initialConfig:{},state:ii}}},g2=function(e,t){t.ignore||(Sc(e.element),t.onFocus(e))},h2=function(e,t){t.ignore||Qg(e.element)},p2=function(e){return Td(e.element)},df=Object.freeze({__proto__:null,focus:g2,blur:h2,isFocused:p2}),pp=function(e,t){var n=t.ignore?{}:{attributes:{tabindex:"-1"}};return Vi(n)},pm=function(e){return rr([we(Jc(),function(t,n){g2(t,e),n.stop()})].concat(e.stopMousedown?[we(Ni(),function(t,n){n.event.prevent()})]:[]))},bm=Object.freeze({__proto__:null,exhibit:pp,events:pm}),sx=[An("onFocus"),K("stopMousedown",!1),K("ignore",!1)],Ot=fa({fields:sx,name:"focusing",active:bm,apis:df}),lx=function(e){var t=function(){var n=bt(e),a=function(){return n.get()},i=function(v){return n.set(v)},c=function(){return n.set(e)},l=function(){return n.get()};return{get:a,set:i,clear:c,readState:l}};return{init:t}},b2=function(e,t,n){var a=t.aria;a.update(e,a,n.get())},ym=function(e,t,n){t.toggleClass.each(function(a){n.get()?Sa(e.element,a):Gr(e.element,a)})},al=function(e,t,n){bp(e,t,n,!n.get())},y2=function(e,t,n){n.set(!0),ym(e,t,n),b2(e,t,n)},w2=function(e,t,n){n.set(!1),ym(e,t,n),b2(e,t,n)},bp=function(e,t,n,a){var i=a?y2:w2;i(e,t,n)},fx=function(e,t,n){return n.get()},S2=function(e,t,n){bp(e,t,n,t.selected)},vx=Object.freeze({__proto__:null,onLoad:S2,toggle:al,isOn:fx,on:y2,off:w2,set:bp}),dx=function(){return Vi({})},mx=function(e,t){var n=Cd(e,t,al),a=ra(e,t,S2);return rr(ze([e.toggleOnExecute?[n]:[],[a]]))},gx=Object.freeze({__proto__:null,exhibit:dx,events:mx}),hx=function(e,t,n){Vt(e.element,"aria-pressed",n),t.syncWithExpanded&&x2(e,t,n)},px=function(e,t,n){Vt(e.element,"aria-selected",n)},bx=function(e,t,n){Vt(e.element,"aria-checked",n)},x2=function(e,t,n){Vt(e.element,"aria-expanded",n)},yp=[K("selected",!1),kn("toggleClass"),K("toggleOnExecute",!0),ni("aria",{mode:"none"},yi("mode",{pressed:[K("syncWithExpanded",!1),Jn("update",hx)],checked:[Jn("update",bx)],expanded:[Jn("update",x2)],selected:[Jn("update",px)],none:[Jn("update",be)]}))],bn=fa({fields:yp,name:"toggling",active:gx,apis:vx,state:lx(!1)}),C2=function(){var e=function(t,n){n.stop(),Bs(t)};return[we(Bl(),e),we(_s(),e),Hs(Hu()),Hs(Ni())]},wm=function(e){var t=function(n){return du(function(a,i){n(a),i.stop()})};return rr(ze([e.map(t).toArray(),C2()]))},T2="alloy.item-hover",O2="alloy.item-focus",k2=function(e){(gu(e.element).isNone()||Ot.isFocused(e))&&(Ot.isFocused(e)||Ot.focus(e),yt(e,T2,{item:e}))},A2=function(e){yt(e,O2,{item:e})},M2=j(T2),r=j(O2),o=function(e){return{dom:e.dom,domModification:L(L({},e.domModification),{attributes:L(L(L({role:e.toggling.isSome()?"menuitemcheckbox":"menuitem"},e.domModification.attributes),{"aria-haspopup":e.hasSubmenu}),e.hasSubmenu?{"aria-expanded":!1}:{})}),behaviours:Wi.augment(e.itemBehaviours,[e.toggling.fold(bn.revoke,function(t){return bn.config(L({aria:{mode:"checked"}},t))}),Ot.config({ignore:e.ignoreFocus,stopMousedown:e.ignoreFocus,onFocus:function(t){A2(t)}}),ht.config({mode:"execution"}),Ve.config({store:{mode:"memory",initialValue:e.data}}),Nt("item-type-events",He(He([],C2(),!0),[we(pc(),k2),we(Ds(),Ot.focus)],!1))]),components:e.components,eventOrder:e.eventOrder}},u=[de("data"),de("components"),de("dom"),K("hasSubmenu",!1),kn("toggling"),Wi.field("itemBehaviours",[bn,Ot,ht,Ve]),K("ignoreFocus",!1),K("domModification",{}),Jn("builder",o),K("eventOrder",{})],s=function(e){return{dom:e.dom,components:e.components,events:rr([cw(Ds())])}},f=[de("dom"),de("components"),Jn("builder",s)],m=j("item-widget"),b=j([za({name:"widget",overrides:function(e){return{behaviours:Be([Ve.config({store:{mode:"manual",getValue:function(t){return e.data},setValue:be}})])}}})]),x=function(e){var t=jh(m(),e,b()),n=Gh(m(),e,t.internals()),a=function(c){return jn(c,e,"widget").map(function(l){return ht.focusIn(l),l})},i=function(c,l){return us(l.event.target)?p.none():function(){return e.autofocus&&l.setSource(c.element),p.none()}()};return{dom:e.dom,components:n,domModification:e.domModification,events:rr([du(function(c,l){a(c).each(function(v){l.stop()})}),we(pc(),k2),we(Ds(),function(c,l){e.autofocus?a(c):Ot.focus(c)})]),behaviours:Wi.augment(e.widgetBehaviours,[Ve.config({store:{mode:"memory",initialValue:e.data}}),Ot.config({ignore:e.ignoreFocus,onFocus:function(c){A2(c)}}),ht.config({mode:"special",focusIn:e.autofocus?function(c){a(c)}:J1(),onLeft:i,onRight:i,onEscape:function(c,l){return!Ot.isFocused(c)&&!e.autofocus?(Ot.focus(c),p.some(!0)):(e.autofocus&&l.setSource(c.element),p.none())}})])}},M=[de("uid"),de("data"),de("components"),de("dom"),K("autofocus",!1),K("ignoreFocus",!1),Wi.field("widgetBehaviours",[Ve,Ot,ht]),K("domModification",{}),Kh(b()),Jn("builder",x)],R=yi("type",{widget:M,item:u,separator:f}),P=function(e,t){return{mode:"flatgrid",selector:"."+e.markers.item,initSize:{numColumns:t.initSize.numColumns,numRows:t.initSize.numRows},focusManager:e.focusManager}},ie=function(e,t){return{mode:"matrix",selectors:{row:t.rowSelector,cell:"."+e.markers.item},focusManager:e.focusManager}},Te=function(e,t){return{mode:"menu",selector:"."+e.markers.item,moveOnTab:t.moveOnTab,focusManager:e.focusManager}},pe=j([Wu({factory:{sketch:function(e){var t=ya("menu.spec item",R,e);return t.builder(t)}},name:"items",unit:"item",defaults:function(e,t){return pn(t,"uid")?t:L(L({},t),{uid:Nl("item")})},overrides:function(e,t){return{type:t.type,ignoreFocus:e.fakeFocus,domModification:{classes:[e.markers.item]}}}})]),ue=j([de("value"),de("items"),de("dom"),de("components"),K("eventOrder",{}),va("menuBehaviours",[Rn,Ve,Zt,ht]),ni("movement",{mode:"menu",moveOnTab:!0},yi("mode",{grid:[W1(),Jn("config",P)],matrix:[Jn("config",ie),de("rowSelector")],menu:[K("moveOnTab",!0),Jn("config",Te)]})),Qw(),K("fakeFocus",!1),K("focusManager",tm()),An("onHighlight")]),_e=j("alloy.menu-focus"),Fe=function(e,t,n,a){return{uid:e.uid,dom:e.dom,markers:e.markers,behaviours:Ta(e.menuBehaviours,[Rn.config({highlightClass:e.markers.selectedItem,itemClass:e.markers.item,onHighlight:e.onHighlight}),Ve.config({store:{mode:"memory",initialValue:e.value}}),Zt.config({find:p.some}),ht.config(e.movement.config(e,e.movement))]),events:rr([we(r(),function(i,c){var l=c.event;i.getSystem().getByDom(l.target).each(function(v){Rn.highlight(i,v),c.stop(),yt(i,_e(),{menu:i,item:v})})}),we(M2(),function(i,c){var l=c.event.item;Rn.highlight(i,l)})]),components:t,eventOrder:e.eventOrder,domModification:{attributes:{role:"menu"}}}},ut=vo({name:"Menu",configFields:ue(),partFields:pe(),factory:Fe}),xn=function(e){return oe(e,function(t,n){return{k:t,v:n}})},vt=function(e,t,n,a){return ct(n,a).bind(function(i){return ct(e,i).bind(function(c){var l=vt(e,t,n,c);return p.some([c].concat(l))})}).getOr([])},At=function(e,t){var n={};sr(e,function(l,v){Ke(l,function(d){n[d]=v})});var a=t,i=xn(t),c=Qn(i,function(l,v){return[v].concat(vt(n,a,i,v))});return Qn(n,function(l){return ct(c,l).getOr([l])})},un=function(){var e=bt({}),t=bt({}),n=bt({}),a=Fr(),i=bt({}),c=function(){e.set({}),t.set({}),n.set({}),a.clear()},l=function(){return a.get().isNone()},v=function(U,Q){var le;t.set(L(L({},t.get()),(le={},le[U]={type:"prepared",menu:Q},le)))},d=function(U,Q,le,$e){a.set(U),e.set(le),t.set(Q),i.set($e);var he=At($e,le);n.set(he)},g=function(U){return yn(e.get(),function(Q,le){return Q===U})},y=function(U,Q,le){return H(U).bind(function($e){return g(U).bind(function(he){return Q(he).map(function(Pe){return{triggeredMenu:$e,triggeringItem:Pe,triggeringPath:le}})})})},S=function(U,Q){var le=Ce(z(U).toArray(),function($e){return H($e).isSome()});return ct(n.get(),U).bind(function($e){var he=Re(le.concat($e)),Pe=mt(he,function(ye,se){return y(ye,Q,he.slice(0,se+1)).fold(function(){return Aa(a.get(),ye)?[]:[p.none()]},function(De){return[p.some(De)]})});return Ji(Pe)})},T=function(U){return ct(e.get(),U).map(function(Q){var le=ct(n.get(),U).getOr([]);return[Q].concat(le)})},k=function(U){return ct(n.get(),U).bind(function(Q){return Q.length>1?p.some(Q.slice(1)):p.none()})},D=function(U){return ct(n.get(),U)},H=function(U){return V(U).bind(Yt)},V=function(U){return ct(t.get(),U)},z=function(U){return ct(e.get(),U)},W=function(U){var Q=i.get();return cn(Zn(Q),U)},re=function(){return a.get().bind(H)},ne=function(){return t.get()};return{setMenuBuilt:v,setContents:d,expand:T,refresh:D,collapse:k,lookupMenu:V,lookupItem:z,otherMenus:W,getPrimary:re,getMenus:ne,clear:c,isClear:l,getTriggeringPath:S}},Yt=function(e){return e.type==="prepared"?p.some(e.menu):p.none()},qr={init:un,extractPreparedMenu:Yt},Oa=function(e,t){var n=Fr(),a=function(me,Je,at){return Qn(at,function(Jt,En){var ar=function(){return ut.sketch(L(L({},Jt),{value:En,markers:e.markers,fakeFocus:e.fakeFocus,onHighlight:e.onHighlight,focusManager:e.fakeFocus?zb():tm()}))};return En===Je?{type:"prepared",menu:me.getSystem().build(ar())}:{type:"notbuilt",nbMenu:ar}})},i=qr.init(),c=function(me){var Je=a(me,e.data.primary,e.data.menus),at=d();return i.setContents(e.data.primary,Je,e.data.expansions,at),i.getPrimary()},l=function(me){return Ve.getValue(me).value},v=function(me,Je,at){return qn(Je,function(Jt){if(!Jt.getSystem().isConnected())return p.none();var En=Rn.getCandidates(Jt);return Z(En,function(ar){return l(ar)===at})})},d=function(me){return Qn(e.data.menus,function(Je,at){return mt(Je.items,function(Jt){return Jt.type==="separator"?[]:[Jt.data.value]})})},g=function(me,Je){Rn.highlight(me,Je),Rn.getHighlighted(Je).orThunk(function(){return Rn.getFirst(Je)}).each(function(at){yg(me,at.element,Ds())})},y=function(me,Je){return Xr(Se(Je,function(at){return me.lookupMenu(at).bind(function(Jt){return Jt.type==="prepared"?p.some(Jt.menu):p.none()})}))},S=function(me,Je,at){var Jt=y(Je,Je.otherMenus(at));Ke(Jt,function(En){Pu(En.element,[e.markers.backgroundMenu]),e.stayInDom||zt.remove(me,En)})},T=function(me){return n.get().getOrThunk(function(){var Je={},at=Za(me.element,"."+e.markers.item),Jt=Ce(at,function(En){return pa(En,"aria-haspopup")==="true"});return Ke(Jt,function(En){me.getSystem().getByDom(En).each(function(ar){var dr=l(ar);Je[dr]=ar})}),n.set(Je),Je})},k=function(me,Je){var at=T(me);sr(at,function(Jt,En){var ar=It(Je,En);Vt(Jt.element,"aria-expanded",ar)})},D=function(me,Je,at){return p.from(at[0]).bind(function(Jt){return Je.lookupMenu(Jt).bind(function(En){if(En.type==="notbuilt")return p.none();var ar=En.menu,dr=y(Je,at.slice(1));return Ke(dr,function(Uo){Sa(Uo.element,e.markers.backgroundMenu)}),kr(ar.element)||zt.append(me,xi(ar)),Pu(ar.element,[e.markers.backgroundMenu]),g(me,ar),S(me,Je,at),p.some(ar)})})},H;(function(me){me[me.HighlightSubmenu=0]="HighlightSubmenu",me[me.HighlightParent=1]="HighlightParent"})(H||(H={}));var V=function(me,Je,at){if(at.type==="notbuilt"){var Jt=me.getSystem().build(at.nbMenu());return i.setMenuBuilt(Je,Jt),Jt}else return at.menu},z=function(me,Je,at){if(at===void 0&&(at=H.HighlightSubmenu),Je.hasConfigured(lt)&&lt.isDisabled(Je))return p.some(Je);var Jt=l(Je);return i.expand(Jt).bind(function(En){return k(me,En),p.from(En[0]).bind(function(ar){return i.lookupMenu(ar).bind(function(dr){var Uo=V(me,ar,dr);return kr(Uo.element)||zt.append(me,xi(Uo)),e.onOpenSubmenu(me,Je,Uo,Re(En)),at===H.HighlightSubmenu?(Rn.highlightFirst(Uo),D(me,i,En)):(Rn.dehighlightAll(Uo),p.some(Je))})})})},W=function(me,Je){var at=l(Je);return i.collapse(at).bind(function(Jt){return k(me,Jt),D(me,i,Jt).map(function(En){return e.onCollapseMenu(me,Je,En),En})})},re=function(me,Je){var at=l(Je);return i.refresh(at).bind(function(Jt){return k(me,Jt),D(me,i,Jt)})},ne=function(me,Je){return us(Je.element)?p.none():z(me,Je,H.HighlightSubmenu)},U=function(me,Je){return us(Je.element)?p.none():W(me,Je)},Q=function(me,Je){return W(me,Je).orThunk(function(){return e.onEscape(me,Je).map(function(){return me})})},le=function(me){return function(Je,at){return Ci(at.getSource(),"."+e.markers.item).bind(function(Jt){return Je.getSystem().getByDom(Jt).toOptional().bind(function(En){return me(Je,En).map(qe)})})}},$e=rr([we(_e(),function(me,Je){var at=Je.event.item;i.lookupItem(l(at)).each(function(){var Jt=Je.event.menu;Rn.highlight(me,Jt);var En=l(Je.event.item);i.refresh(En).each(function(ar){return S(me,i,ar)})})}),du(function(me,Je){var at=Je.event.target;me.getSystem().getByDom(at).each(function(Jt){var En=l(Jt);En.indexOf("collapse-item")===0&&W(me,Jt),z(me,Jt,H.HighlightSubmenu).fold(function(){e.onExecute(me,Jt)},be)})}),br(function(me,Je){c(me).each(function(at){zt.append(me,xi(at)),e.onOpenMenu(me,at),e.highlightImmediately&&g(me,at)})})].concat(e.navigateOnHover?[we(M2(),function(me,Je){var at=Je.event.item;re(me,at),z(me,at,H.HighlightParent),e.onHover(me,at)})]:[])),he=function(me){return Rn.getHighlighted(me).bind(Rn.getHighlighted)},Pe=function(me){he(me).each(function(Je){W(me,Je)})},ye=function(me){i.getPrimary().each(function(Je){g(me,Je)})},se=function(me){return p.from(me.components()[0]).filter(function(Je){return pa(Je.element,"role")==="menu"})},De=function(me){var Je=i.getPrimary().bind(function(at){return he(me).bind(function(Jt){var En=l(Jt),ar=Tr(i.getMenus()),dr=Xr(Se(ar,qr.extractPreparedMenu));return i.getTriggeringPath(En,function(Uo){return v(me,dr,Uo)})}).map(function(Jt){return{primary:at,triggeringPath:Jt}})});Je.fold(function(){se(me).each(function(at){e.onRepositionMenu(me,at,[])})},function(at){var Jt=at.primary,En=at.triggeringPath;e.onRepositionMenu(me,Jt,En)})},et={collapseMenu:Pe,highlightPrimary:ye,repositionMenus:De};return{uid:e.uid,dom:e.dom,markers:e.markers,behaviours:Ta(e.tmenuBehaviours,[ht.config({mode:"special",onRight:le(ne),onLeft:le(U),onEscape:le(Q),focusIn:function(me,Je){i.getPrimary().each(function(at){yg(me,at.element,Ds())})}}),Rn.config({highlightClass:e.markers.selectedMenu,itemClass:e.markers.menu}),Zt.config({find:function(me){return Rn.getHighlighted(me)}}),zt.config({})]),eventOrder:e.eventOrder,apis:et,events:$e}},go=j("collapse-item"),Cn=function(e,t,n){return{primary:e,menus:t,expansions:n}},Rt=function(e,t){return{primary:e,menus:hc(e,t),expansions:{}}},dn=function(e){return{value:rt(go()),meta:{text:e}}},Vn=Oi({name:"TieredMenu",configFields:[Bg("onExecute"),Bg("onEscape"),Ks("onOpenMenu"),Ks("onOpenSubmenu"),An("onRepositionMenu"),An("onCollapseMenu"),K("highlightImmediately",!0),mc("data",[de("primary"),de("menus"),de("expansions")]),K("fakeFocus",!1),An("onHighlight"),An("onHover"),Gs(),de("dom"),K("navigateOnHover",!0),K("stayInDom",!1),va("tmenuBehaviours",[ht,Rn,Zt,zt]),K("eventOrder",{})],apis:{collapseMenu:function(e,t){e.collapseMenu(t)},highlightPrimary:function(e,t){e.highlightPrimary(t)},repositionMenus:function(e,t){e.repositionMenus(t)}},factory:Oa,extraApis:{tieredData:Cn,singleData:Rt,collapseItem:dn}}),xr=function(e,t,n,a,i){var c=function(){return e.lazySink(t)},l=a.type==="horizontal"?{layouts:{onLtr:function(){return xd()},onRtl:function(){return qg()}}}:{},v=function(g){return g.length===2},d=function(g){return v(g)?l:{}};return Vn.sketch({dom:{tag:"div"},data:a.data,markers:a.menu.markers,highlightImmediately:a.menu.highlightImmediately,onEscape:function(){return fn.close(t),e.onEscape.map(function(g){return g(t)}),p.some(!0)},onExecute:function(){return p.some(!0)},onOpenMenu:function(g,y){fo.positionWithinBounds(c().getOrDie(),y,n,i())},onOpenSubmenu:function(g,y,S,T){var k=c().getOrDie();fo.position(k,S,{anchor:L({type:"submenu",item:y},d(T))})},onRepositionMenu:function(g,y,S){var T=c().getOrDie();fo.positionWithinBounds(T,y,n,i()),Ke(S,function(k){var D=d(k.triggeringPath);fo.position(T,k.triggeredMenu,{anchor:L({type:"submenu",item:k.triggeringItem},D)})})}})},kc=function(e,t){var n=function(k,D){var H=e.getRelated(k);return H.exists(function(V){return Us(V,D)})},a=function(k,D){fn.setContent(k,D)},i=function(k,D,H){c(k,D,H,p.none())},c=function(k,D,H,V){l(k,D,H,function(){return V.map(function(z){return Da(z)})})},l=function(k,D,H,V){var z=e.lazySink(k).getOrDie();fn.openWhileCloaked(k,D,function(){return fo.positionWithinBounds(z,k,H,V())}),Ve.setValue(k,p.some({mode:"position",config:H,getBounds:V}))},v=function(k,D,H){d(k,D,H,p.none)},d=function(k,D,H,V){var z=xr(e,k,D,H,V);fn.open(k,z),Ve.setValue(k,p.some({mode:"menu",menu:z}))},g=function(k){fn.isOpen(k)&&(Ve.setValue(k,p.none()),fn.close(k))},y=function(k){return fn.getState(k)},S=function(k){fn.isOpen(k)&&Ve.getValue(k).each(function(D){switch(D.mode){case"menu":fn.getState(k).each(Vn.repositionMenus);break;case"position":var H=e.lazySink(k).getOrDie();fo.positionWithinBounds(H,k,D.config,D.getBounds());break}})},T={setContent:a,showAt:i,showWithin:c,showWithinBounds:l,showMenuAt:v,showMenuWithinBounds:d,hide:g,getContent:y,reposition:S,isOpen:fn.isOpen};return{uid:e.uid,dom:e.dom,behaviours:Ta(e.inlineBehaviours,[fn.config({isPartOf:function(k,D,H){return Us(D,H)||n(k,H)},getAttachPoint:function(k){return e.lazySink(k).getOrDie()},onOpen:function(k){e.onShow(k)},onClose:function(k){e.onHide(k)}}),Ve.config({store:{mode:"memory",initialValue:p.none()}}),ui.config({channels:L(L({},jd(L({isExtraPart:t.isExtraPart},e.fireDismissalEventInstead.map(function(k){return{fireEventInstead:{event:k.event}}}).getOr({})))),Eh(L(L({},e.fireRepositionEventInstead.map(function(k){return{fireEventInstead:{event:k.event}}}).getOr({})),{doReposition:S})))})]),eventOrder:e.eventOrder,apis:T}},Nn=Oi({name:"InlineView",configFields:[de("lazySink"),An("onShow"),An("onHide"),El("onEscape"),va("inlineBehaviours",[fn,Ve,ui]),$o("fireDismissalEventInstead",[K("event",Rs())]),$o("fireRepositionEventInstead",[K("event",h1())]),K("getRelated",p.none),K("isExtraPart",Le),K("eventOrder",p.none)],factory:kc,apis:{showAt:function(e,t,n,a){e.showAt(t,n,a)},showWithin:function(e,t,n,a,i){e.showWithin(t,n,a,i)},showWithinBounds:function(e,t,n,a,i){e.showWithinBounds(t,n,a,i)},showMenuAt:function(e,t,n,a){e.showMenuAt(t,n,a)},showMenuWithinBounds:function(e,t,n,a,i){e.showMenuWithinBounds(t,n,a,i)},hide:function(e,t){e.hide(t)},isOpen:function(e,t){return e.isOpen(t)},getContent:function(e,t){return e.getContent(t)},setContent:function(e,t,n){e.setContent(t,n)},reposition:function(e,t){e.reposition(t)}}}),ki="layout-inset",Ra=function(e){return e.x},Sm=function(e,t){return e.x+e.width/2-t.width/2},ol=function(e,t){return e.x+e.width-t.width},pu=function(e){return e.y},Ai=function(e,t){return e.y+e.height-t.height},Ku=function(e,t){return e.y+e.height/2-t.height/2},xm=function(e,t,n){return xa(ol(e,t),Ai(e,t),n.insetSouthwest(),Sd(),"southwest",_a(e,{right:0,bottom:3}),ki)},mf=function(e,t,n){return xa(Ra(e),Ai(e,t),n.insetSoutheast(),Ig(),"southeast",_a(e,{left:1,bottom:3}),ki)},Sv=function(e,t,n){return xa(ol(e,t),pu(e),n.insetNorthwest(),Hg(),"northwest",_a(e,{right:0,top:2}),ki)},xv=function(e,t,n){return xa(Ra(e),pu(e),n.insetNortheast(),wd(),"northeast",_a(e,{left:1,top:2}),ki)},bu=function(e,t,n){return xa(Sm(e,t),pu(e),n.insetNorth(),Xf(),"north",_a(e,{top:2}),ki)},gf=function(e,t,n){return xa(Sm(e,t),Ai(e,t),n.insetSouth(),$g(),"south",_a(e,{bottom:3}),ki)},Cm=function(e,t,n){return xa(ol(e,t),Ku(e,t),n.insetEast(),Yf(),"east",_a(e,{right:0}),ki)},E2=function(e,t,n){return xa(Ra(e),Ku(e,t),n.insetWest(),j1(),"west",_a(e,{left:1}),ki)},Cv=function(e){switch(e){case"north":return bu;case"northeast":return xv;case"northwest":return Sv;case"south":return gf;case"southeast":return mf;case"southwest":return xm;case"east":return Cm;case"west":return E2}},ZT=function(e,t,n,a,i){var c=rh(a).map(Cv).getOr(bu);return c(e,t,n,a,i)},IA=function(e){switch(e){case"north":return gf;case"northeast":return mf;case"northwest":return xm;case"south":return bu;case"southeast":return xv;case"southwest":return Sv;case"east":return E2;case"west":return Cm}},$A=function(e,t,n,a,i){var c=rh(a).map(IA).getOr(bu);return c(e,t,n,a,i)},hf=tinymce.util.Tools.resolve("tinymce.util.Delay"),LA=function(e){var t=wm(e.action),n=e.dom.tag,a=function(c){return ct(e.dom,"attributes").bind(function(l){return ct(l,c)})},i=function(){if(n==="button"){var c=a("type").getOr("button"),l=a("role").map(function(d){return{role:d}}).getOr({});return L({type:c},l)}else{var v=a("role").getOr("button");return{role:v}}};return{uid:e.uid,dom:e.dom,components:e.components,events:t,behaviours:Wi.augment(e.buttonBehaviours,[Ot.config({}),ht.config({mode:"execution",useSpace:!0,useEnter:!0})]),domModification:{attributes:i()},eventOrder:e.eventOrder}},Vo=Oi({name:"Button",factory:LA,configFields:[K("uid",void 0),de("dom"),K("components",[]),Wi.field("buttonBehaviours",[Ot,ht]),kn("action"),kn("role"),K("eventOrder",{})]}),PA=function(e){var t=e.dom.attributes!==void 0?e.dom.attributes:[];return ce(t,function(n,a){var i;return a.name==="class"?n:L(L({},n),(i={},i[a.name]=a.value,i))},{})},NA=function(e){return Array.prototype.slice.call(e.dom.classList,0)},il=function(e){var t=$.fromHtml(e),n=E(t),a=PA(t),i=NA(t),c=n.length===0?{}:{innerHtml:bc(t)};return L({tag:Et(t),classes:i,attributes:a},c)},Ln=function(e){var t=Z4(e)&&mr(e,"uid")?e.uid:Nl("memento"),n=function(c){return c.getSystem().getByUid(t).getOrDie()},a=function(c){return c.getSystem().getByUid(t).toOptional()},i=function(){return L(L({},e),{uid:t})};return{get:n,getOpt:a,asSpec:i}};function Tv(e){"@babel/helpers - typeof";return Tv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tv(e)}function yx(e,t){return yx=Object.setPrototypeOf||function(a,i){return a.__proto__=i,a},yx(e,t)}function VA(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function D2(e,t,n){return VA()?D2=Reflect.construct:D2=function(i,c,l){var v=[null];v.push.apply(v,c);var d=Function.bind.apply(i,v),g=new d;return l&&yx(g,l.prototype),g},D2.apply(null,arguments)}function Ac(e){return UA(e)||WA(e)||jA(e)||GA()}function UA(e){if(Array.isArray(e))return wx(e)}function WA(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function jA(e,t){if(e){if(typeof e=="string")return wx(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return wx(e,t)}}function wx(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function GA(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var qA=Object.hasOwnProperty,QT=Object.setPrototypeOf,KA=Object.isFrozen,XA=Object.getPrototypeOf,YA=Object.getOwnPropertyDescriptor,Mi=Object.freeze,vs=Object.seal,JA=Object.create,e6=typeof Reflect<"u"&&Reflect,_2=e6.apply,Sx=e6.construct;_2||(_2=function(t,n,a){return t.apply(n,a)}),Mi||(Mi=function(t){return t}),vs||(vs=function(t){return t}),Sx||(Sx=function(t,n){return D2(t,Ac(n))});var ZA=Mc(Array.prototype.forEach),t6=Mc(Array.prototype.pop),wp=Mc(Array.prototype.push),z2=Mc(String.prototype.toLowerCase),QA=Mc(String.prototype.match),pf=Mc(String.prototype.replace),eM=Mc(String.prototype.indexOf),tM=Mc(String.prototype.trim),Ei=Mc(RegExp.prototype.test),xx=nM(TypeError);function Mc(e){return function(t){for(var n=arguments.length,a=new Array(n>1?n-1:0),i=1;i<n;i++)a[i-1]=arguments[i];return _2(e,t,a)}}function nM(e){return function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return Sx(e,n)}}function Kn(e,t){QT&&QT(e,null);for(var n=t.length;n--;){var a=t[n];if(typeof a=="string"){var i=z2(a);i!==a&&(KA(t)||(t[n]=i),a=i)}e[a]=!0}return e}function Ov(e){var t=JA(null),n;for(n in e)_2(qA,e,[n])&&(t[n]=e[n]);return t}function R2(e,t){for(;e!==null;){var n=YA(e,t);if(n){if(n.get)return Mc(n.get);if(typeof n.value=="function")return Mc(n.value)}e=XA(e)}function a(i){return console.warn("fallback value for",i),null}return a}var n6=Mi(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Cx=Mi(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Tx=Mi(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),rM=Mi(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Ox=Mi(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),aM=Mi(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),r6=Mi(["#text"]),a6=Mi(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),kx=Mi(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),o6=Mi(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),B2=Mi(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),oM=vs(/\{\{[\w\W]*|[\w\W]*\}\}/gm),iM=vs(/<%[\w\W]*|[\w\W]*%>/gm),uM=vs(/^data-[\-\w.\u00B7-\uFFFF]/),cM=vs(/^aria-[\-\w]+$/),sM=vs(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),lM=vs(/^(?:\w+script|data):/i),fM=vs(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),vM=vs(/^html$/i),dM=function(){return typeof window>"u"?null:window},mM=function(t,n){if(Tv(t)!=="object"||typeof t.createPolicy!="function")return null;var a=null,i="data-tt-policy-suffix";n.currentScript&&n.currentScript.hasAttribute(i)&&(a=n.currentScript.getAttribute(i));var c="dompurify"+(a?"#"+a:"");try{return t.createPolicy(c,{createHTML:function(v){return v}})}catch{return console.warn("TrustedTypes policy "+c+" could not be created."),null}};function i6(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:dM(),t=function(ae){return i6(ae)};if(t.version="2.3.8",t.removed=[],!e||!e.document||e.document.nodeType!==9)return t.isSupported=!1,t;var n=e.document,a=e.document,i=e.DocumentFragment,c=e.HTMLTemplateElement,l=e.Node,v=e.Element,d=e.NodeFilter,g=e.NamedNodeMap,y=g===void 0?e.NamedNodeMap||e.MozNamedAttrMap:g,S=e.HTMLFormElement,T=e.DOMParser,k=e.trustedTypes,D=v.prototype,H=R2(D,"cloneNode"),V=R2(D,"nextSibling"),z=R2(D,"childNodes"),W=R2(D,"parentNode");if(typeof c=="function"){var re=a.createElement("template");re.content&&re.content.ownerDocument&&(a=re.content.ownerDocument)}var ne=mM(k,n),U=ne?ne.createHTML(""):"",Q=a,le=Q.implementation,$e=Q.createNodeIterator,he=Q.createDocumentFragment,Pe=Q.getElementsByTagName,ye=n.importNode,se={};try{se=Ov(a).documentMode?a.documentMode:{}}catch{}var De={};t.isSupported=typeof W=="function"&&le&&typeof le.createHTMLDocument<"u"&&se!==9;var et=oM,me=iM,Je=uM,at=cM,Jt=lM,En=fM,ar=sM,dr=null,Uo=Kn({},[].concat(Ac(n6),Ac(Cx),Ac(Tx),Ac(Ox),Ac(r6))),Na=null,jm=Kn({},[].concat(Ac(a6),Ac(kx),Ac(o6),Ac(B2))),aa=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),dl=null,ml=null,Lv=!0,gl=!0,Pv=!1,bo=!1,wu=!1,eo=!1,Nv=!1,bs=!1,Of=!1,oa=!1,Hc=!0,ys=!0,hl=!1,Su={},ws=null,Ue=Kn({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),Pt=null,Bn=Kn({},["audio","video","img","source","image","track"]),fr=null,yo=Kn({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),to="http://www.w3.org/1998/Math/MathML",Wo="http://www.w3.org/2000/svg",_i="http://www.w3.org/1999/xhtml",kf=_i,Vv=!1,Af,jT=["application/xhtml+xml","text/html"],GT="text/html",pl,Mf=null,pj=a.createElement("form"),mA=function(ae){return ae instanceof RegExp||ae instanceof Function},qT=function(ae){Mf&&Mf===ae||((!ae||Tv(ae)!=="object")&&(ae={}),ae=Ov(ae),dr="ALLOWED_TAGS"in ae?Kn({},ae.ALLOWED_TAGS):Uo,Na="ALLOWED_ATTR"in ae?Kn({},ae.ALLOWED_ATTR):jm,fr="ADD_URI_SAFE_ATTR"in ae?Kn(Ov(yo),ae.ADD_URI_SAFE_ATTR):yo,Pt="ADD_DATA_URI_TAGS"in ae?Kn(Ov(Bn),ae.ADD_DATA_URI_TAGS):Bn,ws="FORBID_CONTENTS"in ae?Kn({},ae.FORBID_CONTENTS):Ue,dl="FORBID_TAGS"in ae?Kn({},ae.FORBID_TAGS):{},ml="FORBID_ATTR"in ae?Kn({},ae.FORBID_ATTR):{},Su="USE_PROFILES"in ae?ae.USE_PROFILES:!1,Lv=ae.ALLOW_ARIA_ATTR!==!1,gl=ae.ALLOW_DATA_ATTR!==!1,Pv=ae.ALLOW_UNKNOWN_PROTOCOLS||!1,bo=ae.SAFE_FOR_TEMPLATES||!1,wu=ae.WHOLE_DOCUMENT||!1,bs=ae.RETURN_DOM||!1,Of=ae.RETURN_DOM_FRAGMENT||!1,oa=ae.RETURN_TRUSTED_TYPE||!1,Nv=ae.FORCE_BODY||!1,Hc=ae.SANITIZE_DOM!==!1,ys=ae.KEEP_CONTENT!==!1,hl=ae.IN_PLACE||!1,ar=ae.ALLOWED_URI_REGEXP||ar,kf=ae.NAMESPACE||_i,ae.CUSTOM_ELEMENT_HANDLING&&mA(ae.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(aa.tagNameCheck=ae.CUSTOM_ELEMENT_HANDLING.tagNameCheck),ae.CUSTOM_ELEMENT_HANDLING&&mA(ae.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(aa.attributeNameCheck=ae.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),ae.CUSTOM_ELEMENT_HANDLING&&typeof ae.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(aa.allowCustomizedBuiltInElements=ae.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Af=jT.indexOf(ae.PARSER_MEDIA_TYPE)===-1?Af=GT:Af=ae.PARSER_MEDIA_TYPE,pl=Af==="application/xhtml+xml"?function(nt){return nt}:z2,bo&&(gl=!1),Of&&(bs=!0),Su&&(dr=Kn({},Ac(r6)),Na=[],Su.html===!0&&(Kn(dr,n6),Kn(Na,a6)),Su.svg===!0&&(Kn(dr,Cx),Kn(Na,kx),Kn(Na,B2)),Su.svgFilters===!0&&(Kn(dr,Tx),Kn(Na,kx),Kn(Na,B2)),Su.mathMl===!0&&(Kn(dr,Ox),Kn(Na,o6),Kn(Na,B2))),ae.ADD_TAGS&&(dr===Uo&&(dr=Ov(dr)),Kn(dr,ae.ADD_TAGS)),ae.ADD_ATTR&&(Na===jm&&(Na=Ov(Na)),Kn(Na,ae.ADD_ATTR)),ae.ADD_URI_SAFE_ATTR&&Kn(fr,ae.ADD_URI_SAFE_ATTR),ae.FORBID_CONTENTS&&(ws===Ue&&(ws=Ov(ws)),Kn(ws,ae.FORBID_CONTENTS)),ys&&(dr["#text"]=!0),wu&&Kn(dr,["html","head","body"]),dr.table&&(Kn(dr,["tbody"]),delete dl.tbody),Mi&&Mi(ae),Mf=ae)},gA=Kn({},["mi","mo","mn","ms","mtext"]),hA=Kn({},["foreignobject","desc","title","annotation-xml"]),bj=Kn({},["title","style","font","a","script"]),Ey=Kn({},Cx);Kn(Ey,Tx),Kn(Ey,rM);var KT=Kn({},Ox);Kn(KT,aM);var yj=function(ae){var nt=W(ae);(!nt||!nt.tagName)&&(nt={namespaceURI:_i,tagName:"template"});var Bt=z2(ae.tagName),Ir=z2(nt.tagName);return ae.namespaceURI===Wo?nt.namespaceURI===_i?Bt==="svg":nt.namespaceURI===to?Bt==="svg"&&(Ir==="annotation-xml"||gA[Ir]):!!Ey[Bt]:ae.namespaceURI===to?nt.namespaceURI===_i?Bt==="math":nt.namespaceURI===Wo?Bt==="math"&&hA[Ir]:!!KT[Bt]:ae.namespaceURI===_i?nt.namespaceURI===Wo&&!hA[Ir]||nt.namespaceURI===to&&!gA[Ir]?!1:!KT[Bt]&&(bj[Bt]||!Ey[Bt]):!1},bl=function(ae){wp(t.removed,{element:ae});try{ae.parentNode.removeChild(ae)}catch{try{ae.outerHTML=U}catch{ae.remove()}}},pA=function(ae,nt){try{wp(t.removed,{attribute:nt.getAttributeNode(ae),from:nt})}catch{wp(t.removed,{attribute:null,from:nt})}if(nt.removeAttribute(ae),ae==="is"&&!Na[ae])if(bs||Of)try{bl(nt)}catch{}else try{nt.setAttribute(ae,"")}catch{}},bA=function(ae){var nt,Bt;if(Nv)ae="<remove></remove>"+ae;else{var Ir=QA(ae,/^[\r\n\t ]+/);Bt=Ir&&Ir[0]}Af==="application/xhtml+xml"&&(ae='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+ae+"</body></html>");var Yi=ne?ne.createHTML(ae):ae;if(kf===_i)try{nt=new T().parseFromString(Yi,Af)}catch{}if(!nt||!nt.documentElement){nt=le.createDocument(kf,"template",null);try{nt.documentElement.innerHTML=Vv?"":Yi}catch{}}var fi=nt.body||nt.documentElement;return ae&&Bt&&fi.insertBefore(a.createTextNode(Bt),fi.childNodes[0]||null),kf===_i?Pe.call(nt,wu?"html":"body")[0]:wu?nt.documentElement:fi},yA=function(ae){return $e.call(ae.ownerDocument||ae,ae,d.SHOW_ELEMENT|d.SHOW_COMMENT|d.SHOW_TEXT,null,!1)},wj=function(ae){return ae instanceof S&&(typeof ae.nodeName!="string"||typeof ae.textContent!="string"||typeof ae.removeChild!="function"||!(ae.attributes instanceof y)||typeof ae.removeAttribute!="function"||typeof ae.setAttribute!="function"||typeof ae.namespaceURI!="string"||typeof ae.insertBefore!="function")},Yp=function(ae){return Tv(l)==="object"?ae instanceof l:ae&&Tv(ae)==="object"&&typeof ae.nodeType=="number"&&typeof ae.nodeName=="string"},yl=function(ae,nt,Bt){De[ae]&&ZA(De[ae],function(Ir){Ir.call(t,nt,Bt,Mf)})},wA=function(ae){var nt;if(yl("beforeSanitizeElements",ae,null),wj(ae)||Ei(/[\u0080-\uFFFF]/,ae.nodeName))return bl(ae),!0;var Bt=pl(ae.nodeName);if(yl("uponSanitizeElement",ae,{tagName:Bt,allowedTags:dr}),ae.hasChildNodes()&&!Yp(ae.firstElementChild)&&(!Yp(ae.content)||!Yp(ae.content.firstElementChild))&&Ei(/<[/\w]/g,ae.innerHTML)&&Ei(/<[/\w]/g,ae.textContent)||Bt==="select"&&Ei(/<template/i,ae.innerHTML))return bl(ae),!0;if(!dr[Bt]||dl[Bt]){if(!dl[Bt]&&xA(Bt)&&(aa.tagNameCheck instanceof RegExp&&Ei(aa.tagNameCheck,Bt)||aa.tagNameCheck instanceof Function&&aa.tagNameCheck(Bt)))return!1;if(ys&&!ws[Bt]){var Ir=W(ae)||ae.parentNode,Yi=z(ae)||ae.childNodes;if(Yi&&Ir)for(var fi=Yi.length,jo=fi-1;jo>=0;--jo)Ir.insertBefore(H(Yi[jo],!0),V(ae))}return bl(ae),!0}return ae instanceof v&&!yj(ae)||(Bt==="noscript"||Bt==="noembed")&&Ei(/<\/no(script|embed)/i,ae.innerHTML)?(bl(ae),!0):(bo&&ae.nodeType===3&&(nt=ae.textContent,nt=pf(nt,et," "),nt=pf(nt,me," "),ae.textContent!==nt&&(wp(t.removed,{element:ae.cloneNode()}),ae.textContent=nt)),yl("afterSanitizeElements",ae,null),!1)},SA=function(ae,nt,Bt){if(Hc&&(nt==="id"||nt==="name")&&(Bt in a||Bt in pj))return!1;if(!(gl&&!ml[nt]&&Ei(Je,nt))){if(!(Lv&&Ei(at,nt))){if(!Na[nt]||ml[nt]){if(!(xA(ae)&&(aa.tagNameCheck instanceof RegExp&&Ei(aa.tagNameCheck,ae)||aa.tagNameCheck instanceof Function&&aa.tagNameCheck(ae))&&(aa.attributeNameCheck instanceof RegExp&&Ei(aa.attributeNameCheck,nt)||aa.attributeNameCheck instanceof Function&&aa.attributeNameCheck(nt))||nt==="is"&&aa.allowCustomizedBuiltInElements&&(aa.tagNameCheck instanceof RegExp&&Ei(aa.tagNameCheck,Bt)||aa.tagNameCheck instanceof Function&&aa.tagNameCheck(Bt))))return!1}else if(!fr[nt]){if(!Ei(ar,pf(Bt,En,""))){if(!((nt==="src"||nt==="xlink:href"||nt==="href")&&ae!=="script"&&eM(Bt,"data:")===0&&Pt[ae])){if(!(Pv&&!Ei(Jt,pf(Bt,En,"")))){if(Bt)return!1}}}}}}return!0},xA=function(ae){return ae.indexOf("-")>0},CA=function(ae){var nt,Bt,Ir,Yi;yl("beforeSanitizeAttributes",ae,null);var fi=ae.attributes;if(fi){var jo={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Na};for(Yi=fi.length;Yi--;){nt=fi[Yi];var Dy=nt,zi=Dy.name,TA=Dy.namespaceURI;if(Bt=zi==="value"?nt.value:tM(nt.value),Ir=pl(zi),jo.attrName=Ir,jo.attrValue=Bt,jo.keepAttr=!0,jo.forceKeepAttr=void 0,yl("uponSanitizeAttribute",ae,jo),Bt=jo.attrValue,!jo.forceKeepAttr&&(pA(zi,ae),!!jo.keepAttr)){if(Ei(/\/>/i,Bt)){pA(zi,ae);continue}bo&&(Bt=pf(Bt,et," "),Bt=pf(Bt,me," "));var xj=pl(ae.nodeName);if(SA(xj,Ir,Bt))try{TA?ae.setAttributeNS(TA,zi,Bt):ae.setAttribute(zi,Bt),t6(t.removed)}catch{}}}yl("afterSanitizeAttributes",ae,null)}},Sj=function qt(ae){var nt,Bt=yA(ae);for(yl("beforeSanitizeShadowDOM",ae,null);nt=Bt.nextNode();)yl("uponSanitizeShadowNode",nt,null),!wA(nt)&&(nt.content instanceof i&&qt(nt.content),CA(nt));yl("afterSanitizeShadowDOM",ae,null)};return t.sanitize=function(qt,ae){var nt,Bt,Ir,Yi,fi;if(Vv=!qt,Vv&&(qt="<!-->"),typeof qt!="string"&&!Yp(qt)){if(typeof qt.toString!="function")throw xx("toString is not a function");if(qt=qt.toString(),typeof qt!="string")throw xx("dirty is not a string, aborting")}if(!t.isSupported){if(Tv(e.toStaticHTML)==="object"||typeof e.toStaticHTML=="function"){if(typeof qt=="string")return e.toStaticHTML(qt);if(Yp(qt))return e.toStaticHTML(qt.outerHTML)}return qt}if(eo||qT(ae),t.removed=[],typeof qt=="string"&&(hl=!1),hl){if(qt.nodeName){var jo=pl(qt.nodeName);if(!dr[jo]||dl[jo])throw xx("root node is forbidden and cannot be sanitized in-place")}}else if(qt instanceof l)nt=bA("<!---->"),Bt=nt.ownerDocument.importNode(qt,!0),Bt.nodeType===1&&Bt.nodeName==="BODY"||Bt.nodeName==="HTML"?nt=Bt:nt.appendChild(Bt);else{if(!bs&&!bo&&!wu&&qt.indexOf("<")===-1)return ne&&oa?ne.createHTML(qt):qt;if(nt=bA(qt),!nt)return bs?null:oa?U:""}nt&&Nv&&bl(nt.firstChild);for(var Dy=yA(hl?qt:nt);Ir=Dy.nextNode();)Ir.nodeType===3&&Ir===Yi||wA(Ir)||(Ir.content instanceof i&&Sj(Ir.content),CA(Ir),Yi=Ir);if(Yi=null,hl)return qt;if(bs){if(Of)for(fi=he.call(nt.ownerDocument);nt.firstChild;)fi.appendChild(nt.firstChild);else fi=nt;return Na.shadowroot&&(fi=ye.call(n,fi,!0)),fi}var zi=wu?nt.outerHTML:nt.innerHTML;return wu&&dr["!doctype"]&&nt.ownerDocument&&nt.ownerDocument.doctype&&nt.ownerDocument.doctype.name&&Ei(vM,nt.ownerDocument.doctype.name)&&(zi="<!DOCTYPE "+nt.ownerDocument.doctype.name+`>
`+zi),bo&&(zi=pf(zi,et," "),zi=pf(zi,me," ")),ne&&oa?ne.createHTML(zi):zi},t.setConfig=function(qt){qT(qt),eo=!0},t.clearConfig=function(){Mf=null,eo=!1},t.isValidAttribute=function(qt,ae,nt){Mf||qT({});var Bt=pl(qt),Ir=pl(ae);return SA(Bt,Ir,nt)},t.addHook=function(qt,ae){typeof ae=="function"&&(De[qt]=De[qt]||[],wp(De[qt],ae))},t.removeHook=function(qt){if(De[qt])return t6(De[qt])},t.removeHooks=function(qt){De[qt]&&(De[qt]=[])},t.removeAllHooks=function(){De={}},t}var gM=i6(),u6=function(e){return gM().sanitize(e)},Ec=tinymce.util.Tools.resolve("tinymce.util.I18n"),hM={indent:!0,outdent:!0,"table-insert-column-after":!0,"table-insert-column-before":!0,"paste-column-after":!0,"paste-column-before":!0,"unordered-list":!0,"list-bull-circle":!0,"list-bull-default":!0,"list-bull-square":!0},c6="temporary-placeholder",Ax=function(e){return function(){return ct(e,c6).getOr("!not found!")}},Mx=function(e,t){var n=e.toLowerCase();if(Ec.isRtl()){var a=tu(n,"-rtl");return pn(t,a)?a:n}else return n},s6=function(e,t){return ct(t,Mx(e,t))},l6=function(e,t){var n=t();return s6(e,n).getOrThunk(Ax(n))},pM=function(e,t,n){var a=t();return s6(e,a).or(n).getOrThunk(Ax(a))},bM=function(e){return Ec.isRtl()?pn(hM,e):!1},Ex=function(){return Nt("add-focusable",[br(function(e){Ww(e.element,"svg").each(function(t){return Vt(t,"focusable","false")})})])},f6=function(e,t,n,a){var i,c,l=bM(t)?["tox-icon--flip"]:[],v=ct(n,Mx(t,n)).or(a).getOrThunk(Ax(n));return{dom:{tag:e.tag,attributes:(i=e.attributes)!==null&&i!==void 0?i:{},classes:e.classes.concat(l),innerHtml:v},behaviours:Be(He(He([],(c=e.behaviours)!==null&&c!==void 0?c:[],!0),[Ex()],!1))}},Dc=function(e,t,n,a){return a===void 0&&(a=p.none()),f6(t,e,n(),a)},yM=function(e,t,n){var a=n(),i=Z(e,function(c){return pn(a,Mx(c,a))});return f6(t,i.getOr(c6),a,p.none())},wM={success:"checkmark",error:"warning",err:"error",warning:"warning",warn:"warning",info:"info"},SM=function(e){var t=Ln({dom:il("<p>"+u6(e.translationProvider(e.text))+"</p>"),behaviours:Be([zt.config({})])}),n=function(k){return{dom:{tag:"div",classes:["tox-bar"],attributes:{style:"width: "+k+"%"}}}},a=function(k){return{dom:{tag:"div",classes:["tox-text"],innerHtml:k+"%"}}},i=Ln({dom:{tag:"div",classes:e.progress?["tox-progress-bar","tox-progress-indicator"]:["tox-progress-bar"]},components:[{dom:{tag:"div",classes:["tox-bar-container"]},components:[n(0)]},a(0)],behaviours:Be([zt.config({})])}),c=function(k,D){k.getSystem().isConnected()&&i.getOpt(k).each(function(H){zt.set(H,[{dom:{tag:"div",classes:["tox-bar-container"]},components:[n(D)]},a(D)])})},l=function(k,D){if(k.getSystem().isConnected()){var H=t.get(k);zt.set(H,[es(D)])}},v={updateProgress:c,updateText:l},d=ze([e.icon.toArray(),e.level.toArray(),e.level.bind(function(k){return p.from(wM[k])}).toArray()]),g=Ln(Vo.sketch({dom:{tag:"button",classes:["tox-notification__dismiss","tox-button","tox-button--naked","tox-button--icon"]},components:[Dc("close",{tag:"div",classes:["tox-icon"],attributes:{"aria-label":e.translationProvider("Close")}},e.iconProvider)],action:function(k){e.onAction(k)}})),y=yM(d,{tag:"div",classes:["tox-notification__icon"]},e.iconProvider),S={dom:{tag:"div",classes:["tox-notification__body"]},components:[t.asSpec()],behaviours:Be([zt.config({})])},T=[y,S];return{uid:e.uid,dom:{tag:"div",attributes:{role:"alert"},classes:e.level.map(function(k){return["tox-notification","tox-notification--in","tox-notification--"+k]}).getOr(["tox-notification","tox-notification--in"])},behaviours:Be([Ot.config({}),Nt("notification-events",[we(wi(),function(k){g.getOpt(k).each(Ot.focus)})])]),components:T.concat(e.progress?[i.asSpec()]:[]).concat(e.closeButton?[g.asSpec()]:[]),apis:v}},Dx=Oi({name:"Notification",factory:SM,configFields:[kn("level"),de("progress"),de("icon"),de("onAction"),de("text"),de("iconProvider"),de("translationProvider"),lr("closeButton",!0)],apis:{updateProgress:function(e,t,n){e.updateProgress(t,n)},updateText:function(e,t,n){e.updateText(t,n)}}});function xM(e,t,n){var a=t.backstage.shared,i=function(g){switch(g){case"bc-bc":return gf;case"tc-tc":return bu;case"tc-bc":return Lo;case"bc-tc":default:return Pa}},c=function(g){g.length>0&&Ke(g,function(y,S){S===0?y.moveRel(null,"banner"):y.moveRel(g[S-1].getEl(),"bc-tc")})},l=function(g,y){var S=!g.closeButton&&g.timeout&&(g.timeout>0||g.timeout<0),T=function(){y(),Nn.hide(D)},k=ea(Dx.sketch({text:g.text,level:It(["success","error","warning","warn","info"],g.type)?g.type:void 0,progress:g.progressBar===!0,icon:p.from(g.icon),closeButton:!S,onAction:T,iconProvider:a.providers.icons,translationProvider:a.providers.translate})),D=ea(Nn.sketch(L({dom:{tag:"div",classes:["tox-notifications-container"]},lazySink:a.getSink,fireDismissalEventInstead:{}},a.header.isPositionedAtTop()?{}:{fireRepositionEventInstead:{}})));n.add(D),g.timeout>0&&hf.setTimeout(function(){T()},g.timeout);var H=function(){var V=Da($.fromDom(e.getContentAreaContainer())),z=Xa(),W=Ti(z.x,V.x,V.right),re=Ti(z.y,V.y,V.bottom),ne=Math.max(V.right,z.right),U=Math.max(V.bottom,z.bottom);return p.some(Zr(W,re,ne-W,U-re))};return{close:T,moveTo:function(V,z){Nn.showAt(D,xi(k),{anchor:{type:"makeshift",x:V,y:z}})},moveRel:function(V,z){var W=xi(k),re={maxHeightFunction:Jl()};if(z!=="banner"&&Oe(V)){var ne=i(z),U={type:"node",root:Yo(),node:p.some($.fromDom(V)),overrides:re,layouts:{onRtl:function(){return[ne]},onLtr:function(){return[ne]}}};Nn.showWithinBounds(D,W,{anchor:U},H)}else{var Q=L(L({},a.anchors.banner()),{overrides:re});Nn.showWithinBounds(D,W,{anchor:Q},H)}},text:function(V){Dx.updateText(k,V)},settings:g,getEl:function(){return k.element.dom},progressBar:{value:function(V){Dx.updateProgress(k,V)}}}},v=function(g){g.close()},d=function(g){return g.settings};return{open:l,close:v,reposition:c,getArgs:d}}var CM=function(e,t){var n=null,a=function(){$t(n)||(clearTimeout(n),n=null)},i=function(){for(var c=[],l=0;l<arguments.length;l++)c[l]=arguments[l];$t(n)&&(n=setTimeout(function(){n=null,e.apply(null,c)},t))};return{cancel:a,throttle:i}},_x=function(e,t){var n=null,a=function(){$t(n)||(clearTimeout(n),n=null)},i=function(){for(var c=[],l=0;l<arguments.length;l++)c[l]=arguments[l];a(),n=setTimeout(function(){n=null,e.apply(null,c)},t)};return{cancel:a,throttle:i}},TM=tinymce.util.Tools.resolve("tinymce.dom.TextSeeker"),OM=function(e,t){return e.isBlock(t)||It(["BR","IMG","HR","INPUT"],t.nodeName)||e.getContentEditable(t)==="false"},v6=function(e,t,n,a,i){var c=TM(e,function(l){return OM(e,l)});return p.from(c.backwards(t,n,a,i))},kM="[data-mce-autocompleter]",AM=function(e,t){return F2($.fromDom(e.selection.getNode())).getOrThunk(function(){var n=$.fromHtml('<span data-mce-autocompleter="1" data-mce-bogus="1"></span>',e.getDoc());return qa(n,$.fromDom(t.extractContents())),t.insertNode(n.dom),Or(n).each(function(a){return a.dom.normalize()}),E0(n).map(function(a){e.selection.setCursorLocation(a.dom,A0(a))}),n})},F2=function(e){return Ci(e,kM)},MM=function(e){return e.collapsed&&e.startContainer.nodeType===3},d6=function(e){return e.toString().replace(/\u00A0/g," ").replace(/\uFEFF/g,"")},m6=function(e){return e!==""&&` \f
\r	\v`.indexOf(e)!==-1},zx=function(e,t){return e.substring(t.length)},EM=function(e,t,n){var a;for(a=t-1;a>=0;a--){var i=e.charAt(a);if(m6(i))return p.none();if(i===n)break}return p.some(a)},DM=function(e,t,n,a){if(a===void 0&&(a=0),!MM(t))return p.none();var i=function(l,v,d){return EM(d,v,n).getOr(v)},c=e.getParent(t.startContainer,e.isBlock)||e.getRoot();return v6(e,t.startContainer,t.startOffset,i,c).bind(function(l){var v=t.cloneRange();if(v.setStart(l.container,l.offset),v.setEnd(t.endContainer,t.endOffset),v.collapsed)return p.none();var d=d6(v),g=d.lastIndexOf(n);return g!==0||zx(d,n).length<a?p.none():p.some({text:zx(d,n),range:v,triggerChar:n})})},Rx=function(e,t,n,a){return a===void 0&&(a=0),F2($.fromDom(t.startContainer)).fold(function(){return DM(e,t,n,a)},function(i){var c=e.createRng();c.selectNode(i.dom);var l=d6(c);return p.some({range:c,text:zx(l,n),triggerChar:n})})},_M=function(e,t){t.on("keypress compositionend",e.onKeypress.throttle),t.on("remove",e.onKeypress.cancel);var n=function(a,i){yt(a,sd(),{raw:i})};t.on("keydown",function(a){var i=function(){return e.getView().bind(Rn.getHighlighted)};a.which===8&&e.onKeypress.throttle(a),e.isActive()&&(a.which===27&&e.cancelIfNecessary(),e.isMenuOpen()?a.which===13?(i().each(Bs),a.preventDefault()):a.which===40?(i().fold(function(){e.getView().each(Rn.highlightFirst)},function(c){n(c,a)}),a.preventDefault(),a.stopImmediatePropagation()):(a.which===37||a.which===38||a.which===39)&&i().each(function(c){n(c,a),a.preventDefault(),a.stopImmediatePropagation()}):(a.which===13||a.which===38||a.which===40)&&e.cancelIfNecessary())}),t.on("NodeChange",function(a){e.isActive()&&!e.isProcessingAction()&&F2($.fromDom(a.element)).isNone()&&e.cancelIfNecessary()})},zM={setup:_M},Sp=tinymce.util.Tools.resolve("tinymce.util.Promise"),Bx=function(e,t){return{container:e,offset:t}},RM=function(e){return e.nodeType===xt},BM=function(e){return e.nodeType===Qe},g6=function(e){if(RM(e))return Bx(e,e.data.length);var t=e.childNodes;return t.length>0?g6(t[t.length-1]):Bx(e,t.length)},h6=function(e,t){var n=e.childNodes;return n.length>0&&t<n.length?h6(n[t],0):n.length>0&&BM(e)&&n.length===t?g6(n[n.length-1]):Bx(e,t)},FM=function(e,t){return v6(e,t.container,t.offset,function(n,a){return a===0?-1:a},e.getRoot()).filter(function(n){var a=n.container.data.charAt(n.offset-1);return!m6(a)}).isSome()},HM=function(e){return function(t){var n=h6(t.startContainer,t.startOffset);return!FM(e,n)}},IM=function(e,t,n){return qn(n.triggerChars,function(a){return Rx(e,t,a)})},$M=function(e,t){var n=t(),a=e.selection.getRng();return IM(e.dom,a,n).bind(function(i){return p6(e,t,i)})},p6=function(e,t,n,a){a===void 0&&(a={});var i=t(),c=e.selection.getRng(),l=c.startContainer.nodeValue,v=Ce(i.lookupByChar(n.triggerChar),function(g){return n.text.length>=g.minChars&&g.matches.getOrThunk(function(){return HM(e.dom)})(n.range,l,n.text)});if(v.length===0)return p.none();var d=Sp.all(Se(v,function(g){var y=g.fetch(n.text,g.maxResults,a);return y.then(function(S){return{matchText:n.text,items:S,columns:g.columns,onAction:g.onAction,highlightOn:g.highlightOn}})}));return p.some({lookupData:d,context:n})},b6=pt([Tt("type"),nr("text")]),LM=function(e){return hr("separatormenuitem",b6,e)},PM=pt([K("type","autocompleteitem"),K("active",!1),K("disabled",!1),K("meta",{}),Tt("value"),nr("text"),nr("icon")]),NM=pt([Tt("type"),Tt("ch"),od("minChars",1),K("columns",1),od("maxResults",10),El("matches"),Oo("fetch"),Oo("onAction"),Kc("highlightOn",[],jr)]),VM=function(e){return hr("Autocompleter.Separator",b6,e)},UM=function(e){return hr("Autocompleter.Item",PM,e)},WM=function(e){return hr("Autocompleter",NM,e)},xp=[lr("disabled",!1),nr("tooltip"),nr("icon"),nr("text"),pr("onSetup",function(){return be})],jM=pt([Tt("type"),Oo("onAction")].concat(xp)),y6=function(e){return hr("toolbarbutton",jM,e)},Fx=[lr("active",!1)].concat(xp),GM=pt(Fx.concat([Tt("type"),Oo("onAction")])),w6=function(e){return hr("ToggleButton",GM,e)},S6=[pr("predicate",Le),gc("scope","node",["node","editor"]),gc("position","selection",["node","selection","line"])],qM=xp.concat([K("type","contextformbutton"),K("primary",!1),Oo("onAction"),uo("original",je)]),KM=Fx.concat([K("type","contextformbutton"),K("primary",!1),Oo("onAction"),uo("original",je)]),XM=xp.concat([K("type","contextformbutton")]),YM=Fx.concat([K("type","contextformtogglebutton")]),JM=yi("type",{contextformbutton:qM,contextformtogglebutton:KM}),ZM=pt([K("type","contextform"),pr("initValue",j("")),nr("label"),Io("commands",JM),qc("launch",yi("type",{contextformbutton:XM,contextformtogglebutton:YM}))].concat(S6)),QM=function(e){return hr("ContextForm",ZM,e)},eE=pt([K("type","contexttoolbar"),Tt("items")].concat(S6)),tE=function(e){return hr("ContextToolbar",eE,e)},nE=function(e){var t={};return Ke(e,function(n){t[n]={}}),Zn(t)},rE=function(e){var t=e.ui.registry.getAll().popups,n=Qn(t,function(l){return WM(l).fold(function(v){throw new Error(Gc(v))},je)}),a=nE(hn(n,function(l){return l.ch})),i=Tr(n),c=function(l){return Ce(i,function(v){return v.ch===l})};return{dataset:n,triggerChars:a,lookupByChar:c}},Hx;(function(e){e[e.CLOSE_ON_EXECUTE=0]="CLOSE_ON_EXECUTE",e[e.BUBBLE_TO_SANDBOX=1]="BUBBLE_TO_SANDBOX"})(Hx||(Hx={}));var _c=Hx,Ix="tox-menu-nav__js",$x="tox-collection__item",Lx="tox-swatch",aE={normal:Ix,color:Lx},x6="tox-collection__item--enabled",oE="tox-collection__group-heading",C6="tox-collection__item-icon",Px="tox-collection__item-label",iE="tox-collection__item-accessory",T6="tox-collection__item-caret",uE="tox-collection__item-checkmark",Cp="tox-collection__item--active",O6="tox-collection__item-container",cE="tox-collection__item-container--column",k6="tox-collection__item-container--row",sE="tox-collection__item-container--align-right",lE="tox-collection__item-container--align-left",fE="tox-collection__item-container--valign-top",vE="tox-collection__item-container--valign-middle",dE="tox-collection__item-container--valign-bottom",A6=function(e){return ct(aE,e).getOr(Ix)},mE=function(e){return e==="color"?"tox-swatches":"tox-menu"},Nx=function(e){return{backgroundMenu:"tox-background-menu",selectedMenu:"tox-selected-menu",selectedItem:"tox-collection__item--active",hasIcons:"tox-menu--has-icons",menu:mE(e),tieredMenu:"tox-tiered-menu"}},Tm=function(e){var t=Nx(e);return{backgroundMenu:t.backgroundMenu,selectedMenu:t.selectedMenu,menu:t.menu,selectedItem:t.selectedItem,item:A6(e)}},gE=function(e,t,n){var a=Nx(n);return{tag:"div",classes:ze([[a.menu,"tox-menu-"+t+"-column"],e?[a.hasIcons]:[]])}},hE=[ut.parts.items({})],H2=function(e,t,n){var a=Nx(n),i={tag:"div",classes:ze([[a.tieredMenu]])};return{dom:i,markers:Tm(n)}},Vx=function(e,t){return function(n){var a=_r(n,t);return Se(a,function(i){return{dom:e,components:i}})}},pE=function(e){return{dom:{tag:"div",classes:["tox-menu","tox-swatches-menu"]},components:[{dom:{tag:"div",classes:["tox-swatches"]},components:[ut.parts.items({preprocess:e!=="auto"?Vx({tag:"div",classes:["tox-swatches__row"]},e):je})]}]}},bE=function(e){return{dom:{tag:"div",classes:["tox-menu","tox-collection","tox-collection--toolbar","tox-collection--toolbar-lg"]},components:[ut.parts.items({preprocess:Vx({tag:"div",classes:["tox-collection__group"]},e)})]}},M6=function(e,t){var n=[],a=[];return Ke(e,function(i,c){t(i,c)?(a.length>0&&n.push(a),a=[],pn(i.dom,"innerHtml")&&a.push(i)):a.push(i)}),a.length>0&&n.push(a),Se(n,function(i){return{dom:{tag:"div",classes:["tox-collection__group"]},components:i}})},Ux=function(e,t,n){return{dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(e===1?["tox-collection--list"]:["tox-collection--grid"])},components:[ut.parts.items({preprocess:function(a){return e!=="auto"&&e>1?Vx({tag:"div",classes:["tox-collection__group"]},e)(a):M6(a,function(i,c){return t[c].type==="separator"})}})]}},yE=function(e,t){return{dom:{tag:"div",classes:["tox-collection","tox-collection--horizontal"]},components:[ut.parts.items({preprocess:function(n){return M6(n,function(a,i){return e[i].type==="separator"})}})]}},I2=function(e){return Hn(e,function(t){return"icon"in t&&t.icon!==void 0})},ul=function(e){return console.error(Gc(e)),console.log(e),p.none()},wE=function(e,t,n,a,i){var c=yE(n);return{value:e,dom:c.dom,components:c.components,items:n}},Wx=function(e,t,n,a,i){if(i==="color"){var c=pE(a);return{value:e,dom:c.dom,components:c.components,items:n}}if(i==="normal"&&a==="auto"){var c=Ux(a,n);return{value:e,dom:c.dom,components:c.components,items:n}}if(i==="normal"&&a===1){var c=Ux(1,n);return{value:e,dom:c.dom,components:c.components,items:n}}if(i==="normal"){var c=Ux(a,n);return{value:e,dom:c.dom,components:c.components,items:n}}if(i==="listpreview"&&a!=="auto"){var c=bE(a);return{value:e,dom:c.dom,components:c.components,items:n}}return{value:e,dom:gE(t,a,i),components:hE,items:n}},SE=[Tt("type"),Tt("src"),nr("alt"),Kc("classes",[],jr)],xE=pt(SE),CE=[Tt("type"),Tt("text"),nr("name"),Kc("classes",["tox-collection__item-label"],jr)],TE=pt(CE),E6=e1(function(){return rd("type",{cardimage:xE,cardtext:TE,cardcontainer:OE})}),OE=pt([Tt("type"),Dl("direction","horizontal"),Dl("align","left"),Dl("valign","middle"),Io("items",E6)]),Om=[lr("disabled",!1),nr("text"),nr("shortcut"),Qr("value","value",an(function(){return rt("menuitem-value")}),Pi()),K("meta",{})],kE=pt([Tt("type"),nr("label"),Io("items",E6),pr("onSetup",function(){return be}),pr("onAction",be)].concat(Om)),AE=function(e){return hr("cardmenuitem",kE,e)},ME=pt([Tt("type"),lr("active",!1),nr("icon")].concat(Om)),EE=function(e){return hr("choicemenuitem",ME,e)},D6=[Tt("type"),Tt("fancytype"),pr("onAction",be)],DE=[K("initData",{})].concat(D6),_E=[sg("initData",{},[lr("allowCustomColors",!0),a1("colors",Pi())])].concat(D6),zE=yi("fancytype",{inserttable:DE,colorswatch:_E}),RE=function(e){return hr("fancymenuitem",zE,e)},BE=pt([Tt("type"),pr("onSetup",function(){return be}),pr("onAction",be),nr("icon")].concat(Om)),FE=function(e){return hr("menuitem",BE,e)},HE=pt([Tt("type"),Oo("getSubmenuItems"),pr("onSetup",function(){return be}),nr("icon")].concat(Om)),IE=function(e){return hr("nestedmenuitem",HE,e)},$E=pt([Tt("type"),nr("icon"),lr("active",!1),pr("onSetup",function(){return be}),Oo("onAction")].concat(Om)),LE=function(e){return hr("togglemenuitem",$E,e)},jx=function(e,t,n){var a=Za(e.element,"."+n);if(a.length>0){var i=Me(a,function(c){var l=c.dom.getBoundingClientRect().top,v=a[0].dom.getBoundingClientRect().top;return Math.abs(l-v)>t}).getOr(a.length);return p.some({numColumns:i,numRows:Math.ceil(a.length/i)})}else return p.none()},_6=function(e,t){return Be([Nt(e,t)])},PE=function(e){return _6(rt("unnamed-events"),e)},$2={namedEvents:_6,unnamedEvents:PE},z6=rt("tooltip.exclusive"),Tp=rt("tooltip.show"),Op=rt("tooltip.hide"),R6=function(e,t,n){e.getSystem().broadcastOn([z6],{})},NE=function(e,t,n,a){n.getTooltip().each(function(i){i.getSystem().isConnected()&&zt.set(i,a)})},VE=Object.freeze({__proto__:null,hideAllExclusive:R6,setComponents:NE}),UE=function(e,t){var n=function(i){t.getTooltip().each(function(c){as(c),e.onHide(i,c),t.clearTooltip()}),t.clearTimer()},a=function(i){if(!t.isShowing()){R6(i);var c=e.lazySink(i).getOrDie(),l=i.getSystem().build({dom:e.tooltipDom,components:e.tooltipComponents,events:rr(e.mode==="normal"?[we(pc(),function(v){Sn(i,Tp)}),we(vg(),function(v){Sn(i,Op)})]:[]),behaviours:Be([zt.config({})])});t.setTooltip(l),Zs(c,l),e.onShow(i,l),fo.position(c,l,{anchor:e.anchor(i)})}};return rr(ze([[we(Tp,function(i){t.resetTimer(function(){a(i)},e.delay)}),we(Op,function(i){t.resetTimer(function(){n(i)},e.delay)}),we(Es(),function(i,c){var l=c;l.universal||It(l.channels,z6)&&n(i)}),vu(function(i){n(i)})],e.mode==="normal"?[we(wi(),function(i){Sn(i,Tp)}),we(mg(),function(i){Sn(i,Op)}),we(pc(),function(i){Sn(i,Tp)}),we(vg(),function(i){Sn(i,Op)})]:[we(w1(),function(i,c){Sn(i,Tp)}),we(bg(),function(i){Sn(i,Op)})]]))},WE=Object.freeze({__proto__:null,events:UE}),jE=[de("lazySink"),de("tooltipDom"),K("exclusive",!0),K("tooltipComponents",[]),K("delay",300),gc("mode","normal",["normal","follow-highlight"]),K("anchor",function(e){return{type:"hotspot",hotspot:e,layouts:{onLtr:j([Pa,Lo,La,co,la,ko]),onRtl:j([Pa,Lo,La,co,la,ko])}}}),An("onHide"),An("onShow")],GE=function(){var e=Fr(),t=Fr(),n=function(){e.on(clearTimeout)},a=function(c,l){n(),e.set(setTimeout(c,l))},i=j("not-implemented");return Ja({getTooltip:t.get,isShowing:t.isSet,setTooltip:t.set,clearTooltip:t.clear,clearTimer:n,resetTimer:a,readState:i})},qE=Object.freeze({__proto__:null,init:GE}),B6=fa({fields:jE,name:"tooltipping",active:WE,state:qE,apis:VE}),KE=function(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")},kp=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),XE=tinymce.util.Tools.resolve("tinymce.EditorManager"),YE=function(e){var t=e.getParam("skin"),n=e.getParam("skin_url");if(t!==!1){var a=t||"oxide";n?n=e.documentBaseURI.toAbsolute(n):n=XE.baseURL+"/skins/ui/"+a}return n},JE=function(e){return e.getParam("readonly",!1,"boolean")},ZE=function(e){return e.getParam("skin")===!1},F6=function(e){return e.getParam("height",Math.max(e.getElement().offsetHeight,200))},H6=function(e){return e.getParam("width",kp.DOM.getStyle(e.getElement(),"width"))},I6=function(e){return p.from(e.getParam("min_width")).filter(jt)},$6=function(e){return p.from(e.getParam("min_height")).filter(jt)},Gx=function(e){return p.from(e.getParam("max_width")).filter(jt)},L6=function(e){return p.from(e.getParam("max_height")).filter(jt)},QE=function(e){return p.from(e.getParam("style_formats")).filter(kt)},eD=function(e){return e.getParam("style_formats_merge",!1,"boolean")},tD=function(e){return e.getParam("lineheight_formats","1 1.1 1.2 1.3 1.4 1.5 2","string").split(" ")},nD=function(e){return e.getParam("content_langs",void 0,"array")},rD=function(e){return e.getParam("removed_menuitems","")},qx=function(e){return e.getParam("menubar",!0,"boolean")!==!1},Kx=function(e){var t=e.getParam("toolbar",!0),n=t===!0,a=dt(t),i=kt(t)&&t.length>0;return!L2(e)&&(i||a||n)},P6=function(e){var t=or(9,function(a){return e.getParam("toolbar"+(a+1),!1,"string")}),n=Ce(t,function(a){return typeof a=="string"});return n.length>0?p.some(n):p.none()},L2=function(e){return P6(e).fold(function(){var t=e.getParam("toolbar",[],"string[]");return t.length>0},qe)},qi;(function(e){e.default="wrap",e.floating="floating",e.sliding="sliding",e.scrolling="scrolling"})(qi||(qi={}));var Ap=function(e){return e.getParam("toolbar_mode","","string")},kv;(function(e){e.auto="auto",e.top="top",e.bottom="bottom"})(kv||(kv={}));var aD=function(e){return e.getParam("toolbar_groups",{},"object")},N6=function(e){return e.getParam("toolbar_location",kv.auto,"string")},V6=function(e){return N6(e)===kv.bottom},oD=function(e){return e.getParam("fixed_toolbar_container","","string")},iD=function(e){return e.getParam("fixed_toolbar_container_target")},uD=function(e){return e.getParam("toolbar_persist",!1,"boolean")},U6=function(e){if(!e.inline)return p.none();var t=oD(e);if(t.length>0)return ta(Yo(),t);var n=iD(e);return Oe(n)?p.some($.fromDom(n)):p.none()},P2=function(e){return e.inline&&U6(e).isSome()},W6=function(e){var t=U6(e);return t.getOrThunk(function(){return Wa(sa($.fromDom(e.getElement())))})},j6=function(e){return e.inline&&!qx(e)&&!Kx(e)&&!L2(e)},N2=function(e){var t=e.getParam("toolbar_sticky",!1,"boolean");return(t||e.inline)&&!P2(e)&&!j6(e)},cD=function(e){return e.getParam("toolbar_sticky_offset",0,"number")},sD=function(e){return e.getParam("draggable_modal",!1,"boolean")},lD=function(e){var t=e.getParam("menu");return t?Qn(t,function(n){return L(L({},n),{items:n.items})}):{}},fD=function(e){return e.getParam("menubar")},vD=function(e){return e.getParam("toolbar",!0)},dD=function(e){return e.getParam("file_picker_callback")},mD=function(e){return e.getParam("file_picker_types")},gD=function(e){return e.getParam("file_browser_callback_types")},hD=function(e){return e.getParam("typeahead_urls")===!1},pD=function(e){return e.getParam("anchor_top","#top")},bD=function(e){return e.getParam("anchor_bottom","#bottom")},yD=function(e){var t=e.getParam("file_picker_validator_handler",void 0,"function");return t===void 0?e.getParam("filepicker_validator_handler",void 0,"function"):t},Xx="silver.readonly",wD=pt([Gy("readonly")]),km=function(e,t){var n=e.outerContainer,a=n.element;t&&(e.mothership.broadcastOn([Qs()],{target:a}),e.uiMothership.broadcastOn([Qs()],{target:a})),e.mothership.broadcastOn([Xx],{readonly:t}),e.uiMothership.broadcastOn([Xx],{readonly:t})},G6=function(e,t){e.on("init",function(){e.mode.isReadOnly()&&km(t,!0)}),e.on("SwitchMode",function(){return km(t,e.mode.isReadOnly())}),JE(e)&&e.setMode("readonly")},da=function(){var e;return ui.config({channels:(e={},e[Xx]={schema:wD,onReceive:function(t,n){lt.set(t,n.readonly)}},e)})},SD=function(e){return lt.config({disabled:e,disableClass:"tox-collection__item--state-disabled"})},xD=function(e){return lt.config({disabled:e})},CD=function(e){return lt.config({disabled:e,disableClass:"tox-tbtn--disabled"})},TD=function(e){return lt.config({disabled:e,disableClass:"tox-tbtn--disabled",useNative:!1})},Xu={item:SD,button:xD,splitButton:CD,toolbarButton:TD},V2=function(e,t){var n=e.getApi(t);return function(a){a(n)}},Mp=function(e,t){return br(function(n){var a=V2(e,n);a(function(i){var c=e.onSetup(i);tt(c)&&t.set(c)})})},Ep=function(e,t){return vu(function(n){return V2(e,n)(t.get())})},Yx,OD=function(e,t){return du(function(n,a){V2(e,n)(e.onAction),!e.triggersSubmenu&&t===_c.CLOSE_ON_EXECUTE&&(Sn(n,ld()),a.stop())})},kD=(Yx={},Yx[ai()]=["disabling","alloy.base.behaviour","toggling","item-events"],Yx),Am=Xr,Mm=function(e,t,n,a){var i=bt(be);return{type:"item",dom:t.dom,components:Am(t.optComponents),data:e.data,eventOrder:kD,hasSubmenu:e.triggersSubmenu,itemBehaviours:Be([Nt("item-events",[OD(e,n),Mp(e,i),Ep(e,i)]),Xu.item(function(){return e.disabled||a.isDisabled()}),da(),zt.config({})].concat(e.itemBehaviours))}},Em=function(e){return{value:e.value,meta:L({text:e.text.getOr("")},e.meta)}},Jx=tinymce.util.Tools.resolve("tinymce.Env"),AD=function(e){var t={alt:"&#x2325;",ctrl:"&#x2303;",shift:"&#x21E7;",meta:"&#x2318;",access:"&#x2303;&#x2325;"},n={meta:"Ctrl",access:"Shift+Alt"},a=Jx.mac?t:n,i=e.split("+"),c=Se(i,function(l){var v=l.toLowerCase().trim();return pn(a,v)?a[v]:l});return Jx.mac?c.join(""):c.join("+")},Zx=function(e,t,n){return n===void 0&&(n=[C6]),Dc(e,{tag:"div",classes:n},t)},q6=function(e){return{dom:{tag:"div",classes:[Px]},components:[es(Ec.translate(e))]}},K6=function(e,t){return{dom:{tag:"div",classes:t,innerHtml:e}}},MD=function(e,t){return{dom:{tag:"div",classes:[Px]},components:[{dom:{tag:e.tag,styles:e.styles},components:[es(Ec.translate(t))]}]}},ED=function(e){return{dom:{tag:"div",classes:[iE],innerHtml:AD(e)}}},X6=function(e){return Zx("checkmark",e,[uE])},DD=function(e){return Zx("chevron-right",e,[T6])},_D=function(e){return Zx("chevron-down",e,[T6])},zD=function(e,t){var n=e.direction==="vertical"?cE:k6,a=e.align==="left"?lE:sE,i=function(){switch(e.valign){case"top":return fE;case"middle":return vE;case"bottom":return dE}};return{dom:{tag:"div",classes:[O6,n,a,i()]},components:t}},RD=function(e,t,n){return{dom:{tag:"img",classes:t,attributes:{src:e,alt:n.getOr("")}}}},BD=function(e,t,n){var a="custom",i="remove",c=e.ariaLabel,l=e.value,v=e.iconContent.map(function(g){return pM(g,t.icons,n)}),d=function(){var g=Lx,y=v.getOr(""),S=c.map(function(k){return{title:t.translate(k)}}).getOr({}),T={tag:"div",attributes:S,classes:[g]};return l===a?L(L({},T),{tag:"button",classes:He(He([],T.classes,!0),["tox-swatches__picker-btn"],!1),innerHtml:y}):l===i?L(L({},T),{classes:He(He([],T.classes,!0),["tox-swatch--remove"],!1),innerHtml:y}):L(L({},T),{attributes:L(L({},T.attributes),{"data-mce-color":l}),styles:{"background-color":l}})};return{dom:d(),optComponents:[]}},Y6=function(e){var t=e.map(function(n){return{attributes:{title:Ec.translate(n)}}}).getOr({});return L({tag:"div",classes:[Ix,$x]},t)},FD=function(e,t,n,a){var i={tag:"div",classes:[C6]},c=function(T){return Dc(T,i,t.icons,a)},l=function(){return p.some({dom:i})},v=n?e.iconContent.map(c).orThunk(l):p.none(),d=e.checkMark,g=p.from(e.meta).fold(function(){return q6},function(T){return pn(T,"style")?Pn(MD,T.style):q6}),y=e.htmlContent.fold(function(){return e.textContent.map(g)},function(T){return p.some(K6(T,[Px]))}),S={dom:Y6(e.ariaLabel),optComponents:[v,y,e.shortcutContent.map(ED),d,e.caret]};return S},Dp=function(e,t,n,a){return a===void 0&&(a=p.none()),e.presets==="color"?BD(e,t,a):FD(e,t,n,a)},J6=function(e,t){return ct(e,"tooltipWorker").map(function(n){return[B6.config({lazySink:t.getSink,tooltipDom:{tag:"div",classes:["tox-tooltip-worker-container"]},tooltipComponents:[],anchor:function(a){return{type:"submenu",item:a,overrides:{maxHeightFunction:Jl}}},mode:"follow-highlight",onShow:function(a,i){n(function(c){B6.setComponents(a,[pd({element:$.fromDom(c)})])})}})]}).getOr([])},HD=function(e){return kp.DOM.encode(e)},Z6=function(e,t){var n=Ec.translate(e),a=HD(n);if(t.length>0){var i=new RegExp(KE(t),"gi");return a.replace(i,function(c){return'<span class="tox-autocompleter-highlight">'+c+"</span>"})}else return a},ID=function(e,t,n,a,i,c,l,v){v===void 0&&(v=!0);var d=Dp({presets:a,textContent:p.none(),htmlContent:n?e.text.map(function(g){return Z6(g,t)}):p.none(),ariaLabel:e.text,iconContent:e.icon,shortcutContent:p.none(),checkMark:p.none(),caret:p.none(),value:e.value},l.providers,v,e.icon);return Mm({data:Em(e),disabled:e.disabled,getApi:j({}),onAction:function(g){return i(e.value,e.meta)},onSetup:j(be),triggersSubmenu:!1,itemBehaviours:J6(e.meta,l)},d,c,l.providers)},Q6=function(e,t){return Se(e,function(n){switch(n.type){case"cardcontainer":return zD(n,Q6(n.items,t));case"cardimage":return RD(n.src,n.classes,n.alt);case"cardtext":var a=n.name.exists(function(c){return It(t.cardText.highlightOn,c)}),i=a?p.from(t.cardText.matchText).getOr(""):"";return K6(Z6(n.text,i),n.classes)}})},$D=function(e,t,n,a){var i=function(l){return{isDisabled:function(){return lt.isDisabled(l)},setDisabled:function(v){lt.set(l,v),Ke(Za(l.element,"*"),function(d){l.getSystem().getByDom(d).each(function(g){g.hasConfigured(lt)&&lt.set(g,v)})})}}},c={dom:Y6(e.label),optComponents:[p.some({dom:{tag:"div",classes:[O6,k6]},components:Q6(e.items,a)})]};return Mm({data:Em(L({text:p.none()},e)),disabled:e.disabled,getApi:i,onAction:e.onAction,onSetup:e.onSetup,triggersSubmenu:!1,itemBehaviours:p.from(a.itemBehaviours).getOr([])},c,t,n.providers)},LD=function(e,t,n,a,i,c,l,v){v===void 0&&(v=!0);var d=function(y){return{setActive:function(S){bn.set(y,S)},isActive:function(){return bn.isOn(y)},isDisabled:function(){return lt.isDisabled(y)},setDisabled:function(S){return lt.set(y,S)}}},g=Dp({presets:n,textContent:t?e.text:p.none(),htmlContent:p.none(),ariaLabel:e.text,iconContent:e.icon,shortcutContent:t?e.shortcut:p.none(),checkMark:t?p.some(X6(l.icons)):p.none(),caret:p.none(),value:e.value},l,v);return fe(Mm({data:Em(e),disabled:e.disabled,getApi:d,onAction:function(y){return a(e.value)},onSetup:function(y){return y.setActive(i),be},triggersSubmenu:!1,itemBehaviours:[]},g,c,l),{toggling:{toggleClass:x6,toggleOnExecute:!1,selected:e.active}})},e5=vv(m(),b()),t5=function(e){return{value:e}},n5=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,r5=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,a5=function(e){return n5.test(e)||r5.test(e)},PD=function(e){return Va(e,"#").toUpperCase()},ND=function(e){return a5(e)?p.some({value:PD(e)}):p.none()},VD=function(e){var t=e.value.replace(n5,function(n,a,i,c){return a+a+i+i+c+c});return{value:t}},UD=function(e){var t=VD(e),n=r5.exec(t.value);return n===null?["FFFFFF","FF","FF","FF"]:n},Qx=function(e){var t=e.toString(16);return(t.length===1?"0"+t:t).toUpperCase()},_p=function(e){var t=Qx(e.red)+Qx(e.green)+Qx(e.blue);return t5(t)},o5=Math.min,i5=Math.max,U2=Math.round,WD=/^rgb\((\d+),\s*(\d+),\s*(\d+)\)/,jD=/^rgba\((\d+),\s*(\d+),\s*(\d+),\s*(\d?(?:\.\d+)?)\)/,bf=function(e,t,n,a){return{red:e,green:t,blue:n,alpha:a}},eC=function(e){var t=parseInt(e,10);return t.toString()===e&&t>=0&&t<=255},u5=function(e){var t,n,a,i=(e.hue||0)%360,c=e.saturation/100,l=e.value/100;if(c=i5(0,o5(c,1)),l=i5(0,o5(l,1)),c===0)return t=n=a=U2(255*l),bf(t,n,a,1);var v=i/60,d=l*c,g=d*(1-Math.abs(v%2-1)),y=l-d;switch(Math.floor(v)){case 0:t=d,n=g,a=0;break;case 1:t=g,n=d,a=0;break;case 2:t=0,n=d,a=g;break;case 3:t=0,n=g,a=d;break;case 4:t=g,n=0,a=d;break;case 5:t=d,n=0,a=g;break;default:t=n=a=0}return t=U2(255*(t+y)),n=U2(255*(n+y)),a=U2(255*(a+y)),bf(t,n,a,1)},zp=function(e){var t=UD(e),n=parseInt(t[1],16),a=parseInt(t[2],16),i=parseInt(t[3],16);return bf(n,a,i,1)},c5=function(e,t,n,a){var i=parseInt(e,10),c=parseInt(t,10),l=parseInt(n,10),v=parseFloat(a);return bf(i,c,l,v)},s5=function(e){if(e==="transparent")return p.some(bf(0,0,0,0));var t=WD.exec(e);if(t!==null)return p.some(c5(t[1],t[2],t[3],"1"));var n=jD.exec(e);return n!==null?p.some(c5(n[1],n[2],n[3],n[4])):p.none()},l5=function(e){return"rgba("+e.red+","+e.green+","+e.blue+","+e.alpha+")"},f5=bf(255,0,0,1),GD=function(e){return e.fire("SkinLoaded")},qD=function(e,t){return e.fire("SkinLoadError",t)},KD=function(e){return e.fire("ResizeEditor")},tC=function(e,t){return e.fire("ResizeContent",t)},XD=function(e,t){return e.fire("ScrollContent",t)},YD=function(e,t){return e.fire("TextColorChange",t)},Rp=function(e,t,n){return{hue:e,saturation:t,value:n}},nC=function(e){var t=0,n=0,a=0,i=e.red/255,c=e.green/255,l=e.blue/255,v=Math.min(i,Math.min(c,l)),d=Math.max(i,Math.max(c,l));if(v===d)return a=v,Rp(0,0,a*100);var g=i===v?c-l:l===v?i-c:l-i;return t=i===v?3:l===v?1:5,t=60*(t-g/(d-v)),n=(d-v)/d,a=d,Rp(Math.round(t),Math.round(n*100),Math.round(a*100))},JD=function(e){return nC(zp(e))},v5=function(e){return _p(u5(e))},ZD=function(e){return ND(e).orThunk(function(){return s5(e).map(_p)}).getOrThunk(function(){var t=document.createElement("canvas");t.height=1,t.width=1;var n=t.getContext("2d");n.clearRect(0,0,t.width,t.height),n.fillStyle="#FFFFFF",n.fillStyle=e,n.fillRect(0,0,1,1);var a=n.getImageData(0,0,1,1).data,i=a[0],c=a[1],l=a[2],v=a[3];return _p(bf(i,c,l,v))})},W2=tinymce.util.Tools.resolve("tinymce.util.LocalStorage"),d5="tinymce-custom-colors";function QD(e){e===void 0&&(e=10);var t=W2.getItem(d5),n=dt(t)?JSON.parse(t):[],a=function(d){var g=e-d.length;return g<0?d.slice(0,e):d},i=a(n),c=function(d){Dr(i,d).each(l),i.unshift(d),i.length>e&&i.pop(),W2.setItem(d5,JSON.stringify(i))},l=function(d){i.splice(d,1)},v=function(){return i.slice(0)};return{add:c,state:v}}var ka="choiceitem",e_=[{type:ka,text:"Light Green",value:"#BFEDD2"},{type:ka,text:"Light Yellow",value:"#FBEEB8"},{type:ka,text:"Light Red",value:"#F8CAC6"},{type:ka,text:"Light Purple",value:"#ECCAFA"},{type:ka,text:"Light Blue",value:"#C2E0F4"},{type:ka,text:"Green",value:"#2DC26B"},{type:ka,text:"Yellow",value:"#F1C40F"},{type:ka,text:"Red",value:"#E03E2D"},{type:ka,text:"Purple",value:"#B96AD9"},{type:ka,text:"Blue",value:"#3598DB"},{type:ka,text:"Dark Turquoise",value:"#169179"},{type:ka,text:"Orange",value:"#E67E23"},{type:ka,text:"Dark Red",value:"#BA372A"},{type:ka,text:"Dark Purple",value:"#843FA1"},{type:ka,text:"Dark Blue",value:"#236FA1"},{type:ka,text:"Light Gray",value:"#ECF0F1"},{type:ka,text:"Medium Gray",value:"#CED4D9"},{type:ka,text:"Gray",value:"#95A5A6"},{type:ka,text:"Dark Gray",value:"#7E8C8D"},{type:ka,text:"Navy Blue",value:"#34495E"},{type:ka,text:"Black",value:"#000000"},{type:ka,text:"White",value:"#ffffff"}],m5=QD(10),t_=function(e){for(var t=[],n=0;n<e.length;n+=2)t.push({text:e[n+1],value:"#"+ZD(e[n]).value,type:"choiceitem"});return t},n_=function(e,t){return e.getParam("color_cols",t,"number")},g5=function(e){return e.getParam("custom_colors")!==!1},r_=function(e){return e.getParam("color_map")},rC=function(e){var t=r_(e);return t!==void 0?t_(t):e_},a_=function(){return Se(m5.state(),function(e){return{type:ka,text:e,value:e}})},h5=function(e){m5.add(e)},aC="#000000",o_=function(e,t){var n;return e.dom.getParents(e.selection.getStart(),function(a){var i;(i=a.style[t==="forecolor"?"color":"background-color"])&&(n=n||i)}),p.from(n)},i_=function(e,t,n){e.undoManager.transact(function(){e.focus(),e.formatter.apply(t,{value:n}),e.nodeChanged()})},u_=function(e,t){e.undoManager.transact(function(){e.focus(),e.formatter.remove(t,{value:null},null,!0),e.nodeChanged()})},c_=function(e){e.addCommand("mceApplyTextcolor",function(t,n){i_(e,t,n)}),e.addCommand("mceRemoveTextcolor",function(t){u_(e,t)})},s_=function(e){return Math.max(5,Math.ceil(Math.sqrt(e)))},p5=function(e){var t=rC(e),n=s_(t.length);return n_(e,n)},b5=function(e){var t="choiceitem",n={type:t,text:"Remove color",icon:"color-swatch-remove-color",value:"remove"},a={type:t,text:"Custom color",icon:"color-picker",value:"custom"};return e?[n,a]:[n]},oC=function(e,t,n,a){if(n==="custom"){var i=T5(e);i(function(c){c.each(function(l){h5(l),e.execCommand("mceApplyTextcolor",t,l),a(l)})},aC)}else n==="remove"?(a(""),e.execCommand("mceRemoveTextcolor",t)):(a(n),e.execCommand("mceApplyTextcolor",t,n))},y5=function(e,t){return e.concat(a_().concat(b5(t)))},w5=function(e,t){return function(n){n(y5(e,t))}},S5=function(e,t,n){var a=t==="forecolor"?"tox-icon-text-color__color":"tox-icon-highlight-bg-color__color";e.setIconFill(a,n)},x5=function(e,t,n,a,i){e.ui.registry.addSplitButton(t,{tooltip:a,presets:"color",icon:t==="forecolor"?"text-color":"highlight-bg-color",select:function(c){var l=o_(e,n);return l.bind(function(v){return s5(v).map(function(d){var g=_p(d).value;return In(c.toLowerCase(),g)})}).getOr(!1)},columns:p5(e),fetch:w5(rC(e),g5(e)),onAction:function(c){oC(e,n,i.get(),be)},onItemAction:function(c,l){oC(e,n,l,function(v){i.set(v),YD(e,{name:t,color:v})})},onSetup:function(c){S5(c,t,i.get());var l=function(v){v.name===t&&S5(c,v.name,v.color)};return e.on("TextColorChange",l),function(){e.off("TextColorChange",l)}}})},C5=function(e,t,n,a){e.ui.registry.addNestedMenuItem(t,{text:a,icon:t==="forecolor"?"text-color":"highlight-bg-color",getSubmenuItems:function(){return[{type:"fancymenuitem",fancytype:"colorswatch",onAction:function(i){oC(e,n,i.value,be)}}]}})},T5=function(e){return function(t,n){var a=!1,i=function(v){var d=v.getData(),g=d.colorpicker;a?(t(p.from(g)),v.close()):e.windowManager.alert(e.translate(["Invalid hex color code: {0}",g]))},c=function(v,d){d.name==="hex-valid"&&(a=d.value)},l={colorpicker:n};e.windowManager.open({title:"Color Picker",size:"normal",body:{type:"panel",items:[{type:"colorpicker",name:"colorpicker",label:"Color"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:l,onAction:c,onSubmit:i,onClose:be,onCancel:function(){t(p.none())}})}},l_=function(e){c_(e);var t=bt(aC),n=bt(aC);x5(e,"forecolor","forecolor","Text color",t),x5(e,"backcolor","hilitecolor","Background color",n),C5(e,"forecolor","forecolor","Text color"),C5(e,"backcolor","hilitecolor","Background color")},iC=function(e,t,n,a,i,c,l,v){var d=I2(t),g=i!=="color"?"normal":"color",y=f_(t,n,a,g,c,l,v);return Wx(e,d,y,a,i)},f_=function(e,t,n,a,i,c,l){return Xr(Se(e,function(v){return v.type==="choiceitem"?EE(v).fold(ul,function(d){return p.some(LD(d,n===1,a,t,c(v.value),i,l,I2(e)))}):p.none()}))},j2=function(e,t){var n=Tm(t);if(e===1)return{mode:"menu",moveOnTab:!0};if(e==="auto")return{mode:"grid",selector:"."+n.item,initSize:{numColumns:1,numRows:1}};var a=t==="color"?"tox-swatches__row":"tox-collection__group";return{mode:"matrix",rowSelector:"."+a}},v_=function(e,t){return e===1?{mode:"menu",moveOnTab:!1,selector:".tox-collection__item"}:e==="auto"?{mode:"flatgrid",selector:".tox-collection__item",initSize:{numColumns:1,numRows:1}}:{mode:"matrix",selectors:{row:t==="color"?".tox-swatches__row":".tox-collection__group",cell:t==="color"?"."+Lx:"."+$x}}},d_=function(e,t){var n=m_(e,t),a=t.colorinput.getColorCols(),i="color",c=iC(rt("menu-value"),n,function(v){e.onAction({value:v})},a,i,_c.CLOSE_ON_EXECUTE,Le,t.shared.providers),l=L(L({},c),{markers:Tm(i),movement:j2(a,i)});return{type:"widget",data:{value:rt("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[e5.widget(ut.sketch(l))]}},m_=function(e,t){var n=e.initData.allowCustomColors&&t.colorinput.hasCustomColors();return e.initData.colors.fold(function(){return y5(t.colorinput.getColors(),n)},function(a){return a.concat(b5(n))})},O5=rt("cell-over"),k5=rt("cell-execute"),g_=function(e,t,n){var a,i=function(v){return yt(v,O5,{row:e,col:t})},c=function(v){return yt(v,k5,{row:e,col:t})},l=function(v,d){d.stop(),c(v)};return ea({dom:{tag:"div",attributes:(a={role:"button"},a["aria-labelledby"]=n,a)},behaviours:Be([Nt("insert-table-picker-cell",[we(pc(),Ot.focus),we(ai(),c),we(Bl(),l),we(_s(),l)]),bn.config({toggleClass:"tox-insert-table-picker__selected",toggleOnExecute:!1}),Ot.config({onFocus:i})])})},h_=function(e,t,n){for(var a=[],i=0;i<t;i++){for(var c=[],l=0;l<n;l++)c.push(g_(i,l,e));a.push(c)}return a},p_=function(e,t,n,a,i){for(var c=0;c<a;c++)for(var l=0;l<i;l++)bn.set(e[c][l],c<=t&&l<=n)},b_=function(e){return mt(e,function(t){return Se(t,xi)})},A5=function(e,t){return es(t+"x"+e)},y_=function(e){var t=10,n=10,a=rt("size-label"),i=h_(a,t,n),c=A5(0,0),l=Ln({dom:{tag:"span",classes:["tox-insert-table-picker__label"],attributes:{id:a}},components:[c],behaviours:Be([zt.config({})])});return{type:"widget",data:{value:rt("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[e5.widget({dom:{tag:"div",classes:["tox-insert-table-picker"]},components:b_(i).concat(l.asSpec()),behaviours:Be([Nt("insert-table-picker",[br(function(v){zt.set(l.get(v),[c])}),Cg(O5,function(v,d,g){var y=g.event,S=y.row,T=y.col;p_(i,S,T,t,n),zt.set(l.get(v),[A5(S+1,T+1)])}),Cg(k5,function(v,d,g){var y=g.event,S=y.row,T=y.col;e.onAction({numRows:S+1,numColumns:T+1}),Sn(v,ld())})]),ht.config({initSize:{numRows:t,numColumns:n},mode:"flatgrid",selector:'[role="button"]'})])})]}},w_={inserttable:y_,colorswatch:d_},S_=function(e,t){return ct(w_,e.fancytype).map(function(n){return n(e,t)})},x_=function(e,t,n,a,i){a===void 0&&(a=!0),i===void 0&&(i=!1);var c=i?_D(n.icons):DD(n.icons),l=function(d){return{isDisabled:function(){return lt.isDisabled(d)},setDisabled:function(g){return lt.set(d,g)}}},v=Dp({presets:"normal",iconContent:e.icon,textContent:e.text,htmlContent:p.none(),ariaLabel:e.text,caret:p.some(c),checkMark:p.none(),shortcutContent:e.shortcut},n,a);return Mm({data:Em(e),getApi:l,disabled:e.disabled,onAction:be,onSetup:e.onSetup,triggersSubmenu:!0,itemBehaviours:[]},v,t,n)},C_=function(e,t,n,a){a===void 0&&(a=!0);var i=function(l){return{isDisabled:function(){return lt.isDisabled(l)},setDisabled:function(v){return lt.set(l,v)}}},c=Dp({presets:"normal",iconContent:e.icon,textContent:e.text,htmlContent:p.none(),ariaLabel:e.text,caret:p.none(),checkMark:p.none(),shortcutContent:e.shortcut},n,a);return Mm({data:Em(e),getApi:i,disabled:e.disabled,onAction:e.onAction,onSetup:e.onSetup,triggersSubmenu:!1,itemBehaviours:[]},c,t,n)},T_=function(e){var t=e.text.fold(function(){return{}},function(n){return{innerHtml:n}});return{type:"separator",dom:L({tag:"div",classes:[$x,oE]},t),components:[]}},O_=function(e,t,n,a){a===void 0&&(a=!0);var i=function(l){return{setActive:function(v){bn.set(l,v)},isActive:function(){return bn.isOn(l)},isDisabled:function(){return lt.isDisabled(l)},setDisabled:function(v){return lt.set(l,v)}}},c=Dp({iconContent:e.icon,textContent:e.text,htmlContent:p.none(),ariaLabel:e.text,checkMark:p.some(X6(n.icons)),caret:p.none(),shortcutContent:e.shortcut,presets:"normal",meta:e.meta},n,a);return fe(Mm({data:Em(e),disabled:e.disabled,getApi:i,onAction:e.onAction,onSetup:e.onSetup,triggersSubmenu:!1,itemBehaviours:[]},c,t,n),{toggling:{toggleClass:x6,toggleOnExecute:!1,selected:e.active}})},k_=ID,M5=T_,A_=C_,M_=x_,E_=O_,D_=S_,__=$D,Bp;(function(e){e[e.ContentFocus=0]="ContentFocus",e[e.UiFocus=1]="UiFocus"})(Bp||(Bp={}));var z_=function(e,t,n,a,i){var c=n.shared.providers,l=function(v){return i?L(L({},v),{shortcut:p.none(),icon:v.text.isSome()?p.none():v.icon}):v};switch(e.type){case"menuitem":return FE(e).fold(ul,function(v){return p.some(A_(l(v),t,c,a))});case"nestedmenuitem":return IE(e).fold(ul,function(v){return p.some(M_(l(v),t,c,a,i))});case"togglemenuitem":return LE(e).fold(ul,function(v){return p.some(E_(l(v),t,c,a))});case"separator":return LM(e).fold(ul,function(v){return p.some(M5(v))});case"fancymenuitem":return RE(e).fold(ul,function(v){return D_(l(v),n)});default:return console.error("Unknown item in general menu",e),p.none()}},R_=function(e,t,n,a,i,c,l){var v=a===1,d=!v||I2(e);return Xr(Se(e,function(g){switch(g.type){case"separator":return VM(g).fold(ul,function(y){return p.some(M5(y))});case"cardmenuitem":return AE(g).fold(ul,function(y){return p.some(__(L(L({},y),{onAction:function(S){y.onAction(S),n(y.value,y.meta)}}),i,c,{itemBehaviours:J6(y.meta,c),cardText:{matchText:t,highlightOn:l}}))});case"autocompleteitem":default:return UM(g).fold(ul,function(y){return p.some(k_(y,t,v,"normal",n,i,c,d))})}}))},E5=function(e,t,n,a,i){var c=I2(t),l=Xr(Se(t,function(d){var g=function(S){return i?!pn(S,"text"):c},y=function(S){return z_(S,n,a,g(S),i)};return d.type==="nestedmenuitem"&&d.getSubmenuItems().length<=0?y(L(L({},d),{disabled:!0})):y(d)})),v=i?wE:Wx;return v(e,c,l,1,"normal")},D5=function(e){return Vn.singleData(e.value,e)},B_=function(e,t,n,a){var i=n===Bp.ContentFocus?zb():tm(),c=j2(t,a),l=Tm(a);return{dom:e.dom,components:e.components,items:e.items,value:e.value,markers:{selectedItem:l.selectedItem,item:l.item},movement:c,fakeFocus:n===Bp.ContentFocus,focusManager:i,menuBehaviours:$2.unnamedEvents(t!=="auto"?[]:[br(function(v,d){jx(v,4,l.item).each(function(g){var y=g.numColumns,S=g.numRows;ht.setGridSize(v,S,y)})})])}},F_=function(e,t){var n=Fr(),a=bt(!1),i=ea(Nn.sketch({dom:{tag:"div",classes:["tox-autocompleter"]},components:[],fireDismissalEventInstead:{},inlineBehaviours:Be([Nt("dismissAutocompleter",[we(Rs(),function(){return d()})])]),lazySink:t.getSink})),c=function(){return Nn.isOpen(i)},l=function(){return n.get().isSome()},v=function(){l()&&Nn.hide(i)},d=function(){if(l()){var z=n.get().map(function(W){return W.element});F2(z.getOr($.fromDom(e.selection.getNode()))).each(Gv),v(),n.clear(),a.set(!1)}},g=ia(function(){return rE(e)}),y=function(z,W){var re=qn(W,function(ne){return p.from(ne.columns)}).getOr(1);return mt(W,function(ne){var U=ne.items;return R_(U,ne.matchText,function(Q,le){var $e=e.selection.getRng();Rx(e.dom,$e,z).fold(function(){return console.error("Lost context. Cursor probably moved")},function(he){var Pe=he.range,ye={hide:function(){d()},reload:function(se){v(),D(se)}};a.set(!0),ne.onAction(ye,Pe,Q,le),a.set(!1)})},re,_c.BUBBLE_TO_SANDBOX,t,ne.highlightOn)})},S=function(z){if(!l()){var W=AM(e,z.range);n.set({triggerChar:z.triggerChar,element:W,matchLength:z.text.length}),a.set(!1)}},T=function(z,W,re,ne){z.matchLength=W.text.length;var U=qn(re,function(Q){return p.from(Q.columns)}).getOr(1);Nn.showAt(i,ut.sketch(B_(Wx("autocompleter-value",!0,ne,U,"normal"),U,Bp.ContentFocus,"normal")),{anchor:{type:"node",root:$.fromDom(e.getBody()),node:p.from(z.element)}}),Nn.getContent(i).each(Rn.highlightFirst)},k=function(z){return n.get().map(function(W){return Rx(e.dom,e.selection.getRng(),W.triggerChar).bind(function(re){return p6(e,g,re,z)})}).getOrThunk(function(){return $M(e,g)})},D=function(z){k(z).fold(d,function(W){S(W.context),W.lookupData.then(function(re){n.get().map(function(ne){var U=W.context;if(ne.triggerChar===U.triggerChar){var Q=y(U.triggerChar,re);Q.length>0?T(ne,U,re,Q):U.text.length-ne.matchLength>=10?d():v()}})})})},H=_x(function(z){z.which!==27&&D()},50),V={onKeypress:H,cancelIfNecessary:d,isMenuOpen:c,isActive:l,isProcessingAction:a.get,getView:function(){return Nn.getContent(i)}};e.hasPlugin("rtc")===!1&&zM.setup(V,e)},H_={register:F_},Fp=function(e,t,n){return Ci(e,t,n).isSome()},_5=function(e,t){var n=null,a=function(){for(var c=[],l=0;l<arguments.length;l++)c[l]=arguments[l];n=setTimeout(function(){e.apply(null,c),n=null},t)},i=function(){n!==null&&(clearTimeout(n),n=null)};return{cancel:i,schedule:a}},z5=5,I_=400,R5=function(e){var t=e.raw;return t.touches===void 0||t.touches.length!==1?p.none():p.some(t.touches[0])},$_=function(e,t){var n=Math.abs(e.clientX-t.x),a=Math.abs(e.clientY-t.y);return n>z5||a>z5},L_=function(e){var t=Fr(),n=bt(!1),a=_5(function(g){e.triggerEvent(m1(),g),n.set(!0)},I_),i=function(g){return R5(g).each(function(y){a.cancel();var S={x:y.clientX,y:y.clientY,target:g.target};a.schedule(g),n.set(!1),t.set(S)}),p.none()},c=function(g){return a.cancel(),R5(g).each(function(y){t.on(function(S){$_(y,S)&&t.clear()})}),p.none()},l=function(g){a.cancel();var y=function(S){return Wn(S.target,g.target)};return t.get().filter(y).map(function(S){return n.get()?(g.prevent(),!1):e.triggerEvent(_s(),g)})},v=Xc([{key:Hu(),value:i},{key:Rl(),value:c},{key:Yc(),value:l}]),d=function(g,y){return ct(v,y).bind(function(S){return S(g)})};return{fireIfReady:d}},P_=function(e){var t=e.raw;return t.which===Qd[0]&&!It(["input","textarea"],Et(e.target))&&!Fp(e.target,'[contenteditable="true"]')},B5=function(){return Ha().browser.isFirefox()},N_=function(e,t){return B5()?Ad(e,"focus",t):Vr(e,"focusin",t)},V_=function(e,t){return B5()?Ad(e,"blur",t):Vr(e,"focusout",t)},U_=function(e,t){var n=L({stopBackspace:!0},t),a=["touchstart","touchmove","touchend","touchcancel","gesturestart","mousedown","mouseup","mouseover","mousemove","mouseout","click"],i=L_(n),c=Se(a.concat(["selectstart","input","contextmenu","change","transitionend","transitioncancel","drag","dragstart","dragend","dragenter","dragleave","dragover","drop","keyup"]),function(k){return Vr(e,k,function(D){i.fireIfReady(D,k).each(function(V){V&&D.kill()});var H=n.triggerEvent(k,D);H&&D.kill()})}),l=Fr(),v=Vr(e,"paste",function(k){i.fireIfReady(k,"paste").each(function(H){H&&k.kill()});var D=n.triggerEvent("paste",k);D&&k.kill(),l.set(setTimeout(function(){n.triggerEvent(gg(),k)},0))}),d=Vr(e,"keydown",function(k){var D=n.triggerEvent("keydown",k);D?k.kill():n.stopBackspace&&P_(k)&&k.prevent()}),g=N_(e,function(k){var D=n.triggerEvent("focusin",k);D&&k.kill()}),y=Fr(),S=V_(e,function(k){var D=n.triggerEvent("focusout",k);D&&k.kill(),y.set(setTimeout(function(){n.triggerEvent(mg(),k)},0))}),T=function(){Ke(c,function(k){k.unbind()}),d.unbind(),g.unbind(),S.unbind(),v.unbind(),l.on(clearTimeout),y.on(clearTimeout)};return{unbind:T}},F5=function(e,t){var n=ct(e,"target").getOr(t);return bt(n)},W_=function(e,t){var n=bt(!1),a=bt(!1),i=function(){n.set(!0)},c=function(){a.set(!0)};return{stop:i,cut:c,isStopped:n.get,isCut:a.get,event:e,setSource:t.set,getSource:t.get}},j_=function(e){var t=bt(!1),n=function(){t.set(!0)};return{stop:n,cut:be,isStopped:t.get,isCut:Le,event:e,setSource:ge("Cannot set source of a broadcasted event"),getSource:ge("Cannot get source of a broadcasted event")}},Hp=ri.generate([{stopped:[]},{resume:["element"]},{complete:[]}]),H5=function(e,t,n,a,i,c){var l=e(t,a),v=W_(n,i);return l.fold(function(){return c.logEventNoHandlers(t,a),Hp.complete()},function(d){var g=d.descHandler,y=Ag(g);return y(v),v.isStopped()?(c.logEventStopped(t,d.element,g.purpose),Hp.stopped()):v.isCut()?(c.logEventCut(t,d.element,g.purpose),Hp.complete()):Or(d.element).fold(function(){return c.logNoParent(t,d.element,g.purpose),Hp.complete()},function(S){return c.logEventResponse(t,d.element,g.purpose),Hp.resume(S)})})},I5=function(e,t,n,a,i,c){return H5(e,t,n,a,i,c).fold(qe,function(l){return I5(e,t,n,l,i,c)},Le)},G_=function(e,t,n,a,i){var c=F5(n,a);return H5(e,t,n,a,c,i)},q_=function(e,t,n){var a=j_(t);return Ke(e,function(i){var c=i.descHandler,l=Ag(c);l(a)}),a.isStopped()},K_=function(e,t,n,a){return $5(e,t,n,n.target,a)},$5=function(e,t,n,a,i){var c=F5(n,a);return I5(e,t,n,a,c,i)},X_=function(e,t){return{element:e,descHandler:t}},Y_=function(e,t){return{id:e,descHandler:t}},J_=function(){var e={},t=function(l,v,d){sr(d,function(g,y){var S=e[y]!==void 0?e[y]:{};S[v]=kw(g,l),e[y]=S})},n=function(l,v){return $s(v).bind(function(d){return ct(l,d)}).map(function(d){return X_(v,d)})},a=function(l){return ct(e,l).map(function(v){return hn(v,function(d,g){return Y_(g,d)})}).getOr([])},i=function(l,v,d){return ct(e,v).bind(function(g){return _l(d,function(y){return n(g,y)},l)})},c=function(l){sr(e,function(v,d){pn(v,l)&&delete v[l]})};return{registerId:t,unregisterId:c,filterByType:a,find:i}},Z_=function(){var e=J_(),t={},n=function(g){var y=g.element;return $s(y).getOrThunk(function(){return pw("uid-",g.element)})},a=function(g,y){var S=t[y];if(S===g)c(g);else throw new Error('The tagId "'+y+'" is already used by: '+oi(S.element)+`
Cannot use it for: `+oi(g.element)+`
The conflicting element is`+(kr(S.element)?" ":" not ")+"already in the DOM")},i=function(g){var y=n(g);mr(t,y)&&a(g,y);var S=[g];e.registerId(S,y,g.events),t[y]=g},c=function(g){$s(g.element).each(function(y){delete t[y],e.unregisterId(y)})},l=function(g){return e.filterByType(g)},v=function(g,y,S){return e.find(g,y,S)},d=function(g){return ct(t,g)};return{find:v,filter:l,register:i,unregister:c,getById:d}},Q_=function(e){var t=e.dom,n=t.attributes,a=_(t,["attributes"]);return{uid:e.uid,dom:L({tag:"div",attributes:L({role:"presentation"},n)},a),components:e.components,behaviours:nf(e.containerBehaviours),events:e.events,domModification:e.domModification,eventOrder:e.eventOrder}},ho=Oi({name:"Container",factory:Q_,configFields:[K("components",[]),va("containerBehaviours",[]),K("events",{}),K("domModification",{}),K("eventOrder",{})]}),L5=function(e){var t=function(z){return Or(e.element).fold(qe,function(W){return Wn(z,W)})},n=Z_(),a=function(z,W){return n.find(t,z,W)},i=U_(e.element,{triggerEvent:function(z,W){return zg(z,W.target,function(re){return K_(a,z,W,re)})}}),c={debugInfo:j("real"),triggerEvent:function(z,W,re){zg(z,W,function(ne){return $5(a,z,re,W,ne)})},triggerFocus:function(z,W){$s(z).fold(function(){Sc(z)},function(re){zg(Jc(),z,function(ne){return G_(a,Jc(),{originator:W,kill:be,prevent:be,target:z},z,ne),!1})})},triggerEscape:function(z,W){c.triggerEvent("keydown",z.element,W.event)},getByUid:function(z){return H(z)},getByDom:function(z){return V(z)},build:ea,addToGui:function(z){d(z)},removeFromGui:function(z){g(z)},addToWorld:function(z){l(z)},removeFromWorld:function(z){v(z)},broadcast:function(z){T(z)},broadcastOn:function(z,W){k(z,W)},broadcastEvent:function(z,W){D(z,W)},isConnected:qe},l=function(z){z.connect(c),Rr(z.element)||(n.register(z),Ke(z.components(),l),c.triggerEvent(Hl(),z.element,{target:z.element}))},v=function(z){Rr(z.element)||(Ke(z.components(),v),n.unregister(z)),z.disconnect()},d=function(z){Zs(e,z)},g=function(z){as(z)},y=function(){i.unbind(),Jo(e.element)},S=function(z){var W=n.filter(Es());Ke(W,function(re){var ne=re.descHandler,U=Ag(ne);U(z)})},T=function(z){S({universal:!0,data:z})},k=function(z,W){S({universal:!1,channels:z,data:W})},D=function(z,W){var re=n.filter(z);return q_(re,W)},H=function(z){return n.getById(z).fold(function(){return Ut.error(new Error('Could not find component with uid: "'+z+'" in system.'))},Ut.value)},V=function(z){var W=$s(z).getOr("not found");return H(W)};return l(e),{root:e,element:e.element,destroy:y,add:d,remove:g,getByUid:H,getByDom:V,addToWorld:l,removeFromWorld:v,broadcast:T,broadcastOn:k,broadcastEvent:D}},ez=function(e,t){return{dom:{tag:"div",classes:["tox-bar","tox-form__controls-h-stack"]},components:Se(e.items,t.interpreter)}},tz=j([K("prefix","form-field"),va("fieldBehaviours",[Zt,Ve])]),nz=j([ji({schema:[de("dom")],name:"label"}),ji({factory:{sketch:function(e){return{uid:e.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:e.text}}}},schema:[de("text")],name:"aria-descriptor"}),za({factory:{sketch:function(e){var t=Xy(e,["factory"]);return e.factory.sketch(t)}},schema:[de("factory")],name:"field"})]),rz=function(e,t,n,a){var i=Ta(e.fieldBehaviours,[Zt.config({find:function(v){return jn(v,e,"field")}}),Ve.config({store:{mode:"manual",getValue:function(v){return Zt.getCurrent(v).bind(Ve.getValue)},setValue:function(v,d){Zt.getCurrent(v).each(function(g){Ve.setValue(g,d)})}}})]),c=rr([br(function(v,d){var g=vb(v,e,["label","field","aria-descriptor"]);g.field().each(function(y){var S=rt(e.prefix);g.label().each(function(T){Vt(T.element,"for",S),Vt(y.element,"id",S)}),g["aria-descriptor"]().each(function(T){var k=rt(e.prefix);Vt(T.element,"id",k),Vt(y.element,"aria-describedby",k)})})})]),l={getField:function(v){return jn(v,e,"field")},getLabel:function(v){return jn(v,e,"label")}};return{uid:e.uid,dom:e.dom,components:t,behaviours:i,events:c,apis:l}},Mn=vo({name:"FormField",configFields:tz(),partFields:nz(),factory:rz,apis:{getField:function(e,t){return e.getField(t)},getLabel:function(e,t){return e.getLabel(t)}}}),az=function(e,t){return Vi({attributes:Xc([{key:t.tabAttr,value:"true"}])})},oz=Object.freeze({__proto__:null,exhibit:az}),iz=[K("tabAttr","data-alloy-tabstop")],Ur=fa({fields:iz,name:"tabstopping",active:oz}),uz=tinymce.util.Tools.resolve("tinymce.html.Entities"),Ip=function(e,t,n,a){var i=sz(e,t,n,a);return Mn.sketch(i)},cz=function(e,t){return Ip(e,t,[],[])},sz=function(e,t,n,a){return{dom:P5(n),components:e.toArray().concat([t]),fieldBehaviours:Be(a)}},lz=function(){return P5([])},P5=function(e){return{tag:"div",classes:["tox-form__group"].concat(e)}},yf=function(e,t){return Mn.parts.label({dom:{tag:"label",classes:["tox-label"],innerHtml:t.translate(e)}})},Ki=rt("form-component-change"),$p=rt("form-close"),Av=rt("form-cancel"),ds=rt("form-action"),Lp=rt("form-submit"),uC=rt("form-block"),cC=rt("form-unblock"),N5=rt("form-tabchange"),V5=rt("form-resize"),fz=function(e,t){var n,a=e.label.map(function(S){return yf(S,t)}),i=function(S){return function(T,k){Ci(k.event.target,"[data-collection-item-value]").each(function(D){S(T,k,D,pa(D,"data-collection-item-value"))})}},c=function(S,T){var k=Se(T,function(V){var z=Ec.translate(V.text),W=e.columns===1?'<div class="tox-collection__item-label">'+z+"</div>":"",re='<div class="tox-collection__item-icon">'+V.icon+"</div>",ne={_:" "," - ":" ","-":" "},U=z.replace(/\_| \- |\-/g,function(le){return ne[le]}),Q=t.isDisabled()?" tox-collection__item--state-disabled":"";return'<div class="tox-collection__item'+Q+'" tabindex="-1" data-collection-item-value="'+uz.encodeAllRaw(V.value)+'" title="'+U+'" aria-label="'+U+'">'+re+W+"</div>"}),D=e.columns!=="auto"&&e.columns>1?_r(k,e.columns):[k],H=Se(D,function(V){return'<div class="tox-collection__group">'+V.join("")+"</div>"});Pl(S.element,H.join(""))},l=i(function(S,T,k,D){T.stop(),t.isDisabled()||yt(S,ds,{name:e.name,value:D})}),v=[we(pc(),i(function(S,T,k){Sc(k)})),we(Bl(),l),we(_s(),l),we(wi(),i(function(S,T,k){ta(S.element,"."+Cp).each(function(D){Gr(D,Cp)}),Sa(k,Cp)})),we(nw(),i(function(S){ta(S.element,"."+Cp).each(function(T){Gr(T,Cp)})})),du(i(function(S,T,k,D){yt(S,ds,{name:e.name,value:D})}))],d=function(S,T){return Se(Za(S.element,".tox-collection__item"),T)},g=Mn.parts.field({dom:{tag:"div",classes:["tox-collection"].concat(e.columns!==1?["tox-collection--grid"]:["tox-collection--list"])},components:[],factory:{sketch:je},behaviours:Be([lt.config({disabled:t.isDisabled,onDisabled:function(S){d(S,function(T){Sa(T,"tox-collection__item--state-disabled"),Vt(T,"aria-disabled",!0)})},onEnabled:function(S){d(S,function(T){Gr(T,"tox-collection__item--state-disabled"),ba(T,"aria-disabled")})}}),da(),zt.config({}),Ve.config({store:{mode:"memory",initialValue:[]},onSetValue:function(S,T){c(S,T),e.columns==="auto"&&jx(S,5,"tox-collection__item").each(function(k){var D=k.numRows,H=k.numColumns;ht.setGridSize(S,D,H)}),Sn(S,V5)}}),Ur.config({}),ht.config(v_(e.columns,"normal")),Nt("collection-events",v)]),eventOrder:(n={},n[ai()]=["disabling","alloy.base.behaviour","collection-events"],n)}),y=["tox-form__group--collection"];return Ip(a,g,y,[])},U5=j([kn("data"),K("inputAttributes",{}),K("inputStyles",{}),K("tag","input"),K("inputClasses",[]),An("onSetValue"),K("styles",{}),K("eventOrder",{}),va("inputBehaviours",[Ve,Ot]),K("selectOnFocus",!0)]),W5=function(e){return Be([Ot.config({onFocus:e.selectOnFocus?function(t){var n=t.element,a=Nu(n);n.dom.setSelectionRange(0,a.length)}:be})])},vz=function(e){return L(L({},W5(e)),Ta(e.inputBehaviours,[Ve.config({store:L(L({mode:"manual"},e.data.map(function(t){return{initialValue:t}}).getOr({})),{getValue:function(t){return Nu(t.element)},setValue:function(t,n){var a=Nu(t.element);a!==n&&Kf(t.element,n)}}),onSetValue:e.onSetValue})]))},j5=function(e){return{tag:e.tag,attributes:L({type:"text"},e.inputAttributes),styles:e.inputStyles,classes:e.inputClasses}},dz=function(e,t){return{uid:e.uid,dom:j5(e),components:[],behaviours:vz(e),eventOrder:e.eventOrder}},Pp=Oi({name:"Input",configFields:U5(),factory:dz}),G5={},q5={exports:G5};(function(e,t,n,a){(function(i,c){typeof t=="object"&&typeof n<"u"?n.exports=c():typeof e=="function"&&e.amd?e(c):(i=typeof globalThis<"u"?globalThis:i||self,i.EphoxContactWrapper=c())})(this,function(){var i=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof zA<"u"?zA:typeof self<"u"?self:{},c={exports:{}};(function(g){(function(y){var S=setTimeout;function T(){}function k(U,Q){return function(){U.apply(Q,arguments)}}function D(U){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");if(typeof U!="function")throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],ne(U,this)}function H(U,Q){for(;U._state===3;)U=U._value;if(U._state===0){U._deferreds.push(Q);return}U._handled=!0,D._immediateFn(function(){var le=U._state===1?Q.onFulfilled:Q.onRejected;if(le===null){(U._state===1?V:z)(Q.promise,U._value);return}var $e;try{$e=le(U._value)}catch(he){z(Q.promise,he);return}V(Q.promise,$e)})}function V(U,Q){try{if(Q===U)throw new TypeError("A promise cannot be resolved with itself.");if(Q&&(typeof Q=="object"||typeof Q=="function")){var le=Q.then;if(Q instanceof D){U._state=3,U._value=Q,W(U);return}else if(typeof le=="function"){ne(k(le,Q),U);return}}U._state=1,U._value=Q,W(U)}catch($e){z(U,$e)}}function z(U,Q){U._state=2,U._value=Q,W(U)}function W(U){U._state===2&&U._deferreds.length===0&&D._immediateFn(function(){U._handled||D._unhandledRejectionFn(U._value)});for(var Q=0,le=U._deferreds.length;Q<le;Q++)H(U,U._deferreds[Q]);U._deferreds=null}function re(U,Q,le){this.onFulfilled=typeof U=="function"?U:null,this.onRejected=typeof Q=="function"?Q:null,this.promise=le}function ne(U,Q){var le=!1;try{U(function($e){le||(le=!0,V(Q,$e))},function($e){le||(le=!0,z(Q,$e))})}catch($e){if(le)return;le=!0,z(Q,$e)}}D.prototype.catch=function(U){return this.then(null,U)},D.prototype.then=function(U,Q){var le=new this.constructor(T);return H(this,new re(U,Q,le)),le},D.all=function(U){var Q=Array.prototype.slice.call(U);return new D(function(le,$e){if(Q.length===0)return le([]);var he=Q.length;function Pe(se,De){try{if(De&&(typeof De=="object"||typeof De=="function")){var et=De.then;if(typeof et=="function"){et.call(De,function(me){Pe(se,me)},$e);return}}Q[se]=De,--he===0&&le(Q)}catch(me){$e(me)}}for(var ye=0;ye<Q.length;ye++)Pe(ye,Q[ye])})},D.resolve=function(U){return U&&typeof U=="object"&&U.constructor===D?U:new D(function(Q){Q(U)})},D.reject=function(U){return new D(function(Q,le){le(U)})},D.race=function(U){return new D(function(Q,le){for(var $e=0,he=U.length;$e<he;$e++)U[$e].then(Q,le)})},D._immediateFn=typeof setImmediate=="function"?function(U){setImmediate(U)}:function(U){S(U,0)},D._unhandledRejectionFn=function(Q){typeof console<"u"&&console&&console.warn("Possible Unhandled Promise Rejection:",Q)},D._setImmediateFn=function(Q){D._immediateFn=Q},D._setUnhandledRejectionFn=function(Q){D._unhandledRejectionFn=Q},g.exports?g.exports=D:y.Promise||(y.Promise=D)})(i)})(c);var l=c.exports,v=function(){return typeof window<"u"?window:Function("return this;")()}(),d={boltExport:v.Promise||l};return d})})(void 0,G5,q5);var cl=q5.exports.boltExport,sC=function(e){var t=p.none(),n=[],a=function(g){return sC(function(y){i(function(S){y(g(S))})})},i=function(g){l()?d(g):n.push(g)},c=function(g){l()||(t=p.some(g),v(n),n=[])},l=function(){return t.isSome()},v=function(g){Ke(g,d)},d=function(g){t.each(function(y){setTimeout(function(){g(y)},0)})};return e(c),{get:i,map:a,isReady:l}},mz=function(e){return sC(function(t){t(e)})},gz={nu:sC,pure:mz},hz=function(e){setTimeout(function(){throw e},0)},Dm=function(e){var t=function(d){e().then(d,hz)},n=function(d){return Dm(function(){return e().then(d)})},a=function(d){return Dm(function(){return e().then(function(g){return d(g).toPromise()})})},i=function(d){return Dm(function(){return e().then(function(){return d.toPromise()})})},c=function(){return gz.nu(t)},l=function(){var d=null;return Dm(function(){return d===null&&(d=e()),d})},v=e;return{map:n,bind:a,anonBind:i,toLazy:c,toCached:l,toPromise:v,get:t}},pz=function(e){return Dm(function(){return new cl(e)})},bz=function(e){return Dm(function(){return cl.resolve(e)})},Qa={nu:pz,pure:bz},yz=["input","textarea"],K5=function(e){var t=Et(e);return It(yz,t)},X5=function(e,t){var n=t.getRoot(e).getOr(e.element);Gr(n,t.invalidClass),t.notify.each(function(a){K5(e.element)&&Vt(e.element,"aria-invalid",!1),a.getContainer(e).each(function(i){Pl(i,a.validHtml)}),a.onValid(e)})},Y5=function(e,t,n,a){var i=t.getRoot(e).getOr(e.element);Sa(i,t.invalidClass),t.notify.each(function(c){K5(e.element)&&Vt(e.element,"aria-invalid",!0),c.getContainer(e).each(function(l){Pl(l,a)}),c.onInvalid(e,a)})},J5=function(e,t,n){return t.validator.fold(function(){return Qa.pure(Ut.value(!0))},function(a){return a.validate(e)})},lC=function(e,t,n){return t.notify.each(function(a){a.onValidate(e)}),J5(e,t).map(function(a){return e.getSystem().isConnected()?a.fold(function(i){return Y5(e,t,n,i),Ut.error(i)},function(i){return X5(e,t),Ut.value(i)}):Ut.error("No longer in system")})},wz=function(e,t){var n=t.getRoot(e).getOr(e.element);return Si(n,t.invalidClass)},Sz=Object.freeze({__proto__:null,markValid:X5,markInvalid:Y5,query:J5,run:lC,isInvalid:wz}),xz=function(e,t){return e.validator.map(function(n){return rr([we(n.onEvent,function(a){lC(a,e,t).get(je)})].concat(n.validateOnLoad?[br(function(a){lC(a,e,t).get(be)})]:[]))}).getOr({})},Cz=Object.freeze({__proto__:null,events:xz}),Tz=[de("invalidClass"),K("getRoot",p.none),$o("notify",[K("aria","alert"),K("getContainer",p.none),K("validHtml",""),An("onValid"),An("onInvalid"),An("onValidate")]),$o("validator",[de("validate"),K("onEvent","input"),K("validateOnLoad",!0)])],ms=fa({fields:Tz,name:"invalidating",active:Cz,apis:Sz,extra:{validation:function(e){return function(t){var n=Ve.getValue(t);return Qa.pure(e(n))}}}}),Oz=function(e,t,n,a){return n.getOrCreate(e,t,a)},kz=Object.freeze({__proto__:null,getCoupled:Oz}),Az=[To("others",t1(Ut.value,Pi()))],Mz=function(){var e={},t=function(a,i,c){var l=Zn(i.others);if(l)return ct(e,c).getOrThunk(function(){var v=ct(i.others,c).getOrDie("No information found for coupled component: "+c),d=v(a),g=a.getSystem().build(d);return e[c]=g,g});throw new Error("Cannot find coupled component: "+c+". Known coupled components: "+JSON.stringify(l,null,2))},n=j({});return Ja({readState:n,getOrCreate:t})},Ez=Object.freeze({__proto__:null,init:Mz}),Kr=fa({fields:Az,name:"coupling",apis:kz,state:Ez}),Z5=j("sink"),Q5=j(ji({name:Z5(),overrides:j({dom:{tag:"div"},behaviours:Be([fo.config({useFixed:qe})]),events:rr([Hs(sd()),Hs(Ni()),Hs(Bl())])})})),zc;(function(e){e[e.HighlightFirst=0]="HighlightFirst",e[e.HighlightNone=1]="HighlightNone"})(zc||(zc={}));var e8=function(e,t){var n=e.getHotspot(t).getOr(t),a="hotspot",i=e.getAnchorOverrides();return e.layouts.fold(function(){return{type:a,hotspot:n,overrides:i}},function(c){return{type:a,hotspot:n,overrides:i,layouts:c}})},Dz=function(e,t,n){var a=e.fetch;return a(n).map(t)},_z=function(e,t,n,a,i,c,l){var v=Dz(e,t,a),d=t8(a,e);return v.map(function(g){return g.bind(function(y){return p.from(Vn.sketch(L(L({},c.menu()),{uid:Nl(""),data:y,highlightImmediately:l===zc.HighlightFirst,onOpenMenu:function(S,T){var k=d().getOrDie();fo.position(k,T,{anchor:n}),fn.decloak(i)},onOpenSubmenu:function(S,T,k){var D=d().getOrDie();fo.position(D,k,{anchor:{type:"submenu",item:T}}),fn.decloak(i)},onRepositionMenu:function(S,T,k){var D=d().getOrDie();fo.position(D,T,{anchor:n}),Ke(k,function(H){fo.position(D,H.triggeredMenu,{anchor:{type:"submenu",item:H.triggeringItem}})})},onEscape:function(){return Ot.focus(a),fn.close(i),p.some(!0)}})))})})},fC=function(e,t,n,a,i,c,l){var v=e8(e,n),d=_z(e,t,v,n,a,i,l);return d.map(function(g){return g.fold(function(){fn.isOpen(a)&&fn.close(a)},function(y){fn.cloak(a),fn.open(a,y),c(a)}),a})},zz=function(e,t,n,a,i,c,l){return fn.close(a),Qa.pure(a)},_m=function(e,t,n,a,i,c){var l=Kr.getCoupled(n,"sandbox"),v=fn.isOpen(l),d=v?zz:fC;return d(e,t,n,l,a,i,c)},Rz=function(e,t,n){var a=Zt.getCurrent(t).getOr(t),i=$a(e.element);n?_t(a.element,"min-width",i+"px"):su(a.element,i)},t8=function(e,t){return e.getSystem().getByUid(t.uid+"-"+Z5()).map(function(n){return function(){return Ut.value(n)}}).getOrThunk(function(){return t.lazySink.fold(function(){return function(){return Ut.error(new Error("No internal sink is specified, nor could an external sink be found"))}},function(n){return function(){return n(e)}})})},n8=function(e){fn.getState(e).each(function(t){Vn.repositionMenus(t)})},vC=function(e,t,n){var a=N1(),i=function(v,d){var g=e8(e,t);a.link(t.element),e.matchWidth&&Rz(g.hotspot,d,e.useMinWidth),e.onOpen(g,v,d),n!==void 0&&n.onOpen!==void 0&&n.onOpen(v,d)},c=function(v,d){a.unlink(t.element),n!==void 0&&n.onClose!==void 0&&n.onClose(v,d)},l=t8(t,e);return{dom:{tag:"div",classes:e.sandboxClasses,attributes:{id:a.id,role:"listbox"}},behaviours:Wi.augment(e.sandboxBehaviours,[Ve.config({store:{mode:"memory",initialValue:t}}),fn.config({onOpen:i,onClose:c,isPartOf:function(v,d,g){return Us(d,g)||Us(t,g)},getAttachPoint:function(){return l().getOrDie()}}),Zt.config({find:function(v){return fn.getState(v).bind(function(d){return Zt.getCurrent(d)})}}),ui.config({channels:L(L({},jd({isExtraPart:Le})),Eh({doReposition:n8}))})])}},r8=function(e){var t=Kr.getCoupled(e,"sandbox");n8(t)},dC=function(){return[K("sandboxClasses",[]),Wi.field("sandboxBehaviours",[Zt,ui,fn,Ve])]},Bz=j([de("dom"),de("fetch"),An("onOpen"),na("onExecute"),K("getHotspot",p.some),K("getAnchorOverrides",j({})),ns(),va("dropdownBehaviours",[bn,Kr,ht,Ot]),de("toggleClass"),K("eventOrder",{}),kn("lazySink"),K("matchWidth",!1),K("useMinWidth",!1),kn("role")].concat(dC())),Fz=j([ci({schema:[Gs()],name:"menu",defaults:function(e){return{onExecute:e.onExecute}}}),Q5()]),Hz=function(e,t,n,a){var i,c=function(y){return ct(e.dom,"attributes").bind(function(S){return ct(S,y)})},l=function(y){fn.getState(y).each(function(S){Vn.highlightPrimary(S)})},v=function(y){var S=l;_m(e,je,y,a,S,zc.HighlightFirst).get(be)},d={expand:function(y){bn.isOn(y)||_m(e,je,y,a,be,zc.HighlightNone).get(be)},open:function(y){bn.isOn(y)||_m(e,je,y,a,be,zc.HighlightFirst).get(be)},isOpen:bn.isOn,close:function(y){bn.isOn(y)&&_m(e,je,y,a,be,zc.HighlightFirst).get(be)},repositionMenus:function(y){bn.isOn(y)&&r8(y)}},g=function(y,S){return Bs(y),p.some(!0)};return{uid:e.uid,dom:e.dom,components:t,behaviours:Ta(e.dropdownBehaviours,[bn.config({toggleClass:e.toggleClass,aria:{mode:"expanded"}}),Kr.config({others:{sandbox:function(y){return vC(e,y,{onOpen:function(){return bn.on(y)},onClose:function(){return bn.off(y)}})}}}),ht.config({mode:"special",onSpace:g,onEnter:g,onDown:function(y,S){if(Yu.isOpen(y)){var T=Kr.getCoupled(y,"sandbox");l(T)}else Yu.open(y);return p.some(!0)},onEscape:function(y,S){return Yu.isOpen(y)?(Yu.close(y),p.some(!0)):p.none()}}),Ot.config({})]),events:wm(p.some(v)),eventOrder:L(L({},e.eventOrder),(i={},i[ai()]=["disabling","toggling","alloy.base.behaviour"],i)),apis:d,domModification:{attributes:L(L({"aria-haspopup":"true"},e.role.fold(function(){return{}},function(y){return{role:y}})),e.dom.tag==="button"?{type:c("type").getOr("button")}:{})}}},Yu=vo({name:"Dropdown",configFields:Bz(),partFields:Fz(),factory:Hz,apis:{open:function(e,t){return e.open(t)},expand:function(e,t){return e.expand(t)},close:function(e,t){return e.close(t)},isOpen:function(e,t){return e.isOpen(t)},repositionMenus:function(e,t){return e.repositionMenus(t)}}}),Iz=function(){return Vi({styles:{"-webkit-user-select":"none","user-select":"none","-ms-user-select":"none","-moz-user-select":"-moz-none"},attributes:{unselectable:"on"}})},$z=function(){return rr([wg(ow(),qe)])},Lz=Object.freeze({__proto__:null,events:$z,exhibit:Iz}),Np=fa({fields:[],name:"unselecting",active:Lz}),Pz=function(e,t){return Yu.sketch({dom:e.dom,components:e.components,toggleClass:"mce-active",dropdownBehaviours:Be([Xu.button(t.providers.isDisabled),da(),Np.config({}),Ur.config({})]),layouts:e.layouts,sandboxClasses:["tox-dialog__popups"],lazySink:t.getSink,fetch:function(n){return Qa.nu(function(a){return e.fetch(a)}).map(function(a){return p.from(D5(fe(iC(rt("menu-value"),a,function(i){e.onItemAction(n,i)},e.columns,e.presets,_c.CLOSE_ON_EXECUTE,Le,t.providers),{movement:j2(e.columns,e.presets)})))})},parts:{menu:H2(!1,1,e.presets)}})},a8=rt("color-input-change"),o8=rt("color-swatch-change"),i8=rt("color-picker-cancel"),Nz=function(e,t,n){var a=Mn.parts.field({factory:Pp,inputClasses:["tox-textfield"],onSetValue:function(d){return ms.run(d).get(be)},inputBehaviours:Be([lt.config({disabled:t.providers.isDisabled}),da(),Ur.config({}),ms.config({invalidClass:"tox-textbox-field-invalid",getRoot:function(d){return Or(d.element)},notify:{onValid:function(d){var g=Ve.getValue(d);yt(d,a8,{color:g})}},validator:{validateOnLoad:!1,validate:function(d){var g=Ve.getValue(d);if(g.length===0)return Qa.pure(Ut.value(!0));var y=$.fromTag("span");_t(y,"background-color",g);var S=Lr(y,"background-color").fold(function(){return Ut.error("blah")},function(T){return Ut.value(g)});return Qa.pure(S)}}})]),selectOnFocus:!1}),i=e.label.map(function(d){return yf(d,t.providers)}),c=function(d,g){yt(d,o8,{value:g})},l=function(d,g){v.getOpt(d).each(function(y){g==="custom"?n.colorPicker(function(S){S.fold(function(){return Sn(y,i8)},function(T){c(y,T),h5(T)})},"#ffffff"):g==="remove"?c(y,""):c(y,g)})},v=Ln(Pz({dom:{tag:"span",attributes:{"aria-label":t.providers.translate("Color swatch")}},layouts:{onRtl:function(){return[la,La,Pa]},onLtr:function(){return[La,la,Pa]}},components:[],fetch:w5(n.getColors(),n.hasCustomColors()),columns:n.getColorCols(),presets:"color",onItemAction:l},t));return Mn.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:i.toArray().concat([{dom:{tag:"div",classes:["tox-color-input"]},components:[a,v.asSpec()]}]),fieldBehaviours:Be([Nt("form-field-events",[we(a8,function(d,g){v.getOpt(d).each(function(y){_t(y.element,"background-color",g.event.color)}),yt(d,Ki,{name:e.name})}),we(o8,function(d,g){Mn.getField(d).each(function(y){Ve.setValue(y,g.event.value),Zt.getCurrent(d).each(Ot.focus)})}),we(i8,function(d,g){Mn.getField(d).each(function(y){Zt.getCurrent(d).each(Ot.focus)})})])])})},Vz=ji({schema:[de("dom")],name:"label"}),wf=function(e){return ji({name:""+e+"-edge",overrides:function(t){var n=t.model.manager.edgeActions[e];return n.fold(function(){return{}},function(a){return{events:rr([Sg(Hu(),function(i,c,l){return a(i,l)},[t]),Sg(Ni(),function(i,c,l){return a(i,l)},[t]),Sg(cd(),function(i,c,l){l.mouseIsDown.get()&&a(i,l)},[t])])}})}})},Uz=wf("top-left"),Wz=wf("top"),jz=wf("top-right"),Gz=wf("right"),qz=wf("bottom-right"),Kz=wf("bottom"),Xz=wf("bottom-left"),Yz=wf("left"),Jz=za({name:"thumb",defaults:j({dom:{styles:{position:"absolute"}}}),overrides:function(e){return{events:rr([Fs(Hu(),e,"spectrum"),Fs(Rl(),e,"spectrum"),Fs(Yc(),e,"spectrum"),Fs(Ni(),e,"spectrum"),Fs(cd(),e,"spectrum"),Fs(dg(),e,"spectrum")])}}}),Zz=za({schema:[uo("mouseIsDown",function(){return bt(!1)})],name:"spectrum",overrides:function(e){var t=e.model,n=t.manager,a=function(i,c){return n.getValueFromEvent(c).map(function(l){return n.setValueFrom(i,e,l)})};return{behaviours:Be([ht.config({mode:"special",onLeft:function(i){return n.onLeft(i,e)},onRight:function(i){return n.onRight(i,e)},onUp:function(i){return n.onUp(i,e)},onDown:function(i){return n.onDown(i,e)}}),Ot.config({})]),events:rr([we(Hu(),a),we(Rl(),a),we(Ni(),a),we(cd(),function(i,c){e.mouseIsDown.get()&&a(i,c)})])}}}),Qz=[Vz,Yz,Gz,Wz,Kz,Uz,jz,Xz,qz,Jz,Zz],e9="slider.change.value",Vp=j(e9),t9=function(e){return e.type.indexOf("touch")!==-1},mC=function(e){var t=e.event.raw;if(t9(t)){var n=t;return n.touches!==void 0&&n.touches.length===1?p.some(n.touches[0]).map(function(i){return Yn(i.clientX,i.clientY)}):p.none()}else{var a=t;return a.clientX!==void 0?p.some(a).map(function(i){return Yn(i.clientX,i.clientY)}):p.none()}},n9="top",r9="right",a9="bottom",o9="left",Mv=function(e){return e.model.minX},Ev=function(e){return e.model.minY},G2=function(e){return e.model.minX-1},q2=function(e){return e.model.minY-1},Dv=function(e){return e.model.maxX},_v=function(e){return e.model.maxY},K2=function(e){return e.model.maxX+1},X2=function(e){return e.model.maxY+1},u8=function(e,t,n){return t(e)-n(e)},gC=function(e){return u8(e,Dv,Mv)},hC=function(e){return u8(e,_v,Ev)},c8=function(e){return gC(e)/2},s8=function(e){return hC(e)/2},zm=function(e){return e.stepSize},l8=function(e){return e.snapToGrid},f8=function(e){return e.snapStart},v8=function(e){return e.rounded},Y2=function(e,t){return e[t+"-edge"]!==void 0},d8=function(e){return Y2(e,o9)},m8=function(e){return Y2(e,r9)},g8=function(e){return Y2(e,n9)},h8=function(e){return Y2(e,a9)},sl=function(e){return e.model.value.get()},p8=function(e){return{x:e}},b8=function(e){return{y:e}},Sf=function(e,t){return{x:e,y:t}},Ju=function(e,t){yt(e,Vp(),{value:t})},i9=function(e,t){Ju(e,Sf(G2(t),q2(t)))},u9=function(e,t){Ju(e,b8(q2(t)))},c9=function(e,t){Ju(e,Sf(c8(t),q2(t)))},s9=function(e,t){Ju(e,Sf(K2(t),q2(t)))},l9=function(e,t){Ju(e,p8(K2(t)))},f9=function(e,t){Ju(e,Sf(K2(t),s8(t)))},v9=function(e,t){Ju(e,Sf(K2(t),X2(t)))},d9=function(e,t){Ju(e,b8(X2(t)))},m9=function(e,t){Ju(e,Sf(c8(t),X2(t)))},g9=function(e,t){Ju(e,Sf(G2(t),X2(t)))},h9=function(e,t){Ju(e,p8(G2(t)))},p9=function(e,t){Ju(e,Sf(G2(t),s8(t)))},pC=function(e,t,n,a){return e<t?e:e>n?n:e===t?t-1:Math.max(t,e-a)},bC=function(e,t,n,a){return e>n?e:e<t?t:e===n?n+1:Math.min(n,e+a)},y8=function(e,t,n){return Math.max(t,Math.min(n,e))},b9=function(e,t,n,a,i){return i.fold(function(){var c=e-t,l=Math.round(c/a)*a;return y8(t+l,t-1,n+1)},function(c){var l=(e-c)%a,v=Math.round(l/a),d=Math.floor((e-c)/a),g=Math.floor((n-c)/a),y=Math.min(g,d+v),S=c+y*a;return Math.max(c,S)})},y9=function(e,t,n){return Math.min(n,Math.max(e,t))-t},w8=function(e){var t=e.min,n=e.max,a=e.range,i=e.value,c=e.step,l=e.snap,v=e.snapStart,d=e.rounded,g=e.hasMinEdge,y=e.hasMaxEdge,S=e.minBound,T=e.maxBound,k=e.screenRange,D=g?t-1:t,H=y?n+1:n;if(i<S)return D;if(i>T)return H;var V=y9(i,S,T),z=y8(V/k*a+t,D,H);return l&&z>=t&&z<=n?b9(z,t,n,c,v):d?Math.round(z):z},S8=function(e){var t=e.min,n=e.max,a=e.range,i=e.value,c=e.hasMinEdge,l=e.hasMaxEdge,v=e.maxBound,d=e.maxOffset,g=e.centerMinEdge,y=e.centerMaxEdge;return i<t?c?0:g:i>n?l?v:y:(i-t)/a*d},yC="top",x8="right",C8="bottom",wC="left",w9="width",S9="height",gs=function(e){return e.element.dom.getBoundingClientRect()},Zu=function(e,t){return e[t]},J2=function(e){var t=gs(e);return Zu(t,wC)},T8=function(e){var t=gs(e);return Zu(t,x8)},Z2=function(e){var t=gs(e);return Zu(t,yC)},O8=function(e){var t=gs(e);return Zu(t,C8)},k8=function(e){var t=gs(e);return Zu(t,w9)},A8=function(e){var t=gs(e);return Zu(t,S9)},M8=function(e,t,n){return(e+t)/2-n},E8=function(e,t){var n=gs(e),a=gs(t),i=Zu(n,wC),c=Zu(n,x8),l=Zu(a,wC);return M8(i,c,l)},D8=function(e,t){var n=gs(e),a=gs(t),i=Zu(n,yC),c=Zu(n,C8),l=Zu(a,yC);return M8(i,c,l)},Q2=function(e,t){yt(e,Vp(),{value:t})},ey=function(e){return{x:e}},SC=function(e,t,n){var a={min:Mv(t),max:Dv(t),range:gC(t),value:n,step:zm(t),snap:l8(t),snapStart:f8(t),rounded:v8(t),hasMinEdge:d8(t),hasMaxEdge:m8(t),minBound:J2(e),maxBound:T8(e),screenRange:k8(e)};return w8(a)},x9=function(e,t,n){var a=SC(e,t,n),i=ey(a);return Q2(e,i),a},C9=function(e,t){var n=Mv(t);Q2(e,ey(n))},T9=function(e,t){var n=Dv(t);Q2(e,ey(n))},O9=function(e,t,n){var a=e>0?bC:pC,i=a(sl(n).x,Mv(n),Dv(n),zm(n));return Q2(t,ey(i)),p.some(i)},_8=function(e){return function(t,n){return O9(e,t,n).map(qe)}},k9=function(e){var t=mC(e);return t.map(function(n){return n.left})},A9=function(e,t,n,a,i){var c=0,l=k8(e),v=a.bind(function(y){return p.some(E8(y,e))}).getOr(c),d=i.bind(function(y){return p.some(E8(y,e))}).getOr(l),g={min:Mv(t),max:Dv(t),range:gC(t),value:n,hasMinEdge:d8(t),hasMaxEdge:m8(t),minBound:J2(e),minOffset:c,maxBound:T8(e),maxOffset:l,centerMinEdge:v,centerMaxEdge:d};return S8(g)},xC=function(e,t,n,a,i,c){var l=A9(t,c,n,a,i);return J2(t)-J2(e)+l},M9=function(e,t,n,a){var i=sl(n),c=xC(e,a.getSpectrum(e),i.x,a.getLeftEdge(e),a.getRightEdge(e),n),l=$a(t.element)/2;_t(t.element,"left",c-l+"px")},E9=_8(-1),D9=_8(1),_9=p.none,z9=p.none,R9={"top-left":p.none(),top:p.none(),"top-right":p.none(),right:p.some(l9),"bottom-right":p.none(),bottom:p.none(),"bottom-left":p.none(),left:p.some(h9)},B9=Object.freeze({__proto__:null,setValueFrom:x9,setToMin:C9,setToMax:T9,findValueOfOffset:SC,getValueFromEvent:k9,findPositionOfValue:xC,setPositionFromValue:M9,onLeft:E9,onRight:D9,onUp:_9,onDown:z9,edgeActions:R9}),ty=function(e,t){yt(e,Vp(),{value:t})},ny=function(e){return{y:e}},CC=function(e,t,n){var a={min:Ev(t),max:_v(t),range:hC(t),value:n,step:zm(t),snap:l8(t),snapStart:f8(t),rounded:v8(t),hasMinEdge:g8(t),hasMaxEdge:h8(t),minBound:Z2(e),maxBound:O8(e),screenRange:A8(e)};return w8(a)},F9=function(e,t,n){var a=CC(e,t,n),i=ny(a);return ty(e,i),a},H9=function(e,t){var n=Ev(t);ty(e,ny(n))},I9=function(e,t){var n=_v(t);ty(e,ny(n))},$9=function(e,t,n){var a=e>0?bC:pC,i=a(sl(n).y,Ev(n),_v(n),zm(n));return ty(t,ny(i)),p.some(i)},z8=function(e){return function(t,n){return $9(e,t,n).map(qe)}},L9=function(e){var t=mC(e);return t.map(function(n){return n.top})},P9=function(e,t,n,a,i){var c=0,l=A8(e),v=a.bind(function(y){return p.some(D8(y,e))}).getOr(c),d=i.bind(function(y){return p.some(D8(y,e))}).getOr(l),g={min:Ev(t),max:_v(t),range:hC(t),value:n,hasMinEdge:g8(t),hasMaxEdge:h8(t),minBound:Z2(e),minOffset:c,maxBound:O8(e),maxOffset:l,centerMinEdge:v,centerMaxEdge:d};return S8(g)},TC=function(e,t,n,a,i,c){var l=P9(t,c,n,a,i);return Z2(t)-Z2(e)+l},N9=function(e,t,n,a){var i=sl(n),c=TC(e,a.getSpectrum(e),i.y,a.getTopEdge(e),a.getBottomEdge(e),n),l=Jr(t.element)/2;_t(t.element,"top",c-l+"px")},V9=p.none,U9=p.none,W9=z8(-1),j9=z8(1),G9={"top-left":p.none(),top:p.some(u9),"top-right":p.none(),right:p.none(),"bottom-right":p.none(),bottom:p.some(d9),"bottom-left":p.none(),left:p.none()},q9=Object.freeze({__proto__:null,setValueFrom:F9,setToMin:H9,setToMax:I9,findValueOfOffset:CC,getValueFromEvent:L9,findPositionOfValue:TC,setPositionFromValue:N9,onLeft:V9,onRight:U9,onUp:W9,onDown:j9,edgeActions:G9}),ry=function(e,t){yt(e,Vp(),{value:t})},ay=function(e,t){return{x:e,y:t}},K9=function(e,t,n){var a=SC(e,t,n.left),i=CC(e,t,n.top),c=ay(a,i);return ry(e,c),c},X9=function(e,t,n,a){var i=e>0?bC:pC,c=t?sl(a).x:i(sl(a).x,Mv(a),Dv(a),zm(a)),l=t?i(sl(a).y,Ev(a),_v(a),zm(a)):sl(a).y;return ry(n,ay(c,l)),p.some(c)},oy=function(e,t){return function(n,a){return X9(e,t,n,a).map(qe)}},Y9=function(e,t){var n=Mv(t),a=Ev(t);ry(e,ay(n,a))},J9=function(e,t){var n=Dv(t),a=_v(t);ry(e,ay(n,a))},Z9=function(e){return mC(e)},Q9=function(e,t,n,a){var i=sl(n),c=xC(e,a.getSpectrum(e),i.x,a.getLeftEdge(e),a.getRightEdge(e),n),l=TC(e,a.getSpectrum(e),i.y,a.getTopEdge(e),a.getBottomEdge(e),n),v=$a(t.element)/2,d=Jr(t.element)/2;_t(t.element,"left",c-v+"px"),_t(t.element,"top",l-d+"px")},eR=oy(-1,!1),tR=oy(1,!1),nR=oy(-1,!0),rR=oy(1,!0),aR={"top-left":p.some(i9),top:p.some(c9),"top-right":p.some(s9),right:p.some(f9),"bottom-right":p.some(v9),bottom:p.some(m9),"bottom-left":p.some(g9),left:p.some(p9)},oR=Object.freeze({__proto__:null,setValueFrom:K9,setToMin:Y9,setToMax:J9,getValueFromEvent:Z9,setPositionFromValue:Q9,onLeft:eR,onRight:tR,onUp:nR,onDown:rR,edgeActions:aR}),iR=[K("stepSize",1),K("onChange",be),K("onChoose",be),K("onInit",be),K("onDragStart",be),K("onDragEnd",be),K("snapToGrid",!1),K("rounded",!0),kn("snapStart"),To("model",yi("mode",{x:[K("minX",0),K("maxX",100),uo("value",function(e){return bt(e.mode.minX)}),de("getInitialValue"),Jn("manager",B9)],y:[K("minY",0),K("maxY",100),uo("value",function(e){return bt(e.mode.minY)}),de("getInitialValue"),Jn("manager",q9)],xy:[K("minX",0),K("maxX",100),K("minY",0),K("maxY",100),uo("value",function(e){return bt({x:e.mode.minX,y:e.mode.minY})}),de("getInitialValue"),Jn("manager",oR)]})),va("sliderBehaviours",[ht,Ve]),uo("mouseIsDown",function(){return bt(!1)})],uR=function(e,t,n,a){var i,c=function(U){return ju(U,e,"thumb")},l=function(U){return ju(U,e,"spectrum")},v=function(U){return jn(U,e,"left-edge")},d=function(U){return jn(U,e,"right-edge")},g=function(U){return jn(U,e,"top-edge")},y=function(U){return jn(U,e,"bottom-edge")},S=e.model,T=S.manager,k=function(U,Q){T.setPositionFromValue(U,Q,e,{getLeftEdge:v,getRightEdge:d,getTopEdge:g,getBottomEdge:y,getSpectrum:l})},D=function(U,Q){S.value.set(Q);var le=c(U);k(U,le)},H=function(U,Q){D(U,Q);var le=c(U);return e.onChange(U,le,Q),p.some(!0)},V=function(U){T.setToMin(U,e)},z=function(U){T.setToMax(U,e)},W=function(U){var Q=function(){jn(U,e,"thumb").each(function($e){var he=S.value.get();e.onChoose(U,$e,he)})},le=e.mouseIsDown.get();e.mouseIsDown.set(!1),le&&Q()},re=function(U,Q){Q.stop(),e.mouseIsDown.set(!0),e.onDragStart(U,c(U))},ne=function(U,Q){Q.stop(),e.onDragEnd(U,c(U)),W(U)};return{uid:e.uid,dom:e.dom,components:t,behaviours:Ta(e.sliderBehaviours,[ht.config({mode:"special",focusIn:function(U){return jn(U,e,"spectrum").map(ht.focusIn).map(qe)}}),Ve.config({store:{mode:"manual",getValue:function(U){return S.value.get()}}}),ui.config({channels:(i={},i[Mh()]={onReceive:W},i)})]),events:rr([we(Vp(),function(U,Q){H(U,Q.event.value)}),br(function(U,Q){var le=S.getInitialValue();S.value.set(le);var $e=c(U);k(U,$e);var he=l(U);e.onInit(U,$e,he,S.value.get())}),we(Hu(),re),we(Yc(),ne),we(Ni(),re),we(dg(),ne)]),apis:{resetToMin:V,resetToMax:z,setValue:D,refresh:k},domModification:{styles:{position:"relative"}}}},Qu=vo({name:"Slider",configFields:iR,partFields:Qz,factory:uR,apis:{setValue:function(e,t,n){e.setValue(t,n)},resetToMin:function(e,t){e.resetToMin(t)},resetToMax:function(e,t){e.resetToMax(t)},refresh:function(e,t){e.refresh(t)}}}),OC=rt("rgb-hex-update"),R8=rt("slider-update"),B8=rt("palette-update"),cR=function(e,t){var n=Qu.parts.spectrum({dom:{tag:"div",classes:[t("hue-slider-spectrum")],attributes:{role:"presentation"}}}),a=Qu.parts.thumb({dom:{tag:"div",classes:[t("hue-slider-thumb")],attributes:{role:"presentation"}}});return Qu.sketch({dom:{tag:"div",classes:[t("hue-slider")],attributes:{role:"presentation"}},rounded:!1,model:{mode:"y",getInitialValue:j({y:0})},components:[n,a],sliderBehaviours:Be([Ot.config({})]),onChange:function(i,c,l){yt(i,R8,{value:l})}})},F8="form",sR=[va("formBehaviours",[Ve])],H8=function(e){return"<alloy.field."+e+">"},lR=function(e){var t=function(){var c=[],l=function(v,d){return c.push(v),Wh(F8,H8(v),d)};return{field:l,record:j(c)}}(),n=e(t),a=t.record(),i=Se(a,function(c){return za({name:c,pname:H8(c)})});return Xh(F8,sR,i,vR,n)},fR=function(e,t){return e.fold(function(){return Ut.error(t)},Ut.value)},vR=function(e,t){return{uid:e.uid,dom:e.dom,components:t,behaviours:Ta(e.formBehaviours,[Ve.config({store:{mode:"manual",getValue:function(n){var a=db(n,e);return Qn(a,function(i,c){return i().bind(function(l){var v=Zt.getCurrent(l);return fR(v,new Error("Cannot find a current component to extract the value from for form part '"+c+"': "+oi(l.element)))}).map(Ve.getValue)})},setValue:function(n,a){sr(a,function(i,c){jn(n,e,c).each(function(l){Zt.getCurrent(l).each(function(v){Ve.setValue(v,i)})})})}}})]),apis:{getField:function(n,a){return jn(n,e,a).bind(Zt.getCurrent)}}}},Rm={getField:Vl(function(e,t,n){return e.getField(t,n)}),sketch:lR},I8=rt("valid-input"),$8=rt("invalid-input"),L8=rt("validating-input"),kC="colorcustom.rgb.",dR=function(e,t,n,a){var i=function(T,k){return ms.config({invalidClass:t("invalid"),notify:{onValidate:function(D){yt(D,L8,{type:T})},onValid:function(D){yt(D,I8,{type:T,value:Ve.getValue(D)})},onInvalid:function(D){yt(D,$8,{type:T,value:Ve.getValue(D)})}},validator:{validate:function(D){var H=Ve.getValue(D),V=k(H)?Ut.value(!0):Ut.error(e("aria.input.invalid"));return Qa.pure(V)},validateOnLoad:!1}})},c=function(T,k,D,H,V){var z=e(kC+"range"),W=Mn.parts.label({dom:{tag:"label",innerHtml:D,attributes:{"aria-label":H}}}),re=Mn.parts.field({data:V,factory:Pp,inputAttributes:L({type:"text"},k==="hex"?{"aria-live":"polite"}:{}),inputClasses:[t("textfield")],inputBehaviours:Be([i(k,T),Ur.config({})]),onSetValue:function(le){if(ms.isInvalid(le)){var $e=ms.run(le);$e.get(be)}}}),ne=[W,re],U=k!=="hex"?[Mn.parts["aria-descriptor"]({text:z})]:[],Q=ne.concat(U);return{dom:{tag:"div",attributes:{role:"presentation"}},components:Q}},l=function(T,k){var D=_p(k);return Rm.getField(T,"hex").each(function(H){Ot.isFocused(H)||Ve.setValue(T,{hex:D.value})}),D},v=function(T,k){var D=k.red,H=k.green,V=k.blue;Ve.setValue(T,{red:D,green:H,blue:V})},d=Ln({dom:{tag:"div",classes:[t("rgba-preview")],styles:{"background-color":"white"},attributes:{role:"presentation"}}}),g=function(T,k){d.getOpt(T).each(function(D){_t(D.element,"background-color","#"+k.value)})},y=function(){var T={red:bt(p.some(255)),green:bt(p.some(255)),blue:bt(p.some(255)),hex:bt(p.some("ffffff"))},k=function(se,De){var et=zp(De);v(se,et),z(et)},D=function(se){return T[se].get()},H=function(se,De){T[se].set(De)},V=function(){return D("red").bind(function(se){return D("green").bind(function(De){return D("blue").map(function(et){return bf(se,De,et,1)})})})},z=function(se){var De=se.red,et=se.green,me=se.blue;H("red",p.some(De)),H("green",p.some(et)),H("blue",p.some(me))},W=function(se,De){var et=De.event;et.type!=="hex"?H(et.type,p.none()):a(se)},re=function(se,De){n(se);var et=t5(De);H("hex",p.some(De));var me=zp(et);v(se,me),z(me),yt(se,OC,{hex:et}),g(se,et)},ne=function(se,De,et){var me=parseInt(et,10);H(De,p.some(me)),V().each(function(Je){var at=l(se,Je);yt(se,OC,{hex:at}),g(se,at)})},U=function(se){return se.type==="hex"},Q=function(se,De){var et=De.event;U(et)?re(se,et.value):ne(se,et.type,et.value)},le=function(se){return{label:e(kC+se+".label"),description:e(kC+se+".description")}},$e=le("red"),he=le("green"),Pe=le("blue"),ye=le("hex");return fe(Rm.sketch(function(se){return{dom:{tag:"form",classes:[t("rgb-form")],attributes:{"aria-label":e("aria.color.picker")}},components:[se.field("red",Mn.sketch(c(eC,"red",$e.label,$e.description,255))),se.field("green",Mn.sketch(c(eC,"green",he.label,he.description,255))),se.field("blue",Mn.sketch(c(eC,"blue",Pe.label,Pe.description,255))),se.field("hex",Mn.sketch(c(a5,"hex",ye.label,ye.description,"ffffff"))),d.asSpec()],formBehaviours:Be([ms.config({invalidClass:t("form-invalid")}),Nt("rgb-form-events",[we(I8,Q),we($8,W),we(L8,W)])])}}),{apis:{updateHex:function(se,De){Ve.setValue(se,{hex:De.value}),k(se,De),g(se,De)}}})},S=Oi({factory:y,name:"RgbForm",configFields:[],apis:{updateHex:function(T,k,D){T.updateHex(k,D)}},extraApis:{}});return S},mR=function(e,t){var n=Qu.parts.spectrum({dom:{tag:"canvas",attributes:{role:"presentation"},classes:[t("sv-palette-spectrum")]}}),a=Qu.parts.thumb({dom:{tag:"div",attributes:{role:"presentation"},classes:[t("sv-palette-thumb")],innerHtml:"<div class="+t("sv-palette-inner-thumb")+' role="presentation"></div>'}}),i=function(g,y){var S=g.width,T=g.height,k=g.getContext("2d");if(k!==null){k.fillStyle=y,k.fillRect(0,0,S,T);var D=k.createLinearGradient(0,0,S,0);D.addColorStop(0,"rgba(255,255,255,1)"),D.addColorStop(1,"rgba(255,255,255,0)"),k.fillStyle=D,k.fillRect(0,0,S,T);var H=k.createLinearGradient(0,0,0,T);H.addColorStop(0,"rgba(0,0,0,0)"),H.addColorStop(1,"rgba(0,0,0,1)"),k.fillStyle=H,k.fillRect(0,0,S,T)}},c=function(g,y){var S=g.components()[0].element.dom,T=Rp(y,100,100),k=u5(T);i(S,l5(k))},l=function(g,y){var S=nC(zp(y));Qu.setValue(g,{x:S.saturation,y:100-S.value})},v=function(g){var y=j({x:0,y:0}),S=function(D,H,V){yt(D,B8,{value:V})},T=function(D,H,V,z){i(V.element.dom,l5(f5))},k=Be([Zt.config({find:p.some}),Ot.config({})]);return Qu.sketch({dom:{tag:"div",attributes:{role:"presentation"},classes:[t("sv-palette")]},model:{mode:"xy",getInitialValue:y},rounded:!1,components:[n,a],onChange:S,onInit:T,sliderBehaviours:k})},d=Oi({factory:v,name:"SaturationBrightnessPalette",configFields:[],apis:{setHue:function(g,y,S){c(y,S)},setThumb:function(g,y,S){l(y,S)}},extraApis:{}});return d},gR=function(e,t){var n=function(i){var c=dR(e,t,i.onValidHex,i.onInvalidHex),l=mR(e,t),v=function(Q){return(100-Q)/100*360},d=function(Q){return 100-Q/360*100},g={paletteRgba:bt(f5),paletteHue:bt(0)},y=Ln(cR(e,t)),S=Ln(l.sketch({})),T=Ln(c.sketch({})),k=function(Q,le,$e){S.getOpt(Q).each(function(he){l.setHue(he,$e)})},D=function(Q,le){T.getOpt(Q).each(function($e){c.updateHex($e,le)})},H=function(Q,le,$e){y.getOpt(Q).each(function(he){Qu.setValue(he,{y:d($e)})})},V=function(Q,le){S.getOpt(Q).each(function($e){l.setThumb($e,le)})},z=function(Q,le){var $e=zp(Q);g.paletteRgba.set($e),g.paletteHue.set(le)},W=function(Q,le,$e,he){z(le,$e),Ke(he,function(Pe){Pe(Q,le,$e)})},re=function(){var Q=[D];return function(le,$e){var he=$e.event.value,Pe=g.paletteHue.get(),ye=Rp(Pe,he.x,100-he.y),se=v5(ye);W(le,se,Pe,Q)}},ne=function(){var Q=[k,D];return function(le,$e){var he=v($e.event.value.y),Pe=g.paletteRgba.get(),ye=nC(Pe),se=Rp(he,ye.saturation,ye.value),De=v5(se);W(le,De,he,Q)}},U=function(){var Q=[k,H,V];return function(le,$e){var he=$e.event.hex,Pe=JD(he);W(le,he,Pe.hue,Q)}};return{uid:i.uid,dom:i.dom,components:[S.asSpec(),y.asSpec(),T.asSpec()],behaviours:Be([Nt("colour-picker-events",[we(OC,U()),we(B8,re()),we(R8,ne())]),Zt.config({find:function(Q){return T.getOpt(Q)}}),ht.config({mode:"acyclic"})])}},a=Oi({name:"ColourPicker",configFields:[de("dom"),K("onValidHex",be),K("onInvalidHex",be)],factory:n});return a},hR=function(){return Zt.config({find:p.some})},pR=function(e){return Zt.config({find:e.getOpt})},bR=function(e){return Zt.config({find:function(t){return I(t.element,e).bind(function(n){return t.getSystem().getByDom(n).toOptional()})}})},Rc={self:hR,memento:pR,childAt:bR},yR={"colorcustom.rgb.red.label":"R","colorcustom.rgb.red.description":"Red component","colorcustom.rgb.green.label":"G","colorcustom.rgb.green.description":"Green component","colorcustom.rgb.blue.label":"B","colorcustom.rgb.blue.description":"Blue component","colorcustom.rgb.hex.label":"#","colorcustom.rgb.hex.description":"Hex color code","colorcustom.rgb.range":"Range 0 to 255","colorcustom.sb.saturation":"Saturation","colorcustom.sb.brightness":"Brightness","colorcustom.sb.picker":"Saturation and Brightness Picker","colorcustom.sb.palette":"Saturation and Brightness Palette","colorcustom.sb.instructions":"Use arrow keys to select saturation and brightness, on x and y axes","colorcustom.hue.hue":"Hue","colorcustom.hue.slider":"Hue Slider","colorcustom.hue.palette":"Hue Palette","colorcustom.hue.instructions":"Use arrow keys to select a hue","aria.color.picker":"Color Picker","aria.input.invalid":"Invalid input"},wR=function(e){return yR[e]},SR=function(e){return wR(e)},xR=function(e){var t=function(l){return"tox-"+l},n=gR(SR,t),a=function(l){yt(l,ds,{name:"hex-valid",value:!0})},i=function(l){yt(l,ds,{name:"hex-valid",value:!1})},c=Ln(n.sketch({dom:{tag:"div",classes:[t("color-picker-container")],attributes:{role:"presentation"}},onValidHex:a,onInvalidHex:i}));return{dom:{tag:"div"},components:[c.asSpec()],behaviours:Be([Ve.config({store:{mode:"manual",getValue:function(l){var v=c.get(l),d=Zt.getCurrent(v),g=d.bind(function(y){var S=Ve.getValue(y);return S.hex});return g.map(function(y){return"#"+y}).getOr("")},setValue:function(l,v){var d=/^#([a-fA-F0-9]{3}(?:[a-fA-F0-9]{3})?)/,g=d.exec(v),y=c.get(l),S=Zt.getCurrent(y);S.fold(function(){console.log("Can not find form")},function(T){Ve.setValue(T,{hex:p.from(g[1]).getOr("")}),Rm.getField(T,"hex").each(function(k){Sn(k,Ms())})})}}}),Rc.self()])}},CR=tinymce.util.Tools.resolve("tinymce.Resource"),TR=function(e){return pn(e,"init")},OR=function(e){var t=Fr(),n=Ln({dom:{tag:e.tag}}),a=Fr();return{dom:{tag:"div",classes:["tox-custom-editor"]},behaviours:Be([Nt("custom-editor-events",[br(function(i){n.getOpt(i).each(function(c){(TR(e)?e.init(c.element.dom):CR.load(e.scriptId,e.scriptUrl).then(function(l){return l(c.element.dom,e.settings)})).then(function(l){a.on(function(v){l.setValue(v)}),a.clear(),t.set(l)})})})]),Ve.config({store:{mode:"manual",getValue:function(){return t.get().fold(function(){return a.get().getOr("")},function(i){return i.getValue()})},setValue:function(i,c){t.get().fold(function(){a.set(c)},function(l){return l.setValue(c)})}}}),Rc.self()]),components:[n.asSpec()]}},xf=tinymce.util.Tools.resolve("tinymce.util.Tools"),kR=pt([K("preprocess",je),K("postprocess",je)]),AR=function(e,t){var n=ya("RepresentingConfigs.memento processors",kR,t);return Ve.config({store:{mode:"manual",getValue:function(a){var i=e.get(a),c=Ve.getValue(i);return n.postprocess(c)},setValue:function(a,i){var c=n.preprocess(i),l=e.get(a);Ve.setValue(l,c)}}})},P8=function(e,t,n){return Ve.config(fe({store:{mode:"manual",getValue:t,setValue:n}},e.map(function(a){return{store:{initialValue:a}}}).getOr({})))},AC=function(e,t,n){return P8(e,function(a){return t(a.element)},function(a,i){return n(a.element,i)})},MR=function(e){return AC(e,Nu,Kf)},ER=function(e){return AC(e,bc,Pl)},DR=function(e){return Ve.config({store:{mode:"memory",initialValue:e}})},zv={memento:AR,withElement:AC,withComp:P8,domValue:MR,domHtml:ER,memory:DR},_R="jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp",zR=function(e,t){var n=xf.explode(t.getSetting("images_file_types",_R,"string")),a=function(i){return Hn(n,function(c){return Do(i.name.toLowerCase(),"."+c.toLowerCase())})};return Ce(zr(e),a)},RR=function(e,t){var n=function(S,T){T.stop()},a=function(S){return function(T,k){Ke(S,function(D){D(T,k)})}},i=function(S,T){if(!lt.isDisabled(S)){var k=T.event.raw;l(S,k.dataTransfer.files)}},c=function(S,T){var k=T.event.raw.target;l(S,k.files)},l=function(S,T){Ve.setValue(S,zR(T,t)),yt(S,Ki,{name:e.name})},v=Ln({dom:{tag:"input",attributes:{type:"file",accept:"image/*"},styles:{display:"none"}},behaviours:Be([Nt("input-file-events",[Hs(Bl()),Hs(_s())])])}),d=function(S){return{uid:S.uid,dom:{tag:"div",classes:["tox-dropzone-container"]},behaviours:Be([zv.memory([]),Rc.self(),lt.config({}),bn.config({toggleClass:"dragenter",toggleOnExecute:!1}),Nt("dropzone-events",[we("dragenter",a([n,bn.toggle])),we("dragleave",a([n,bn.toggle])),we("dragover",n),we("drop",a([n,i])),we(Wf(),c)])]),components:[{dom:{tag:"div",classes:["tox-dropzone"],styles:{}},components:[{dom:{tag:"p",innerHtml:t.translate("Drop an image here")}},Vo.sketch({dom:{tag:"button",innerHtml:t.translate("Browse for an image"),styles:{position:"relative"},classes:["tox-button","tox-button--secondary"]},components:[v.asSpec()],action:function(T){var k=v.get(T);k.element.dom.click()},buttonBehaviours:Be([Ur.config({}),Xu.button(t.isDisabled),da()])})]}]}},g=e.label.map(function(S){return yf(S,t)}),y=Mn.parts.field({factory:{sketch:d}});return Ip(g,y,["tox-form__group--stretched"],[])},BR=function(e,t){return{dom:{tag:"div",classes:["tox-form__grid","tox-form__grid--"+e.columns+"col"]},components:Se(e.items,t.interpreter)}},MC=rt("alloy-fake-before-tabstop"),EC=rt("alloy-fake-after-tabstop"),N8=function(e){return{dom:{tag:"div",styles:{width:"1px",height:"1px",outline:"none"},attributes:{tabindex:"0"},classes:e},behaviours:Be([Ot.config({ignore:!0}),Ur.config({})])}},V8=function(e){return{dom:{tag:"div",classes:["tox-navobj"]},components:[N8([MC]),e,N8([EC])],behaviours:Be([Rc.childAt(1)])}},U8=function(e,t){yt(e,sd(),{raw:{which:9,shiftKey:t}})},FR=function(e,t){var n=t.element;Si(n,MC)?U8(e,!0):Si(n,EC)&&U8(e,!1)},Up=function(e){return Fp(e,["."+MC,"."+EC].join(","),Le)},HR=!(Ha().browser.isIE()||Ha().browser.isEdge()),IR=function(e){var t=bt("");return{getValue:function(n){return t.get()},setValue:function(n,a){if(e)Vt(n.element,"srcdoc",a);else{Vt(n.element,"src","javascript:''");var i=n.element.dom.contentWindow.document;i.open(),i.write(a),i.close()}t.set(a)}}},$R=function(e,t){var n=HR&&e.sandboxed,a=L(L({},e.label.map(function(d){return{title:d}}).getOr({})),n?{sandbox:"allow-scripts allow-same-origin"}:{}),i=IR(n),c=e.label.map(function(d){return yf(d,t)}),l=function(d){return V8({uid:d.uid,dom:{tag:"iframe",attributes:a},behaviours:Be([Ur.config({}),Ot.config({}),zv.withComp(p.none(),i.getValue,i.setValue)])})},v=Mn.parts.field({factory:{sketch:l}});return Ip(c,v,["tox-form__group--stretched"],[])},Bm=function(e,t){return PR(document.createElement("canvas"),e,t)},LR=function(e){var t=Bm(e.width,e.height),n=ll(t);return n.drawImage(e,0,0),t},ll=function(e){return e.getContext("2d")},PR=function(e,t,n){return e.width=t,e.height=n,e},DC=function(e){return e.naturalWidth||e.width},_C=function(e){return e.naturalHeight||e.height},NR=function(e){return new cl(function(t,n){var a=URL.createObjectURL(e),i=new Image,c=function(){i.removeEventListener("load",l),i.removeEventListener("error",v)},l=function(){c(),t(i)},v=function(){c(),n("Unable to load data of type "+e.type+": "+a)};i.addEventListener("load",l),i.addEventListener("error",v),i.src=a,i.complete&&setTimeout(l,0)})},VR=function(e){var t=e.split(","),n=/data:([^;]+)/.exec(t[0]);if(!n)return p.none();for(var a=n[1],i=t[1],c=1024,l=atob(i),v=l.length,d=Math.ceil(v/c),g=new Array(d),y=0;y<d;++y){for(var S=y*c,T=Math.min(S+c,v),k=new Array(T-S),D=S,H=0;D<T;++H,++D)k[H]=l[D].charCodeAt(0);g[y]=new Uint8Array(k)}return p.some(new Blob(g,{type:a}))},UR=function(e){return new cl(function(t,n){VR(e).fold(function(){n("uri is not base64: "+e)},t)})},W8=function(e,t,n){return t=t||"image/png",tt(HTMLCanvasElement.prototype.toBlob)?new cl(function(a,i){e.toBlob(function(c){c?a(c):i()},t,n)}):UR(e.toDataURL(t,n))},WR=function(e,t,n){return t=t||"image/png",e.toDataURL(t,n)},jR=function(e){return NR(e).then(function(t){qR(t);var n=Bm(DC(t),_C(t)),a=ll(n);return a.drawImage(t,0,0),n})},GR=function(e){return new cl(function(t){var n=new FileReader;n.onloadend=function(){t(n.result)},n.readAsDataURL(e)})},qR=function(e){URL.revokeObjectURL(e.src)},j8=function(e,t,n){var a=t.type,i=j(a),c=function(){return cl.resolve(t)},l=j(n),v=function(){return n.split(",")[1]},d=function(T,k){return e.then(function(D){return W8(D,T,k)})},g=function(T,k){return e.then(function(D){return WR(D,T,k)})},y=function(T,k){return g(T,k).then(function(D){return D.split(",")[1]})},S=function(){return e.then(LR)};return{getType:i,toBlob:c,toDataURL:l,toBase64:v,toAdjustedBlob:d,toAdjustedDataURL:g,toAdjustedBase64:y,toCanvas:S}},KR=function(e){return GR(e).then(function(t){return j8(jR(e),e,t)})},Rv=function(e,t){return W8(e,t).then(function(n){return j8(cl.resolve(e),n,e.toDataURL())})},XR=function(e){return KR(e)},Wp=function(e,t,n){var a=typeof e=="string"?parseFloat(e):e;return a>n?a=n:a<t&&(a=t),a},G8=function(){return[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1]},zC=[0,.01,.02,.04,.05,.06,.07,.08,.1,.11,.12,.14,.15,.16,.17,.18,.2,.21,.22,.24,.25,.27,.28,.3,.32,.34,.36,.38,.4,.42,.44,.46,.48,.5,.53,.56,.59,.62,.65,.68,.71,.74,.77,.8,.83,.86,.89,.92,.95,.98,1,1.06,1.12,1.18,1.24,1.3,1.36,1.42,1.48,1.54,1.6,1.66,1.72,1.78,1.84,1.9,1.96,2,2.12,2.25,2.37,2.5,2.62,2.75,2.87,3,3.2,3.4,3.6,3.8,4,4.3,4.7,4.9,5,5.5,6,6.5,6.8,7,7.3,7.5,7.8,8,8.4,8.7,9,9.4,9.6,9.8,10],RC=function(e,t){for(var n=[],a=new Array(25),i,c=0;c<5;c++){for(var l=0;l<5;l++)n[l]=t[l+c*5];for(var l=0;l<5;l++){i=0;for(var v=0;v<5;v++)i+=e[l+v*5]*n[v];a[l+c*5]=i}}return a},YR=function(e,t){var n;return t=Wp(t,-1,1),t*=100,t<0?n=127+t/100*127:(n=t%1,n===0?n=zC[t]:n=zC[Math.floor(t)]*(1-n)+zC[Math.floor(t)+1]*n,n=n*127+127),RC(e,[n/127,0,0,0,.5*(127-n),0,n/127,0,0,.5*(127-n),0,0,n/127,0,.5*(127-n),0,0,0,1,0,0,0,0,0,1])},JR=function(e,t){return t=Wp(255*t,-255,255),RC(e,[1,0,0,0,t,0,1,0,0,t,0,0,1,0,t,0,0,0,1,0,0,0,0,0,1])},ZR=function(e,t,n,a){return t=Wp(t,0,2),n=Wp(n,0,2),a=Wp(a,0,2),RC(e,[t,0,0,0,0,0,n,0,0,0,0,0,a,0,0,0,0,0,1,0,0,0,0,0,1])},BC=function(e,t){return e.toCanvas().then(function(n){return QR(n,e.getType(),t)})},QR=function(e,t,n){var a=ll(e),i=function(l,v){for(var d,g,y,S,T=l.data,k=v[0],D=v[1],H=v[2],V=v[3],z=v[4],W=v[5],re=v[6],ne=v[7],U=v[8],Q=v[9],le=v[10],$e=v[11],he=v[12],Pe=v[13],ye=v[14],se=v[15],De=v[16],et=v[17],me=v[18],Je=v[19],at=0;at<T.length;at+=4)d=T[at],g=T[at+1],y=T[at+2],S=T[at+3],T[at]=d*k+g*D+y*H+S*V+z,T[at+1]=d*W+g*re+y*ne+S*U+Q,T[at+2]=d*le+g*$e+y*he+S*Pe+ye,T[at+3]=d*se+g*De+y*et+S*me+Je;return l},c=i(a.getImageData(0,0,e.width,e.height),n);return a.putImageData(c,0,0),Rv(e,t)},eB=function(e,t){return e.toCanvas().then(function(n){return tB(n,e.getType(),t)})},tB=function(e,t,n){var a=ll(e),i=function(v,d,g){for(var y=function(De,et,me){return De>me?De=me:De<et&&(De=et),De},S=Math.round(Math.sqrt(g.length)),T=Math.floor(S/2),k=v.data,D=d.data,H=v.width,V=v.height,z=0;z<V;z++)for(var W=0;W<H;W++){for(var re=0,ne=0,U=0,Q=0;Q<S;Q++)for(var le=0;le<S;le++){var $e=y(W+le-T,0,H-1),he=y(z+Q-T,0,V-1),Pe=(he*H+$e)*4,ye=g[Q*S+le];re+=k[Pe]*ye,ne+=k[Pe+1]*ye,U+=k[Pe+2]*ye}var se=(z*H+W)*4;D[se]=y(re,0,255),D[se+1]=y(ne,0,255),D[se+2]=y(U,0,255)}return d},c=a.getImageData(0,0,e.width,e.height),l=a.getImageData(0,0,e.width,e.height);return l=i(c,l,n),a.putImageData(l,0,0),Rv(e,t)},nB=function(e){var t=function(n,a,i){for(var c=ll(n),l=new Array(256),v=function(y,S){for(var T=y.data,k=0;k<T.length;k+=4)T[k]=S[T[k]],T[k+1]=S[T[k+1]],T[k+2]=S[T[k+2]];return y},d=0;d<l.length;d++)l[d]=e(d,i);var g=v(c.getImageData(0,0,n.width,n.height),l);return c.putImageData(g,0,0),Rv(n,a)};return function(n,a){return n.toCanvas().then(function(i){return t(i,n.getType(),a)})}},q8=function(e){return function(t,n){return BC(t,e(G8(),n))}},rB=function(e){return function(t){return BC(t,e)}},aB=function(e){return function(t){return eB(t,e)}},oB=rB([-1,0,0,0,255,0,-1,0,0,255,0,0,-1,0,255,0,0,0,1,0,0,0,0,0,1]),iB=q8(JR),uB=q8(YR),cB=function(e,t,n,a){return BC(e,ZR(G8(),t,n,a))},sB=aB([0,-1,0,-1,5,-1,0,-1,0]),lB=nB(function(e,t){return Math.pow(e/255,1-t)*255}),K8=function(e,t,n){var a=DC(e),i=_C(e),c=t/a,l=n/i,v=!1;(c<.5||c>2)&&(c=c<.5?.5:2,v=!0),(l<.5||l>2)&&(l=l<.5?.5:2,v=!0);var d=fB(e,c,l);return v?d.then(function(g){return K8(g,t,n)}):d},fB=function(e,t,n){return new cl(function(a){var i=DC(e),c=_C(e),l=Math.floor(i*t),v=Math.floor(c*n),d=Bm(l,v),g=ll(d);g.drawImage(e,0,0,i,c,0,0,l,v),a(d)})},X8=function(e,t){t===void 0&&(t=2);var n=Math.pow(10,t),a=Math.round(e*n);return Math.ceil(a/n)},vB=function(e,t){return e.toCanvas().then(function(n){return dB(n,e.getType(),t)})},dB=function(e,t,n){var a=n<0?360+n:n,i=a*Math.PI/180,c=e.width,l=e.height,v=Math.sin(i),d=Math.cos(i),g=X8(Math.abs(c*d)+Math.abs(l*v)),y=X8(Math.abs(c*v)+Math.abs(l*d)),S=Bm(g,y),T=ll(S);return T.translate(g/2,y/2),T.rotate(i),T.drawImage(e,-c/2,-l/2),Rv(S,t)},mB=function(e,t){return e.toCanvas().then(function(n){return gB(n,e.getType(),t)})},gB=function(e,t,n){var a=Bm(e.width,e.height),i=ll(a);return n==="v"?(i.scale(1,-1),i.drawImage(e,0,-a.height)):(i.scale(-1,1),i.drawImage(e,-a.width,0)),Rv(a,t)},hB=function(e,t,n,a,i){return e.toCanvas().then(function(c){return pB(c,e.getType(),t,n,a,i)})},pB=function(e,t,n,a,i,c){var l=Bm(i,c),v=ll(l);return v.drawImage(e,-n,-a),Rv(l,t)},bB=function(e,t,n){return e.toCanvas().then(function(a){return K8(a,t,n).then(function(i){return Rv(i,e.getType())})})},yB=function(e){return oB(e)},wB=function(e){return sB(e)},SB=function(e,t){return lB(e,t)},xB=function(e,t,n,a){return cB(e,t,n,a)},CB=function(e,t){return iB(e,t)},TB=function(e,t){return uB(e,t)},Y8=function(e,t){return mB(e,t)},OB=function(e,t,n,a,i){return hB(e,t,n,a,i)},kB=function(e,t,n){return bB(e,t,n)},J8=function(e,t){return vB(e,t)},Z8=function(e,t,n){return Dc(e,{tag:"span",classes:["tox-icon","tox-tbtn__icon-wrap"],behaviours:n},t)},iy=function(e,t){return Z8(e,t,[])},Q8=function(e,t){return Z8(e,t,[zt.config({})])},FC=function(e,t,n){return{dom:{tag:"span",innerHtml:n.translate(e),classes:[t+"__select-label"]},behaviours:Be([zt.config({})])}},HC,eO=rt("toolbar.button.execute"),AB=function(e){return du(function(t,n){V2(e,t)(function(a){yt(t,eO,{buttonApi:a}),e.onAction(a)})})},tO=(HC={},HC[ai()]=["disabling","alloy.base.behaviour","toggling","toolbar-button-events"],HC),Fm=rt("update-menu-text"),nO=rt("update-menu-icon"),IC=function(e,t,n){var a=bt(be),i=e.text.map(function(S){return Ln(FC(S,t,n.providers))}),c=e.icon.map(function(S){return Ln(Q8(S,n.providers.icons))}),l=function(S,T){var k=Ve.getValue(S);return Ot.focus(k),yt(k,"keydown",{raw:T.event.raw}),Yu.close(k),p.some(!0)},v=e.role.fold(function(){return{}},function(S){return{role:S}}),d=e.tooltip.fold(function(){return{}},function(S){var T=n.providers.translate(S);return{title:T,"aria-label":T}}),g=Dc("chevron-down",{tag:"div",classes:[t+"__select-chevron"]},n.providers.icons),y=Ln(Yu.sketch(L(L(L({},e.uid?{uid:e.uid}:{}),v),{dom:{tag:"button",classes:[t,t+"--select"].concat(Se(e.classes,function(S){return t+"--"+S})),attributes:L({},d)},components:Am([c.map(function(S){return S.asSpec()}),i.map(function(S){return S.asSpec()}),p.some(g)]),matchWidth:!0,useMinWidth:!0,dropdownBehaviours:Be(He(He([],e.dropdownBehaviours,!0),[Xu.button(function(){return e.disabled||n.providers.isDisabled()}),da(),Np.config({}),zt.config({}),Nt("dropdown-events",[Mp(e,a),Ep(e,a)]),Nt("menubutton-update-display-text",[we(Fm,function(S,T){i.bind(function(k){return k.getOpt(S)}).each(function(k){zt.set(k,[es(n.providers.translate(T.event.text))])})}),we(nO,function(S,T){c.bind(function(k){return k.getOpt(S)}).each(function(k){zt.set(k,[Q8(T.event.icon,n.providers.icons)])})})])],!1)),eventOrder:fe(tO,{mousedown:["focusing","alloy.base.behaviour","item-type-events","normal-dropdown-events"]}),sandboxBehaviours:Be([ht.config({mode:"special",onLeft:l,onRight:l})]),lazySink:n.getSink,toggleClass:t+"--active",parts:{menu:H2(!1,e.columns,e.presets)},fetch:function(S){return Qa.nu(Pn(e.fetch,S))}})));return y.asSpec()},MB=function(e){return dt(e)},$C=function(e){return e.type==="separator"},EB=function(e){return pn(e,"getSubmenuItems")},DB={type:"separator"},_B=function(e,t){var n=ce(e,function(a,i){return MB(i)?i===""?a:i==="|"?a.length>0&&!$C(a[a.length-1])?a.concat([DB]):a:pn(t,i.toLowerCase())?a.concat([t[i.toLowerCase()]]):a:a.concat([i])},[]);return n.length>0&&$C(n[n.length-1])&&n.pop(),n},zB=function(e,t){var n=e.getSubmenuItems(),a=rO(n,t),i=fe(a.menus,hc(e.value,a.items)),c=fe(a.expansions,hc(e.value,e.value));return{item:e,menus:i,expansions:c}},RB=function(e,t){return EB(e)?zB(e,t):{item:e,menus:{},expansions:{}}},BB=function(e){if($C(e))return e;var t=ct(e,"value").getOrThunk(function(){return rt("generated-menu-item")});return fe({value:t},e)},rO=function(e,t){var n=_B(dt(e)?e.split(" "):e,t);return X(n,function(a,i){var c=BB(i),l=RB(c,t);return{menus:fe(a.menus,l.menus),items:[l.item].concat(a.items),expansions:fe(a.expansions,l.expansions)}},{menus:{},expansions:{},items:[]})},Hm=function(e,t,n,a){var i=rt("primary-menu"),c=rO(e,n.shared.providers.menuItems());if(c.items.length===0)return p.none();var l=E5(i,c.items,t,n,a),v=Qn(c.menus,function(g,y){return E5(y,g,t,n,!1)}),d=fe(v,hc(i,l));return p.from(Vn.tieredData(i,d,c.expansions))},FB=function(e){return{isDisabled:function(){return lt.isDisabled(e)},setDisabled:function(t){return lt.set(e,t)},setActive:function(t){var n=e.element;t?(Sa(n,"tox-tbtn--enabled"),Vt(n,"aria-pressed",!0)):(Gr(n,"tox-tbtn--enabled"),ba(n,"aria-pressed"))},isActive:function(){return Si(e.element,"tox-tbtn--enabled")}}},LC=function(e,t,n,a){return IC({text:e.text,icon:e.icon,tooltip:e.tooltip,role:a,fetch:function(i,c){e.fetch(function(l){c(Hm(l,_c.CLOSE_ON_EXECUTE,n,!1))})},onSetup:e.onSetup,getApi:FB,columns:1,presets:"normal",classes:[],dropdownBehaviours:[Ur.config({})]},t,n.shared)},HB=function(e,t,n){var a=function(c){return function(l){var v=!l.isActive();l.setActive(v),c.storage.set(v),n.shared.getSink().each(function(d){t().getOpt(d).each(function(g){Sc(g.element),yt(g,ds,{name:c.name,value:c.storage.get()})})})}},i=function(c){return function(l){l.setActive(c.storage.get())}};return function(c){c(Se(e,function(l){var v=l.text.fold(function(){return{}},function(d){return{text:d}});return L(L({type:l.type,active:!1},v),{onAction:a(l),onSetup:i(l)})}))}},aO=function(e,t,n,a,i,c){n===void 0&&(n=[]);var l=t.fold(function(){return{}},function(g){return{action:g}}),v=L({buttonBehaviours:Be([Xu.button(function(){return e.disabled||c.isDisabled()}),da(),Ur.config({}),Nt("button press",[vd("click"),vd("mousedown")])].concat(n)),eventOrder:{click:["button press","alloy.base.behaviour"],mousedown:["button press","alloy.base.behaviour"]}},l),d=fe(v,{dom:a});return fe(d,{components:i})},oO=function(e,t,n,a){a===void 0&&(a=[]);var i=e.tooltip.map(function(d){return{"aria-label":n.translate(d),title:n.translate(d)}}).getOr({}),c={tag:"button",classes:["tox-tbtn"],attributes:i},l=e.icon.map(function(d){return iy(d,n.icons)}),v=Am([l]);return aO(e,t,a,c,v,n)},iO=function(e,t,n,a){a===void 0&&(a=[]);var i=oO(e,p.some(t),n,a);return Vo.sketch(i)},uO=function(e,t,n,a,i){a===void 0&&(a=[]),i===void 0&&(i=[]);var c=n.translate(e.text),l=e.icon?e.icon.map(function(S){return iy(S,n.icons)}):p.none(),v=l.isSome()?Am([l]):[],d=l.isSome()?{}:{innerHtml:c},g=He(He(He(He([],!e.primary&&!e.borderless?["tox-button","tox-button--secondary"]:["tox-button"],!0),l.isSome()?["tox-button--icon"]:[],!0),e.borderless?["tox-button--naked"]:[],!0),i,!0),y=L(L({tag:"button",classes:g},d),{attributes:{title:c}});return aO(e,t,a,y,v,n)},PC=function(e,t,n,a,i){a===void 0&&(a=[]),i===void 0&&(i=[]);var c=uO(e,p.some(t),n,a,i);return Vo.sketch(c)},cO=function(e,t){return function(n){t==="custom"?yt(n,ds,{name:e,value:{}}):t==="submit"?Sn(n,Lp):t==="cancel"?Sn(n,Av):console.error("Unknown button type: ",t)}},IB=function(e,t){return t==="menu"},$B=function(e,t){return t==="custom"||t==="cancel"||t==="submit"},uy=function(e,t,n){if(IB(e,t)){var a=function(){return l},i=e,c=L(L({},e),{onSetup:function(g){return g.setDisabled(e.disabled),be},fetch:HB(i.items,a,n)}),l=Ln(LC(c,"tox-tbtn",n,p.none()));return l.asSpec()}else if($B(e,t)){var v=cO(e.name,t),d=L(L({},e),{borderless:!1});return PC(d,v,n.shared.providers,[])}else console.error("Unknown footer button type: ",t)},LB=function(e,t){var n=cO(e.name,"custom");return cz(p.none(),Mn.parts.field(L({factory:Vo},uO(e,p.some(n),t,[zv.memory(""),Rc.self()]))))},PB=j([K("field1Name","field1"),K("field2Name","field2"),Ks("onLockedChange"),qs(["lockClass"]),K("locked",!1),Wi.field("coupledFieldBehaviours",[Zt,Ve])]),NB=function(e,t,n){return jn(e,t,n).bind(Zt.getCurrent)},sO=function(e,t){return za({factory:Mn,name:e,overrides:function(n){return{fieldBehaviours:Be([Nt("coupled-input-behaviour",[we(Ms(),function(a){NB(a,n,t).each(function(i){jn(a,n,"lock").each(function(c){bn.isOn(c)&&n.onLockedChange(a,i,c)})})})])])}}})},VB=j([sO("field1","field2"),sO("field2","field1"),za({factory:Vo,schema:[de("dom")],name:"lock",overrides:function(e){return{buttonBehaviours:Be([bn.config({selected:e.locked,toggleClass:e.markers.lockClass,aria:{mode:"pressed"}})])}}})]),UB=function(e,t,n,a){return{uid:e.uid,dom:e.dom,components:t,behaviours:Wi.augment(e.coupledFieldBehaviours,[Zt.config({find:p.some}),Ve.config({store:{mode:"manual",getValue:function(i){var c,l=qh(i,e,["field1","field2"]);return c={},c[e.field1Name]=Ve.getValue(l.field1()),c[e.field2Name]=Ve.getValue(l.field2()),c},setValue:function(i,c){var l=qh(i,e,["field1","field2"]);mr(c,e.field1Name)&&Ve.setValue(l.field1(),c[e.field1Name]),mr(c,e.field2Name)&&Ve.setValue(l.field2(),c[e.field2Name])}}})]),apis:{getField1:function(i){return jn(i,e,"field1")},getField2:function(i){return jn(i,e,"field2")},getLock:function(i){return jn(i,e,"lock")}}}},Xi=vo({name:"FormCoupledInputs",configFields:PB(),partFields:VB(),factory:UB,apis:{getField1:function(e,t){return e.getField1(t)},getField2:function(e,t){return e.getField2(t)},getLock:function(e,t){return e.getLock(t)}}}),WB=function(e){var t={"":0,px:0,pt:1,mm:1,pc:2,ex:2,em:2,ch:2,rem:2,cm:3,in:4,"%":4},n=function(i){return i in t?t[i]:1},a=e.value.toFixed(n(e.unit));return a.indexOf(".")!==-1&&(a=a.replace(/\.?0*$/,"")),a+e.unit},NC=function(e){var t=/^\s*(\d+(?:\.\d+)?)\s*(|cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)\s*$/,n=t.exec(e);if(n!==null){var a=parseFloat(n[1]),i=n[2];return Ut.value({value:a,unit:i})}else return Ut.error(e)},lO=function(e,t){var n={"":96,px:96,pt:72,cm:2.54,pc:12,mm:25.4,in:1},a=function(i){return pn(n,i)};return e.unit===t?p.some(e.value):a(e.unit)&&a(t)?n[e.unit]===n[t]?p.some(e.value):p.some(e.value/n[e.unit]*n[t]):p.none()},VC=function(e){return p.none()},jB=function(e,t){return function(n){return lO(n,t).map(function(a){return{value:a*e,unit:t}})}},GB=function(e,t){var n=NC(e).toOptional(),a=NC(t).toOptional();return vi(n,a,function(i,c){return lO(i,c.unit).map(function(l){return c.value/l}).map(function(l){return jB(l,c.unit)}).getOr(VC)}).getOr(VC)},fO=function(e,t){var n=VC,a=rt("ratio-event"),i=function(S){return Dc(S,{tag:"span",classes:["tox-icon","tox-lock-icon__"+S]},t.icons)},c=Xi.parts.lock({dom:{tag:"button",classes:["tox-lock","tox-button","tox-button--naked","tox-button--icon"],attributes:{title:t.translate(e.label.getOr("Constrain proportions"))}},components:[i("lock"),i("unlock")],buttonBehaviours:Be([lt.config({disabled:function(){return e.disabled||t.isDisabled()}}),da(),Ur.config({})])}),l=function(S){return{dom:{tag:"div",classes:["tox-form__group"]},components:S}},v=function(S){return Mn.parts.field({factory:Pp,inputClasses:["tox-textfield"],inputBehaviours:Be([lt.config({disabled:function(){return e.disabled||t.isDisabled()}}),da(),Ur.config({}),Nt("size-input-events",[we(wi(),function(T,k){yt(T,a,{isField1:S})}),we(Wf(),function(T,k){yt(T,Ki,{name:e.name})})])]),selectOnFocus:!1})},d=function(S){return{dom:{tag:"label",classes:["tox-label"],innerHtml:t.translate(S)}}},g=Xi.parts.field1(l([Mn.parts.label(d("Width")),v(!0)])),y=Xi.parts.field2(l([Mn.parts.label(d("Height")),v(!1)]));return Xi.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:[{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:[g,y,l([d("&nbsp;"),c])]}],field1Name:"width",field2Name:"height",locked:!0,markers:{lockClass:"tox-locked"},onLockedChange:function(S,T,k){NC(Ve.getValue(S)).each(function(D){n(D).each(function(H){Ve.setValue(T,WB(H))})})},coupledFieldBehaviours:Be([lt.config({disabled:function(){return e.disabled||t.isDisabled()},onDisabled:function(S){Xi.getField1(S).bind(Mn.getField).each(lt.disable),Xi.getField2(S).bind(Mn.getField).each(lt.disable),Xi.getLock(S).each(lt.disable)},onEnabled:function(S){Xi.getField1(S).bind(Mn.getField).each(lt.enable),Xi.getField2(S).bind(Mn.getField).each(lt.enable),Xi.getLock(S).each(lt.enable)}}),da(),Nt("size-input-events2",[we(a,function(S,T){var k=T.event.isField1,D=k?Xi.getField1(S):Xi.getField2(S),H=k?Xi.getField2(S):Xi.getField1(S),V=D.map(Ve.getValue).getOr(""),z=H.map(Ve.getValue).getOr("");n=GB(V,z)})])])})},qB=j(rt("undo")),KB=j(rt("redo")),XB=j(rt("zoom")),YB=j(rt("back")),JB=j(rt("apply")),ZB=j(rt("swap")),QB=j(rt("transform")),eF=j(rt("temp-transform")),tF=j(rt("transform-apply")),po={undo:qB,redo:KB,zoom:XB,back:YB,apply:JB,swap:ZB,transform:QB,tempTransform:eF,transformApply:tF},nF=j("save-state"),rF=j("disable"),aF=j("enable"),si={formActionEvent:ds,saveState:nF,disable:rF,enable:aF},oF=function(e,t){var n=function(Ue,Pt,Bn,fr){return Ln(PC({name:Ue,text:Ue,disabled:Bn,primary:fr,icon:p.none(),borderless:!1},Pt,t))},a=function(Ue,Pt,Bn,fr){return Ln(iO({name:Ue,icon:p.some(Ue),tooltip:p.some(Pt),disabled:fr,primary:!1,borderless:!1},Bn,t))},i=function(Ue,Pt){Ue.map(function(Bn){var fr=Bn.get(Pt);fr.hasConfigured(lt)&&lt.disable(fr)})},c=function(Ue,Pt){Ue.map(function(Bn){var fr=Bn.get(Pt);fr.hasConfigured(lt)&&lt.enable(fr)})},l={tag:"div",classes:["tox-image-tools__toolbar","tox-image-tools-edit-panel"]},v=be,d=function(Ue,Pt,Bn){yt(Ue,Pt,Bn)},g=function(Ue){return Sn(Ue,si.disable())},y=function(Ue){return Sn(Ue,si.enable())},S=function(Ue,Pt){g(Ue),d(Ue,po.transform(),{transform:Pt}),y(Ue)},T=function(Ue,Pt){g(Ue),d(Ue,po.tempTransform(),{transform:Pt}),y(Ue)},k=function(Ue){return function(){Su.getOpt(Ue).each(function(Pt){zt.set(Pt,[ys])})}},D=function(Ue,Pt){g(Ue),d(Ue,po.transformApply(),{transform:Pt,swap:k(Ue)}),y(Ue)},H=function(){return n("Back",function(Ue){return d(Ue,po.back(),{swap:k(Ue)})},!1,!1)},V=function(){return Ln({dom:{tag:"div",classes:["tox-spacer"]},behaviours:Be([lt.config({})])})},z=function(){return n("Apply",function(Ue){return d(Ue,po.apply(),{swap:k(Ue)})},!0,!0)},W=function(){return function(Ue){var Pt=e.getRect();return OB(Ue,Pt.x,Pt.y,Pt.w,Pt.h)}},re=[H(),V(),n("Apply",function(Ue){var Pt=W();D(Ue,Pt),e.hideCrop()},!1,!0)],ne=ho.sketch({dom:l,components:re.map(function(Ue){return Ue.asSpec()}),containerBehaviours:Be([Nt("image-tools-crop-buttons-events",[we(si.disable(),function(Ue,Pt){i(re,Ue)}),we(si.enable(),function(Ue,Pt){c(re,Ue)})])])}),U=Ln(fO({name:"size",label:p.none(),constrain:!0,disabled:!1},t)),Q=function(Ue,Pt){return function(Bn){return kB(Bn,Ue,Pt)}},le=[H(),V(),U,V(),n("Apply",function(Ue){U.getOpt(Ue).each(function(Pt){var Bn=Ve.getValue(Pt),fr=parseInt(Bn.width,10),yo=parseInt(Bn.height,10),to=Q(fr,yo);D(Ue,to)})},!1,!0)],$e=ho.sketch({dom:l,components:le.map(function(Ue){return Ue.asSpec()}),containerBehaviours:Be([Nt("image-tools-resize-buttons-events",[we(si.disable(),function(Ue,Pt){i(le,Ue)}),we(si.enable(),function(Ue,Pt){c(le,Ue)})])])}),he=function(Ue,Pt){return function(Bn){return Ue(Bn,Pt)}},Pe=he(Y8,"h"),ye=he(Y8,"v"),se=he(J8,-90),De=he(J8,90),et=function(Ue,Pt){T(Ue,Pt)},me=[H(),V(),a("flip-horizontally","Flip horizontally",function(Ue){et(Ue,Pe)},!1),a("flip-vertically","Flip vertically",function(Ue){et(Ue,ye)},!1),a("rotate-left","Rotate counterclockwise",function(Ue){et(Ue,se)},!1),a("rotate-right","Rotate clockwise",function(Ue){et(Ue,De)},!1),V(),z()],Je=ho.sketch({dom:l,components:me.map(function(Ue){return Ue.asSpec()}),containerBehaviours:Be([Nt("image-tools-fliprotate-buttons-events",[we(si.disable(),function(Ue,Pt){i(me,Ue)}),we(si.enable(),function(Ue,Pt){c(me,Ue)})])])}),at=function(Ue,Pt,Bn,fr,yo){var to=Qu.parts.label({dom:{tag:"label",classes:["tox-label"],innerHtml:t.translate(Ue)}}),Wo=Qu.parts.spectrum({dom:{tag:"div",classes:["tox-slider__rail"],attributes:{role:"presentation"}}}),_i=Qu.parts.thumb({dom:{tag:"div",classes:["tox-slider__handle"],attributes:{role:"presentation"}}});return Ln(Qu.sketch({dom:{tag:"div",classes:["tox-slider"],attributes:{role:"presentation"}},model:{mode:"x",minX:Bn,maxX:yo,getInitialValue:j({x:fr})},components:[to,Wo,_i],sliderBehaviours:Be([Ot.config({})]),onChoose:Pt}))},Jt=function(Ue,Pt,Bn,fr,yo){var to=function(Wo,_i,kf){var Vv=he(Pt,kf.x/100);S(Wo,Vv)};return at(Ue,to,Bn,fr,yo)},En=function(Ue,Pt,Bn,fr,yo){return[H(),Jt(Ue,Pt,Bn,fr,yo),z()]},ar=function(Ue,Pt,Bn,fr,yo){var to=En(Ue,Pt,Bn,fr,yo);return ho.sketch({dom:l,components:to.map(function(Wo){return Wo.asSpec()}),containerBehaviours:Be([Nt("image-tools-filter-panel-buttons-events",[we(si.disable(),function(Wo,_i){i(to,Wo)}),we(si.enable(),function(Wo,_i){c(to,Wo)})])])})},dr=[H(),V(),z()],Uo=ho.sketch({dom:l,components:dr.map(function(Ue){return Ue.asSpec()})}),Na=ar("Brightness",CB,-100,0,100),jm=ar("Contrast",TB,-100,0,100),aa=ar("Gamma",SB,-100,0,100),dl=function(Ue,Pt,Bn){return function(fr){return xB(fr,Ue,Pt,Bn)}},ml=function(Ue){var Pt=function(Bn,fr,yo){var to=Lv.getOpt(Bn),Wo=Pv.getOpt(Bn),_i=gl.getOpt(Bn);to.each(function(kf){Wo.each(function(Vv){_i.each(function(Af){var jT=Ve.getValue(kf).x/100,GT=Ve.getValue(Af).x/100,pl=Ve.getValue(Vv).x/100,Mf=dl(jT,GT,pl);S(Bn,Mf)})})})};return at(Ue,Pt,0,100,200)},Lv=ml("R"),gl=ml("G"),Pv=ml("B"),bo=[H(),Lv,gl,Pv,z()],wu=ho.sketch({dom:l,components:bo.map(function(Ue){return Ue.asSpec()})}),eo=function(Ue,Pt,Bn){return function(fr){var yo=function(){Su.getOpt(fr).each(function(to){zt.set(to,[Ue]),Bn(to)})};d(fr,po.swap(),{transform:Pt,swap:yo})}},Nv=function(Ue){e.showCrop()},bs=function(Ue){U.getOpt(Ue).each(function(Pt){var Bn=e.getMeasurements(),fr=Bn.width,yo=Bn.height;Ve.setValue(Pt,{width:fr,height:yo})})},Of=p.some(wB),oa=p.some(yB),Hc=[a("crop","Crop",eo(ne,p.none(),Nv),!1),a("resize","Resize",eo($e,p.none(),bs),!1),a("orientation","Orientation",eo(Je,p.none(),v),!1),a("brightness","Brightness",eo(Na,p.none(),v),!1),a("sharpen","Sharpen",eo(Uo,Of,v),!1),a("contrast","Contrast",eo(jm,p.none(),v),!1),a("color-levels","Color levels",eo(wu,p.none(),v),!1),a("gamma","Gamma",eo(aa,p.none(),v),!1),a("invert","Invert",eo(Uo,oa,v),!1)],ys=ho.sketch({dom:l,components:Hc.map(function(Ue){return Ue.asSpec()})}),hl=ho.sketch({dom:{tag:"div"},components:[ys],containerBehaviours:Be([zt.config({})])}),Su=Ln(hl),ws=function(Ue){return Su.getOpt(Ue).map(function(Pt){var Bn=Pt.components()[0];return Bn.components()[Bn.components().length-1]})};return{memContainer:Su,getApplyButton:ws}},vO=tinymce.util.Tools.resolve("tinymce.geom.Rect"),iF=tinymce.util.Tools.resolve("tinymce.util.Observable"),Im=tinymce.util.Tools.resolve("tinymce.util.VK"),uF=function(e){var t=Math.max,n=e.documentElement,a=e.body,i=t(n.scrollWidth,a.scrollWidth),c=t(n.clientWidth,a.clientWidth),l=t(n.offsetWidth,a.offsetWidth),v=t(n.scrollHeight,a.scrollHeight),d=t(n.clientHeight,a.clientHeight),g=t(n.offsetHeight,a.offsetHeight);return{width:i<l?c:i,height:v<g?d:v}},cF=function(e){return Oe(e.changedTouches)},UC=function(e){if(cF(e))for(var t="screenX screenY pageX pageY clientX clientY".split(" "),n=0;n<t.length;n++)e[t[n]]=e.changedTouches[0][t[n]]};function sF(e,t){var n,a,i,c,l=[],v=[],d=(n=t.document)!==null&&n!==void 0?n:document,g=(a=t.root)!==null&&a!==void 0?a:d,y=$.fromDom(d),S,T,k,D=$.fromDom(g.getElementById((i=t.handle)!==null&&i!==void 0?i:e)),H=function(re){var ne=re.raw,U=uF(d);UC(ne),re.prevent(),S=ne.button,T=ne.screenX,k=ne.screenY;var Q=Ga(D,"cursor");c=$.fromTag("div",d),Bo(c,{position:"absolute",top:"0",left:"0",width:U.width+"px",height:U.height+"px","z-index":"2147483647",opacity:"0.0001",cursor:Q}),qa(Cs(y),c),v.push(Vr(y,"mousemove",V),Vr(y,"touchmove",V),Vr(y,"mouseup",z),Vr(y,"touchend",z)),t.start(ne)},V=function(re){var ne=re.raw;if(UC(ne),ne.button!==S)return z(re);ne.deltaX=ne.screenX-T,ne.deltaY=ne.screenY-k,re.prevent(),t.drag(ne)},z=function(re){UC(re.raw),Ke(v,function(ne){return ne.unbind()}),v=[],Jo(c),t.stop&&t.stop(re.raw)},W=function(){Ke(v.concat(l),function(re){return re.unbind()}),v=[],l=[],Oe(c)&&Jo(c)};return l.push(Vr(D,"mousedown",H),Vr(D,"touchstart",H)),{destroy:W}}var lF=0,fF=function(e,t,n,a,i){var c,l=[],v="tox-",d=v+"crid-"+lF++,g=$.fromDom(a),y=[{name:"move",xMul:0,yMul:0,deltaX:1,deltaY:1,deltaW:0,deltaH:0,label:"Crop Mask"},{name:"nw",xMul:0,yMul:0,deltaX:1,deltaY:1,deltaW:-1,deltaH:-1,label:"Top Left Crop Handle"},{name:"ne",xMul:1,yMul:0,deltaX:0,deltaY:1,deltaW:1,deltaH:-1,label:"Top Right Crop Handle"},{name:"sw",xMul:0,yMul:1,deltaX:1,deltaY:0,deltaW:-1,deltaH:1,label:"Bottom Left Crop Handle"},{name:"se",xMul:1,yMul:1,deltaX:0,deltaY:0,deltaW:1,deltaH:1,label:"Bottom Right Crop Handle"}],S=["top","right","bottom","left"],T=function(he,Pe){return{x:Pe.x+he.x,y:Pe.y+he.y,w:Pe.w,h:Pe.h}},k=function(he,Pe){return{x:Pe.x-he.x,y:Pe.y-he.y,w:Pe.w,h:Pe.h}},D=function(){return k(n,e)},H=function(he,Pe,ye,se){var De=Pe.x+ye*he.deltaX,et=Pe.y+se*he.deltaY,me=Math.max(20,Pe.w+ye*he.deltaW),Je=Math.max(20,Pe.h+se*he.deltaH),at=e=vO.clamp({x:De,y:et,w:me,h:Je},n,he.name==="move");at=k(n,at),$e.fire("updateRect",{rect:at}),U(at)},V=function(){var he=function(De){var et;return sF(d,{document:a.ownerDocument,root:sa(g).dom,handle:d+"-"+De.name,start:function(){et=e},drag:function(me){H(De,et,me.deltaX,me.deltaY)}})},Pe=$.fromTag("div");Ro(Pe,{id:d,class:v+"croprect-container",role:"grid","aria-dropeffect":"execute"}),qa(g,Pe),Ke(S,function(De){ta(g,"#"+d).each(function(et){var me=$.fromTag("div");Ro(me,{id:d+"-"+De,class:v+"croprect-block","data-mce-bogus":"all"}),_t(me,"display","none"),qa(et,me)})}),Ke(y,function(De){ta(g,"#"+d).each(function(et){var me=$.fromTag("div");Ro(me,{id:d+"-"+De.name,"aria-label":De.label,"aria-grabbed":"false","data-mce-bogus":"all",role:"gridcell",tabindex:"-1",title:De.label}),Vs(me,[v+"croprect-handle",v+"croprect-handle-"+De.name]),_t(me,"display","none"),qa(et,me)})}),c=Se(y,he),W(e);var ye=function(De){Vt(De.target,"aria-grabbed",De.raw.type==="focus"?"true":"false")},se=function(De){var et;Ke(y,function(Je){if(pa(De.target,"id")===d+"-"+Je.name)return et=Je,!1});var me=function(Je,at,Jt,En,ar){Je.stopPropagation(),Je.preventDefault(),H(et,Jt,En,ar)};switch(De.raw.keyCode){case Im.LEFT:me(De,et,e,-10,0);break;case Im.RIGHT:me(De,et,e,10,0);break;case Im.UP:me(De,et,e,0,-10);break;case Im.DOWN:me(De,et,e,0,10);break;case Im.ENTER:case Im.SPACEBAR:De.prevent(),i();break}};l.push(Vr(g,"focusin",ye),Vr(g,"focusout",ye),Vr(g,"keydown",se))},z=function(he){var Pe=He(He([],Se(y,function(se){return"#"+d+"-"+se.name}),!0),Se(S,function(se){return"#"+d+"-"+se}),!0).join(","),ye=Za(g,Pe);he?Ke(ye,function(se){return zn(se,"display")}):Ke(ye,function(se){return _t(se,"display","none")})},W=function(he){var Pe=function(ye,se){ta(g,"#"+d+"-"+ye).each(function(De){Bo(De,{left:se.x+"px",top:se.y+"px",width:Math.max(0,se.w)+"px",height:Math.max(0,se.h)+"px"})})};Ke(y,function(ye){ta(g,"#"+d+"-"+ye.name).each(function(se){Bo(se,{left:he.w*ye.xMul+he.x+"px",top:he.h*ye.yMul+he.y+"px"})})}),Pe("top",{x:t.x,y:t.y,w:t.w,h:he.y-t.y}),Pe("right",{x:he.x+he.w,y:he.y,w:t.w-he.x-he.w+t.x,h:he.h}),Pe("bottom",{x:t.x,y:he.y+he.h,w:t.w,h:t.h-he.y-he.h+t.y}),Pe("left",{x:t.x,y:he.y,w:he.x-t.x,h:he.h}),Pe("move",he)},re=function(he){e=he,W(e)},ne=function(he){t=he,W(e)},U=function(he){re(T(n,he))},Q=function(he){n=he,W(e)},le=function(){Ke(c,function(he){return he.destroy()}),c=[],Ke(l,function(he){return he.unbind()}),l=[]};V();var $e=L(L({},iF),{toggleVisibility:z,setClampRect:Q,setRect:re,getInnerRect:D,setInnerRect:U,setViewPortRect:ne,destroy:le});return $e},vF={create:fF},dF=function(e){return new Sp(function(t){var n=function(){e.removeEventListener("load",n),t(e)};e.complete?t(e):e.addEventListener("load",n)})},mF=function(e){var t=Ln({dom:{tag:"div",classes:["tox-image-tools__image-bg"],attributes:{role:"presentation"}}}),n=bt(1),a=p3(),i=bt({x:0,y:0,w:1,h:1}),c=bt({x:0,y:0,w:1,h:1}),l=function(V,z){D.getOpt(V).each(function(W){var re=n.get(),ne=$a(W.element),U=Jr(W.element),Q=z.dom.naturalWidth*re,le=z.dom.naturalHeight*re,$e=Math.max(0,ne/2-Q/2),he=Math.max(0,U/2-le/2),Pe={left:$e.toString()+"px",top:he.toString()+"px",width:Q.toString()+"px",height:le.toString()+"px",position:"absolute"};Bo(z,Pe),t.getOpt(W).each(function(ye){Bo(ye.element,Pe)}),a.run(function(ye){var se=i.get();ye.setRect({x:se.x*re+$e,y:se.y*re+he,w:se.w*re,h:se.h*re}),ye.setClampRect({x:$e,y:he,w:Q,h:le}),ye.setViewPortRect({x:0,y:0,w:ne,h:U})})})},v=function(V,z){D.getOpt(V).each(function(W){var re=$a(W.element),ne=Jr(W.element),U=z.dom.naturalWidth,Q=z.dom.naturalHeight,le=Math.min(re/U,ne/Q);le>=1?n.set(1):n.set(le)})},d=function(V,z){var W=$.fromTag("img");return Vt(W,"src",z),dF(W.dom).then(function(){V.getSystem().isConnected()&&D.getOpt(V).map(function(re){var ne=pd({element:W});zt.replaceAt(re,1,p.some(ne));var U=c.get(),Q={x:0,y:0,w:W.dom.naturalWidth,h:W.dom.naturalHeight};c.set(Q);var le=vO.inflate(Q,-20,-20);i.set(le),(U.w!==Q.w||U.h!==Q.h)&&v(re,W),l(re,W)})})},g=function(V,z){var W=n.get(),re=z>0?Math.min(2,W+.1):Math.max(.1,W-.1);n.set(re),D.getOpt(V).each(function(ne){var U=ne.components()[1].element;l(ne,U)})},y=function(){a.run(function(V){V.toggleVisibility(!0)})},S=function(){a.run(function(V){V.toggleVisibility(!1)})},T=function(){return i.get()},k=ho.sketch({dom:{tag:"div",classes:["tox-image-tools__image"]},components:[t.asSpec(),{dom:{tag:"img",attributes:{src:e}}},{dom:{tag:"div"},behaviours:Be([Nt("image-panel-crop-events",[br(function(V){D.getOpt(V).each(function(z){var W=z.element.dom,re=vF.create({x:10,y:10,w:100,h:100},{x:0,y:0,w:200,h:200},{x:0,y:0,w:200,h:200},W,be);re.toggleVisibility(!1),re.on("updateRect",function(ne){var U=ne.rect,Q=n.get(),le={x:Math.round(U.x/Q),y:Math.round(U.y/Q),w:Math.round(U.w/Q),h:Math.round(U.h/Q)};i.set(le)}),a.set(re)})}),vu(function(){a.clear()})])])}],containerBehaviours:Be([zt.config({}),Nt("image-panel-events",[br(function(V){d(V,e)})])])}),D=Ln(k),H=function(){var V=c.get();return{width:V.w,height:V.h}};return{memContainer:D,updateSrc:d,zoom:g,showCrop:y,hideCrop:S,getRect:T,getMeasurements:H}},cy=function(e,t,n,a,i){return iO({name:e,icon:p.some(t),disabled:n,tooltip:p.some(e),primary:!1,borderless:!1},a,i)},dO=function(e,t){t?lt.enable(e):lt.disable(e)},gF=function(e){var t=function(c,l,v){n.getOpt(c).each(function(d){dO(d,l)}),a.getOpt(c).each(function(d){dO(d,v)})},n=Ln(cy("Undo","undo",!0,function(c){yt(c,po.undo(),{direction:1})},e)),a=Ln(cy("Redo","redo",!0,function(c){yt(c,po.redo(),{direction:1})},e)),i=ho.sketch({dom:{tag:"div",classes:["tox-image-tools__toolbar","tox-image-tools__sidebar"]},components:[n.asSpec(),a.asSpec(),cy("Zoom in","zoom-in",!1,function(c){yt(c,po.zoom(),{direction:1})},e),cy("Zoom out","zoom-out",!1,function(c){yt(c,po.zoom(),{direction:-1})},e)]});return{container:i,updateButtonUndoStates:t}};function hF(){var e=[],t=-1,n=function(v){var d=e.splice(++t);return e.push(v),{state:v,removed:d}},a=function(){if(c())return e[--t]},i=function(){if(l())return e[++t]},c=function(){return t>0},l=function(){return t!==-1&&t<e.length-1};return{data:e,add:n,undo:a,redo:i,canUndo:c,canRedo:l}}var pF=function(e){var t=bt(e),n=Fr(),a=hF();a.add(e);var i=function(){return t.get()},c=function(W){t.set(W)},l=function(){return n.get().getOrThunk(t.get)},v=function(W){var re=d(W);return S(),n.set(re),re.url},d=function(W){return{blob:W,url:URL.createObjectURL(W)}},g=function(W){URL.revokeObjectURL(W.url)},y=function(W){xf.each(W,g)},S=function(){n.on(g),n.clear()},T=function(W){var re=d(W);c(re);var ne=a.add(re).removed;return y(ne),re.url},k=function(W){var re=d(W);return n.set(re),re.url},D=function(W){return n.get().fold(be,function(re){T(re.blob),W()})},H=function(){var W=a.undo();return c(W),W.url},V=function(){var W=a.redo();return c(W),W.url},z=function(){var W=a.canUndo(),re=a.canRedo();return{undoEnabled:W,redoEnabled:re}};return{getBlobState:i,setBlobState:c,addBlobState:T,getTempState:l,updateTempState:v,addTempState:k,applyTempState:D,destroyTempState:S,undo:H,redo:V,getHistoryStates:z}},bF=function(e,t){var n=pF(e.currentState),a=function(ye,se){var De=se.event.direction;le.zoom(ye,De)},i=function(ye){var se=n.getHistoryStates();$e.updateButtonUndoStates(ye,se.undoEnabled,se.redoEnabled),yt(ye,si.formActionEvent,{name:si.saveState(),value:se.undoEnabled})},c=function(ye){$e.updateButtonUndoStates(ye,!1,!1)},l=function(ye,se){var De=n.undo();S(ye,De).then(function(et){y(ye),i(ye)})},v=function(ye,se){var De=n.redo();S(ye,De).then(function(et){y(ye),i(ye)})},d=function(ye){return ye.toBlob()},g=function(ye){yt(ye,si.formActionEvent,{name:si.disable(),value:{}})},y=function(ye){he.getApplyButton(ye).each(function(se){lt.enable(se)}),yt(ye,si.formActionEvent,{name:si.enable(),value:{}})},S=function(ye,se){return g(ye),le.updateSrc(ye,se)},T=function(ye,se,De,et,me){g(ye),XR(se).then(De).then(d).then(et).then(function(Je){return S(ye,Je)}).then(function(){i(ye),me(),y(ye)}).catch(function(Je){console.log(Je),ye.getSystem().isConnected()&&y(ye)})},k=function(ye,se,De){var et=n.getBlobState().blob,me=function(Je){return n.updateTempState(Je)};T(ye,et,se,me,De)},D=function(ye,se){var De=n.getTempState().blob,et=function(me){return n.addTempState(me)};T(ye,De,se,et,be)},H=function(ye,se,De){var et=n.getBlobState().blob,me=function(Je){var at=n.addBlobState(Je);return z(ye),at};T(ye,et,se,me,De)},V=function(ye,se){var De=function(){z(ye);var et=se.event.swap;et()};n.applyTempState(De)},z=function(ye){var se=n.getBlobState().url;return n.destroyTempState(),i(ye),se},W=function(ye){var se=z(ye);S(ye,se).then(function(De){y(ye)})},re=function(ye,se){W(ye);var De=se.event.swap;De(),le.hideCrop()},ne=function(ye,se){return k(ye,se.event.transform,be)},U=function(ye,se){return D(ye,se.event.transform)},Q=function(ye,se){return H(ye,se.event.transform,se.event.swap)},le=mF(e.currentState.url),$e=gF(t),he=oF(le,t),Pe=function(ye,se){c(ye);var De=se.event.transform,et=se.event.swap;De.fold(function(){et()},function(me){k(ye,me,et)})};return{dom:{tag:"div",attributes:{role:"presentation"}},components:[he.memContainer.asSpec(),le.memContainer.asSpec(),$e.container],behaviours:Be([Ve.config({store:{mode:"manual",getValue:function(){return n.getBlobState()}}}),Nt("image-tools-events",[we(po.undo(),l),we(po.redo(),v),we(po.zoom(),a),we(po.back(),re),we(po.apply(),V),we(po.transform(),ne),we(po.tempTransform(),U),we(po.transformApply(),Q),we(po.swap(),Pe)]),Rc.self()])}},yF=function(e,t){var n={dom:{tag:"label",innerHtml:t.providers.translate(e.label),classes:["tox-label"]}},a=Se(e.items,t.interpreter);return{dom:{tag:"div",classes:["tox-form__group"]},components:[n].concat(a),behaviours:Be([Rc.self(),zt.config({}),zv.domHtml(p.none()),ht.config({mode:"acyclic"})])}},WC=function(e){return!pn(e,"items")},mO="data-value",gO=function(e,t,n,a){return Se(n,function(i){return WC(i)?{type:"togglemenuitem",text:i.text,value:i.value,active:i.value===a,onAction:function(){Ve.setValue(e,i.value),yt(e,Ki,{name:t}),Ot.focus(e)}}:{type:"nestedmenuitem",text:i.text,getSubmenuItems:function(){return gO(e,t,i.items,a)}}})},hO=function(e,t){return qn(e,function(n){return WC(n)?Fa(n.value===t,n):hO(n.items,t)})},wF=function(e,t){var n=t.shared.providers,a=Xn(e.items).filter(WC),i=e.label.map(function(v){return yf(v,n)}),c=Mn.parts.field({dom:{},factory:{sketch:function(v){return IC({uid:v.uid,text:a.map(function(d){return d.text}),icon:p.none(),tooltip:e.label,role:p.none(),fetch:function(d,g){var y=gO(d,e.name,e.items,Ve.getValue(d));g(Hm(y,_c.CLOSE_ON_EXECUTE,t,!1))},onSetup:j(be),getApi:j({}),columns:1,presets:"normal",classes:[],dropdownBehaviours:[Ur.config({}),Ve.config({store:{mode:"manual",initialValue:a.map(function(d){return d.value}).getOr(""),getValue:function(d){return pa(d.element,mO)},setValue:function(d,g){hO(e.items,g).each(function(y){Vt(d.element,mO,y.value),yt(d,Fm,{text:y.text})})}}})]},"tox-listbox",t.shared)}}}),l={dom:{tag:"div",classes:["tox-listboxfield"]},components:[c]};return Mn.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:ze([i.toArray(),[l]]),fieldBehaviours:Be([lt.config({disabled:j(e.disabled),onDisabled:function(v){Mn.getField(v).each(lt.disable)},onEnabled:function(v){Mn.getField(v).each(lt.enable)}})])})},SF=function(e,t){return{dom:{tag:"div",classes:e.classes},components:Se(e.items,t.shared.interpreter)}},xF=function(e,t){var n=Se(e.options,function(i){return{dom:{tag:"option",value:i.value,innerHtml:i.text}}}),a=e.data.map(function(i){return hc("initialValue",i)}).getOr({});return{uid:e.uid,dom:{tag:"select",classes:e.selectClasses,attributes:e.selectAttributes},components:n,behaviours:Ta(e.selectBehaviours,[Ot.config({}),Ve.config({store:L({mode:"manual",getValue:function(i){return Nu(i.element)},setValue:function(i,c){var l=Z(e.options,function(v){return v.value===c});l.isSome()&&Kf(i.element,c)}},a)})])}},CF=Oi({name:"HtmlSelect",configFields:[de("options"),va("selectBehaviours",[Ot,Ve]),K("selectClasses",[]),K("selectAttributes",{}),kn("data")],factory:xF}),TF=function(e,t){var n=Se(e.items,function(v){return{text:t.translate(v.text),value:v.value}}),a=e.label.map(function(v){return yf(v,t)}),i=Mn.parts.field({dom:{},selectAttributes:{size:e.size},options:n,factory:CF,selectBehaviours:Be([lt.config({disabled:function(){return e.disabled||t.isDisabled()}}),Ur.config({}),Nt("selectbox-change",[we(Wf(),function(v,d){yt(v,Ki,{name:e.name})})])])}),c=e.size>1?p.none():p.some(Dc("chevron-down",{tag:"div",classes:["tox-selectfield__icon-js"]},t.icons)),l={dom:{tag:"div",classes:["tox-selectfield"]},components:ze([[i],c.toArray()])};return Mn.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:ze([a.toArray(),[l]]),fieldBehaviours:Be([lt.config({disabled:function(){return e.disabled||t.isDisabled()},onDisabled:function(v){Mn.getField(v).each(lt.disable)},onEnabled:function(v){Mn.getField(v).each(lt.enable)}}),da()])})},OF=function(e,t){var n=function(v){return{dom:{tag:"th",innerHtml:t.translate(v)}}},a=function(v){return{dom:{tag:"thead"},components:[{dom:{tag:"tr"},components:Se(v,n)}]}},i=function(v){return{dom:{tag:"td",innerHtml:t.translate(v)}}},c=function(v){return{dom:{tag:"tr"},components:Se(v,i)}},l=function(v){return{dom:{tag:"tbody"},components:Se(v,c)}};return{dom:{tag:"table",classes:["tox-dialog__table"]},components:[a(e.header),l(e.cells)],behaviours:Be([Ur.config({}),Ot.config({})])}},pO=function(e,t){var n=e.label.map(function(T){return yf(T,t)}),a=[lt.config({disabled:function(){return e.disabled||t.isDisabled()}}),da(),ht.config({mode:"execution",useEnter:e.multiline!==!0,useControlEnter:e.multiline===!0,execute:function(T){return Sn(T,Lp),p.some(!0)}}),Nt("textfield-change",[we(Ms(),function(T,k){yt(T,Ki,{name:e.name})}),we(gg(),function(T,k){yt(T,Ki,{name:e.name})})]),Ur.config({})],i=e.validation.map(function(T){return ms.config({getRoot:function(k){return Or(k.element)},invalidClass:"tox-invalid",validator:{validate:function(k){var D=Ve.getValue(k),H=T.validator(D);return Qa.pure(H===!0?Ut.value(D):Ut.error(H))},validateOnLoad:T.validateOnLoad}})}).toArray(),c=e.placeholder.fold(j({}),function(T){return{placeholder:t.translate(T)}}),l=e.inputMode.fold(j({}),function(T){return{inputmode:T}}),v=L(L({},c),l),d=Mn.parts.field({tag:e.multiline===!0?"textarea":"input",inputAttributes:v,inputClasses:[e.classname],inputBehaviours:Be(ze([a,i])),selectOnFocus:!1,factory:Pp}),g=e.flex?["tox-form__group--stretched"]:[],y=g.concat(e.maximized?["tox-form-group--maximize"]:[]),S=[lt.config({disabled:function(){return e.disabled||t.isDisabled()},onDisabled:function(T){Mn.getField(T).each(lt.disable)},onEnabled:function(T){Mn.getField(T).each(lt.enable)}}),da()];return Ip(n,d,y,S)},kF=function(e,t){return pO({name:e.name,multiline:!1,label:e.label,inputMode:e.inputMode,placeholder:e.placeholder,flex:!1,disabled:e.disabled,classname:"tox-textfield",validation:p.none(),maximized:e.maximized},t)},AF=function(e,t){return pO({name:e.name,multiline:!0,label:e.label,inputMode:p.none(),placeholder:e.placeholder,flex:!0,disabled:e.disabled,classname:"tox-textarea",validation:p.none(),maximized:e.maximized},t)},MF=function(e,t){var n=e.stream.streams,a=n.setup(e,t);return rr([we(e.event,a),vu(function(){return t.cancel()})].concat(e.cancelEvent.map(function(i){return[we(i,function(){return t.cancel()})]}).getOr([])))},EF=Object.freeze({__proto__:null,events:MF}),bO=function(e){var t=bt(null),n=function(){return{timer:t.get()!==null?"set":"unset"}},a=function(c){t.set(c)},i=function(){var c=t.get();c!==null&&c.cancel()};return Ja({readState:n,setTimer:a,cancel:i})},DF=function(e){return e.stream.streams.state(e)},_F=Object.freeze({__proto__:null,throttle:bO,init:DF}),zF=function(e,t){var n=e.stream,a=_x(e.onStream,n.delay);return t.setTimer(a),function(i,c){a.throttle(i,c),n.stopEvent&&c.stop()}},RF=[To("stream",yi("mode",{throttle:[de("delay"),K("stopEvent",!0),Jn("streams",{setup:zF,state:bO})]})),K("event","input"),kn("cancelEvent"),Ks("onStream")],yO=fa({fields:RF,name:"streaming",active:EF,state:_F}),sy=function(e,t,n){var a=Ve.getValue(n);Ve.setValue(t,a),SO(t)},wO=function(e,t){var n=e.element,a=Nu(n),i=n.dom;pa(n,"type")!=="number"&&t(i,a)},SO=function(e){wO(e,function(t,n){return t.setSelectionRange(n.length,n.length)})},BF=function(e,t){wO(e,function(n,a){return n.setSelectionRange(t,a.length)})},FF=function(e,t,n){if(e.selectsOver){var a=Ve.getValue(t),i=e.getDisplayText(a),c=Ve.getValue(n),l=e.getDisplayText(c);return l.indexOf(i)===0?p.some(function(){sy(e,t,n),BF(t,i.length)}):p.none()}else return p.none()},jC=j("alloy.typeahead.itemexecute"),HF=function(e,t,n,a){var i=function(d,g,y){e.previewing.set(!1);var S=Kr.getCoupled(d,"sandbox");if(fn.isOpen(S))Zt.getCurrent(S).each(function(k){Rn.getHighlighted(k).fold(function(){y(k)},function(){S1(S,k.element,"keydown",g)})});else{var T=function(k){Zt.getCurrent(k).each(y)};fC(e,l(d),d,S,a,T,zc.HighlightFirst).get(be)}},c=W5(e),l=function(d){return function(g){return g.map(function(y){var S=Tr(y.menus),T=mt(S,function(D){return Ce(D.items,function(H){return H.type==="item"})}),k=Ve.getState(d);return k.update(Se(T,function(D){return D.data})),y})}},v=[Ot.config({}),Ve.config({onSetValue:e.onSetValue,store:L({mode:"dataset",getDataKey:function(d){return Nu(d.element)},getFallbackEntry:function(d){return{value:d,meta:{}}},setValue:function(d,g){Kf(d.element,e.model.getDisplayText(g))}},e.initialData.map(function(d){return hc("initialValue",d)}).getOr({}))}),yO.config({stream:{mode:"throttle",delay:e.responseTime,stopEvent:!1},onStream:function(d,g){var y=Kr.getCoupled(d,"sandbox"),S=Ot.isFocused(d);if(S&&Nu(d.element).length>=e.minChars){var T=Zt.getCurrent(y).bind(function(D){return Rn.getHighlighted(D).map(Ve.getValue)});e.previewing.set(!0);var k=function(D){Zt.getCurrent(y).each(function(H){T.fold(function(){e.model.selectsOver&&Rn.highlightFirst(H)},function(V){Rn.highlightBy(H,function(z){var W=Ve.getValue(z);return W.value===V.value}),Rn.getHighlighted(H).orThunk(function(){return Rn.highlightFirst(H),p.none()})})})};fC(e,l(d),d,y,a,k,zc.HighlightFirst).get(be)}},cancelEvent:hg()}),ht.config({mode:"special",onDown:function(d,g){return i(d,g,Rn.highlightFirst),p.some(!0)},onEscape:function(d){var g=Kr.getCoupled(d,"sandbox");return fn.isOpen(g)?(fn.close(g),p.some(!0)):p.none()},onUp:function(d,g){return i(d,g,Rn.highlightLast),p.some(!0)},onEnter:function(d){var g=Kr.getCoupled(d,"sandbox"),y=fn.isOpen(g);if(y&&!e.previewing.get())return Zt.getCurrent(g).bind(function(T){return Rn.getHighlighted(T)}).map(function(T){return yt(d,jC(),{item:T}),!0});var S=Ve.getValue(d);return Sn(d,hg()),e.onExecute(g,d,S),y&&fn.close(g),p.some(!0)}}),bn.config({toggleClass:e.markers.openClass,aria:{mode:"expanded"}}),Kr.config({others:{sandbox:function(d){return vC(e,d,{onOpen:function(){return bn.on(d)},onClose:function(){return bn.off(d)}})}}}),Nt("typeaheadevents",[du(function(d){var g=be;_m(e,l(d),d,a,g,zc.HighlightFirst).get(be)}),we(jC(),function(d,g){var y=Kr.getCoupled(d,"sandbox");sy(e.model,d,g.event.item),Sn(d,hg()),e.onItemExecute(d,y,g.event.item,Ve.getValue(d)),fn.close(y),SO(d)})].concat(e.dismissOnBlur?[we(mg(),function(d){var g=Kr.getCoupled(d,"sandbox");gu(g.element).isNone()&&fn.close(g)})]:[]))];return{uid:e.uid,dom:j5(fe(e,{inputAttributes:{role:"combobox","aria-autocomplete":"list","aria-haspopup":"true"}})),behaviours:L(L({},c),Ta(e.typeaheadBehaviours,v)),eventOrder:e.eventOrder}},IF=j([kn("lazySink"),de("fetch"),K("minChars",5),K("responseTime",1e3),An("onOpen"),K("getHotspot",p.some),K("getAnchorOverrides",j({})),K("layouts",p.none()),K("eventOrder",{}),sg("model",{},[K("getDisplayText",function(e){return e.meta!==void 0&&e.meta.text!==void 0?e.meta.text:e.value}),K("selectsOver",!0),K("populateFromBrowse",!0)]),An("onSetValue"),na("onExecute"),An("onItemExecute"),K("inputClasses",[]),K("inputAttributes",{}),K("inputStyles",{}),K("matchWidth",!0),K("useMinWidth",!1),K("dismissOnBlur",!0),qs(["openClass"]),kn("initialData"),va("typeaheadBehaviours",[Ot,Ve,yO,ht,bn,Kr]),uo("previewing",function(){return bt(!0)})].concat(U5()).concat(dC())),$F=j([ci({schema:[Gs()],name:"menu",overrides:function(e){return{fakeFocus:!0,onHighlight:function(t,n){e.previewing.get()?t.getSystem().getByUid(e.uid).each(function(a){FF(e.model,a,n).fold(function(){return Rn.dehighlight(t,n)},function(i){return i()})}):t.getSystem().getByUid(e.uid).each(function(a){e.model.populateFromBrowse&&sy(e.model,a,n)}),e.previewing.set(!1)},onExecute:function(t,n){return t.getSystem().getByUid(e.uid).toOptional().map(function(a){return yt(a,jC(),{item:n}),!0})},onHover:function(t,n){e.previewing.set(!1),t.getSystem().getByUid(e.uid).each(function(a){e.model.populateFromBrowse&&sy(e.model,a,n)})}}}})]),LF=vo({name:"Typeahead",configFields:IF(),partFields:$F(),factory:HF}),ec=function(e){var t=function(){return ec(e.toCached())},n=function(d){return ec(e.bind(function(g){return g.fold(function(y){return Qa.pure(Ut.error(y))},function(y){return d(y)})}))},a=function(d){return ec(e.map(function(g){return g.bind(d)}))},i=function(d){return ec(e.map(function(g){return g.map(d)}))},c=function(d){return ec(e.map(function(g){return g.mapError(d)}))},l=function(d,g){return e.map(function(y){return y.fold(d,g)})},v=function(d,g){return ec(Qa.nu(function(y){var S=!1,T=setTimeout(function(){S=!0,y(Ut.error(g()))},d);e.get(function(k){S||(clearTimeout(T),y(k))})}))};return L(L({},e),{toCached:t,bindFuture:n,bindResult:a,mapResult:i,mapError:c,foldResult:l,withTimeout:v})},xO=function(e){return ec(Qa.nu(e))},CO=function(e){return ec(Qa.pure(Ut.value(e)))},PF=function(e){return ec(Qa.pure(Ut.error(e)))},NF=function(e){return ec(Qa.pure(e))},VF=function(e){return ec(e.map(Ut.value))},UF=function(e){return xO(function(t){e.then(function(n){t(Ut.value(n))},function(n){t(Ut.error(n))})})},WF={nu:xO,wrap:ec,pure:CO,value:CO,error:PF,fromResult:NF,fromFuture:VF,fromPromise:UF},jF={type:"separator"},GF=function(e){return{type:"menuitem",value:e.url,text:e.title,meta:{attach:e.attach},onAction:be}},GC=function(e,t){return{type:"menuitem",value:t,text:e,meta:{attach:void 0},onAction:be}},qF=function(e){return Se(e,GF)},KF=function(e,t){return Ce(t,function(n){return n.type===e})},TO=function(e,t){return qF(KF(e,t))},XF=function(e){return TO("header",e.targets)},YF=function(e){return TO("anchor",e.targets)},JF=function(e){return p.from(e.anchorTop).map(function(t){return GC("<top>",t)}).toArray()},ZF=function(e){return p.from(e.anchorBottom).map(function(t){return GC("<bottom>",t)}).toArray()},QF=function(e){return Se(e,function(t){return GC(t,t)})},eH=function(e){return ce(e,function(t,n){var a=t.length===0||n.length===0;return a?t.concat(n):t.concat(jF,n)},[])},qC=function(e,t){var n=e.toLowerCase();return Ce(t,function(a){var i=a.meta!==void 0&&a.meta.text!==void 0?a.meta.text:a.text;return In(i.toLowerCase(),n)||In(a.value.toLowerCase(),n)})},tH=function(e,t,n){var a=Ve.getValue(t),i=a.meta.text!==void 0?a.meta.text:a.value,c=n.getLinkInformation();return c.fold(function(){return[]},function(l){var v=qC(i,QF(n.getHistory(e)));return e==="file"?eH([v,qC(i,XF(l)),qC(i,ze([JF(l),YF(l),ZF(l)]))]):v})},OO=rt("aria-invalid"),nH=function(e,t,n){var a,i=t.shared.providers,c=function(z){var W=Ve.getValue(z);n.addToHistory(W.value,e.filetype)},l=Mn.parts.field({factory:LF,dismissOnBlur:!0,inputClasses:["tox-textfield"],sandboxClasses:["tox-dialog__popups"],inputAttributes:{"aria-errormessage":OO,type:"url"},minChars:0,responseTime:0,fetch:function(z){var W=tH(e.filetype,z,n),re=Hm(W,_c.BUBBLE_TO_SANDBOX,t,!1);return Qa.pure(re)},getHotspot:function(z){return k.getOpt(z)},onSetValue:function(z,W){z.hasConfigured(ms)&&ms.run(z).get(be)},typeaheadBehaviours:Be(ze([n.getValidationHandler().map(function(z){return ms.config({getRoot:function(W){return Or(W.element)},invalidClass:"tox-control-wrap--status-invalid",notify:{onInvalid:function(W,re){g.getOpt(W).each(function(ne){Vt(ne.element,"title",i.translate(re))})}},validator:{validate:function(W){var re=Ve.getValue(W);return WF.nu(function(ne){z({type:e.filetype,url:re.value},function(U){if(U.status==="invalid"){var Q=Ut.error(U.message);ne(Q)}else{var le=Ut.value(U.message);ne(le)}})})},validateOnLoad:!1}})}).toArray(),[lt.config({disabled:function(){return e.disabled||i.isDisabled()}}),Ur.config({}),Nt("urlinput-events",ze([e.filetype==="file"?[we(Ms(),function(z){yt(z,Ki,{name:e.name})})]:[],[we(Wf(),function(z){yt(z,Ki,{name:e.name}),c(z)}),we(gg(),function(z){yt(z,Ki,{name:e.name}),c(z)})]]))]])),eventOrder:(a={},a[Ms()]=["streaming","urlinput-events","invalidating"],a),model:{getDisplayText:function(z){return z.value},selectsOver:!1,populateFromBrowse:!1},markers:{openClass:"tox-textfield--popup-open"},lazySink:t.shared.getSink,parts:{menu:H2(!1,1,"normal")},onExecute:function(z,W,re){yt(W,Lp,{})},onItemExecute:function(z,W,re,ne){c(z),yt(z,Ki,{name:e.name})}}),v=e.label.map(function(z){return yf(z,i)}),d=function(z,W,re,ne){return re===void 0&&(re=z),ne===void 0&&(ne=z),Dc(re,{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+z],attributes:L({title:i.translate(ne),"aria-live":"polite"},W.fold(function(){return{}},function(U){return{id:U}}))},i.icons)},g=Ln(d("invalid",p.some(OO),"warning")),y=Ln({dom:{tag:"div",classes:["tox-control-wrap__status-icon-wrap"]},components:[g.asSpec()]}),S=n.getUrlPicker(e.filetype),T=rt("browser.url.event"),k=Ln({dom:{tag:"div",classes:["tox-control-wrap"]},components:[l,y.asSpec()],behaviours:Be([lt.config({disabled:function(){return e.disabled||i.isDisabled()}})])}),D=Ln(PC({name:e.name,icon:p.some("browse"),text:e.label.getOr(""),disabled:e.disabled,primary:!1,borderless:!0},function(z){return Sn(z,T)},i,[],["tox-browse-url"])),H=function(){return{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:ze([[k.asSpec()],S.map(function(){return D.asSpec()}).toArray()])}},V=function(z){Zt.getCurrent(z).each(function(W){var re=Ve.getValue(W),ne=L({fieldname:e.name},re);S.each(function(U){U(ne).get(function(Q){Ve.setValue(W,Q),yt(z,Ki,{name:e.name})})})})};return Mn.sketch({dom:lz(),components:v.toArray().concat([H()]),fieldBehaviours:Be([lt.config({disabled:function(){return e.disabled||i.isDisabled()},onDisabled:function(z){Mn.getField(z).each(lt.disable),D.getOpt(z).each(lt.disable)},onEnabled:function(z){Mn.getField(z).each(lt.enable),D.getOpt(z).each(lt.enable)}}),da(),Nt("url-input-events",[we(T,V)])])})},rH=function(e,t){return ho.sketch({dom:{tag:"div",attributes:{role:"alert"},classes:["tox-notification","tox-notification--in","tox-notification--"+e.level]},components:[{dom:{tag:"div",classes:["tox-notification__icon"]},components:[Vo.sketch({dom:{tag:"button",classes:["tox-button","tox-button--naked","tox-button--icon"],innerHtml:l6(e.icon,t.icons),attributes:{title:t.translate(e.iconTooltip)}},action:function(n){yt(n,ds,{name:"alert-banner",value:e.url})},buttonBehaviours:Be([Ex()])})]},{dom:{tag:"div",classes:["tox-notification__body"],innerHtml:t.translate(e.text)}}]})},aH=function(e,t){var n=Ve.config({store:{mode:"manual",getValue:function(d){var g=d.element.dom;return g.checked},setValue:function(d,g){var y=d.element.dom;y.checked=g}}}),a=function(d){return d.element.dom.click(),p.some(!0)},i=Mn.parts.field({factory:{sketch:je},dom:{tag:"input",classes:["tox-checkbox__input"],attributes:{type:"checkbox"}},behaviours:Be([Rc.self(),lt.config({disabled:function(){return e.disabled||t.isDisabled()}}),Ur.config({}),Ot.config({}),n,ht.config({mode:"special",onEnter:a,onSpace:a,stopSpaceKeyup:!0}),Nt("checkbox-events",[we(Wf(),function(d,g){yt(d,Ki,{name:e.name})})])])}),c=Mn.parts.label({dom:{tag:"span",classes:["tox-checkbox__label"],innerHtml:t.translate(e.label)},behaviours:Be([Np.config({})])}),l=function(d){var g=d==="checked"?"selected":"unselected";return Dc(g,{tag:"span",classes:["tox-icon","tox-checkbox-icon__"+d]},t.icons)},v=Ln({dom:{tag:"div",classes:["tox-checkbox__icons"]},components:[l("checked"),l("unchecked")]});return Mn.sketch({dom:{tag:"label",classes:["tox-checkbox"]},components:[i,v.asSpec(),c],fieldBehaviours:Be([lt.config({disabled:function(){return e.disabled||t.isDisabled()},disableClass:"tox-checkbox--disabled",onDisabled:function(d){Mn.getField(d).each(lt.disable)},onEnabled:function(d){Mn.getField(d).each(lt.enable)}}),da()])})},oH=function(e){return e.presets==="presentation"?ho.sketch({dom:{tag:"div",classes:["tox-form__group"],innerHtml:e.html}}):ho.sketch({dom:{tag:"div",classes:["tox-form__group"],innerHtml:e.html,attributes:{role:"document"}},containerBehaviours:Be([Ur.config({}),Ot.config({})])})},Ba=function(e){return function(t,n,a){return ct(n,"name").fold(function(){return e(n,a)},function(i){return t.field(i,e(n,a))})}},iH=function(e){return function(t,n,a){var i=fe(n,{source:"dynamic"});return Ba(e)(t,i,a)}},uH={bar:Ba(function(e,t){return ez(e,t.shared)}),collection:Ba(function(e,t){return fz(e,t.shared.providers)}),alertbanner:Ba(function(e,t){return rH(e,t.shared.providers)}),input:Ba(function(e,t){return kF(e,t.shared.providers)}),textarea:Ba(function(e,t){return AF(e,t.shared.providers)}),label:Ba(function(e,t){return yF(e,t.shared)}),iframe:iH(function(e,t){return $R(e,t.shared.providers)}),button:Ba(function(e,t){return LB(e,t.shared.providers)}),checkbox:Ba(function(e,t){return aH(e,t.shared.providers)}),colorinput:Ba(function(e,t){return Nz(e,t.shared,t.colorinput)}),colorpicker:Ba(xR),dropzone:Ba(function(e,t){return RR(e,t.shared.providers)}),grid:Ba(function(e,t){return BR(e,t.shared)}),listbox:Ba(function(e,t){return wF(e,t)}),selectbox:Ba(function(e,t){return TF(e,t.shared.providers)}),sizeinput:Ba(function(e,t){return fO(e,t.shared.providers)}),urlinput:Ba(function(e,t){return nH(e,t,t.urlinput)}),customeditor:Ba(OR),htmlpanel:Ba(oH),imagetools:Ba(function(e,t){return bF(e,t.shared.providers)}),table:Ba(function(e,t){return OF(e,t.shared.providers)}),panel:Ba(function(e,t){return SF(e,t)})},cH={field:function(e,t){return t}},kO=function(e,t,n){var a=fe(n,{shared:{interpreter:function(i){return KC(e,i,a)}}});return KC(e,t,a)},KC=function(e,t,n){return ct(uH,t.type).fold(function(){return console.error('Unknown factory type "'+t.type+'", defaulting to container: ',t),t},function(a){return a(e,t,n)})},sH=function(e,t){var n=cH;return KC(n,e,t)},AO={valignCentre:[],alignCentre:[],alignLeft:[],alignRight:[],right:[],left:[],bottom:[],top:[]},lH=function(e,t,n){var a=12,i={maxHeightFunction:Jl()},c=function(){return{type:"node",root:Wa(e()),node:p.from(e()),bubble:Ys(a,a,AO),layouts:{onRtl:function(){return[xv]},onLtr:function(){return[Sv]}},overrides:i}},l=function(){return{type:"hotspot",hotspot:t(),bubble:Ys(-a,a,AO),layouts:{onRtl:function(){return[La]},onLtr:function(){return[la]}},overrides:i}};return function(){return n()?c():l()}},fH=function(e,t,n){var a=function(){return{type:"node",root:Wa(e()),node:p.from(e()),layouts:{onRtl:function(){return[bu]},onLtr:function(){return[bu]}}}},i=function(){return{type:"hotspot",hotspot:t(),layouts:{onRtl:function(){return[Pa]},onLtr:function(){return[Pa]}}}};return function(){return n()?a():i()}},vH=function(e,t){return function(){return{type:"selection",root:t(),getSelection:function(){var n=e.selection.getRng();return p.some(Ql.range($.fromDom(n.startContainer),n.startOffset,$.fromDom(n.endContainer),n.endOffset))}}}},dH=function(e){return function(t){return{type:"node",root:e(),node:t}}},mH=function(e,t,n){var a=P2(e),i=function(){return $.fromDom(e.getBody())},c=function(){return $.fromDom(e.getContentAreaContainer())},l=function(){return a||!n()};return{inlineDialog:lH(c,t,l),banner:fH(c,t,l),cursor:vH(e,i),node:dH(i)}},gH=function(e){return function(t,n){var a=T5(e);a(t,n)}},hH=function(e){return function(){return g5(e)}},pH=function(e){return function(){return rC(e)}},bH=function(e){return function(){return p5(e)}},yH=function(e){return{colorPicker:gH(e),hasCustomColors:hH(e),getColors:pH(e),getColorCols:bH(e)}},wH=function(e){return function(){return sD(e)}},SH=function(e){return{isDraggableModal:wH(e)}},xH=function(e){var t=bt(V6(e)?"bottom":"top");return{isPositionedAtTop:function(){return t.get()==="top"},getDockingMode:t.get,setDockingMode:t.set}},MO=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",format:"bold"},{title:"Italic",format:"italic"},{title:"Underline",format:"underline"},{title:"Strikethrough",format:"strikethrough"},{title:"Superscript",format:"superscript"},{title:"Subscript",format:"subscript"},{title:"Code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Align",items:[{title:"Left",format:"alignleft"},{title:"Center",format:"aligncenter"},{title:"Right",format:"alignright"},{title:"Justify",format:"alignjustify"}]}],CH=function(e){return pn(e,"items")},TH=function(e){return pn(e,"block")},OH=function(e){return pn(e,"inline")},kH=function(e){return pn(e,"selector")},EO=function(e){return ce(e,function(t,n){if(CH(n)){var a=EO(n.items);return{customFormats:t.customFormats.concat(a.customFormats),formats:t.formats.concat([{title:n.title,items:a.formats}])}}else if(OH(n)||TH(n)||kH(n)){var i=dt(n.name)?n.name:n.title.toLowerCase(),c="custom-"+i;return{customFormats:t.customFormats.concat([{name:c,format:n}]),formats:t.formats.concat([{title:n.title,format:c,icon:n.icon}])}}else return L(L({},t),{formats:t.formats.concat(n)})},{customFormats:[],formats:[]})},AH=function(e,t){var n=EO(t),a=function(i){Ke(i,function(c){e.formatter.has(c.name)||e.formatter.register(c.name,c.format)})};return e.formatter?a(n.customFormats):e.on("init",function(){a(n.customFormats)}),n.formats},DO=function(e){return QE(e).map(function(t){var n=AH(e,t);return eD(e)?MO.concat(n):n}).getOr(MO)},_O=function(e,t,n){var a={type:"formatter",isSelected:t(e.format),getStylePreview:n(e.format)};return fe(e,a)},zO=function(e,t,n,a){var i=function(d){return _O(d,n,a)},c=function(d){var g={type:"submenu"};return fe(d,g)},l=function(d){var g=dt(d.name)?d.name:rt(d.title),y="custom-"+g,S={type:"formatter",format:y,isSelected:n(y),getStylePreview:a(y)},T=fe(d,S);return e.formatter.register(g,T),T},v=function(d){return Se(d,function(g){var y=Zn(g);if(mr(g,"items")){var S=v(g.items);return fe(c(g),{getStyleItems:j(S)})}else return mr(g,"format")?i(g):y.length===1&&It(y,"title")?fe(g,{type:"separator"}):l(g)})};return v(t)},MH=function(e){var t=function(S){return function(){return e.formatter.match(S)}},n=function(S){return function(){var T=e.formatter.get(S);return T!==void 0?p.some({tag:T.length>0&&(T[0].inline||T[0].block)||"div",styles:e.dom.parseStyle(e.formatter.getCssText(S))}):p.none()}},a=function(S){var T=S.items;return T!==void 0&&T.length>0?mt(T,a):[S.format]},i=bt([]),c=bt([]),l=bt([]),v=bt([]),d=bt(!1);e.on("PreInit",function(S){var T=DO(e),k=zO(e,T,t,n);i.set(k),c.set(mt(k,a))}),e.on("addStyleModifications",function(S){var T=zO(e,S.items,t,n);l.set(T),d.set(S.replace),v.set(mt(T,a))});var g=function(){var S=d.get()?[]:i.get(),T=l.get();return S.concat(T)},y=function(){var S=d.get()?[]:c.get(),T=v.get();return S.concat(T)};return{getData:g,getFlattenedKeys:y}},EH=function(e){return Oe(e)&&e.nodeType===1},DH=xf.trim,RO=function(e){return function(t){return!!(EH(t)&&(t.contentEditable===e||t.getAttribute("data-mce-contenteditable")===e))}},_H=RO("true"),zH=RO("false"),BO=function(e,t,n,a,i){return{type:e,title:t,url:n,level:a,attach:i}},RH=function(e){for(;e=e.parentNode;){var t=e.contentEditable;if(t&&t!=="inherit")return _H(e)}return!1},BH=function(e,t){return Se(Za($.fromDom(t),e),function(n){return n.dom})},FO=function(e){return e.innerText||e.textContent},FH=function(e){return e.id?e.id:rt("h")},HH=function(e){return e&&e.nodeName==="A"&&(e.id||e.name)!==void 0},IH=function(e){return HH(e)&&IO(e)},HO=function(e){return e&&/^(H[1-6])$/.test(e.nodeName)},IO=function(e){return RH(e)&&!zH(e)},$H=function(e){return HO(e)&&IO(e)},LH=function(e){return HO(e)?parseInt(e.nodeName.substr(1),10):0},PH=function(e){var t=FH(e),n=function(){e.id=t};return BO("header",FO(e),"#"+t,LH(e),n)},NH=function(e){var t=e.id||e.name,n=FO(e);return BO("anchor",n||"#"+t,"#"+t,0,be)},VH=function(e){return Se(Ce(e,$H),PH)},UH=function(e){return Se(Ce(e,IH),NH)},WH=function(e){var t=BH("h1,h2,h3,h4,h5,h6,a:not([href])",e);return t},jH=function(e){return DH(e.title).length>0},GH=function(e){var t=WH(e);return Ce(VH(t).concat(UH(t)),jH)},qH={find:GH},ly="tinymce-url-history",$O=5,LO=function(e){return dt(e)&&/^https?/.test(e)},KH=function(e){return kt(e)&&e.length<=$O&&gt(e,LO)},PO=function(e){return Kt(e)&&yn(e,function(t){return!KH(t)}).isNone()},NO=function(){var e=W2.getItem(ly);if(e===null)return{};var t;try{t=JSON.parse(e)}catch(n){if(n instanceof SyntaxError)return console.log("Local storage "+ly+" was not valid JSON",n),{};throw n}return PO(t)?t:(console.log("Local storage "+ly+" was not valid format",t),{})},XH=function(e){if(!PO(e))throw new Error(`Bad format for history:
`+JSON.stringify(e));W2.setItem(ly,JSON.stringify(e))},YH=function(e){var t=NO();return ct(t,e).getOr([])},JH=function(e,t){if(LO(e)){var n=NO(),a=ct(n,t).getOr([]),i=Ce(a,function(c){return c!==e});n[t]=[e].concat(i).slice(0,$O),XH(n)}},XC=function(e){return!!e},ZH=function(e){return Qn(xf.makeMap(e,/[, ]/),XC)},YC=function(e){return p.from(dD(e)).filter(tt)},QH=function(e){var t=p.some(mD(e)).filter(XC),n=p.some(gD(e)).filter(XC),a=t.or(n).map(ZH);return YC(e).fold(Le,function(i){return a.fold(qe,function(c){return Zn(c).length>0?c:!1})})},eI=function(e,t){var n=QH(e);return Ze(n)?n?YC(e):p.none():n[t]?YC(e):p.none()},tI=function(e,t){return eI(e,t).map(function(n){return function(a){return Qa.nu(function(i){var c=function(v,d){if(!dt(v))throw new Error("Expected value to be string");if(d!==void 0&&!Kt(d))throw new Error("Expected meta to be a object");var g={value:v,meta:d};i(g)},l=L({filetype:t,fieldname:a.fieldname},p.from(a.meta).getOr({}));n.call(e,c,a.value,l)})}})},VO=function(e){return p.from(e).filter(dt).getOrUndefined()},nI=function(e){return hD(e)?p.none():p.some({targets:qH.find(e.getBody()),anchorTop:VO(pD(e)),anchorBottom:VO(bD(e))})},rI=function(e){return p.from(yD(e))},aI=function(e){return{getHistory:YH,addToHistory:JH,getLinkInformation:function(){return nI(e)},getValidationHandler:function(){return rI(e)},getUrlPicker:function(t){return tI(e,t)}}},oI=function(e,t,n){var a=bt(!1),i=xH(t),c={shared:{providers:{icons:function(){return t.ui.registry.getAll().icons},menuItems:function(){return t.ui.registry.getAll().menuItems},translate:Ec.translate,isDisabled:function(){return t.mode.isReadOnly()||t.ui.isDisabled()},getSetting:t.getParam.bind(t)},interpreter:function(l){return sH(l,c)},anchors:mH(t,n,i.isPositionedAtTop),header:i,getSink:function(){return Ut.value(e)}},urlinput:aI(t),styleselect:MH(t),colorinput:yH(t),dialog:SH(t),isContextMenuOpen:function(){return a.get()},setContextMenuState:function(l){return a.set(l)}};return c},iI=function(e,t,n){var a=function(ne,U){Ke([t,n],function(Q){Q.broadcastEvent(ne,U)})},i=function(ne,U){Ke([t,n],function(Q){Q.broadcastOn([ne],U)})},c=function(ne){return i(Qs(),{target:ne.target})},l=Z1(),v=Vr(l,"touchstart",c),d=Vr(l,"touchmove",function(ne){return a(g1(),ne)}),g=Vr(l,"touchend",function(ne){return a(uw(),ne)}),y=Vr(l,"mousedown",c),S=Vr(l,"mouseup",function(ne){ne.raw.button===0&&i(Mh(),{target:ne.target})}),T=function(ne){return i(Qs(),{target:$.fromDom(ne.target)})},k=function(ne){ne.button===0&&i(Mh(),{target:$.fromDom(ne.target)})},D=function(){Ke(e.editorManager.get(),function(ne){e!==ne&&ne.fire("DismissPopups",{relatedTarget:e})})},H=function(ne){return a(pg(),Yl(ne))},V=function(ne){i(tf(),{}),a(zs(),Yl(ne))},z=function(){return i(tf(),{})},W=function(ne){ne.state&&i(Qs(),{target:$.fromDom(e.getContainer())})},re=function(ne){i(Qs(),{target:$.fromDom(ne.relatedTarget.getContainer())})};e.on("PostRender",function(){e.on("click",T),e.on("tap",T),e.on("mouseup",k),e.on("mousedown",D),e.on("ScrollWindow",H),e.on("ResizeWindow",V),e.on("ResizeEditor",z),e.on("AfterProgressState",W),e.on("DismissPopups",re)}),e.on("remove",function(){e.off("click",T),e.off("tap",T),e.off("mouseup",k),e.off("mousedown",D),e.off("ScrollWindow",H),e.off("ResizeWindow",V),e.off("ResizeEditor",z),e.off("AfterProgressState",W),e.off("DismissPopups",re),y.unbind(),v.unbind(),d.unbind(),g.unbind(),S.unbind()}),e.on("detach",function(){Ah(t),Ah(n),t.destroy(),n.destroy()})},li=X4,Bv=Uh,uI=j([K("shell",!1),de("makeItem"),K("setupItem",be),Wi.field("listBehaviours",[zt])]),cI=function(){return{behaviours:Be([zt.config({})])}},sI=ji({name:"items",overrides:cI}),lI=j([sI]),fI=j("CustomList"),vI=function(e,t,n,a){var i=function(v,d){l(v).fold(function(){throw console.error("Custom List was defined to not be a shell, but no item container was specified in components"),new Error("Custom List was defined to not be a shell, but no item container was specified in components")},function(g){var y=zt.contents(g),S=d.length,T=S-y.length,k=T>0?or(T,function(){return e.makeItem()}):[],D=y.slice(S);Ke(D,function(V){return zt.remove(g,V)}),Ke(k,function(V){return zt.append(g,V)});var H=zt.contents(g);Ke(H,function(V,z){e.setupItem(v,V,d[z],z)})})},c=e.shell?{behaviours:[zt.config({})],components:[]}:{behaviours:[],components:t},l=function(v){return e.shell?p.some(v):jn(v,e,"items")};return{uid:e.uid,dom:e.dom,components:c.components,behaviours:Ta(e.listBehaviours,c.behaviours),apis:{setItems:i}}},UO=vo({name:fI(),configFields:uI(),partFields:lI(),factory:vI,apis:{setItems:function(e,t,n){e.setItems(t,n)}}}),$m=j([de("dom"),K("shell",!0),va("toolbarBehaviours",[zt])]),dI=function(){return{behaviours:Be([zt.config({})])}},mI=j([ji({name:"groups",overrides:dI})]),gI=function(e,t,n,a){var i=function(v,d){c(v).fold(function(){throw console.error("Toolbar was defined to not be a shell, but no groups container was specified in components"),new Error("Toolbar was defined to not be a shell, but no groups container was specified in components")},function(g){zt.set(g,d)})},c=function(v){return e.shell?p.some(v):jn(v,e,"groups")},l=e.shell?{behaviours:[zt.config({})],components:[]}:{behaviours:[],components:t};return{uid:e.uid,dom:e.dom,components:l.components,behaviours:Ta(e.toolbarBehaviours,l.behaviours),apis:{setGroups:i},domModification:{attributes:{role:"group"}}}},Bc=vo({name:"Toolbar",configFields:$m(),partFields:mI(),factory:gI,apis:{setGroups:function(e,t,n){e.setGroups(t,n)}}}),hI=be,pI=Le,WO=j([]),bI=Object.freeze({__proto__:null,setup:hI,isDocked:pI,getBehaviours:WO}),jO=function(e){var t=Aa(Lr(e,"position"),"fixed"),n=t?p.none():xs(e);return n.orThunk(function(){var a=$.fromTag("span");return Or(e).bind(function(i){qa(i,a);var c=xs(a);return Jo(a),c})})},GO=function(e){return jO(e).map(cu).getOrThunk(function(){return Yn(0,0)})},JC=ri.generate([{static:[]},{absolute:["positionCss"]},{fixed:["positionCss"]}]),yI=function(e,t){var n=e.element;Sa(n,t.transitionClass),Gr(n,t.fadeOutClass),Sa(n,t.fadeInClass),t.onShow(e)},wI=function(e,t){var n=e.element;Sa(n,t.transitionClass),Gr(n,t.fadeInClass),Sa(n,t.fadeOutClass),t.onHide(e)},SI=function(e,t){return e.y<t.bottom&&e.bottom>t.y},xI=function(e,t){return e.y>=t.y},CI=function(e,t){return e.bottom<=t.bottom},qO=function(e,t,n){return gt(e,function(a){switch(a){case"bottom":return CI(t,n);case"top":return xI(t,n)}})},KO=function(e,t){return t.getInitialPos().map(function(n){return Zr(n.bounds.x,n.bounds.y,$a(e),Jr(e))})},TI=function(e,t,n){n.setInitialPos({style:qm(e),position:Ga(e,"position")||"static",bounds:t})},XO=function(e,t,n){return n.getInitialPos().bind(function(a){switch(n.clearInitialPos(),a.position){case"static":return p.some(JC.static());case"absolute":var i=jO(e).map(Da).getOrThunk(function(){return Da(Yo())});return p.some(JC.absolute(so("absolute",ct(a.style,"left").map(function(c){return t.x-i.x}),ct(a.style,"top").map(function(c){return t.y-i.y}),ct(a.style,"right").map(function(c){return i.right-t.right}),ct(a.style,"bottom").map(function(c){return i.bottom-t.bottom}))));default:return p.none()}})},OI=function(e,t,n){return KO(e,n).filter(function(a){return qO(n.getModes(),a,t)}).bind(function(a){return XO(e,a,n)})},kI=function(e,t,n){var a=Da(e);if(qO(n.getModes(),a,t))return p.none();TI(e,a,n);var i=Xa(),c=a.x-i.x,l=t.y-i.y,v=i.bottom-t.bottom,d=a.y<=t.y;return p.some(JC.fixed(so("fixed",p.some(c),d?p.some(l):p.none(),p.none(),d?p.none():p.some(v))))},AI=function(e,t,n){var a=e.element,i=Aa(Lr(a,"position"),"fixed");return i?OI(a,t,n):kI(a,t,n)},MI=function(e,t){var n=e.element;return KO(n,t).bind(function(a){return XO(n,a,t)})},YO=function(e,t,n){n.setDocked(!1),Ke(["left","right","top","bottom","position"],function(a){return zn(e.element,a)}),t.onUndocked(e)},ZC=function(e,t,n,a){var i=a.position==="fixed";n.setDocked(i),e0(e.element,a);var c=i?t.onDocked:t.onUndocked;c(e)},JO=function(e,t,n,a,i){i===void 0&&(i=!1),t.contextual.each(function(c){c.lazyContext(e).each(function(l){var v=SI(l,a);if(v!==n.isVisible())if(n.setVisible(v),i&&!v)Vs(e.element,[c.fadeOutClass]),c.onHide(e);else{var d=v?yI:wI;d(e,c)}})})},EI=function(e,t,n){var a=t.lazyViewport(e),i=n.isDocked();i&&JO(e,t,n,a),AI(e,a,n).each(function(c){c.fold(function(){return YO(e,t,n)},function(l){return ZC(e,t,n,l)},function(l){JO(e,t,n,a,!0),ZC(e,t,n,l)})})},DI=function(e,t,n){var a=e.element;n.setDocked(!1),MI(e,n).each(function(i){i.fold(function(){return YO(e,t,n)},function(c){return ZC(e,t,n,c)},be)}),n.setVisible(!0),t.contextual.each(function(i){Pu(a,[i.fadeInClass,i.fadeOutClass,i.transitionClass]),i.onShow(e)}),QC(e,t,n)},QC=function(e,t,n){e.getSystem().isConnected()&&EI(e,t,n)},ZO=function(e,t,n){n.isDocked()&&DI(e,t,n)},_I=function(e,t,n){return n.isDocked()},zI=function(e,t,n,a){return n.setModes(a)},RI=function(e,t,n){return n.getModes()},BI=Object.freeze({__proto__:null,refresh:QC,reset:ZO,isDocked:_I,getModes:RI,setModes:zI}),FI=function(e,t){return rr([Ll(Fl(),function(n,a){e.contextual.each(function(i){if(Si(n.element,i.transitionClass)){Pu(n.element,[i.transitionClass,i.fadeInClass]);var c=t.isVisible()?i.onShown:i.onHidden;c(n)}a.stop()})}),we(pg(),function(n,a){QC(n,e,t)}),we(zs(),function(n,a){ZO(n,e,t)})])},HI=Object.freeze({__proto__:null,events:FI}),II=[$o("contextual",[Tt("fadeInClass"),Tt("fadeOutClass"),Tt("transitionClass"),Oo("lazyContext"),An("onShow"),An("onShown"),An("onHide"),An("onHidden")]),pr("lazyViewport",Xa),Kc("modes",["top","bottom"],jr),An("onDocked"),An("onUndocked")],$I=function(e){var t=bt(!1),n=bt(!0),a=Fr(),i=bt(e.modes),c=function(){return"docked:  "+t.get()+", visible: "+n.get()+", modes: "+i.get().join(",")};return Ja({isDocked:t.get,setDocked:t.set,getInitialPos:a.get,setInitialPos:a.set,clearInitialPos:a.clear,isVisible:n.get,setVisible:n.set,getModes:i.get,setModes:i.set,readState:c})},LI=Object.freeze({__proto__:null,init:$I}),Mo=fa({fields:II,name:"docking",active:HI,apis:BI,state:LI}),eT=j(rt("toolbar-height-change")),hs={fadeInClass:"tox-editor-dock-fadein",fadeOutClass:"tox-editor-dock-fadeout",transitionClass:"tox-editor-dock-transition"},QO="tox-tinymce--toolbar-sticky-on",e7="tox-tinymce--toolbar-sticky-off",PI=function(e,t){var n=Br(t),a=n.dom.defaultView.innerHeight,i=Zo(n),c=$.fromDom(e.elm),l=vc(c),v=Jr(c),d=l.y,g=d+v,y=cu(t),S=Jr(t),T=y.top,k=T+S,D=Math.abs(T-i.top)<2,H=Math.abs(k-(i.top+a))<2;if(D&&d<k)Ff(i.left,d-S,n);else if(H&&g>T){var V=d-a+v+S;Ff(i.left,V,n)}},tT=function(e,t){return It(Mo.getModes(e),t)},nT=function(e){var t=function(a){return bi(a)+(parseInt(Ga(a,"margin-top"),10)||0)+(parseInt(Ga(a,"margin-bottom"),10)||0)},n=e.element;Or(n).each(function(a){var i="padding-"+Mo.getModes(e)[0];if(Mo.isDocked(e)){var c=$a(a);_t(n,"width",c+"px"),_t(a,i,t(n)+"px")}else zn(n,"width"),zn(a,i)})},t7=function(e,t){t?(Gr(e,hs.fadeOutClass),Vs(e,[hs.transitionClass,hs.fadeInClass])):(Gr(e,hs.fadeInClass),Vs(e,[hs.fadeOutClass,hs.transitionClass]))},n7=function(e,t){var n=$.fromDom(e.getContainer());t?(Sa(n,QO),Gr(n,e7)):(Sa(n,e7),Gr(n,QO))},NI=function(e,t){var n=Br(t);Po(n).filter(function(a){return!Wn(t,a)}).filter(function(a){return Wn(a,$.fromDom(n.dom.body))||Xo(e,a)}).each(function(){return Sc(t)})},VI=function(e,t){return gu(e).orThunk(function(){return t().toOptional().bind(function(n){return gu(n.element)})})},UI=function(e,t,n){e.inline||(t.header.isPositionedAtTop()||e.on("ResizeEditor",function(){n().each(Mo.reset)}),e.on("ResizeWindow ResizeEditor",function(){n().each(nT)}),e.on("SkinLoaded",function(){n().each(function(a){Mo.isDocked(a)?Mo.reset(a):Mo.refresh(a)})}),e.on("FullscreenStateChanged",function(){n().each(Mo.reset)})),e.on("AfterScrollIntoView",function(a){n().each(function(i){Mo.refresh(i);var c=i.element;Ib(c)&&PI(a,c)})}),e.on("PostRender",function(){n7(e,!1)})},WI=function(e){return e().map(Mo.isDocked).getOr(!1)},jI=function(){var e;return[ui.config({channels:(e={},e[eT()]={onReceive:nT},e)})]},r7=function(e,t){var n=Fr(),a=t.getSink,i=function(v){a().each(function(d){return v(d.element)})},c=function(v){e.inline||nT(v),n7(e,Mo.isDocked(v)),v.getSystem().broadcastOn([tf()],{}),a().each(function(d){return d.getSystem().broadcastOn([tf()],{})})},l=e.inline?[]:jI();return He([Ot.config({}),Mo.config({contextual:L({lazyContext:function(v){var d=bi(v.element),g=e.inline?e.getContentAreaContainer():e.getContainer(),y=Da($.fromDom(g)),S=y.height-d,T=y.y+(tT(v,"top")?0:d);return p.some(Zr(y.x,T,y.width,S))},onShow:function(){i(function(v){return t7(v,!0)})},onShown:function(v){i(function(d){return Pu(d,[hs.transitionClass,hs.fadeInClass])}),n.get().each(function(d){NI(v.element,d),n.clear()})},onHide:function(v){VI(v.element,a).fold(n.clear,n.set),i(function(d){return t7(d,!1)})},onHidden:function(){i(function(v){return Pu(v,[hs.transitionClass])})}},hs),lazyViewport:function(v){var d=Xa(),g=cD(e),y=d.y+(tT(v,"top")?g:0),S=d.height-(tT(v,"bottom")?g:0);return Zr(d.x,y,d.width,S)},modes:[t.header.getDockingMode()],onDocked:c,onUndocked:c})],l,!0)},GI=Object.freeze({__proto__:null,setup:UI,isDocked:WI,getBehaviours:r7}),qI=function(e){var t=e.editor,n=e.sticky?r7:WO;return{uid:e.uid,dom:e.dom,components:e.components,behaviours:Be(n(t,e.sharedBackstage))}},KI=pt([Tt("type"),To("items",Qv([ag([Tt("name"),Io("items",jr)]),jr]))].concat(xp)),XI=function(e){return hr("GroupToolbarButton",KI,e)},YI=[nr("text"),nr("tooltip"),nr("icon"),Oo("fetch"),pr("onSetup",function(){return be})],JI=pt(He([Tt("type")],YI,!0)),a7=function(e){return hr("menubutton",JI,e)},ZI=pt([Tt("type"),nr("tooltip"),nr("icon"),nr("text"),El("select"),Oo("fetch"),pr("onSetup",function(){return be}),gc("presets","normal",["normal","color","listpreview"]),K("columns",1),Oo("onAction"),Oo("onItemAction")]),QI=function(e){return hr("SplitButton",ZI,e)},e$=function(e,t){var n=function(i,c){var l=Se(c,function(v){var d={type:"menubutton",text:v.text,fetch:function(y){y(v.getItems())}},g=a7(d).mapError(function(y){return Gc(y)}).getOrDie();return LC(g,"tox-mbtn",t.backstage,p.some("menuitem"))});zt.set(i,l)},a={focus:ht.focusIn,setMenus:n};return{uid:e.uid,dom:e.dom,components:[],behaviours:Be([zt.config({}),Nt("menubar-events",[br(function(i){e.onSetup(i)}),we(pc(),function(i,c){ta(i.element,".tox-mbtn--active").each(function(l){Ci(c.event.target,".tox-mbtn").each(function(v){Wn(l,v)||i.getSystem().getByDom(l).each(function(d){i.getSystem().getByDom(v).each(function(g){Yu.expand(g),Yu.close(d),Ot.focus(g)})})})})}),we(p1(),function(i,c){c.event.prevFocus.bind(function(l){return i.getSystem().getByDom(l).toOptional()}).each(function(l){c.event.newFocus.bind(function(v){return i.getSystem().getByDom(v).toOptional()}).each(function(v){Yu.isOpen(l)&&(Yu.expand(v),Yu.close(l))})})})]),ht.config({mode:"flow",selector:".tox-mbtn",onEscape:function(i){return e.onEscape(i),p.some(!0)}}),Ur.config({})]),apis:a,domModification:{attributes:{role:"menubar"}}}},rT=Oi({factory:e$,name:"silver.Menubar",configFields:[de("dom"),de("uid"),de("onEscape"),de("backstage"),K("onSetup",be)],apis:{focus:function(e,t){e.focus(t)},setMenus:function(e,t,n){e.setMenus(t,n)}}}),jp=function(e,t){return t.getAnimationRoot.fold(function(){return e.element},function(n){return n(e)})},Cf=function(e){return e.dimension.property},Lm=function(e,t){return e.dimension.getDimension(t)},aT=function(e,t){var n=jp(e,t);Pu(n,[t.shrinkingClass,t.growingClass])},oT=function(e,t){Gr(e.element,t.openClass),Sa(e.element,t.closedClass),_t(e.element,Cf(t),"0px"),ur(e.element)},o7=function(e,t){Gr(e.element,t.closedClass),Sa(e.element,t.openClass),zn(e.element,Cf(t))},i7=function(e,t,n,a){n.setCollapsed(),_t(e.element,Cf(t),Lm(t,e.element)),ur(e.element),aT(e,t),oT(e,t),t.onStartShrink(e),t.onShrunk(e)},t$=function(e,t,n,a){var i=a.getOrThunk(function(){return Lm(t,e.element)});n.setCollapsed(),_t(e.element,Cf(t),i),ur(e.element);var c=jp(e,t);Gr(c,t.growingClass),Sa(c,t.shrinkingClass),oT(e,t),t.onStartShrink(e)},u7=function(e,t,n){var a=Lm(t,e.element),i=a==="0px"?i7:t$;i(e,t,n,p.some(a))},c7=function(e,t,n){var a=jp(e,t),i=Si(a,t.shrinkingClass),c=Lm(t,e.element);o7(e,t);var l=Lm(t,e.element),v=function(){_t(e.element,Cf(t),c),ur(e.element)},d=function(){oT(e,t)},g=i?v:d;g(),Gr(a,t.shrinkingClass),Sa(a,t.growingClass),o7(e,t),_t(e.element,Cf(t),l),n.setExpanded(),t.onStartGrow(e)},n$=function(e,t,n){if(n.isExpanded()){zn(e.element,Cf(t));var a=Lm(t,e.element);_t(e.element,Cf(t),a)}},r$=function(e,t,n){n.isExpanded()||c7(e,t,n)},a$=function(e,t,n){n.isExpanded()&&u7(e,t,n)},o$=function(e,t,n){n.isExpanded()&&i7(e,t,n)},i$=function(e,t,n){return n.isExpanded()},u$=function(e,t,n){return n.isCollapsed()},s7=function(e,t,n){var a=jp(e,t);return Si(a,t.growingClass)===!0},l7=function(e,t,n){var a=jp(e,t);return Si(a,t.shrinkingClass)===!0},c$=function(e,t,n){return s7(e,t)||l7(e,t)},s$=function(e,t,n){var a=n.isExpanded()?u7:c7;a(e,t,n)},l$=Object.freeze({__proto__:null,refresh:n$,grow:r$,shrink:a$,immediateShrink:o$,hasGrown:i$,hasShrunk:u$,isGrowing:s7,isShrinking:l7,isTransitioning:c$,toggleGrow:s$,disableTransitions:aT}),f$=function(e,t,n){var a=t.expanded;return Vi(a?{classes:[t.openClass],styles:{}}:{classes:[t.closedClass],styles:hc(t.dimension.property,"0px")})},v$=function(e,t){return rr([Ll(Fl(),function(n,a){var i=a.event.raw;if(i.propertyName===e.dimension.property){aT(n,e),t.isExpanded()&&zn(n.element,e.dimension.property);var c=t.isExpanded()?e.onGrown:e.onShrunk;c(n)}})])},d$=Object.freeze({__proto__:null,exhibit:f$,events:v$}),m$=[de("closedClass"),de("openClass"),de("shrinkingClass"),de("growingClass"),kn("getAnimationRoot"),An("onShrunk"),An("onStartShrink"),An("onGrown"),An("onStartGrow"),K("expanded",!1),To("dimension",yi("property",{width:[Jn("property","width"),Jn("getDimension",function(e){return $a(e)+"px"})],height:[Jn("property","height"),Jn("getDimension",function(e){return Jr(e)+"px"})]}))],g$=function(e){var t=bt(e.expanded),n=function(){return"expanded: "+t.get()};return Ja({isExpanded:function(){return t.get()===!0},isCollapsed:function(){return t.get()===!1},setCollapsed:Pn(t.set,!1),setExpanded:Pn(t.set,!0),readState:n})},h$=Object.freeze({__proto__:null,init:g$}),Fc=fa({fields:m$,name:"sliding",active:d$,apis:l$,state:h$}),f7="container",p$=[va("slotBehaviours",[])],v7=function(e){return"<alloy.field."+e+">"},b$=function(e){var t=function(){var c=[],l=function(v,d){return c.push(v),Wh(f7,v7(v),d)};return{slot:l,record:j(c)}}(),n=e(t),a=t.record(),i=Se(a,function(c){return za({name:c,pname:v7(c)})});return Xh(f7,p$,i,y$,n)},y$=function(e,t){var n=function(H){return mb(e)},a=function(H,V){return jn(H,e,V)},i=function(H,V){return function(z,W){return jn(z,e,W).map(function(re){return H(re,W)}).getOr(V)}},c=function(H){return function(V,z){Ke(z,function(W){return H(V,W)})}},l=function(H,V){return pa(H.element,"aria-hidden")!=="true"},v=function(H,V){if(!l(H)){var z=H.element;zn(z,"display"),ba(z,"aria-hidden"),yt(H,Qc(),{name:V,visible:!0})}},d=function(H,V){if(l(H)){var z=H.element;_t(z,"display","none"),Vt(z,"aria-hidden","true"),yt(H,Qc(),{name:V,visible:!1})}},g=i(l,!1),y=i(d),S=c(y),T=function(H){return S(H,n())},k=i(v),D={getSlotNames:n,getSlot:a,isShowing:g,hideSlot:y,hideAllSlots:T,showSlot:k};return{uid:e.uid,dom:e.dom,components:t,behaviours:nf(e.slotBehaviours),apis:D}},w$=Qn({getSlotNames:function(e,t){return e.getSlotNames(t)},getSlot:function(e,t,n){return e.getSlot(t,n)},isShowing:function(e,t,n){return e.isShowing(t,n)},hideSlot:function(e,t,n){return e.hideSlot(t,n)},hideAllSlots:function(e,t){return e.hideAllSlots(t)},showSlot:function(e,t,n){return e.showSlot(t,n)}},function(e){return Vl(e)}),ps=L(L({},w$),{sketch:b$}),S$=pt([nr("icon"),nr("tooltip"),pr("onShow",be),pr("onHide",be),pr("onSetup",function(){return be})]),x$=function(e){return hr("sidebar",S$,e)},C$=function(e){var t=e.ui.registry.getAll().sidebars;Ke(Zn(t),function(n){var a=t[n],i=function(){return Aa(p.from(e.queryCommandValue("ToggleSidebar")),n)};e.ui.registry.addToggleButton(n,{icon:a.icon,tooltip:a.tooltip,onAction:function(c){e.execCommand("ToggleSidebar",!1,n),c.setActive(i())},onSetup:function(c){var l=function(){return c.setActive(i())};return e.on("ToggleSidebar",l),function(){e.off("ToggleSidebar",l)}}})})},T$=function(e){return{element:function(){return e.element.dom}}},O$=function(e,t){var n=Se(Zn(t),function(a){var i=t[a],c=fu(x$(i));return{name:a,getApi:T$,onSetup:c.onSetup,onShow:c.onShow,onHide:c.onHide}});return Se(n,function(a){var i=bt(be);return e.slot(a.name,{dom:{tag:"div",classes:["tox-sidebar__pane"]},behaviours:$2.unnamedEvents([Mp(a,i),Ep(a,i),we(Qc(),function(c,l){var v=l.event,d=Z(n,function(g){return g.name===v.name});d.each(function(g){var y=v.visible?g.onShow:g.onHide;y(g.getApi(c))})})])})})},k$=function(e){return ps.sketch(function(t){return{dom:{tag:"div",classes:["tox-sidebar__pane-container"]},components:O$(t,e),slotBehaviours:$2.unnamedEvents([br(function(n){return ps.hideAllSlots(n)})])}})},A$=function(e,t){var n=Zt.getCurrent(e);n.each(function(a){return zt.set(a,[k$(t)])})},M$=function(e,t){var n=Zt.getCurrent(e);n.each(function(a){var i=Zt.getCurrent(a);i.each(function(c){Fc.hasGrown(a)?ps.isShowing(c,t)?Fc.shrink(a):(ps.hideAllSlots(c),ps.showSlot(c,t)):(ps.hideAllSlots(c),ps.showSlot(c,t),Fc.grow(a))})})},E$=function(e){var t=Zt.getCurrent(e);return t.bind(function(n){var a=Fc.isGrowing(n)||Fc.hasGrown(n);if(a){var i=Zt.getCurrent(n);return i.bind(function(c){return Z(ps.getSlotNames(c),function(l){return ps.isShowing(c,l)})})}else return p.none()})},iT=rt("FixSizeEvent"),uT=rt("AutoSizeEvent"),D$=function(e){return{uid:e.uid,dom:{tag:"div",classes:["tox-sidebar"],attributes:{role:"complementary"}},components:[{dom:{tag:"div",classes:["tox-sidebar__slider"]},components:[],behaviours:Be([Ur.config({}),Ot.config({}),Fc.config({dimension:{property:"width"},closedClass:"tox-sidebar--sliding-closed",openClass:"tox-sidebar--sliding-open",shrinkingClass:"tox-sidebar--sliding-shrinking",growingClass:"tox-sidebar--sliding-growing",onShrunk:function(t){var n=Zt.getCurrent(t);n.each(ps.hideAllSlots),Sn(t,uT)},onGrown:function(t){Sn(t,uT)},onStartGrow:function(t){yt(t,iT,{width:Lr(t.element,"width").getOr("")})},onStartShrink:function(t){yt(t,iT,{width:$a(t.element)+"px"})}}),zt.config({}),Zt.config({find:function(t){var n=zt.contents(t);return Xn(n)}})])}],behaviours:Be([Rc.childAt(0),Nt("sidebar-sliding-events",[we(iT,function(t,n){_t(t.element,"width",n.event.width)}),we(uT,function(t,n){zn(t.element,"width")})])])}},_$=function(e,t,n,a){Vt(e.element,"aria-busy",!0);var i=t.getRoot(e).getOr(e),c=Be([ht.config({mode:"special",onTab:function(){return p.some(!0)},onShiftTab:function(){return p.some(!0)}}),Ot.config({})]),l=a(i,c),v=i.getSystem().build(l);zt.append(i,xi(v)),v.hasConfigured(ht)&&t.focus&&ht.focusIn(v),n.isBlocked()||t.onBlock(e),n.blockWith(function(){return zt.remove(i,v)})},z$=function(e,t,n){ba(e.element,"aria-busy"),n.isBlocked()&&t.onUnblock(e),n.clear()},R$=Object.freeze({__proto__:null,block:_$,unblock:z$}),B$=[pr("getRoot",p.none),lr("focus",!0),An("onBlock"),An("onUnblock")],F$=function(){var e=c0(),t=function(n){e.set({destroy:n})};return Ja({readState:e.isSet,blockWith:t,clear:e.clear,isBlocked:e.isSet})},H$=Object.freeze({__proto__:null,init:F$}),fl=fa({fields:B$,name:"blocking",apis:R$,state:H$}),I$=function(e){return function(t,n){return{dom:{tag:"div",attributes:{"aria-label":e.translate("Loading..."),tabindex:"0"},classes:["tox-throbber__busy-spinner"]},components:[{dom:il('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}}},d7=function(e){return Zt.getCurrent(e).each(function(t){return Sc(t.element)})},$$=function(e,t){var n="tabindex",a="data-mce-"+n;p.from(e.iframeElement).map($.fromDom).each(function(i){t?(ja(i,n).each(function(c){return Vt(i,a,c)}),Vt(i,n,-1)):(ba(i,n),ja(i,a).each(function(c){Vt(i,n,c),ba(i,a)}))})},L$=function(e,t,n,a){var i=t.element;if($$(e,n),n)fl.block(t,I$(a)),zn(i,"display"),ba(i,"aria-hidden"),e.hasFocus()&&d7(t);else{var c=Zt.getCurrent(t).exists(function(l){return Td(l.element)});fl.unblock(t),_t(i,"display","none"),Vt(i,"aria-hidden","true"),c&&e.focus()}},P$=function(e){return{uid:e.uid,dom:{tag:"div",attributes:{"aria-hidden":"true"},classes:["tox-throbber"],styles:{display:"none"}},behaviours:Be([zt.config({}),fl.config({focus:!1}),Zt.config({find:function(t){return Xn(t.components())}})]),components:[]}},N$=function(e){return e.type==="focusin"},V$=function(e){if(N$(e)){var t=e.composed?Xn(e.composedPath()):p.from(e.target);return t.map($.fromDom).filter(Dn).exists(function(n){return Si(n,"mce-pastebin")})}else return!1},U$=function(e,t,n){var a=bt(!1),i=Fr(),c=function(v){a.get()&&!V$(v)&&(v.preventDefault(),d7(t()),e.editorManager.setActive(e))};e.inline||e.on("PreInit",function(){e.dom.bind(e.getWin(),"focusin",c),e.on("BeforeExecCommand",function(v){v.command.toLowerCase()==="mcefocus"&&v.value!==!0&&c(v)})});var l=function(v){v!==a.get()&&(a.set(v),L$(e,t(),v,n.providers),e.fire("AfterProgressState",{state:v}))};e.on("ProgressState",function(v){if(i.on(hf.clearTimeout),jt(v.time)){var d=hf.setEditorTimeout(e,function(){return l(v.state)},v.time);i.set(d)}else l(v.state),i.clear()})},W$=function(e,t){var n={len:0,list:[]},a=ce(e,function(i,c){var l=t(c,i.len);return l.fold(j(i),function(v){return{len:v.finish,list:i.list.concat([v])}})},n);return a.list},cT=function(e,t,n){return{within:e,extra:t,withinWidth:n}},m7=function(e,t,n){var a=W$(e,function(v,d){var g=n(v);return p.some({element:v,start:d,finish:d+g,width:g})}),i=Ce(a,function(v){return v.finish<=t}),c=X(i,function(v,d){return v+d.width},0),l=a.slice(i.length);return{within:i,extra:l,withinWidth:c}},fy=function(e){return Se(e,function(t){return t.element})},j$=function(e,t,n){var a=fy(e.concat(t));return cT(a,[],n)},G$=function(e,t,n,a){var i=fy(e).concat([n]);return cT(i,fy(t),a)},q$=function(e,t,n){return cT(fy(e),[],n)},K$=function(e,t,n){var a=m7(t,e,n);return a.extra.length===0?p.some(a):p.none()},X$=function(e,t,n,a){var i=K$(e,t,n).getOrThunk(function(){return m7(t,e-n(a),n)}),c=i.within,l=i.extra,v=i.withinWidth;return l.length===1&&l[0].width<=n(a)?j$(c,l,v):l.length>=1?G$(c,l,a,v):q$(c,l,v)},g7=function(e,t){var n=Se(t,function(a){return xi(a)});Bc.setGroups(e,n)},Y$=function(e){return qn(e,function(t){return gu(t.element).bind(function(n){return t.getSystem().getByDom(n).toOptional()})})},h7=function(e,t,n){var a=t.builtGroups.get();if(a.length!==0){var i=ju(e,t,"primary"),c=Kr.getCoupled(e,"overflowGroup");_t(i.element,"visibility","hidden");var l=a.concat([c]),v=Y$(l);n([]),g7(i,l);var d=$a(i.element),g=X$(d,t.builtGroups.get(),function(y){return $a(y.element)},c);g.extra.length===0?(zt.remove(i,c),n([])):(g7(i,g.within),n(g.extra)),zn(i.element,"visibility"),ur(i.element),v.each(Ot.focus)}},p7=j([va("splitToolbarBehaviours",[Kr]),uo("builtGroups",function(){return bt([])})]),J$=j([qs(["overflowToggledClass"]),El("getOverflowBounds"),de("lazySink"),uo("overflowGroups",function(){return bt([])})].concat(p7())),Z$=j([za({factory:Bc,schema:$m(),name:"primary"}),ci({schema:$m(),name:"overflow"}),ci({name:"overflow-button"}),ci({name:"overflow-group"})]),sT=j(function(e,t){zu(e,Math.floor(t))}),Q$=j([qs(["toggledClass"]),de("lazySink"),Oo("fetch"),El("getBounds"),$o("fireDismissalEventInstead",[K("event",Rs())]),ns()]),eL=j([ci({name:"button",overrides:function(e){return{dom:{attributes:{"aria-haspopup":"true"}},buttonBehaviours:Be([bn.config({toggleClass:e.markers.toggledClass,aria:{mode:"expanded"},toggleOnExecute:!1})])}}}),ci({factory:Bc,schema:$m(),name:"toolbar",overrides:function(e){return{toolbarBehaviours:Be([ht.config({mode:"cyclic",onEscape:function(t){return jn(t,e,"button").each(Ot.focus),p.none()}})])}}})]),b7=function(e,t){var n=Kr.getCoupled(e,"toolbarSandbox");fn.isOpen(n)?fn.close(n):fn.open(n,t.toolbar())},lT=function(e,t,n,a){var i=n.getBounds.map(function(l){return l()}),c=n.lazySink(e).getOrDie();fo.positionWithinBounds(c,t,{anchor:{type:"hotspot",hotspot:e,layouts:a,overrides:{maxWidthFunction:sT()}}},i)},y7=function(e,t,n,a,i){Bc.setGroups(t,i),lT(e,t,n,a),bn.on(e)},tL=function(e,t,n){var a=N1(),i=function(l,v){n.fetch().get(function(d){y7(e,v,n,t.layouts,d),a.link(e.element),ht.focusIn(v)})},c=function(){bn.off(e),Ot.focus(e),a.unlink(e.element)};return{dom:{tag:"div",attributes:{id:a.id}},behaviours:Be([ht.config({mode:"special",onEscape:function(l){return fn.close(l),p.some(!0)}}),fn.config({onOpen:i,onClose:c,isPartOf:function(l,v,d){return Us(v,d)||Us(e,d)},getAttachPoint:function(){return n.lazySink(e).getOrDie()}}),ui.config({channels:L(L({},jd(L({isExtraPart:Le},n.fireDismissalEventInstead.map(function(l){return{fireEventInstead:{event:l.event}}}).getOr({})))),Eh({doReposition:function(){fn.getState(Kr.getCoupled(e,"toolbarSandbox")).each(function(l){lT(e,l,n,t.layouts)})}}))})])}},nL=function(e,t,n,a){return L(L({},Vo.sketch(L(L({},a.button()),{action:function(i){b7(i,a)},buttonBehaviours:Wi.augment({dump:a.button().buttonBehaviours},[Kr.config({others:{toolbarSandbox:function(i){return tL(i,n,e)}}})])}))),{apis:{setGroups:function(i,c){fn.getState(Kr.getCoupled(i,"toolbarSandbox")).each(function(l){y7(i,l,e,n.layouts,c)})},reposition:function(i){fn.getState(Kr.getCoupled(i,"toolbarSandbox")).each(function(c){lT(i,c,e,n.layouts)})},toggle:function(i){b7(i,a)},getToolbar:function(i){return fn.getState(Kr.getCoupled(i,"toolbarSandbox"))},isOpen:function(i){return fn.isOpen(Kr.getCoupled(i,"toolbarSandbox"))}}})},Fv=vo({name:"FloatingToolbarButton",factory:nL,configFields:Q$(),partFields:eL(),apis:{setGroups:function(e,t,n){e.setGroups(t,n)},reposition:function(e,t){e.reposition(t)},toggle:function(e,t){e.toggle(t)},getToolbar:function(e,t){return e.getToolbar(t)},isOpen:function(e,t){return e.isOpen(t)}}}),rL=j([de("items"),qs(["itemSelector"]),va("tgroupBehaviours",[ht])]),aL=j([Wu({name:"items",unit:"item"})]),oL=function(e,t,n,a){return{uid:e.uid,dom:e.dom,components:t,behaviours:Ta(e.tgroupBehaviours,[ht.config({mode:"flow",selector:e.markers.itemSelector})]),domModification:{attributes:{role:"toolbar"}}}},vy=vo({name:"ToolbarGroup",configFields:rL(),partFields:aL(),factory:oL}),w7=function(e){return Se(e,function(t){return xi(t)})},S7=function(e,t,n){h7(e,n,function(a){n.overflowGroups.set(a),t.getOpt(e).each(function(i){Fv.setGroups(i,w7(a))})})},iL=function(e,t,n,a){var i=Ln(Fv.sketch({fetch:function(){return Qa.nu(function(c){c(w7(e.overflowGroups.get()))})},layouts:{onLtr:function(){return[la,La]},onRtl:function(){return[La,la]},onBottomLtr:function(){return[ko,co]},onBottomRtl:function(){return[co,ko]}},getBounds:n.getOverflowBounds,lazySink:e.lazySink,fireDismissalEventInstead:{},markers:{toggledClass:e.markers.overflowToggledClass},parts:{button:a["overflow-button"](),toolbar:a.overflow()}}));return{uid:e.uid,dom:e.dom,components:t,behaviours:Ta(e.splitToolbarBehaviours,[Kr.config({others:{overflowGroup:function(){return vy.sketch(L(L({},a["overflow-group"]()),{items:[i.asSpec()]}))}}})]),apis:{setGroups:function(c,l){e.builtGroups.set(Se(l,c.getSystem().build)),S7(c,i,e)},refresh:function(c){return S7(c,i,e)},toggle:function(c){i.getOpt(c).each(function(l){Fv.toggle(l)})},isOpen:function(c){return i.getOpt(c).map(Fv.isOpen).getOr(!1)},reposition:function(c){i.getOpt(c).each(function(l){Fv.reposition(l)})},getOverflow:function(c){return i.getOpt(c).bind(Fv.getToolbar)}},domModification:{attributes:{role:"group"}}}},x7=vo({name:"SplitFloatingToolbar",configFields:J$(),partFields:Z$(),factory:iL,apis:{setGroups:function(e,t,n){e.setGroups(t,n)},refresh:function(e,t){e.refresh(t)},reposition:function(e,t){e.reposition(t)},toggle:function(e,t){e.toggle(t)},isOpen:function(e,t){return e.isOpen(t)},getOverflow:function(e,t){return e.getOverflow(t)}}}),uL=j([qs(["closedClass","openClass","shrinkingClass","growingClass","overflowToggledClass"]),An("onOpened"),An("onClosed")].concat(p7())),cL=j([za({factory:Bc,schema:$m(),name:"primary"}),za({factory:Bc,schema:$m(),name:"overflow",overrides:function(e){return{toolbarBehaviours:Be([Fc.config({dimension:{property:"height"},closedClass:e.markers.closedClass,openClass:e.markers.openClass,shrinkingClass:e.markers.shrinkingClass,growingClass:e.markers.growingClass,onShrunk:function(t){jn(t,e,"overflow-button").each(function(n){bn.off(n),Ot.focus(n)}),e.onClosed(t)},onGrown:function(t){ht.focusIn(t),e.onOpened(t)},onStartGrow:function(t){jn(t,e,"overflow-button").each(bn.on)}}),ht.config({mode:"acyclic",onEscape:function(t){return jn(t,e,"overflow-button").each(Ot.focus),p.some(!0)}})])}}}),ci({name:"overflow-button",overrides:function(e){return{buttonBehaviours:Be([bn.config({toggleClass:e.markers.overflowToggledClass,aria:{mode:"pressed"},toggleOnExecute:!1})])}}}),ci({name:"overflow-group"})]),sL=function(e,t){return jn(e,t,"overflow").map(Fc.hasGrown).getOr(!1)},C7=function(e,t){jn(e,t,"overflow-button").bind(function(){return jn(e,t,"overflow")}).each(function(n){fT(e,t),Fc.toggleGrow(n)})},fT=function(e,t){jn(e,t,"overflow").each(function(n){h7(e,t,function(a){var i=Se(a,function(c){return xi(c)});Bc.setGroups(n,i)}),jn(e,t,"overflow-button").each(function(a){Fc.hasGrown(n)&&bn.on(a)}),Fc.refresh(n)})},lL=function(e,t,n,a){var i="alloy.toolbar.toggle",c=function(l,v){var d=Se(v,l.getSystem().build);e.builtGroups.set(d)};return{uid:e.uid,dom:e.dom,components:t,behaviours:Ta(e.splitToolbarBehaviours,[Kr.config({others:{overflowGroup:function(l){return vy.sketch(L(L({},a["overflow-group"]()),{items:[Vo.sketch(L(L({},a["overflow-button"]()),{action:function(v){Sn(l,i)}}))]}))}}}),Nt("toolbar-toggle-events",[we(i,function(l){C7(l,e)})])]),apis:{setGroups:function(l,v){c(l,v),fT(l,e)},refresh:function(l){return fT(l,e)},toggle:function(l){return C7(l,e)},isOpen:function(l){return sL(l,e)}},domModification:{attributes:{role:"group"}}}},vT=vo({name:"SplitSlidingToolbar",configFields:uL(),partFields:cL(),factory:lL,apis:{setGroups:function(e,t,n){e.setGroups(t,n)},refresh:function(e,t){e.refresh(t)},toggle:function(e,t){e.toggle(t)},isOpen:function(e,t){return e.isOpen(t)}}}),T7=function(e){var t=e.title.fold(function(){return{}},function(n){return{attributes:{title:n}}});return{dom:L({tag:"div",classes:["tox-toolbar__group"]},t),components:[vy.parts.items({})],items:e.items,markers:{itemSelector:"*:not(.tox-split-button) > .tox-tbtn:not([disabled]), .tox-split-button:not([disabled]), .tox-toolbar-nav-js:not([disabled])"},tgroupBehaviours:Be([Ur.config({}),Ot.config({})])}},dy=function(e){return vy.sketch(T7(e))},O7=function(e,t){var n=br(function(a){var i=Se(e.initGroups,dy);Bc.setGroups(a,i)});return Be([Xu.toolbarButton(e.providers.isDisabled),da(),ht.config({mode:t,onEscape:e.onEscape,selector:".tox-toolbar__group"}),Nt("toolbar-events",[n])])},k7=function(e){var t=e.cyclicKeying?"cyclic":"acyclic";return{uid:e.uid,dom:{tag:"div",classes:["tox-toolbar-overlord"]},parts:{"overflow-group":T7({title:p.none(),items:[]}),"overflow-button":oO({name:"more",icon:p.some("more-drawer"),disabled:!1,tooltip:p.some("More..."),primary:!1,borderless:!1},p.none(),e.providers)},splitToolbarBehaviours:O7(e,t)}},fL=function(e){var t=k7(e),n=4,a=x7.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}});return x7.sketch(L(L({},t),{lazySink:e.getSink,getOverflowBounds:function(){var i=e.moreDrawerData.lazyHeader().element,c=vc(i),l=oc(i),v=vc(l),d=Math.max(l.dom.scrollHeight,v.height);return Zr(c.x+n,v.y,c.width-n*2,d)},parts:L(L({},t.parts),{overflow:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:e.attributes}}}),components:[a],markers:{overflowToggledClass:"tox-tbtn--enabled"}}))},vL=function(e){var t=vT.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}}),n=vT.parts.overflow({dom:{tag:"div",classes:["tox-toolbar__overflow"]}}),a=k7(e);return vT.sketch(L(L({},a),{components:[t,n],markers:{openClass:"tox-toolbar__overflow--open",closedClass:"tox-toolbar__overflow--closed",growingClass:"tox-toolbar__overflow--growing",shrinkingClass:"tox-toolbar__overflow--shrinking",overflowToggledClass:"tox-tbtn--enabled"},onOpened:function(i){i.getSystem().broadcastOn([eT()],{type:"opened"})},onClosed:function(i){i.getSystem().broadcastOn([eT()],{type:"closed"})}}))},my=function(e){var t=e.cyclicKeying?"cyclic":"acyclic";return Bc.sketch({uid:e.uid,dom:{tag:"div",classes:["tox-toolbar"].concat(e.type===qi.scrolling?["tox-toolbar--scrolling"]:[])},components:[Bc.parts.groups({})],toolbarBehaviours:O7(e,t)})},dL=function(e,t,n){var a={getSocket:function(i){return li.getPart(i,e,"socket")},setSidebar:function(i,c){li.getPart(i,e,"sidebar").each(function(l){return A$(l,c)})},toggleSidebar:function(i,c){li.getPart(i,e,"sidebar").each(function(l){return M$(l,c)})},whichSidebar:function(i){return li.getPart(i,e,"sidebar").bind(E$).getOrNull()},getHeader:function(i){return li.getPart(i,e,"header")},getToolbar:function(i){return li.getPart(i,e,"toolbar")},setToolbar:function(i,c){li.getPart(i,e,"toolbar").each(function(l){l.getApis().setGroups(l,c)})},setToolbars:function(i,c){li.getPart(i,e,"multiple-toolbar").each(function(l){UO.setItems(l,c)})},refreshToolbar:function(i){var c=li.getPart(i,e,"toolbar");c.each(function(l){return l.getApis().refresh(l)})},toggleToolbarDrawer:function(i){li.getPart(i,e,"toolbar").each(function(c){no(c.getApis().toggle,function(l){return l(c)})})},isToolbarDrawerToggled:function(i){return li.getPart(i,e,"toolbar").bind(function(c){return p.from(c.getApis().isOpen).map(function(l){return l(c)})}).getOr(!1)},getThrobber:function(i){return li.getPart(i,e,"throbber")},focusToolbar:function(i){var c=li.getPart(i,e,"toolbar").orThunk(function(){return li.getPart(i,e,"multiple-toolbar")});c.each(function(l){ht.focusIn(l)})},setMenubar:function(i,c){li.getPart(i,e,"menubar").each(function(l){rT.setMenus(l,c)})},focusMenubar:function(i){li.getPart(i,e,"menubar").each(function(c){rT.focus(c)})}};return{uid:e.uid,dom:e.dom,components:t,apis:a,behaviours:e.behaviours}},mL=Bv.optional({factory:rT,name:"menubar",schema:[de("backstage")]}),gL=function(e){return e.type===qi.sliding?vL:e.type===qi.floating?fL:my},hL=Bv.optional({factory:{sketch:function(e){return UO.sketch({uid:e.uid,dom:e.dom,listBehaviours:Be([ht.config({mode:"acyclic",selector:".tox-toolbar"})]),makeItem:function(){return my({type:e.type,uid:rt("multiple-toolbar-item"),cyclicKeying:!1,initGroups:[],providers:e.providers,onEscape:function(){return e.onEscape(),p.some(!0)}})},setupItem:function(t,n,a,i){Bc.setGroups(n,a)},shell:!0})}},name:"multiple-toolbar",schema:[de("dom"),de("onEscape")]}),pL=Bv.optional({factory:{sketch:function(e){var t=gL(e),n={type:e.type,uid:e.uid,onEscape:function(){return e.onEscape(),p.some(!0)},cyclicKeying:!1,initGroups:[],getSink:e.getSink,providers:e.providers,moreDrawerData:{lazyToolbar:e.lazyToolbar,lazyMoreButton:e.lazyMoreButton,lazyHeader:e.lazyHeader},attributes:e.attributes};return t(n)}},name:"toolbar",schema:[de("dom"),de("onEscape"),de("getSink")]}),bL=Bv.optional({factory:{sketch:qI},name:"header",schema:[de("dom")]}),yL=Bv.optional({name:"socket",schema:[de("dom")]}),wL=Bv.optional({factory:{sketch:D$},name:"sidebar",schema:[de("dom")]}),SL=Bv.optional({factory:{sketch:P$},name:"throbber",schema:[de("dom")]}),Hr=vo({name:"OuterContainer",factory:dL,configFields:[de("dom"),de("behaviours")],partFields:[bL,mL,pL,hL,yL,wL,SL],apis:{getSocket:function(e,t){return e.getSocket(t)},setSidebar:function(e,t,n){e.setSidebar(t,n)},toggleSidebar:function(e,t,n){e.toggleSidebar(t,n)},whichSidebar:function(e,t){return e.whichSidebar(t)},getHeader:function(e,t){return e.getHeader(t)},getToolbar:function(e,t){return e.getToolbar(t)},setToolbar:function(e,t,n){var a=Se(n,function(i){return dy(i)});e.setToolbar(t,a)},setToolbars:function(e,t,n){var a=Se(n,function(i){return Se(i,dy)});e.setToolbars(t,a)},refreshToolbar:function(e,t){return e.refreshToolbar(t)},toggleToolbarDrawer:function(e,t){e.toggleToolbarDrawer(t)},isToolbarDrawerToggled:function(e,t){return e.isToolbarDrawerToggled(t)},getThrobber:function(e,t){return e.getThrobber(t)},setMenubar:function(e,t,n){e.setMenubar(t,n)},focusMenubar:function(e,t){e.focusMenubar(t)},focusToolbar:function(e,t){e.focusToolbar(t)}}}),xL="file edit view insert format tools table help",A7={file:{title:"File",items:"newdocument restoredraft | preview | export print | deleteallconversations"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall | searchreplace"},view:{title:"View",items:"code | visualaid visualchars visualblocks | spellchecker | preview fullscreen | showcomments"},insert:{title:"Insert",items:"image link media addcomment pageembed template codesample inserttable | charmap emoticons hr | pagebreak nonbreaking anchor toc | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | formats blockformats fontformats fontsizes align lineheight | forecolor backcolor | language | removeformat"},tools:{title:"Tools",items:"spellchecker spellcheckerlanguage | a11ycheck code wordcount"},table:{title:"Table",items:"inserttable | cell row column | advtablesort | tableprops deletetable"},help:{title:"Help",items:"help"}},CL=function(e,t,n){var a=rD(n).split(/[ ,]/);return{text:e.title,getItems:function(){return mt(e.items,function(i){var c=i.toLowerCase();return c.trim().length===0?[]:Hn(a,function(l){return l===c})?[]:c==="separator"||c==="|"?[{type:"separator"}]:t.menuItems[c]?[t.menuItems[c]]:[]})}}},dT=function(e){return typeof e=="string"?e.split(" "):e},M7=function(e,t){var n=L(L({},A7),t.menus),a=Zn(t.menus).length>0,i=t.menubar===void 0||t.menubar===!0?dT(xL):dT(t.menubar===!1?"":t.menubar),c=Ce(i,function(v){var d=pn(A7,v);return a?d||ct(t.menus,v).exists(function(g){return pn(g,"items")}):d}),l=Se(c,function(v){var d=n[v];return CL({title:d.title,items:dT(d.items)},t,e)});return Ce(l,function(v){var d=function(g){return g.type!=="separator"};return v.getItems().length>0&&Hn(v.getItems(),d)})},E7=function(e){var t=function(){e._skinLoaded=!0,GD(e)};return function(){e.initialized?t():e.on("init",t)}},TL=function(e,t){return function(){return qD(e,{message:t})}},D7=function(e,t,n){return new Sp(function(a,i){n.load(t,a,i),e.on("remove",function(){return n.unload(t)})})},OL=function(e,t){var n=t+"/skin.min.css";return D7(e,n,e.ui.styleSheetLoader)},kL=function(e,t){var n=uc($.fromDom(e.getElement()));if(n){var a=t+"/skin.shadowdom.min.css";return D7(e,a,kp.DOM.styleSheetLoader)}else return Sp.resolve()},_7=function(e,t){var n=YE(t);n&&t.contentCSS.push(n+(e?"/content.inline":"/content")+".min.css"),ZE(t)===!1&&dt(n)?Sp.all([OL(t,n),kL(t,n)]).then(E7(t),TL(t,"Skin could not be loaded")):E7(t)()},AL=Pn(_7,!1),ML=Pn(_7,!0),gy=function(e,t){return function(n){var a=Xl(),i=function(){n.setActive(e.formatter.match(t));var c=e.formatter.formatChanged(t,n.setActive);a.set(c)};return e.initialized?i():e.once("init",i),function(){e.off("init",i),a.clear()}}},hy=function(e,t,n){return function(a){var i=function(){return n(a)},c=function(){n(a),e.on(t,i)};return e.initialized?c():e.once("init",c),function(){e.off("init",c),e.off(t,i)}}},z7=function(e){return function(t){return function(){e.undoManager.transact(function(){e.focus(),e.execCommand("mceToggleFormat",!1,t.format)})}}},yu=function(e,t){return function(){return e.execCommand(t)}},EL=function(e,t,n){var a=function(v,d,g,y){var S=t.shared.providers.translate(v.title);if(v.type==="separator")return p.some({type:"separator",text:S});if(v.type==="submenu"){var T=mt(v.getStyleItems(),function(k){return i(k,d,y)});return d===0&&T.length<=0?p.none():p.some({type:"nestedmenuitem",text:S,disabled:T.length<=0,getSubmenuItems:function(){return mt(v.getStyleItems(),function(k){return i(k,d,y)})}})}else return p.some(L({type:"togglemenuitem",text:S,icon:v.icon,active:v.isSelected(y),disabled:g,onAction:n.onAction(v)},v.getStylePreview().fold(function(){return{}},function(k){return{meta:{style:k}}})))},i=function(v,d,g){var y=v.type==="formatter"&&n.isInvalid(v);return d===0?y?[]:a(v,d,!1,g).toArray():a(v,d,y,g).toArray()},c=function(v){var d=n.getCurrentValue(),g=n.shouldHide?0:1;return mt(v,function(y){return i(y,g,d)})},l=function(v,d){return function(g,y){var S=d(),T=c(S),k=Hm(T,_c.CLOSE_ON_EXECUTE,v,!1);y(k)}};return{validateItems:c,getFetch:l}},Pm=function(e,t,n){var a=n.dataset,i=a.type==="basic"?function(){return Se(a.data,function(c){return _O(c,n.isSelectedFor,n.getPreviewFor)})}:a.getData;return{items:EL(e,t,n),getStyleItems:i}},Gp=function(e,t,n){var a=Pm(e,t,n),i=a.items,c=a.getStyleItems,l=function(d){return{getComponent:j(d)}},v=hy(e,"NodeChange",function(d){var g=d.getComponent();n.updateText(g)});return IC({text:n.icon.isSome()?p.none():n.text,icon:n.icon,tooltip:p.from(n.tooltip),role:p.none(),fetch:i.getFetch(t,c),onSetup:v,getApi:l,columns:1,presets:"normal",classes:n.icon.isSome()?[]:["bespoke"],dropdownBehaviours:[]},"tox-tbtn",t.shared)},DL=function(e){return Se(e,function(t){var n=t,a=t,i=t.split("=");return i.length>1&&(n=i[0],a=i[1]),{title:n,format:a}})},_L=function(e){return{type:"basic",data:e}},Nm;(function(e){e[e.SemiColon=0]="SemiColon",e[e.Space=1]="Space"})(Nm||(Nm={}));var zL=function(e,t){return t===Nm.SemiColon?e.replace(/;$/,"").split(";"):e.split(" ")},mT=function(e,t,n,a){var i=e.getParam(t,n,"string"),c=DL(zL(i,a));return{type:"basic",data:c}},gT=[{title:"Left",icon:"align-left",format:"alignleft",command:"JustifyLeft"},{title:"Center",icon:"align-center",format:"aligncenter",command:"JustifyCenter"},{title:"Right",icon:"align-right",format:"alignright",command:"JustifyRight"},{title:"Justify",icon:"align-justify",format:"alignjustify",command:"JustifyFull"}],R7=function(e){var t=function(){return Z(gT,function(v){return e.formatter.match(v.format)})},n=function(v){return function(){return e.formatter.match(v)}},a=function(v){return p.none},i=function(v){var d=t(),g=d.fold(j("left"),function(y){return y.title.toLowerCase()});yt(v,nO,{icon:"align-"+g})},c=_L(gT),l=function(v){return function(){return Z(gT,function(d){return d.format===v.format}).each(function(d){return e.execCommand(d.command)})}};return{tooltip:"Align",text:p.none(),icon:p.some("align-left"),isSelectedFor:n,getCurrentValue:p.none,getPreviewFor:a,onAction:l,updateText:i,dataset:c,shouldHide:!1,isInvalid:function(v){return!e.formatter.canApply(v.format)}}},RL=function(e,t){return Gp(e,t,R7(e))},BL=function(e,t){var n=Pm(e,t,R7(e));e.ui.registry.addNestedMenuItem("align",{text:t.shared.providers.translate("Align"),getSubmenuItems:function(){return n.items.validateItems(n.getStyleItems())}})},FL="Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats",HL=["-apple-system","Segoe UI","Roboto","Helvetica Neue","sans-serif"],B7=function(e){var t=e.split(/\s*,\s*/);return Se(t,function(n){return n.replace(/^['"]+|['"]+$/g,"")})},IL=function(e){var t=function(){var n=B7(e.toLowerCase());return gt(HL,function(a){return n.indexOf(a.toLowerCase())>-1})};return e.indexOf("-apple-system")===0&&t()},F7=function(e){var t="System Font",n=function(){var g=function(D){return D?B7(D)[0]:""},y=e.queryCommandValue("FontName"),S=d.data,T=y?y.toLowerCase():"",k=Z(S,function(D){var H=D.format;return H.toLowerCase()===T||g(H).toLowerCase()===g(T).toLowerCase()}).orThunk(function(){return Fa(IL(T),{title:t,format:T})});return{matchOpt:k,font:y}},a=function(g){return function(y){return y.exists(function(S){return S.format===g})}},i=function(){var g=n().matchOpt;return g},c=function(g){return function(){return p.some({tag:"div",styles:g.indexOf("dings")===-1?{"font-family":g}:{}})}},l=function(g){return function(){e.undoManager.transact(function(){e.focus(),e.execCommand("FontName",!1,g.format)})}},v=function(g){var y=n(),S=y.matchOpt,T=y.font,k=S.fold(j(T),function(D){return D.title});yt(g,Fm,{text:k})},d=mT(e,"font_formats",FL,Nm.SemiColon);return{tooltip:"Fonts",text:p.some(t),icon:p.none(),isSelectedFor:a,getCurrentValue:i,getPreviewFor:c,onAction:l,updateText:v,dataset:d,shouldHide:!1,isInvalid:Le}},$L=function(e,t){return Gp(e,t,F7(e))},LL=function(e,t){var n=Pm(e,t,F7(e));e.ui.registry.addNestedMenuItem("fontformats",{text:t.shared.providers.translate("Fonts"),getSubmenuItems:function(){return n.items.validateItems(n.getStyleItems())}})},PL="8pt 10pt 12pt 14pt 18pt 24pt 36pt",NL={"8pt":"1","10pt":"2","12pt":"3","14pt":"4","18pt":"5","24pt":"6","36pt":"7"},VL={"xx-small":"7pt","x-small":"8pt",small:"10pt",medium:"12pt",large:"14pt","x-large":"18pt","xx-large":"24pt"},UL=function(e,t){var n=Math.pow(10,t);return Math.round(e*n)/n},WL=function(e,t){return/[0-9.]+px$/.test(e)?UL(parseInt(e,10)*72/96,t||0)+"pt":ct(VL,e).getOr(e)},jL=function(e){return ct(NL,e).getOr("")},H7=function(e){var t=function(){var d=p.none(),g=v.data,y=e.queryCommandValue("FontSize");if(y)for(var S=function(k){var D=WL(y,k),H=jL(D);d=Z(g,function(V){return V.format===y||V.format===D||V.format===H})},T=3;d.isNone()&&T>=0;T--)S(T);return{matchOpt:d,size:y}},n=function(d){return function(g){return g.exists(function(y){return y.format===d})}},a=function(){var d=t().matchOpt;return d},i=j(p.none),c=function(d){return function(){e.undoManager.transact(function(){e.focus(),e.execCommand("FontSize",!1,d.format)})}},l=function(d){var g=t(),y=g.matchOpt,S=g.size,T=y.fold(j(S),function(k){return k.title});yt(d,Fm,{text:T})},v=mT(e,"fontsize_formats",PL,Nm.Space);return{tooltip:"Font sizes",text:p.some("12pt"),icon:p.none(),isSelectedFor:n,getPreviewFor:i,getCurrentValue:a,onAction:c,updateText:l,dataset:v,shouldHide:!1,isInvalid:Le}},GL=function(e,t){return Gp(e,t,H7(e))},qL=function(e,t){var n=Pm(e,t,H7(e));e.ui.registry.addNestedMenuItem("fontsizes",{text:"Font sizes",getSubmenuItems:function(){return n.items.validateItems(n.getStyleItems())}})},I7=function(e,t){var n=t(),a=Se(n,function(i){return i.format});return p.from(e.formatter.closest(a)).bind(function(i){return Z(n,function(c){return c.format===i})}).orThunk(function(){return Fa(e.formatter.match("p"),{title:"Paragraph",format:"p"})})},KL="Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre",$7=function(e){var t="Paragraph",n=function(l){return function(){return e.formatter.match(l)}},a=function(l){return function(){var v=e.formatter.get(l);return p.some({tag:v.length>0&&(v[0].inline||v[0].block)||"div",styles:e.dom.parseStyle(e.formatter.getCssText(l))})}},i=function(l){var v=I7(e,function(){return c.data}),d=v.fold(j(t),function(g){return g.title});yt(l,Fm,{text:d})},c=mT(e,"block_formats",KL,Nm.SemiColon);return{tooltip:"Blocks",text:p.some(t),icon:p.none(),isSelectedFor:n,getCurrentValue:p.none,getPreviewFor:a,onAction:z7(e),updateText:i,dataset:c,shouldHide:!1,isInvalid:function(l){return!e.formatter.canApply(l.format)}}},XL=function(e,t){return Gp(e,t,$7(e))},YL=function(e,t){var n=Pm(e,t,$7(e));e.ui.registry.addNestedMenuItem("blockformats",{text:"Blocks",getSubmenuItems:function(){return n.items.validateItems(n.getStyleItems())}})},L7=function(e,t){var n="Paragraph",a=function(l){return function(){return e.formatter.match(l)}},i=function(l){return function(){var v=e.formatter.get(l);return v!==void 0?p.some({tag:v.length>0&&(v[0].inline||v[0].block)||"div",styles:e.dom.parseStyle(e.formatter.getCssText(l))}):p.none()}},c=function(l){var v=function(S){var T=S.items;return T!==void 0&&T.length>0?mt(T,v):[{title:S.title,format:S.format}]},d=mt(DO(e),v),g=I7(e,j(d)),y=g.fold(j(n),function(S){return S.title});yt(l,Fm,{text:y})};return{tooltip:"Formats",text:p.some(n),icon:p.none(),isSelectedFor:a,getCurrentValue:p.none,getPreviewFor:i,onAction:z7(e),updateText:c,shouldHide:e.getParam("style_formats_autohide",!1,"boolean"),isInvalid:function(l){return!e.formatter.canApply(l.format)},dataset:t}},JL=function(e,t){var n=L({type:"advanced"},t.styleselect);return Gp(e,t,L7(e,n))},ZL=function(e,t){var n=L({type:"advanced"},t.styleselect),a=Pm(e,t,L7(e,n));e.ui.registry.addNestedMenuItem("formats",{text:"Formats",getSubmenuItems:function(){return a.items.validateItems(a.getStyleItems())}})},QL=function(e,t){var n=function(a,i){e.updateState.each(function(c){var l=c(a,i);t.set(l)}),e.renderComponents.each(function(c){var l=c(i,t.get()),v=Se(l,a.getSystem().build);j0(a,v)})};return rr([we(Es(),function(a,i){var c=i;if(!c.universal){var l=e.channel;It(c.channels,l)&&n(a,c.data)}}),br(function(a,i){e.initialData.each(function(c){n(a,c)})})])},eP=Object.freeze({__proto__:null,events:QL}),tP=function(e,t,n){return n},nP=Object.freeze({__proto__:null,getState:tP}),rP=[de("channel"),kn("renderComponents"),kn("updateState"),kn("initialData")],aP=function(){var e=bt(p.none()),t=function(){return e.set(p.none())},n=function(){return e.get().getOr("none")};return{readState:n,get:e.get,set:e.set,clear:t}},oP=Object.freeze({__proto__:null,init:aP}),Di=fa({fields:rP,name:"reflecting",active:eP,apis:nP,state:oP}),iP=j([de("toggleClass"),de("fetch"),Ks("onExecute"),K("getHotspot",p.some),K("getAnchorOverrides",j({})),ns(),Ks("onItemExecute"),kn("lazySink"),de("dom"),An("onOpen"),va("splitDropdownBehaviours",[Kr,ht,Ot]),K("matchWidth",!1),K("useMinWidth",!1),K("eventOrder",{}),kn("role")].concat(dC())),uP=za({factory:Vo,schema:[de("dom")],name:"arrow",defaults:function(){return{buttonBehaviours:Be([Ot.revoke()])}},overrides:function(e){return{dom:{tag:"span",attributes:{role:"presentation"}},action:function(t){t.getSystem().getByUid(e.uid).each(Bs)},buttonBehaviours:Be([bn.config({toggleOnExecute:!1,toggleClass:e.toggleClass})])}}}),cP=za({factory:Vo,schema:[de("dom")],name:"button",defaults:function(){return{buttonBehaviours:Be([Ot.revoke()])}},overrides:function(e){return{dom:{tag:"span",attributes:{role:"presentation"}},action:function(t){t.getSystem().getByUid(e.uid).each(function(n){e.onExecute(n,t)})}}}}),sP=j([uP,cP,ji({factory:{sketch:function(e){return{uid:e.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:e.text}}}},schema:[de("text")],name:"aria-descriptor"}),ci({schema:[Gs()],name:"menu",defaults:function(e){return{onExecute:function(t,n){t.getSystem().getByUid(e.uid).each(function(a){e.onItemExecute(a,t,n)})}}}}),Q5()]),lP=function(e,t,n,a){var i,c=function(S){Zt.getCurrent(S).each(function(T){Rn.highlightFirst(T),ht.focusIn(T)})},l=function(S){var T=c;_m(e,je,S,a,T,zc.HighlightFirst).get(be)},v=function(S){return l(S),p.some(!0)},d=function(S){var T=ju(S,e,"button");return Bs(T),p.some(!0)},g=L(L({},rr([br(function(S,T){var k=jn(S,e,"aria-descriptor");k.each(function(D){var H=rt("aria");Vt(D.element,"id",H),Vt(S.element,"aria-describedby",H)})})])),wm(p.some(l))),y={repositionMenus:function(S){bn.isOn(S)&&r8(S)}};return{uid:e.uid,dom:e.dom,components:t,apis:y,eventOrder:L(L({},e.eventOrder),(i={},i[ai()]=["disabling","toggling","alloy.base.behaviour"],i)),events:g,behaviours:Ta(e.splitDropdownBehaviours,[Kr.config({others:{sandbox:function(S){var T=ju(S,e,"arrow"),k={onOpen:function(){bn.on(T),bn.on(S)},onClose:function(){bn.off(T),bn.off(S)}};return vC(e,S,k)}}}),ht.config({mode:"special",onSpace:d,onEnter:d,onDown:v}),Ot.config({}),bn.config({toggleOnExecute:!1,aria:{mode:"expanded"}})]),domModification:{attributes:{role:e.role.getOr("button"),"aria-haspopup":!0}}}},py=vo({name:"SplitDropdown",configFields:iP(),partFields:sP(),factory:lP,apis:{repositionMenus:function(e,t){return e.repositionMenus(t)}}}),fP=function(e){return{isDisabled:function(){return lt.isDisabled(e)},setDisabled:function(t){return lt.set(e,t)}}},vP=function(e){return{setActive:function(t){bn.set(e,t)},isActive:function(){return bn.isOn(e)},isDisabled:function(){return lt.isDisabled(e)},setDisabled:function(t){return lt.set(e,t)}}},P7=function(e,t){return e.map(function(n){return{"aria-label":t.translate(n),title:t.translate(n)}}).getOr({})},N7=rt("focus-button"),hT=function(e,t,n,a,i,c){var l;return{dom:{tag:"button",classes:["tox-tbtn"].concat(t.isSome()?["tox-tbtn--select"]:[]),attributes:P7(n,c)},components:Am([e.map(function(v){return iy(v,c.icons)}),t.map(function(v){return FC(v,"tox-tbtn",c)})]),eventOrder:(l={},l[Ni()]=["focusing","alloy.base.behaviour","common-button-display-events"],l),buttonBehaviours:Be([Xu.toolbarButton(c.isDisabled),da(),Nt("common-button-display-events",[we(Ni(),function(v,d){d.event.prevent(),Sn(v,N7)})])].concat(a.map(function(v){return Di.config({channel:v,initialData:{icon:e,text:t},renderComponents:function(d,g){return Am([d.icon.map(function(y){return iy(y,c.icons)}),d.text.map(function(y){return FC(y,"tox-tbtn",c)})])}})}).toArray()).concat(i.getOr([])))}},dP=function(e,t,n,a){var i=t.shared;return Fv.sketch({lazySink:i.getSink,fetch:function(){return Qa.nu(function(c){c(Se(n(e.items),dy))})},markers:{toggledClass:"tox-tbtn--enabled"},parts:{button:hT(e.icon,e.text,e.tooltip,p.none(),p.none(),i.providers),toolbar:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:a}}}})},V7=function(e,t,n){var a=bt(be),i=hT(e.icon,e.text,e.tooltip,p.none(),p.none(),n);return Vo.sketch({dom:i.dom,components:i.components,eventOrder:tO,buttonBehaviours:Be([Nt("toolbar-button-events",[AB({onAction:e.onAction,getApi:t.getApi}),Mp(t,a),Ep(t,a)]),Xu.toolbarButton(function(){return e.disabled||n.isDisabled()}),da()].concat(t.toolbarButtonBehaviours))})},mP=function(e,t){return U7(e,t,[])},U7=function(e,t,n){return V7(e,{toolbarButtonBehaviours:[].concat(n.length>0?[Nt("toolbarButtonWith",n)]:[]),getApi:fP,onSetup:e.onSetup},t)},gP=function(e,t){return W7(e,t,[])},W7=function(e,t,n){return fe(V7(e,{toolbarButtonBehaviours:[zt.config({}),bn.config({toggleClass:"tox-tbtn--enabled",aria:{mode:"pressed"},toggleOnExecute:!1})].concat(n.length>0?[Nt("toolbarToggleButtonWith",n)]:[]),getApi:vP,onSetup:e.onSetup},t))},hP=function(e,t,n){return function(a){return Qa.nu(function(i){return t.fetch(i)}).map(function(i){return p.from(D5(fe(iC(rt("menu-value"),i,function(c){t.onItemAction(e(a),c)},t.columns,t.presets,_c.CLOSE_ON_EXECUTE,t.select.getOr(Le),n),{movement:j2(t.columns,t.presets),menuBehaviours:$2.unnamedEvents(t.columns!=="auto"?[]:[br(function(c,l){jx(c,4,A6(t.presets)).each(function(v){var d=v.numRows,g=v.numColumns;ht.setGridSize(c,d,g)})})])})))})}},pP=function(e,t){var n,a=rt("channel-update-split-dropdown-display"),i=function(v){return{isDisabled:function(){return lt.isDisabled(v)},setDisabled:function(d){return lt.set(v,d)},setIconFill:function(d,g){ta(v.element,'svg path[id="'+d+'"], rect[id="'+d+'"]').each(function(y){Vt(y,"fill",g)})},setIconStroke:function(d,g){ta(v.element,'svg path[id="'+d+'"], rect[id="'+d+'"]').each(function(y){Vt(y,"stroke",g)})},setActive:function(d){Vt(v.element,"aria-pressed",d),ta(v.element,"span").each(function(g){v.getSystem().getByDom(g).each(function(y){return bn.set(y,d)})})},isActive:function(){return ta(v.element,"span").exists(function(d){return v.getSystem().getByDom(d).exists(bn.isOn)})}}},c=bt(be),l={getApi:i,onSetup:e.onSetup};return py.sketch({dom:{tag:"div",classes:["tox-split-button"],attributes:L({"aria-pressed":!1},P7(e.tooltip,t.providers))},onExecute:function(v){e.onAction(i(v))},onItemExecute:function(v,d,g){},splitDropdownBehaviours:Be([Xu.splitButton(t.providers.isDisabled),da(),Nt("split-dropdown-events",[we(N7,Ot.focus),Mp(l,c),Ep(l,c)]),Np.config({})]),eventOrder:(n={},n[Zc()]=["alloy.base.behaviour","split-dropdown-events"],n),toggleClass:"tox-tbtn--enabled",lazySink:t.getSink,fetch:hP(i,e,t.providers),parts:{menu:H2(!1,e.columns,e.presets)},components:[py.parts.button(hT(e.icon,e.text,p.none(),p.some(a),p.some([bn.config({toggleClass:"tox-tbtn--enabled",toggleOnExecute:!1})]),t.providers)),py.parts.arrow({dom:{tag:"button",classes:["tox-tbtn","tox-split-button__chevron"],innerHtml:l6("chevron-down",t.providers.icons)},buttonBehaviours:Be([Xu.splitButton(t.providers.isDisabled),da(),Ex()])}),py.parts["aria-descriptor"]({text:t.providers.translate("To open the popup, press Shift+Enter")})]})},bP=[{name:"history",items:["undo","redo"]},{name:"styles",items:["styleselect"]},{name:"formatting",items:["bold","italic"]},{name:"alignment",items:["alignleft","aligncenter","alignright","alignjustify"]},{name:"indentation",items:["outdent","indent"]},{name:"permanent pen",items:["permanentpen"]},{name:"comments",items:["addcomment"]}],qp=function(e,t){return function(n,a,i){var c=e(n).mapError(function(l){return Gc(l)}).getOrDie();return t(c,a,i)}},Vm={button:qp(y6,function(e,t){return mP(e,t.backstage.shared.providers)}),togglebutton:qp(w6,function(e,t){return gP(e,t.backstage.shared.providers)}),menubutton:qp(a7,function(e,t){return LC(e,"tox-tbtn",t.backstage,p.none())}),splitbutton:qp(QI,function(e,t){return pP(e,t.backstage.shared)}),grouptoolbarbutton:qp(XI,function(e,t,n){var a,i=n.ui.registry.getAll().buttons,c=function(v){return by(n,{buttons:i,toolbar:v,allowToolbarGroups:!1},t,p.none())},l=(a={},a[zd]=t.backstage.shared.header.isPositionedAtTop()?xc.TopToBottom:xc.BottomToTop,a);switch(Ap(n)){case qi.floating:return dP(e,t.backstage,c,l);default:throw new Error("Toolbar groups are only supported when using floating toolbar mode")}}),styleSelectButton:function(e,t){return JL(e,t.backstage)},fontsizeSelectButton:function(e,t){return GL(e,t.backstage)},fontSelectButton:function(e,t){return $L(e,t.backstage)},formatButton:function(e,t){return XL(e,t.backstage)},alignMenuButton:function(e,t){return RL(e,t.backstage)}},yP=function(e,t,n){return ct(Vm,e.type).fold(function(){return console.error("skipping button defined by",e),p.none()},function(a){return p.some(a(e,t,n))})},j7={styleselect:Vm.styleSelectButton,fontsizeselect:Vm.fontsizeSelectButton,fontselect:Vm.fontSelectButton,formatselect:Vm.formatButton,align:Vm.alignMenuButton},wP=function(e){var t=Se(bP,function(n){var a=Ce(n.items,function(i){return pn(e,i)||pn(j7,i)});return{name:n.name,items:a}});return Ce(t,function(n){return n.items.length>0})},SP=function(e){var t=e.split("|");return Se(t,function(n){return{items:n.trim().split(" ")}})},xP=function(e){return We(e,function(t){return pn(t,"name")&&pn(t,"items")})},CP=function(e){var t=e.toolbar,n=e.buttons;return t===!1?[]:t===void 0||t===!0?wP(n):dt(t)?SP(t):xP(t)?t:(console.error("Toolbar type should be string, string[], boolean or ToolbarGroup[]"),[])},TP=function(e,t,n,a,i,c){return ct(t,n.toLowerCase()).orThunk(function(){return c.bind(function(l){return qn(l,function(v){return ct(t,v+n.toLowerCase())})})}).fold(function(){return ct(j7,n.toLowerCase()).map(function(l){return l(e,i)}).orThunk(function(){return p.none()})},function(l){return l.type==="grouptoolbarbutton"&&!a?(console.warn("Ignoring the '"+n+"' toolbar button. Group toolbar buttons are only supported when using floating toolbar mode and cannot be nested."),p.none()):yP(l,i,e)})},by=function(e,t,n,a){var i=CP(t),c=Se(i,function(l){var v=mt(l.items,function(d){return d.trim().length===0?[]:TP(e,t.buttons,d,t.allowToolbarGroups,n,a).toArray()});return{title:p.from(e.translate(l.name)),items:v}});return Ce(c,function(l){return l.items.length>0})},G7=function(e,t,n,a){var i=t.outerContainer,c=n.toolbar,l=n.buttons;if(We(c,dt)){var v=c.map(function(d){var g={toolbar:d,buttons:l,allowToolbarGroups:n.allowToolbarGroups};return by(e,g,{backstage:a},p.none())});Hr.setToolbars(i,v)}else Hr.setToolbar(i,by(e,n,{backstage:a},p.none()))},q7=Ha(),OP=q7.os.isiOS()&&q7.os.version.major<=12,kP=function(e,t){var n=e.dom,a=e.getWin(),i=e.getDoc().documentElement,c=bt(Yn(a.innerWidth,a.innerHeight)),l=bt(Yn(i.offsetWidth,i.offsetHeight)),v=function(){var T=c.get();(T.left!==a.innerWidth||T.top!==a.innerHeight)&&(c.set(Yn(a.innerWidth,a.innerHeight)),tC(e))},d=function(){var T=e.getDoc().documentElement,k=l.get();(k.left!==T.offsetWidth||k.top!==T.offsetHeight)&&(l.set(Yn(T.offsetWidth,T.offsetHeight)),tC(e))},g=function(T){return XD(e,T)};n.bind(a,"resize",v),n.bind(a,"scroll",g);var y=Ad($.fromDom(e.getBody()),"load",d),S=t.uiMothership.element;e.on("hide",function(){_t(S,"display","none")}),e.on("show",function(){zn(S,"display")}),e.on("NodeChange",d),e.on("remove",function(){y.unbind(),n.unbind(a,"resize",v),n.unbind(a,"scroll",g),a=null})},AP=function(e,t,n,a,i){var c=bt(0),l=t.outerContainer;AL(e);var v=$.fromDom(i.targetNode),d=Wa(sa(v));G0(v,t.mothership),Ud(d,t.uiMothership),e.on("PostRender",function(){G7(e,t,n,a),c.set(e.getWin().innerWidth),Hr.setMenubar(l,M7(e,n)),Hr.setSidebar(l,n.sidebar),kP(e,t)});var g=Hr.getSocket(l).getOrDie("Could not find expected socket element");if(OP){Bo(g.element,{overflow:"scroll","-webkit-overflow-scrolling":"touch"});var y=CM(function(){e.fire("ScrollContent")},20),S=Vr(g.element,"scroll",y.throttle);e.on("remove",S.unbind)}G6(e,t),e.addCommand("ToggleSidebar",function(H,V){Hr.toggleSidebar(l,V),e.fire("ToggleSidebar")}),e.addQueryValueHandler("ToggleSidebar",function(){return Hr.whichSidebar(l)});var T=Ap(e),k=function(){Hr.refreshToolbar(t.outerContainer)};(T===qi.sliding||T===qi.floating)&&e.on("ResizeWindow ResizeEditor ResizeContent",function(){var H=e.getWin().innerWidth;H!==c.get()&&(k(),c.set(H))});var D={enable:function(){km(t,!1)},disable:function(){km(t,!0)},isDisabled:function(){return lt.isDisabled(l)}};return{iframeContainer:g.element.dom,editorContainer:l.element.dom,api:D}},MP=Object.freeze({__proto__:null,render:AP}),pT=function(e){var t=/^[0-9\.]+(|px)$/i;return t.test(""+e)?p.some(parseInt(""+e,10)):p.none()},bT=function(e){return jt(e)?e+"px":e},yy=function(e,t,n){var a=t.filter(function(c){return e<c}),i=n.filter(function(c){return e>c});return a.or(i).getOr(e)},EP=function(e){var t=F6(e),n=$6(e),a=L6(e);return pT(t).map(function(i){return yy(i,n,a)})},DP=function(e){var t=EP(e);return t.getOr(F6(e))},K7=function(e){var t=H6(e),n=I6(e),a=Gx(e);return pT(t).map(function(i){return yy(i,n,a)})},_P=function(e){var t=K7(e);return t.getOr(H6(e))},zP=function(e,t,n,a,i){var c=n.uiMothership,l=n.outerContainer,v=kp.DOM,d=P2(e),g=N2(e),y=Gx(e).or(K7(e)),S=a.shared.header,T=S.isPositionedAtTop,k=Ap(e),D=k===qi.sliding||k===qi.floating,H=bt(!1),V=function(){return H.get()&&!e.removed},z=function(ye){return D?ye.fold(j(0),function(se){return se.components().length>1?Jr(se.components()[1].element):0}):0},W=function(ye){switch(N6(e)){case kv.auto:var se=Hr.getToolbar(l),De=z(se),et=Jr(ye.element)-De,me=Da(t),Je=me.y>et;if(Je)return"top";var at=oc(t),Jt=Math.max(at.dom.scrollHeight,Jr(at)),En=me.bottom<Jt-et;if(En)return"bottom";var ar=Xa(),dr=ar.bottom<me.bottom-et;return dr?"bottom":"top";case kv.bottom:return"bottom";case kv.top:default:return"top"}},re=function(ye){var se=i.get();Mo.setModes(se,[ye]),S.setDockingMode(ye);var De=T()?xc.TopToBottom:xc.BottomToTop;Vt(se.element,zd,De)},ne=function(){var ye=y.getOrThunk(function(){var se=pT(Ga(Yo(),"margin-left")).getOr(0);return $a(Yo())-cu(t).left+se});_t(i.get().element,"max-width",ye+"px")},U=function(){var ye=Hr.getToolbar(l),se=z(ye),De=Da(t),et=T()?Math.max(De.y-Jr(i.get().element)+se,0):De.bottom;Bo(l.element,{position:"absolute",top:Math.round(et)+"px",left:Math.round(De.x)+"px"})},Q=function(){c.broadcastOn([tf()],{})},le=function(ye){if(ye===void 0&&(ye=!1),!!V()){if(d||ne(),D&&Hr.refreshToolbar(l),d||U(),g){var se=i.get();ye?Mo.reset(se):Mo.refresh(se)}Q()}},$e=function(ye){if(ye===void 0&&(ye=!0),!(d||!g||!V())){var se=S.getDockingMode(),De=W(i.get());De!==se&&(re(De),ye&&le(!0))}},he=function(){H.set(!0),_t(l.element,"display","flex"),v.addClass(e.getBody(),"mce-edit-focus"),zn(c.element,"display"),$e(!1),le()},Pe=function(){H.set(!1),n.outerContainer&&(_t(l.element,"display","none"),v.removeClass(e.getBody(),"mce-edit-focus")),_t(c.element,"display","none")};return{isVisible:V,isPositionedAtTop:T,show:he,hide:Pe,update:le,updateMode:$e,repositionPopups:Q}},X7=function(e,t){var n=Da(e);return{pos:t?n.y:n.bottom,bounds:n}},RP=function(e,t,n,a){var i=bt(X7(t,n.isPositionedAtTop())),c=function(v){var d=X7(t,n.isPositionedAtTop()),g=d.pos,y=d.bounds,S=i.get(),T=S.pos,k=S.bounds,D=y.height!==k.height||y.width!==k.width;i.set({pos:g,bounds:y}),D&&tC(e,v),n.isVisible()&&(T!==g?n.update(!0):D&&(n.updateMode(),n.repositionPopups()))};a||(e.on("activate",n.show),e.on("deactivate",n.hide)),e.on("SkinLoaded ResizeWindow",function(){return n.update(!0)}),e.on("NodeChange keydown",function(v){hf.requestAnimationFrame(function(){return c(v)})}),e.on("ScrollWindow",function(){return n.updateMode()});var l=Xl();l.set(Ad($.fromDom(e.getBody()),"load",c)),e.on("remove",function(){l.clear()})},BP=function(e,t,n,a,i){var c=t.mothership,l=t.uiMothership,v=t.outerContainer,d=bt(null),g=$.fromDom(i.targetNode),y=zP(e,g,t,a,d),S=uD(e);ML(e);var T=function(){if(d.get()){y.show();return}d.set(Hr.getHeader(v).getOrDie());var D=W6(e);Ud(D,c),Ud(D,l),G7(e,t,n,a),Hr.setMenubar(v,M7(e,n)),y.show(),RP(e,g,y,S),e.nodeChanged()};e.on("show",T),e.on("hide",y.hide),S||(e.on("focus",T),e.on("blur",y.hide)),e.on("init",function(){(e.hasFocus()||S)&&T()}),G6(e,t);var k={show:function(){y.show()},hide:function(){y.hide()},enable:function(){km(t,!1)},disable:function(){km(t,!0)},isDisabled:function(){return lt.isDisabled(v)}};return{editorContainer:v.element.dom,api:k}},FP=Object.freeze({__proto__:null,render:BP}),HP="contexttoolbar-show",Y7="contexttoolbar-hide",IP=function(e){return{hide:function(){return Sn(e,ld())},getValue:function(){return Ve.getValue(e)}}},J7=function(e,t){return we(eO,function(n,a){var i=e.get(n),c=IP(i);t.onAction(c,a.event.buttonApi)})},$P=function(e,t,n){var a=t.original;a.primary;var i=_(a,["primary"]),c=fu(y6(L(L({},i),{type:"button",onAction:be})));return U7(c,n.backstage.shared.providers,[J7(e,t)])},LP=function(e,t,n){var a=t.original;a.primary;var i=_(a,["primary"]),c=fu(w6(L(L({},i),{type:"togglebutton",onAction:be})));return W7(c,n.backstage.shared.providers,[J7(e,t)])},PP=function(e,t,n){var a={backstage:{shared:{providers:n}}};return t.type==="contextformtogglebutton"?LP(e,t,a):$P(e,t,a)},NP=function(e,t,n){var a=Se(t,function(l){return Ln(PP(e,l,n))}),i=function(){return Se(a,function(l){return l.asSpec()})},c=function(l){return qn(t,function(v,d){return v.primary?p.from(a[d]).bind(function(g){return g.getOpt(l)}).filter(rn(lt.isDisabled)):p.none()})};return{asSpecs:i,findPrimary:c}},Z7=function(e,t){var n=e.label.fold(function(){return{}},function(c){return{"aria-label":c}}),a=Ln(Pp.sketch({inputClasses:["tox-toolbar-textfield","tox-toolbar-nav-js"],data:e.initValue(),inputAttributes:n,selectOnFocus:!0,inputBehaviours:Be([ht.config({mode:"special",onEnter:function(c){return i.findPrimary(c).map(function(l){return Bs(l),!0})},onLeft:function(c,l){return l.cut(),p.none()},onRight:function(c,l){return l.cut(),p.none()}})])})),i=NP(a,e.commands,t);return[{title:p.none(),items:[a.asSpec()]},{title:p.none(),items:i.asSpecs()}]},VP=function(e,t,n){return my({type:e,uid:rt("context-toolbar"),initGroups:Z7(t,n),onEscape:p.none,cyclicKeying:!0,providers:n})},UP={renderContextForm:VP,buildInitGroups:Z7},Q7=function(e,t,n){return n===void 0&&(n=.01),t.bottom-e.y>=n&&e.bottom-t.y>=n},WP=function(e){var t=e.getBoundingClientRect();if(t.height<=0&&t.width<=0){var n=Ht($.fromDom(e.startContainer),e.startOffset).element,a=Rr(n)?Or(n):p.some(n);return a.filter(Dn).map(function(i){return i.dom.getBoundingClientRect()}).getOr(t)}else return t},yT=function(e){var t=e.selection.getRng(),n=WP(t);if(e.inline){var a=Zo();return Zr(a.left+n.left,a.top+n.top,n.width,n.height)}else{var i=vc($.fromDom(e.getBody()));return Zr(i.x+n.left,i.y+n.top,n.width,n.height)}},jP=function(e,t){return t.filter(kr).map(vc).getOrThunk(function(){return yT(e)})},GP=function(e,t,n){var a=Math.max(e.x+n,t.x),i=Math.min(e.right-n,t.right);return{x:a,width:i-a}},qP=function(e,t,n,a,i,c){var l=$.fromDom(e.getContainer()),v=ta(l,".tox-editor-header").getOr(l),d=Da(v),g=d.y>=t.bottom,y=a&&!g;if(e.inline&&y)return{y:Math.max(d.bottom+c,n.y),bottom:n.bottom};if(e.inline&&!y)return{y:n.y,bottom:Math.min(d.y-c,n.bottom)};var S=i==="line"?Da(l):t;return y?{y:Math.max(d.bottom+c,n.y),bottom:Math.min(S.bottom-c,n.bottom)}:{y:Math.max(S.y+c,n.y),bottom:Math.min(d.y-c,n.bottom)}},ek=function(e,t,n,a){a===void 0&&(a=0);var i=Wc(window),c=Da($.fromDom(e.getContentAreaContainer())),l=qx(e)||Kx(e)||L2(e),v=GP(c,i,a),d=v.x,g=v.width;if(e.inline&&!l)return Zr(d,i.y,g,i.height);var y=t.header.isPositionedAtTop(),S=qP(e,c,i,y,n,a),T=S.y,k=S.bottom;return Zr(d,T,g,k-T)},wy=12,tk={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"],inset:["tox-pop--inset"]},nk={maxHeightFunction:Jl(),maxWidthFunction:sT()},KP=function(e,t){var n=e.selection.getRng(),a=Ht($.fromDom(n.startContainer),n.startOffset);return n.startContainer===n.endContainer&&n.startOffset===n.endOffset-1&&Wn(a.element,t)},XP=function(e,t,n){var a=Lr(e,"position");_t(e,"position",t);var i=n(e);return a.each(function(c){return _t(e,"position",c)}),i},rk=function(e){return e==="node"},YP=function(e,t,n,a,i){var c=yT(e),l=a.lastElement().exists(function(g){return Wn(n,g)});if(KP(e,n))return l?ZT:bu;if(l)return XP(t,a.getMode(),function(){var g=Q7(c,Da(t));return g&&!a.isReposition()?$A:ZT});var v=a.getMode()==="fixed"?i.y+Zo().top:i.y,d=Jr(t)+wy;return v+d<=c.y?bu:gf},JP=function(e,t,n,a){var i=function(d){return function(g,y,S,T,k){var D=YP(e,T,d,n,k),H=L(L({},g),{y:k.y,height:k.height});return L(L({},D(H,y,S,T,k)),{alwaysFit:!0})}},c=function(d){return rk(a)?[i(d)]:[]},l={onLtr:function(d){return[Lo,Pa,co,La,ko,la].concat(c(d))},onRtl:function(d){return[Lo,Pa,ko,la,co,La].concat(c(d))}},v={onLtr:function(d){return[Pa,La,la,co,ko,Lo].concat(c(d))},onRtl:function(d){return[Pa,la,La,ko,co,Lo].concat(c(d))}};return t?v:l},ZP=function(e,t,n,a){return t==="line"?{bubble:Ys(wy,0,tk),layouts:{onLtr:function(){return[Wg]},onRtl:function(){return[jg]}},overrides:nk}:{bubble:Ys(0,wy,tk,1/wy),layouts:JP(e,n,a,t),overrides:nk}},wT=function(e,t){var n=Ce(t,function(l){return l.predicate(e.dom)}),a=xe(n,function(l){return l.type==="contexttoolbar"}),i=a.pass,c=a.fail;return{contextToolbars:i,contextForms:c}},QP=function(e){if(e.length<=1)return e;var t=function(v){return Hn(e,function(d){return d.position===v})},n=function(v){return Ce(e,function(d){return d.position===v})},a=t("selection"),i=t("node");if(a||i)if(i&&a){var c=n("node"),l=Se(n("selection"),function(v){return L(L({},v),{position:"node"})});return c.concat(l)}else return n(a?"selection":"node");else return n("line")},eN=function(e){if(e.length<=1)return e;var t=function(a){return Z(e,function(i){return i.position===a})},n=t("selection").orThunk(function(){return t("node")}).orThunk(function(){return t("line")}).map(function(a){return a.position});return n.fold(function(){return[]},function(a){return Ce(e,function(i){return i.position===a})})},tN=function(e,t,n){var a=wT(e,t);if(a.contextForms.length>0)return p.some({elem:e,toolbars:[a.contextForms[0]]});var i=wT(e,n);if(i.contextForms.length>0)return p.some({elem:e,toolbars:[i.contextForms[0]]});if(a.contextToolbars.length>0||i.contextToolbars.length>0){var c=QP(a.contextToolbars.concat(i.contextToolbars));return p.some({elem:e,toolbars:c})}else return p.none()},nN=function(e,t,n){return e(t)?p.none():ud(t,function(a){if(Dn(a)){var i=wT(a,n.inNodeScope),c=i.contextToolbars,l=i.contextForms,v=l.length>0?l:eN(c);return v.length>0?p.some({elem:a,toolbars:v}):p.none()}else return p.none()},e)},rN=function(e,t){var n=$.fromDom(t.getBody()),a=function(l){return Wn(l,n)},i=function(l){return!a(l)&&!Xo(n,l)},c=$.fromDom(t.selection.getNode());return i(c)?p.none():tN(c,e.inNodeScope,e.inEditorScope).orThunk(function(){return nN(a,c,e)})},aN=function(e,t){var n={},a=[],i=[],c={},l={},v=function(y,S){var T=fu(QM(S));n[y]=T,T.launch.map(function(k){c["form:"+y]=L(L({},S.launch),{type:k.type==="contextformtogglebutton"?"togglebutton":"button",onAction:function(){t(T)}})}),T.scope==="editor"?i.push(T):a.push(T),l[y]=T},d=function(y,S){tE(S).each(function(T){S.scope==="editor"?i.push(T):a.push(T),l[y]=T})},g=Zn(e);return Ke(g,function(y){var S=e[y];S.type==="contextform"?v(y,S):S.type==="contexttoolbar"&&d(y,S)}),{forms:n,inNodeScope:a,inEditorScope:i,lookupTable:l,formNavigators:c}},ak=rt("forward-slide"),ok=rt("backward-slide"),ST=rt("change-slide-event"),xT="tox-pop--resizing",oN=function(e){var t=bt([]);return Nn.sketch({dom:{tag:"div",classes:["tox-pop"]},fireDismissalEventInstead:{event:"doNotDismissYet"},onShow:function(n){t.set([]),Nn.getContent(n).each(function(a){zn(a.element,"visibility")}),Gr(n.element,xT),zn(n.element,"width")},inlineBehaviours:Be([Nt("context-toolbar-events",[Ll(Fl(),function(n,a){a.event.raw.propertyName==="width"&&(Gr(n.element,xT),zn(n.element,"width"))}),we(ST,function(n,a){var i=n.element;zn(i,"width");var c=$a(i);Nn.setContent(n,a.event.contents),Sa(i,xT);var l=$a(i);_t(i,"width",c+"px"),Nn.getContent(n).each(function(v){a.event.focus.bind(function(d){return Sc(d),gu(i)}).orThunk(function(){return ht.focusIn(v),Po(sa(i))})}),hf.setTimeout(function(){_t(n.element,"width",l+"px")},0)}),we(ak,function(n,a){Nn.getContent(n).each(function(i){t.set(t.get().concat([{bar:i,focus:Po(sa(n.element))}]))}),yt(n,ST,{contents:a.event.forwardContents,focus:p.none()})}),we(ok,function(n,a){Cr(t.get()).each(function(i){t.set(t.get().slice(0,t.get().length-1)),yt(n,ST,{contents:xi(i.bar),focus:i.focus})})})]),ht.config({mode:"special",onEscape:function(n){return Cr(t.get()).fold(function(){return e.onEscape()},function(a){return Sn(n,ok),p.some(!0)})}})]),lazySink:function(){return Ut.value(e.sink)}})},CT="tox-pop--transition",iN=function(e,t,n,a){var i=a.backstage,c=i.shared,l=Ha().deviceType.isTouch,v=Fr(),d=Fr(),g=Fr(),y=ea(oN({sink:n,onEscape:function(){return e.focus(),p.some(!0)}})),S=function(){var he=g.get().getOr("node"),Pe=rk(he)?1:0;return ek(e,c,he,Pe)},T=function(){return!e.removed&&!(l()&&i.isContextMenuOpen())},k=function(he){return Aa(vi(he,v.get(),Wn),!0)},D=function(){if(T()){var he=S(),Pe=Aa(g.get(),"node")?jP(e,v.get()):yT(e);return he.height<=0||!Q7(Pe,he)}else return!0},H=function(){v.clear(),d.clear(),g.clear(),Nn.hide(y)},V=function(){if(Nn.isOpen(y)){var he=y.element;zn(he,"display"),D()?_t(he,"display","none"):(d.set(0),Nn.reposition(y))}},z=function(he){return{dom:{tag:"div",classes:["tox-pop__dialog"]},components:[he],behaviours:Be([ht.config({mode:"acyclic"}),Nt("pop-dialog-wrap-events",[br(function(Pe){e.shortcuts.add("ctrl+F9","focus statusbar",function(){return ht.focusIn(Pe)})}),vu(function(Pe){e.shortcuts.remove("ctrl+F9")})])])}},W=ia(function(){return aN(t,function(he){var Pe=U([he]);yt(y,ak,{forwardContents:z(Pe)})})}),re=function(he,Pe){return by(e,{buttons:he,toolbar:Pe.items,allowToolbarGroups:!1},a,p.some(["form:"]))},ne=function(he,Pe){return UP.buildInitGroups(he,Pe)},U=function(he){var Pe=e.ui.registry.getAll().buttons,ye=W(),se=L(L({},Pe),ye.formNavigators),De=Ap(e)===qi.scrolling?qi.scrolling:qi.default,et=ze(Se(he,function(me){return me.type==="contexttoolbar"?re(se,me):ne(me,c.providers)}));return my({type:De,uid:rt("context-toolbar"),initGroups:et,onEscape:p.none,cyclicKeying:!0,providers:c.providers})},Q=function(he,Pe){var ye=he==="node"?c.anchors.node(Pe):c.anchors.cursor(),se=ZP(e,he,l(),{lastElement:v.get,isReposition:function(){return Aa(d.get(),0)},getMode:function(){return fo.getMode(n)}});return fe(ye,se)},le=function(he,Pe){if($e.cancel(),!!T()){var ye=U(he),se=he[0].position,De=Q(se,Pe);g.set(se),d.set(1);var et=y.element;zn(et,"display"),k(Pe)||(Gr(et,CT),fo.reset(n,y)),Nn.showWithinBounds(y,z(ye),{anchor:De,transition:{classes:[CT],mode:"placement"}},function(){return p.some(S())}),Pe.fold(v.clear,v.set),D()&&_t(et,"display","none")}},$e=_x(function(){if(!(!e.hasFocus()||e.removed))if(Si(y.element,CT))$e.throttle();else{var he=W();rN(he,e).fold(H,function(Pe){le(Pe.toolbars,p.some(Pe.elem))})}},17);e.on("init",function(){e.on("remove",H),e.on("ScrollContent ScrollWindow ObjectResized ResizeEditor longpress",V),e.on("click keyup focus SetContent",$e.throttle),e.on(Y7,H),e.on(HP,function(he){var Pe=W();ct(Pe.lookupTable,he.toolbarKey).each(function(ye){le([ye],Fa(he.target!==e,he.target)),Nn.getContent(y).each(ht.focusIn)})}),e.on("focusout",function(he){hf.setEditorTimeout(e,function(){gu(n.element).isNone()&&gu(y.element).isNone()&&H()},0)}),e.on("SwitchMode",function(){e.mode.isReadOnly()&&H()}),e.on("AfterProgressState",function(he){he.state?H():e.hasFocus()&&$e.throttle()}),e.on("NodeChange",function(he){gu(y.element).fold($e.throttle,be)})})},uN=function(e){var t=[{name:"alignleft",text:"Align left",cmd:"JustifyLeft",icon:"align-left"},{name:"aligncenter",text:"Align center",cmd:"JustifyCenter",icon:"align-center"},{name:"alignright",text:"Align right",cmd:"JustifyRight",icon:"align-right"},{name:"alignjustify",text:"Justify",cmd:"JustifyFull",icon:"align-justify"}];Ke(t,function(n){e.ui.registry.addToggleButton(n.name,{tooltip:n.text,icon:n.icon,onAction:yu(e,n.cmd),onSetup:gy(e,n.name)})}),e.ui.registry.addButton("alignnone",{tooltip:"No alignment",icon:"align-none",onAction:yu(e,"JustifyNone")})},cN={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},sN=function(){var e="[0-9]+",t="[+-]?"+e,n="[eE]"+t,a="\\.",i=function(v){return"(?:"+v+")?"},c=["Infinity",e+a+i(e)+i(n),a+e+i(n),e+i(n)].join("|"),l="[+-]?(?:"+c+")";return new RegExp("^("+l+")(.*)$")}(),lN=function(e,t){return Hn(t,function(n){return Hn(cN[n],function(a){return e===a})})},fN=function(e,t){var n=p.from(sN.exec(e));return n.bind(function(a){var i=Number(a[1]),c=a[2];return lN(c,t)?p.some({value:i,unit:c}):p.none()})},vN=function(e,t){return fN(e,t).map(function(n){var a=n.value,i=n.unit;return a+i})},ik=function(e,t){var n=function(){var a=t.getOptions(e),i=t.getCurrent(e).map(t.hash),c=Fr();return Se(a,function(l){return{type:"togglemenuitem",text:t.display(l),onSetup:function(v){var d=function(y){y&&(c.on(function(S){return S.setActive(!1)}),c.set(v)),v.setActive(y)};d(Aa(i,t.hash(l)));var g=t.watcher(e,l,d);return function(){c.clear(),g()}},onAction:function(){return t.setCurrent(e,l)}}})};e.ui.registry.addMenuButton(t.name,{tooltip:t.text,icon:t.icon,fetch:function(a){return a(n())},onSetup:t.onToolbarSetup}),e.ui.registry.addNestedMenuItem(t.name,{type:"nestedmenuitem",text:t.text,getSubmenuItems:n,onSetup:t.onMenuSetup})},dN={name:"lineheight",text:"Line height",icon:"line-height",getOptions:tD,hash:function(e){return vN(e,["fixed","relative","empty"]).getOr(e)},display:je,watcher:function(e,t,n){return e.formatter.formatChanged("lineheight",n,!1,{value:t}).unbind},getCurrent:function(e){return p.from(e.queryCommandValue("LineHeight"))},setCurrent:function(e,t){return e.execCommand("LineHeight",!1,t)}},mN=function(e){var t=p.from(nD(e));return t.map(function(n){return{name:"language",text:"Language",icon:"language",getOptions:j(n),hash:function(a){return mn(a.customCode)?a.code:a.code+"/"+a.customCode},display:function(a){return a.title},watcher:function(a,i,c){return a.formatter.formatChanged("lang",c,!1,{value:i.code,customValue:i.customCode}).unbind},getCurrent:function(a){var i=$.fromDom(a.selection.getNode());return _l(i,function(c){return p.some(c).filter(Dn).bind(function(l){var v=ja(l,"lang");return v.map(function(d){var g=ja(l,"data-mce-lang").getOrUndefined();return{code:d,customCode:g,title:""}})})})},setCurrent:function(a,i){return a.execCommand("Lang",!1,i)},onToolbarSetup:function(a){var i=Xl();return a.setActive(e.formatter.match("lang",{},void 0,!0)),i.set(e.formatter.formatChanged("lang",a.setActive,!0)),i.clear}}})},gN=function(e){ik(e,dN),mN(e).each(function(t){return ik(e,t)})},hN=function(e,t){BL(e,t),LL(e,t),ZL(e,t),YL(e,t),qL(e,t)},pN=function(e){return hy(e,"NodeChange",function(t){t.setDisabled(!e.queryCommandState("outdent"))})},bN=function(e){e.ui.registry.addButton("outdent",{tooltip:"Decrease indent",icon:"outdent",onSetup:pN(e),onAction:yu(e,"outdent")}),e.ui.registry.addButton("indent",{tooltip:"Increase indent",icon:"indent",onAction:yu(e,"indent")})},yN=function(e){bN(e)},TT=function(e,t){return function(){e.execCommand("mceToggleFormat",!1,t)}},wN=function(e){xf.each([{name:"bold",text:"Bold",icon:"bold"},{name:"italic",text:"Italic",icon:"italic"},{name:"underline",text:"Underline",icon:"underline"},{name:"strikethrough",text:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",icon:"superscript"}],function(a,i){e.ui.registry.addToggleButton(a.name,{tooltip:a.text,icon:a.icon,onSetup:gy(e,a.name),onAction:TT(e,a.name)})});for(var t=1;t<=6;t++){var n="h"+t;e.ui.registry.addToggleButton(n,{text:n.toUpperCase(),tooltip:"Heading "+t,onSetup:gy(e,n),onAction:TT(e,n)})}},SN=function(e){xf.each([{name:"cut",text:"Cut",action:"Cut",icon:"cut"},{name:"copy",text:"Copy",action:"Copy",icon:"copy"},{name:"paste",text:"Paste",action:"Paste",icon:"paste"},{name:"help",text:"Help",action:"mceHelp",icon:"help"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all"},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"remove",text:"Remove",action:"Delete",icon:"remove"}],function(t){e.ui.registry.addButton(t.name,{tooltip:t.text,icon:t.icon,onAction:yu(e,t.action)})})},xN=function(e){xf.each([{name:"blockquote",text:"Blockquote",action:"mceBlockQuote",icon:"quote"}],function(t){e.ui.registry.addToggleButton(t.name,{tooltip:t.text,icon:t.icon,onAction:yu(e,t.action),onSetup:gy(e,t.name)})})},CN=function(e){wN(e),SN(e),xN(e)},TN=function(e){xf.each([{name:"bold",text:"Bold",action:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",action:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",action:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",action:"Strikethrough",icon:"strike-through",shortcut:""},{name:"subscript",text:"Subscript",action:"Subscript",icon:"subscript",shortcut:""},{name:"superscript",text:"Superscript",action:"Superscript",icon:"superscript",shortcut:""},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting",shortcut:""},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document",shortcut:""},{name:"cut",text:"Cut",action:"Cut",icon:"cut",shortcut:"Meta+X"},{name:"copy",text:"Copy",action:"Copy",icon:"copy",shortcut:"Meta+C"},{name:"paste",text:"Paste",action:"Paste",icon:"paste",shortcut:"Meta+V"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A"}],function(t){e.ui.registry.addMenuItem(t.name,{text:t.text,icon:t.icon,shortcut:t.shortcut,onAction:yu(e,t.action)})}),e.ui.registry.addMenuItem("codeformat",{text:"Code",icon:"sourcecode",onAction:TT(e,"code")})},ON=function(e){CN(e),TN(e)},Sy=function(e,t){return hy(e,"Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",function(n){n.setDisabled(e.mode.isReadOnly()||!e.undoManager[t]())})},kN=function(e){e.ui.registry.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onSetup:Sy(e,"hasUndo"),onAction:yu(e,"undo")}),e.ui.registry.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onSetup:Sy(e,"hasRedo"),onAction:yu(e,"redo")})},AN=function(e){e.ui.registry.addButton("undo",{tooltip:"Undo",icon:"undo",disabled:!0,onSetup:Sy(e,"hasUndo"),onAction:yu(e,"undo")}),e.ui.registry.addButton("redo",{tooltip:"Redo",icon:"redo",disabled:!0,onSetup:Sy(e,"hasRedo"),onAction:yu(e,"redo")})},MN=function(e){kN(e),AN(e)},EN=function(e){return hy(e,"VisualAid",function(t){t.setActive(e.hasVisual)})},DN=function(e){e.ui.registry.addToggleMenuItem("visualaid",{text:"Visual aids",onSetup:EN(e),onAction:yu(e,"mceToggleVisualAid")})},_N=function(e){e.ui.registry.addButton("visualaid",{tooltip:"Visual aids",text:"Visual aids",onAction:yu(e,"mceToggleVisualAid")})},zN=function(e){_N(e),DN(e)},RN=function(e,t){uN(e),ON(e),hN(e,t),MN(e),l_(e),zN(e),yN(e),gN(e)},Kp=function(e,t){return{type:"makeshift",x:e,y:t}},BN=function(e,t,n){return Kp(e.x+t,e.y+n)},uk=function(e){return e.type==="longpress"||e.type.indexOf("touch")===0},FN=function(e){if(uk(e)){var t=e.touches[0];return Kp(t.pageX,t.pageY)}else return Kp(e.pageX,e.pageY)},HN=function(e){if(uk(e)){var t=e.touches[0];return Kp(t.clientX,t.clientY)}else return Kp(e.clientX,e.clientY)},IN=function(e,t){var n=kp.DOM.getPos(e);return BN(t,n.x,n.y)},$N=function(e,t){return t.type==="contextmenu"||t.type==="longpress"?e.inline?FN(t):IN(e.getContentAreaContainer(),HN(t)):ck(e)},ck=function(e){return{type:"selection",root:$.fromDom(e.selection.getNode())}},LN=function(e){return{type:"node",node:p.some($.fromDom(e.selection.getNode())),root:$.fromDom(e.getBody())}},sk=function(e,t,n){switch(n){case"node":return LN(e);case"point":return $N(e,t);case"selection":return ck(e)}},PN=function(e,t,n,a,i,c){var l=n(),v=sk(e,t,c);Hm(l,_c.CLOSE_ON_EXECUTE,a,!1).map(function(d){t.preventDefault(),Nn.showMenuAt(i,{anchor:v},{menu:{markers:Tm("normal")},data:d})})},NN={onLtr:function(){return[Pa,La,la,co,ko,Lo,bu,gf,xv,mf,Sv,xm]},onRtl:function(){return[Pa,la,La,ko,co,Lo,bu,gf,Sv,xm,xv,mf]}},VN=12,UN={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"]},WN=function(e,t){var n=e.selection;if(n.isCollapsed()||t.touches.length<1)return!1;var a=t.touches[0],i=n.getRng(),c=B0(e.getWin(),Ql.domRange(i));return c.exists(function(l){return l.left<=a.clientX&&l.right>=a.clientX&&l.top<=a.clientY&&l.bottom>=a.clientY})},jN=function(e){var t=e.selection.getRng(),n=function(){hf.setEditorTimeout(e,function(){e.selection.setRng(t)},10),c()};e.once("touchend",n);var a=function(l){l.preventDefault(),l.stopImmediatePropagation()};e.on("mousedown",a,!0);var i=function(){return c()};e.once("longpresscancel",i);var c=function(){e.off("touchend",n),e.off("longpresscancel",i),e.off("mousedown",a)}},GN=function(e,t,n){var a=sk(e,t,n),i=n==="point"?VN:0;return L({bubble:Ys(0,i,UN),layouts:NN,overrides:{maxWidthFunction:sT(),maxHeightFunction:Jl()}},a)},qN=function(e,t,n,a,i,c,l){var v=GN(e,t,c);Hm(n,_c.CLOSE_ON_EXECUTE,a,!0).map(function(d){t.preventDefault(),Nn.showMenuWithinBounds(i,{anchor:v},{menu:{markers:Tm("normal"),highlightImmediately:l},data:d,type:"horizontal"},function(){return p.some(ek(e,a.shared,c==="node"?"node":"selection"))}),e.fire(Y7)})},KN=function(e,t,n,a,i,c){var l=Ha(),v=l.os.isiOS(),d=l.os.isOSX(),g=l.os.isAndroid(),y=l.deviceType.isTouch(),S=function(){return!(g||v||d&&y)},T=function(){var D=n();qN(e,t,D,a,i,c,S())};if((d||v)&&c!=="node"){var k=function(){jN(e),T()};WN(e,t)?k():(e.once("selectionchange",k),e.once("touchend",function(){return e.off("selectionchange",k)}))}else T()},lk=function(e){return typeof e=="string"?e.split(/[ ,]/):e},fk=function(e){return e.getParam("contextmenu_never_use_native",!1,"boolean")},XN=function(e,t,n){var a=e.ui.registry.getAll().contextMenus;return p.from(e.getParam(t)).map(lk).getOrThunk(function(){return Ce(lk(n),function(i){return pn(a,i)})})},YN=function(e){return e.getParam("contextmenu")===!1},JN=function(e){return XN(e,"contextmenu","link linkchecker image imagetools table spellchecker configurepermanentpen")},ZN=function(e){return e.getParam("contextmenu_avoid_overlap","","string")},vk=function(e){return dt(e)?e==="|":e.type==="separator"},OT={type:"separator"},dk=function(e){var t=function(n){return{text:n.text,icon:n.icon,disabled:n.disabled,shortcut:n.shortcut}};if(dt(e))return e;switch(e.type){case"separator":return OT;case"submenu":return L(L({type:"nestedmenuitem"},t(e)),{getSubmenuItems:function(){var n=e.getSubmenuItems();return dt(n)?n:Se(n,dk)}});default:return L(L({type:"menuitem"},t(e)),{onAction:en(e.onAction)})}},mk=function(e,t){if(t.length===0)return e;var n=Cr(e).filter(function(i){return!vk(i)}),a=n.fold(function(){return[]},function(i){return[OT]});return e.concat(a).concat(t).concat([OT])},QN=function(e,t,n){var a=ce(t,function(i,c){return ct(e,c.toLowerCase()).map(function(l){var v=l.update(n);if(dt(v))return mk(i,v.split(" "));if(v.length>0){var d=Se(v,dk);return mk(i,d)}else return i}).getOrThunk(function(){return i.concat([c])})},[]);return a.length>0&&vk(a[a.length-1])&&a.pop(),a},eV=function(e,t){return t.ctrlKey&&!fk(e)},gk=function(e,t){return t.type!=="longpress"&&(t.button!==2||t.target===e.getBody()&&t.pointerType==="")},hk=function(e,t){return gk(e,t)?e.selection.getStart(!0):t.target},tV=function(e,t){var n=ZN(e),a=gk(e,t)?"selection":"point";if(_o(n)){var i=hk(e,t),c=Fp($.fromDom(i),n);return c?"node":a}else return a},nV=function(e,t,n){var a=Ha(),i=a.deviceType.isTouch,c=ea(Nn.sketch({dom:{tag:"div"},lazySink:t,onEscape:function(){return e.focus()},onShow:function(){return n.setContextMenuState(!0)},onHide:function(){return n.setContextMenuState(!1)},fireDismissalEventInstead:{},inlineBehaviours:Be([Nt("dismissContextMenu",[we(Rs(),function(d,g){fn.close(d),e.focus()})])])})),l=function(d){return Nn.hide(c)},v=function(d){if(fk(e)&&d.preventDefault(),!(eV(e,d)||YN(e))){var g=tV(e,d),y=function(){var T=hk(e,d),k=e.ui.registry.getAll(),D=JN(e);return QN(k.contextMenus,D,T)},S=i()?KN:PN;S(e,d,y,n,c,g)}};e.on("init",function(){var d="ResizeEditor ScrollContent ScrollWindow longpresscancel"+(i()?"":" ResizeWindow");e.on(d,l),e.on("longpress contextmenu",v)})},kT=ri.generate([{offset:["x","y"]},{absolute:["x","y"]},{fixed:["x","y"]}]),xy=function(e){return function(t){return t.translate(-e.left,-e.top)}},Cy=function(e){return function(t){return t.translate(e.left,e.top)}},vl=function(e){return function(t,n){return ce(e,function(a,i){return i(a)},Yn(t,n))}},Ty=function(e,t,n){return e.fold(vl([Cy(n),xy(t)]),vl([xy(t)]),vl([]))},Um=function(e,t,n){return e.fold(vl([Cy(n)]),vl([]),vl([Cy(t)]))},pk=function(e,t,n){return e.fold(vl([]),vl([xy(n)]),vl([Cy(t),xy(n)]))},rV=function(e,t,n,a,i,c){var l=Um(e,i,c),v=Um(t,i,c);return Math.abs(l.left-v.left)<=n&&Math.abs(l.top-v.top)<=a},aV=function(e,t,n,a,i,c){var l=Um(e,i,c),v=Um(t,i,c),d=Math.abs(l.left-v.left),g=Math.abs(l.top-v.top);return Yn(d,g)},bk=function(e,t,n){var a=e.fold(function(i,c){return{position:p.some("absolute"),left:p.some(i+"px"),top:p.some(c+"px")}},function(i,c){return{position:p.some("absolute"),left:p.some(i-n.left+"px"),top:p.some(c-n.top+"px")}},function(i,c){return{position:p.some("fixed"),left:p.some(i+"px"),top:p.some(c+"px")}});return L({right:p.none(),bottom:p.none()},a)},oV=function(e,t,n){return e.fold(function(a,i){return Oy(a+t,i+n)},function(a,i){return Tf(a+t,i+n)},function(a,i){return Hv(a+t,i+n)})},AT=function(e,t,n,a){var i=function(c,l){return function(v,d){var g=c(t,n,a);return l(v.getOr(g.left),d.getOr(g.top))}};return e.fold(i(pk,Oy),i(Um,Tf),i(Ty,Hv))},Oy=kT.offset,Tf=kT.absolute,Hv=kT.fixed,yk=function(e,t){var n=pa(e,t);return mn(n)?NaN:parseInt(n,10)},iV=function(e,t){var n=e.element,a=yk(n,t.leftAttr),i=yk(n,t.topAttr);return isNaN(a)||isNaN(i)?p.none():p.some(Yn(a,i))},uV=function(e,t,n){var a=e.element;Vt(a,t.leftAttr,n.left+"px"),Vt(a,t.topAttr,n.top+"px")},cV=function(e,t){var n=e.element;ba(n,t.leftAttr),ba(n,t.topAttr)},sV=function(e,t,n,a){return iV(e,t).fold(function(){return n},function(i){return Hv(i.left+a.left,i.top+a.top)})},lV=function(e,t,n,a,i,c){var l=sV(e,t,n,a),v=t.mustSnap?vV(e,t,l,i,c):dV(e,t,l,i,c),d=Ty(l,i,c);return uV(e,t,d),v.fold(function(){return{coord:Hv(d.left,d.top),extra:p.none()}},function(g){return{coord:g.output,extra:g.extra}})},fV=function(e,t){cV(e,t)},wk=function(e,t,n,a){return qn(e,function(i){var c=i.sensor,l=rV(t,c,i.range.left,i.range.top,n,a);return l?p.some({output:AT(i.output,t,n,a),extra:i.extra}):p.none()})},vV=function(e,t,n,a,i){var c=t.getSnapPoints(e),l=wk(c,n,a,i);return l.orThunk(function(){var v=ce(c,function(d,g){var y=g.sensor,S=aV(n,y,g.range.left,g.range.top,a,i);return d.deltas.fold(function(){return{deltas:p.some(S),snap:p.some(g)}},function(T){var k=(S.left+S.top)/2,D=(T.left+T.top)/2;return k<=D?{deltas:p.some(S),snap:p.some(g)}:d})},{deltas:p.none(),snap:p.none()});return v.snap.map(function(d){return{output:AT(d.output,n,a,i),extra:d.extra}})})},dV=function(e,t,n,a,i){var c=t.getSnapPoints(e);return wk(c,n,a,i)},mV=function(e,t,n){return{coord:AT(e.output,e.output,t,n),extra:e.extra}},gV=function(e,t,n,a){var i=t.getTarget(e.element);if(t.repositionTarget){var c=Br(e.element),l=Zo(c),v=GO(i),d=mV(a,l,v),g=bk(d.coord,l,v);Ar(i,g)}},hV=Object.freeze({__proto__:null,snapTo:gV}),MT="data-initial-z-index",pV=function(e){Or(e.element).filter(Dn).each(function(t){ja(t,MT).fold(function(){return zn(t,"z-index")},function(n){return _t(t,"z-index",n)}),ba(t,MT)})},bV=function(e){Or(e.element).filter(Dn).each(function(t){Lr(t,"z-index").each(function(n){Vt(t,MT,n)}),_t(t,"z-index",Ga(e.element,"z-index"))})},Sk=function(e,t){e.getSystem().addToGui(t),bV(t)},yV=function(e){pV(e),e.getSystem().removeFromGui(e)},xk=function(e,t,n){return e.getSystem().build(ho.sketch({dom:{styles:{left:"0px",top:"0px",width:"100%",height:"100%",position:"fixed","z-index":"1000000000000000"},classes:[t]},events:n}))},wV=$o("snaps",[de("getSnapPoints"),An("onSensor"),de("leftAttr"),de("topAttr"),K("lazyViewport",Xa),K("mustSnap",!1)]),ET=[K("useFixed",Le),de("blockerClass"),K("getTarget",je),K("onDrag",be),K("repositionTarget",!0),K("onDrop",be),pr("getBounds",Xa),wV],SV=function(e){return Zi(Lr(e,"left"),Lr(e,"top"),Lr(e,"position"),function(t,n,a){var i=a==="fixed"?Hv:Oy;return i(parseInt(t,10),parseInt(n,10))}).getOrThunk(function(){var t=cu(e);return Tf(t.left,t.top)})},xV=function(e,t,n,a,i){var c=i.bounds,l=Um(t,n,a),v=Ti(l.left,c.x,c.x+c.width-i.width),d=Ti(l.top,c.y,c.y+c.height-i.height),g=Tf(v,d);return t.fold(function(){var y=pk(g,n,a);return Oy(y.left,y.top)},j(g),function(){var y=Ty(g,n,a);return Hv(y.left,y.top)})},CV=function(e,t,n,a,i,c,l){var v=t.fold(function(){var d=oV(n,c.left,c.top),g=Ty(d,a,i);return Hv(g.left,g.top)},function(d){var g=lV(e,d,n,c,a,i);return g.extra.each(function(y){d.onSensor(e,y)}),g.coord});return xV(e,v,a,i,l)},TV=function(e,t,n,a){var i=t.getTarget(e.element);if(t.repositionTarget){var c=Br(e.element),l=Zo(c),v=GO(i),d=SV(i),g=CV(e,t.snaps,d,l,v,a,n),y=bk(g,l,v);Ar(i,y)}t.onDrag(e,i,a)},Ck=function(e,t){return{bounds:e.getBounds(),height:bi(t.element),width:io(t.element)}},DT=function(e,t,n,a,i){var c=n.update(a,i),l=n.getStartData().getOrThunk(function(){return Ck(t,e)});c.each(function(v){TV(e,t,l,v)})},Tk=function(e,t,n,a){t.each(yV),n.snaps.each(function(c){fV(e,c)});var i=n.getTarget(e.element);a.reset(),n.onDrop(e,i)},_T=function(e){return function(t,n){var a=function(i){n.setStartData(Ck(t,i))};return rr(He([we(pg(),function(i){n.getStartData().each(function(){return a(i)})})],e(t,n,a),!0))}},OV=function(e){return rr([we(Ni(),e.forceDrop),we(dg(),e.drop),we(cd(),function(t,n){e.move(n.event)}),we(vg(),e.delayDrop)])},kV=function(e){return p.from(Yn(e.x,e.y))},AV=function(e,t){return Yn(t.left-e.left,t.top-e.top)},MV=Object.freeze({__proto__:null,getData:kV,getDelta:AV}),Ok=function(e,t,n){return[we(Ni(),function(a,i){var c=i.event.raw;if(c.button===0){i.stop();var l=function(){return Tk(a,p.some(g),e,t)},v=_5(l,200),d={drop:l,delayDrop:v.schedule,forceDrop:l,move:function(S){v.cancel(),DT(a,e,t,MV,S)}},g=xk(a,e.blockerClass,OV(d)),y=function(){n(a),Sk(a,g)};y()}})]},EV=He(He([],ET,!0),[Jn("dragger",{handlers:_T(Ok)})],!1),DV=function(e){return rr([we(Hu(),e.forceDrop),we(Yc(),e.drop),we(v1(),e.drop),we(Rl(),function(t,n){e.move(n.event)})])},_V=function(e){var t=e[0];return p.some(Yn(t.clientX,t.clientY))},zV=function(e){var t=e.raw,n=t.touches;return n.length===1?_V(n):p.none()},RV=function(e,t){return Yn(t.left-e.left,t.top-e.top)},kk=Object.freeze({__proto__:null,getData:zV,getDelta:RV}),Ak=function(e,t,n){var a=Fr(),i=function(c){Tk(c,a.get(),e,t),a.clear()};return[we(Hu(),function(c,l){l.stop();var v=function(){return i(c)},d={drop:v,delayDrop:be,forceDrop:v,move:function(S){DT(c,e,t,kk,S)}},g=xk(c,e.blockerClass,DV(d));a.set(g);var y=function(){n(c),Sk(c,g)};y()}),we(Rl(),function(c,l){l.stop(),DT(c,e,t,kk,l.event)}),we(Yc(),function(c,l){l.stop(),i(c)}),we(v1(),i)]},BV=He(He([],ET,!0),[Jn("dragger",{handlers:_T(Ak)})],!1),FV=function(e,t,n){return He(He([],Ok(e,t,n),!0),Ak(e,t,n),!0)},HV=He(He([],ET,!0),[Jn("dragger",{handlers:_T(FV)})],!1),IV=EV,$V=BV,LV=HV,PV=Object.freeze({__proto__:null,mouse:IV,touch:$V,mouseOrTouch:LV}),NV=function(){var e=p.none(),t=p.none(),n=function(){e=p.none(),t=p.none()},a=function(d,g){var y=e.map(function(S){return d.getDelta(S,g)});return e=p.some(g),y},i=function(d,g){return d.getData(g).bind(function(y){return a(d,y)})},c=function(d){t=p.some(d)},l=function(){return t},v=j({});return Ja({readState:v,reset:n,update:i,getStartData:l,setStartData:c})},VV=Object.freeze({__proto__:null,init:NV}),Iv=Yg({branchKey:"mode",branches:PV,name:"dragging",active:{events:function(e,t){var n=e.dragger;return n.handlers(e,t)}},extra:{snap:function(e){return{sensor:e.sensor,range:e.range,output:e.output,extra:p.from(e.extra)}}},state:VV,apis:hV}),zT=40,ky=zT/2,Mk=function(e,t,n,a,i,c){return e.fold(function(){return Iv.snap({sensor:Tf(n-ky,a-ky),range:Yn(i,c),output:Tf(p.some(n),p.some(a)),extra:{td:t}})},function(l){var v=n-ky,d=a-ky,g=zT,y=zT,S=l.element.dom.getBoundingClientRect();return Iv.snap({sensor:Tf(v,d),range:Yn(g,y),output:Tf(p.some(n-S.width/2),p.some(a-S.height/2)),extra:{td:t}})})},Ek=function(e,t,n){var a=function(i,c){return i.exists(function(l){return Wn(l,c)})};return{getSnapPoints:e,leftAttr:"data-drag-left",topAttr:"data-drag-top",onSensor:function(i,c){var l=c.td;a(t.get(),l)||(t.set(l),n(l))},mustSnap:!0}},Dk=function(e){return Ln(Vo.sketch({dom:{tag:"div",classes:["tox-selector"]},buttonBehaviours:Be([Iv.config({mode:"mouseOrTouch",blockerClass:"blocker",snaps:e}),Np.config({})]),eventOrder:{mousedown:["dragging","alloy.base.behaviour"],touchstart:["dragging","alloy.base.behaviour"]}}))},UV=function(e,t){var n=bt([]),a=bt([]),i=bt(!1),c=Fr(),l=Fr(),v=function(le){var $e=vc(le);return Mk(k.getOpt(t),le,$e.x,$e.y,$e.width,$e.height)},d=function(){return Se(n.get(),function(le){return v(le)})},g=function(le){var $e=vc(le);return Mk(D.getOpt(t),le,$e.right,$e.bottom,$e.width,$e.height)},y=function(){return Se(a.get(),function(le){return g(le)})},S=Ek(d,c,function(le){l.get().each(function($e){e.fire("TableSelectorChange",{start:le,finish:$e})})}),T=Ek(y,l,function(le){c.get().each(function($e){e.fire("TableSelectorChange",{start:$e,finish:le})})}),k=Dk(S),D=Dk(T),H=ea(k.asSpec()),V=ea(D.asSpec()),z=function(le,$e,he,Pe){var ye=$e.dom.getBoundingClientRect();zn(le.element,"display");var se=ic($.fromDom(e.getBody())).dom.innerHeight,De=he(ye),et=Pe(ye,se);(De||et)&&_t(le.element,"display","none")},W=function(le,$e,he,Pe){var ye=he($e);Iv.snapTo(le,ye);var se=function(et){return et[Pe]<0},De=function(et,me){return et[Pe]>me};z(le,$e,se,De)},re=function(le){return W(H,le,v,"top")},ne=function(){return c.get().each(re)},U=function(le){return W(V,le,g,"bottom")},Q=function(){return l.get().each(U)};Ha().deviceType.isTouch()&&(e.on("TableSelectionChange",function(le){i.get()||(Zs(t,H),Zs(t,V),i.set(!0)),c.set(le.start),l.set(le.finish),le.otherCells.each(function($e){n.set($e.upOrLeftCells),a.set($e.downOrRightCells),re(le.start),U(le.finish)})}),e.on("ResizeEditor ResizeWindow ScrollContent",function(){ne(),Q()}),e.on("TableSelectionClear",function(){i.get()&&(as(H),as(V),i.set(!1)),c.clear(),l.clear()}))},WV=function(e){return!!(e.nodeType===1&&(e.nodeName==="BR"||e.getAttribute("data-mce-bogus")||e.getAttribute("data-mce-type")==="bookmark"))},jV=function(e,t,n){t.delimiter||(t.delimiter="");var a=function(c){var l=c||[],v=Se(l,function(g,y){return Vo.sketch({dom:{tag:"div",classes:["tox-statusbar__path-item"],attributes:{role:"button","data-index":y,"tab-index":-1,"aria-level":y+1},innerHtml:g.name},action:function(S){e.focus(),e.selection.select(g.element),e.nodeChanged()},buttonBehaviours:Be([Xu.button(n.isDisabled),da()])})}),d={dom:{tag:"div",classes:["tox-statusbar__path-divider"],attributes:{"aria-hidden":!0},innerHtml:" "+t.delimiter+" "}};return ce(v.slice(1),function(g,y){var S=g;return S.push(d),S.push(y),S},[v[0]])},i=function(c){for(var l=[],v=c.length;v-- >0;){var d=c[v];if(d.nodeType===1&&!WV(d)){var g=e.fire("ResolveName",{name:d.nodeName.toLowerCase(),target:d});if(g.isDefaultPrevented()||l.push({name:g.name,element:d}),g.isPropagationStopped())break}}return l};return{dom:{tag:"div",classes:["tox-statusbar__path"],attributes:{role:"navigation"}},behaviours:Be([ht.config({mode:"flow",selector:"div[role=button]"}),lt.config({disabled:n.isDisabled}),da(),Ur.config({}),zt.config({}),Nt("elementPathEvents",[br(function(c,l){e.shortcuts.add("alt+F11","focus statusbar elementpath",function(){return ht.focusIn(c)}),e.on("NodeChange",function(v){var d=i(v.parents);d.length>0?zt.set(c,a(d)):zt.set(c,[])})})])]),components:[]}},$v;(function(e){e[e.None=0]="None",e[e.Both=1]="Both",e[e.Vertical=2]="Vertical"})($v||($v={}));var GV=function(e,t,n,a,i){var c={};return c.height=yy(a+t.top,$6(e),L6(e)),n===$v.Both&&(c.width=yy(i+t.left,I6(e),Gx(e))),c},_k=function(e,t,n){var a=$.fromDom(e.getContainer()),i=GV(e,t,n,Jr(a),$a(a));sr(i,function(c,l){return _t(a,l,bT(c))}),KD(e)},qV=function(e){var t=!e.hasPlugin("autoresize"),n=e.getParam("resize",t);return n===!1?$v.None:n==="both"?$v.Both:$v.Vertical},Ay=function(e,t,n,a){var i=20,c=Yn(n*i,a*i);return _k(e,c,t),p.some(!0)},KV=function(e,t){var n=qV(e);return n===$v.None?p.none():p.some(Dc("resize-handle",{tag:"div",classes:["tox-statusbar__resize-handle"],attributes:{title:t.translate("Resize")},behaviours:[Iv.config({mode:"mouse",repositionTarget:!1,onDrag:function(a,i,c){return _k(e,c,n)},blockerClass:"tox-blocker"}),ht.config({mode:"special",onLeft:function(){return Ay(e,n,-1,0)},onRight:function(){return Ay(e,n,1,0)},onUp:function(){return Ay(e,n,0,-1)},onDown:function(){return Ay(e,n,0,1)}}),Ur.config({}),Ot.config({})]},t.icons))},XV=function(e,t){var n,a=function(i,c,l){return zt.set(i,[es(t.translate(["{0} "+l,c[l]]))])};return Vo.sketch({dom:{tag:"button",classes:["tox-statusbar__wordcount"]},components:[],buttonBehaviours:Be([Xu.button(t.isDisabled),da(),Ur.config({}),zt.config({}),Ve.config({store:{mode:"memory",initialValue:{mode:"words",count:{words:0,characters:0}}}}),Nt("wordcount-events",[du(function(i){var c=Ve.getValue(i),l=c.mode==="words"?"characters":"words";Ve.setValue(i,{mode:l,count:c.count}),a(i,c.count,l)}),br(function(i){e.on("wordCountUpdate",function(c){var l=Ve.getValue(i).mode;Ve.setValue(i,{mode:l,count:c.wordCount}),a(i,c.wordCount,l)})})])]),eventOrder:(n={},n[ai()]=["disabling","alloy.base.behaviour","wordcount-events"],n)})},YV=function(e,t){var n=function(){var c=Ec.translate(["Powered by {0}","Tiny"]),l='<a href="https://www.tiny.cloud/?utm_campaign=editor_referral&amp;utm_medium=poweredby&amp;utm_source=tinymce&amp;utm_content=v5" rel="noopener" target="_blank" tabindex="-1" aria-label="'+c+'">'+c+"</a>";return{dom:{tag:"span",classes:["tox-statusbar__branding"],innerHtml:l}}},a=function(){var c=[];return e.getParam("elementpath",!0,"boolean")&&c.push(jV(e,{},t)),e.hasPlugin("wordcount")&&c.push(XV(e,t)),e.getParam("branding",!0,"boolean")&&c.push(n()),c.length>0?[{dom:{tag:"div",classes:["tox-statusbar__text-container"]},components:c}]:[]},i=function(){var c=a(),l=KV(e,t);return c.concat(l.toArray())};return{dom:{tag:"div",classes:["tox-statusbar"]},components:i()}},JV=function(e){var t,n=e.inline,a=n?FP:MP,i=N2(e)?GI:bI,c=p.none(),l=Ha(),v=l.browser.isIE(),d=v?["tox-platform-ie"]:[],g=l.deviceType.isTouch(),y="tox-platform-touch",S=g?[y]:[],T=V6(e),k=W6(e),D=Ec.isRtl()?{attributes:{dir:"rtl"}}:{},H={attributes:(t={},t[zd]=T?xc.BottomToTop:xc.TopToBottom,t)},V=function(){return c.bind(Hr.getHeader)},z=function(){return i.isDocked(V)},W=function(){_t(eo.element,"width",document.body.clientWidth+"px")},re=function(){var oa=Wn(Yo(),k)&&Ga(k,"display")==="grid",Hc={dom:L({tag:"div",classes:["tox","tox-silver-sink","tox-tinymce-aux"].concat(d).concat(S)},D),behaviours:Be([fo.config({useFixed:function(){return z()}})])},ys={dom:{styles:{width:document.body.clientWidth+"px"}},events:rr([we(zs(),W)])};return fe(Hc,oa?ys:{})},ne=ea(re()),U=function(){return Ut.value(ne)},Q=Ln({dom:{tag:"div",classes:["tox-anchorbar"]}}),le=function(){return c.bind(function(oa){return Q.getOpt(oa)}).getOrDie("Could not find a anchor bar element")},$e=function(){return c.bind(function(oa){return Hr.getToolbar(oa)}).getOrDie("Could not find more toolbar element")},he=function(){return c.bind(function(oa){return Hr.getThrobber(oa)}).getOrDie("Could not find throbber element")},Pe=oI(ne,e,le),ye=Hr.parts.menubar({dom:{tag:"div",classes:["tox-menubar"]},backstage:Pe,onEscape:function(){e.focus()}}),se=Ap(e),De=Hr.parts.toolbar(L({dom:{tag:"div",classes:["tox-toolbar"]},getSink:U,providers:Pe.shared.providers,onEscape:function(){e.focus()},type:se,lazyToolbar:$e,lazyHeader:function(){return V().getOrDie("Could not find header element")}},H)),et=Hr.parts["multiple-toolbar"]({dom:{tag:"div",classes:["tox-toolbar-overlord"]},providers:Pe.shared.providers,onEscape:function(){e.focus()},type:se}),me=Hr.parts.socket({dom:{tag:"div",classes:["tox-edit-area"]}}),Je=Hr.parts.sidebar({dom:{tag:"div",classes:["tox-sidebar"]}}),at=Hr.parts.throbber({dom:{tag:"div",classes:["tox-throbber"]},backstage:Pe}),Jt=e.getParam("statusbar",!0,"boolean"),En=Jt&&!n?p.some(YV(e,Pe.shared.providers)):p.none(),ar={dom:{tag:"div",classes:["tox-sidebar-wrap"]},components:[me,Je]},dr=L2(e),Uo=Kx(e),Na=qx(e),jm=function(){return dr?[et]:Uo?[De]:[]},aa=Hr.parts.header({dom:L({tag:"div",classes:["tox-editor-header"]},H),components:ze([Na?[ye]:[],jm(),P2(e)?[]:[Q.asSpec()]]),sticky:N2(e),editor:e,sharedBackstage:Pe.shared}),dl=ze([T?[]:[aa],n?[]:[ar],T?[aa]:[]]),ml={dom:{tag:"div",classes:["tox-editor-container"]},components:dl},Lv=ze([[ml],n?[]:En.toArray(),[at]]),gl=j6(e),Pv=L(L({role:"application"},Ec.isRtl()?{dir:"rtl"}:{}),gl?{"aria-hidden":"true"}:{}),bo=ea(Hr.sketch({dom:{tag:"div",classes:["tox","tox-tinymce"].concat(n?["tox-tinymce-inline"]:[]).concat(T?["tox-tinymce--toolbar-bottom"]:[]).concat(S).concat(d),styles:L({visibility:"hidden"},gl?{opacity:"0",border:"0"}:{}),attributes:Pv},components:Lv,behaviours:Be([da(),lt.config({disableClass:"tox-tinymce--disabled"}),ht.config({mode:"cyclic",selector:".tox-menubar, .tox-toolbar, .tox-toolbar__primary, .tox-toolbar__overflow--open, .tox-sidebar__overflow--open, .tox-statusbar__path, .tox-statusbar__wordcount, .tox-statusbar__branding a, .tox-statusbar__resize-handle"})])}));c=p.some(bo),e.shortcuts.add("alt+F9","focus menubar",function(){Hr.focusMenubar(bo)}),e.shortcuts.add("alt+F10","focus toolbar",function(){Hr.focusToolbar(bo)}),e.addCommand("ToggleToolbarDrawer",function(){Hr.toggleToolbarDrawer(bo)}),e.addQueryStateHandler("ToggleToolbarDrawer",function(){return Hr.isToolbarDrawerToggled(bo)});var wu=L5(bo),eo=L5(ne);iI(e,wu,eo);var Nv=function(){var oa={broadcastAll:eo.broadcast,broadcastOn:eo.broadcastOn,register:be};return{channels:oa}},bs=function(){var oa=bT(DP(e)),Hc=bT(_P(e));return e.inline||(Eu("div","width",Hc)&&_t(bo.element,"width",Hc),Eu("div","height",oa)?_t(bo.element,"height",oa):_t(bo.element,"height","200px")),oa},Of=function(){i.setup(e,Pe.shared,V),RN(e,Pe),nV(e,U,Pe),C$(e),U$(e,he,Pe.shared),Qn(aD(e),function(to,Wo){e.ui.registry.addGroupToolbarButton(Wo,to)});var oa=e.ui.registry.getAll(),Hc=oa.buttons,ys=oa.menuItems,hl=oa.contextToolbars,Su=oa.sidebars,ws=P6(e),Ue={menuItems:ys,menus:lD(e),menubar:fD(e),toolbar:ws.getOrThunk(function(){return vD(e)}),allowToolbarGroups:se===qi.floating,buttons:Hc,sidebar:Su};iN(e,hl,ne,{backstage:Pe}),UV(e,ne);var Pt=e.getElement(),Bn=bs(),fr={mothership:wu,uiMothership:eo,outerContainer:bo},yo={targetNode:Pt,height:Bn};return a.render(e,fr,Ue,Pe,yo)};return{mothership:wu,uiMothership:eo,backstage:Pe,renderUI:Of,getUi:Nv}},ZV=function(e,t){var n=p.from(pa(e,"id")).fold(function(){var a=rt("dialog-describe");return Vt(t,"id",a),a},je);Vt(e,"aria-describedby",n)},QV=function(e,t){var n=ja(e,"id").fold(function(){var a=rt("dialog-label");return Vt(t,"id",a),a},je);Vt(e,"aria-labelledby",n)},eU=j([de("lazySink"),kn("dragBlockClass"),pr("getBounds",Xa),K("useTabstopAt",qe),K("eventOrder",{}),va("modalBehaviours",[ht]),na("onExecute"),Bg("onEscape")]),RT={sketch:je},tU=j([ji({name:"draghandle",overrides:function(e,t){return{behaviours:Be([Iv.config({mode:"mouse",getTarget:function(n){return bd(n,'[role="dialog"]').getOr(n)},blockerClass:e.dragBlockClass.getOrDie(new Error(`The drag blocker class was not specified for a dialog with a drag handle: 
`+JSON.stringify(t,null,2)).message),getBounds:e.getDragBounds})])}}}),za({schema:[de("dom")],name:"title"}),za({factory:RT,schema:[de("dom")],name:"close"}),za({factory:RT,schema:[de("dom")],name:"body"}),ji({factory:RT,schema:[de("dom")],name:"footer"}),ci({factory:{sketch:function(e,t){return L(L({},e),{dom:t.dom,components:t.components})}},schema:[K("dom",{tag:"div",styles:{position:"fixed",left:"0px",top:"0px",right:"0px",bottom:"0px"}}),K("components",[])],name:"blocker"})]),nU=function(e,t,n,a){var i,c=Fr(),l=function(D){c.set(D);var H=e.lazySink(D).getOrDie(),V=a.blocker(),z=H.getSystem().build(L(L({},V),{components:V.components.concat([xi(D)]),behaviours:Be([Ot.config({}),Nt("dialog-blocker-events",[Ll(wi(),function(){ht.focusIn(D)})])])}));Zs(H,z),ht.focusIn(D)},v=function(D){c.clear(),Or(D.element).each(function(H){D.getSystem().getByDom(H).each(function(V){as(V)})})},d=function(D){return ju(D,e,"body")},g=function(D){return ju(D,e,"footer")},y=function(D,H){fl.block(D,H)},S=function(D){fl.unblock(D)},T=rt("modal-events"),k=L(L({},e.eventOrder),(i={},i[Zc()]=[T].concat(e.eventOrder["alloy.system.attached"]||[]),i));return{uid:e.uid,dom:e.dom,components:t,apis:{show:l,hide:v,getBody:d,getFooter:g,setIdle:S,setBusy:y},eventOrder:k,domModification:{attributes:{role:"dialog","aria-modal":"true"}},behaviours:Ta(e.modalBehaviours,[zt.config({}),ht.config({mode:"cyclic",onEnter:e.onExecute,onEscape:e.onEscape,useTabstopAt:e.useTabstopAt}),fl.config({getRoot:c.get}),Nt(T,[br(function(D){QV(D.element,ju(D,e,"title").element),ZV(D.element,ju(D,e,"body").element)})])])}},ma=vo({name:"ModalDialog",configFields:eU(),partFields:tU(),factory:nU,apis:{show:function(e,t){e.show(t)},hide:function(e,t){e.hide(t)},getBody:function(e,t){return e.getBody(t)},getFooter:function(e,t){return e.getFooter(t)},setBusy:function(e,t,n){e.setBusy(t,n)},setIdle:function(e,t){e.setIdle(t)}}}),rU=pt([Tt("type"),Tt("name")].concat(Om)),aU=nd,zk=[Qr("name","name",an(function(){return rt("button-name")}),jr),nr("icon"),gc("align","end",["start","end"]),lr("primary",!1),lr("disabled",!1)],Rk=He(He([],zk,!0),[Tt("text")],!1),BT=He([Uf("type",["submit","cancel","custom"])],Rk,!0),oU=He([Uf("type",["menu"]),nr("text"),nr("tooltip"),nr("icon"),Io("items",rU)],zk,!0),iU=yi("type",{submit:BT,cancel:BT,custom:BT,menu:oU}),uU=[Tt("type"),Tt("text"),Uf("level",["info","warn","error","success"]),Tt("icon"),K("url","")],cU=pt(uU),sU=function(e){return[Tt("type"),e]},lU=[Tt("type"),Tt("text"),lr("disabled",!1),lr("primary",!1),Qr("name","name",an(function(){return rt("button-name")}),jr),nr("icon"),lr("borderless",!1)],fU=pt(lU),vU=[Tt("type"),Tt("name"),Tt("label"),lr("disabled",!1)],dU=pt(vU),mU=nd,FT=[Tt("type"),Tt("name")],tc=FT.concat([nr("label")]),gU=tc.concat([K("columns","auto")]),hU=pt(gU),pU=ag([Tt("value"),Tt("text"),Tt("icon")]),bU=tc,yU=pt(bU),wU=jr,SU=tc,xU=pt(SU),CU=jr,TU=FT.concat([Dl("tag","textarea"),Tt("scriptId"),Tt("scriptUrl"),id("settings",void 0)]),OU=FT.concat([Dl("tag","textarea"),Oo("init")]),kU=Vf(function(e){return hr("customeditor.old",Ho(OU),e).orThunk(function(){return hr("customeditor.new",Ho(TU),e)})}),AU=jr,MU=tc,EU=pt(MU),DU=Uy(),_U=function(e){return[Tt("type"),r1("columns"),e]},zU=[Tt("type"),Tt("html"),gc("presets","presentation",["presentation","document"])],RU=pt(zU),BU=tc.concat([lr("sandboxed",!0)]),FU=pt(BU),HU=jr,IU=tc.concat([To("currentState",pt([de("blob"),Tt("url")]))]),$U=pt(IU),LU=tc.concat([nr("inputMode"),nr("placeholder"),lr("maximized",!1),lr("disabled",!1)]),PU=pt(LU),NU=jr,VU=function(e){return[Tt("type"),Tt("label"),e]},UU=[Tt("text"),Tt("value")],WU=[Tt("text"),Io("items",jy("items",function(){return Bk}))],Bk=Qv([pt(UU),pt(WU)]),jU=tc.concat([Io("items",Bk),lr("disabled",!1)]),GU=pt(jU),qU=jr,KU=tc.concat([Fu("items",[Tt("text"),Tt("value")]),od("size",1),lr("disabled",!1)]),XU=pt(KU),YU=jr,JU=tc.concat([lr("constrain",!0),lr("disabled",!1)]),ZU=pt(JU),Fk=pt([Tt("width"),Tt("height")]),QU=[Tt("type"),Io("header",jr),Io("cells",jc(jr))],eW=pt(QU),tW=tc.concat([nr("placeholder"),lr("maximized",!1),lr("disabled",!1)]),nW=pt(tW),rW=jr,aW=tc.concat([gc("filetype","file",["image","media","file"]),K("disabled",!1)]),oW=pt(aW),iW=pt([Tt("value"),K("meta",{})]),HT=function(e){return Qr("items","items",Dt(),jc(Vf(function(t){return hr("Checking item of "+e,IT,t).fold(function(n){return Ut.error(Gc(n))},function(n){return Ut.value(n)})})))},IT=e1(function(){return rd("type",{alertbanner:cU,bar:pt(sU(HT("bar"))),button:fU,checkbox:dU,colorinput:yU,colorpicker:xU,dropzone:EU,grid:pt(_U(HT("grid"))),iframe:FU,input:PU,listbox:GU,selectbox:XU,sizeinput:ZU,textarea:nW,urlinput:oW,customeditor:kU,htmlpanel:RU,imagetools:$U,collection:hU,label:pt(VU(HT("label"))),table:eW,panel:Hk})}),uW=[Tt("type"),K("classes",[]),Io("items",IT)],Hk=pt(uW),cW=[Qr("name","name",an(function(){return rt("tab-name")}),jr),Tt("title"),Io("items",IT)],sW=[Tt("type"),Fu("tabs",cW)],lW=pt(sW),fW=Rk,vW=iU,dW=pt([Tt("title"),To("body",rd("type",{panel:Hk,tabpanel:lW})),Dl("size","normal"),Io("buttons",vW),K("initialData",{}),pr("onAction",be),pr("onChange",be),pr("onSubmit",be),pr("onClose",be),pr("onCancel",be),K("onTabChange",be)]),mW=function(e){return hr("dialog",dW,e)},gW=pt(He([Uf("type",["cancel","custom"])],fW,!0)),hW=pt([Tt("title"),Tt("url"),ad("height"),ad("width"),a1("buttons",gW),pr("onAction",be),pr("onCancel",be),pr("onClose",be),pr("onMessage",be)]),pW=function(e){return hr("dialog",hW,e)},$T=function(e){return Kt(e)?[e].concat(mt(Tr(e),$T)):kt(e)?mt(e,$T):[]},bW=function(e){return dt(e.type)&&dt(e.name)},yW={checkbox:mU,colorinput:wU,colorpicker:CU,dropzone:DU,input:NU,iframe:HU,sizeinput:Fk,selectbox:YU,listbox:qU,size:Fk,textarea:rW,urlinput:iW,customeditor:AU,collection:pU,togglemenuitem:aU},wW=function(e){return p.from(yW[e.type])},SW=function(e){return Ce($T(e),bW)},xW=function(e){var t=SW(e),n=mt(t,function(a){return wW(a).fold(function(){return[]},function(i){return[To(a.name,i)]})});return pt(n)},Ik=function(e){var t=fu(mW(e)),n=xW(e),a=e.initialData;return{internalDialog:t,dataValidator:n,initialData:a}},Xp={open:function(e,t){var n=Ik(t);return e(n.internalDialog,n.initialData,n.dataValidator)},openUrl:function(e,t){var n=fu(pW(t));return e(n)},redial:function(e){return Ik(e)}},$k=function(e){var t=[],n={};return sr(e,function(a,i){a.fold(function(){t.push(i)},function(c){n[i]=c})}),t.length>0?Ut.error(t):Ut.value(n)},CW=function(e,t){var n=Ln(Rm.sketch(function(a){return{dom:{tag:"div",classes:["tox-form"].concat(e.classes)},components:Se(e.items,function(i){return kO(a,i,t)})}}));return{dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[n.asSpec()]}],behaviours:Be([ht.config({mode:"acyclic",useTabstopAt:rn(Up)}),Rc.memento(n),zv.memento(n,{postprocess:function(a){return $k(a).fold(function(i){return console.error(i),{}},je)}})])}},TW=function(e,t){return{uid:e.uid,dom:e.dom,components:e.components,events:wm(e.action),behaviours:Ta(e.tabButtonBehaviours,[Ot.config({}),ht.config({mode:"execution",useSpace:!0,useEnter:!0}),Ve.config({store:{mode:"memory",initialValue:e.value}})]),domModification:e.domModification}},OW=Oi({name:"TabButton",configFields:[K("uid",void 0),de("value"),Qr("dom","dom",Ya(function(){return{attributes:{role:"tab",id:rt("aria"),"aria-selected":"false"}}}),Pi()),kn("action"),K("domModification",{}),va("tabButtonBehaviours",[Ot,ht,Ve]),de("view")],factory:TW}),kW=j([de("tabs"),de("dom"),K("clickToDismiss",!1),va("tabbarBehaviours",[Rn,ht]),qs(["tabClass","selectedClass"])]),AW=Wu({factory:OW,name:"tabs",unit:"tab",overrides:function(e){var t=function(a,i){Rn.dehighlight(a,i),yt(a,y1(),{tabbar:a,button:i})},n=function(a,i){Rn.highlight(a,i),yt(a,b1(),{tabbar:a,button:i})};return{action:function(a){var i=a.getSystem().getByUid(e.uid).getOrDie(),c=Rn.isHighlighted(i,a),l=function(){return c&&e.clickToDismiss?t:c?be:n}();l(i,a)},domModification:{classes:[e.markers.tabClass]}}}}),MW=j([AW]),EW=function(e,t,n,a){return{uid:e.uid,dom:e.dom,components:t,"debug.sketcher":"Tabbar",domModification:{attributes:{role:"tablist"}},behaviours:Ta(e.tabbarBehaviours,[Rn.config({highlightClass:e.markers.selectedClass,itemClass:e.markers.tabClass,onHighlight:function(i,c){Vt(c.element,"aria-selected","true")},onDehighlight:function(i,c){Vt(c.element,"aria-selected","false")}}),ht.config({mode:"flow",getInitial:function(i){return Rn.getHighlighted(i).map(function(c){return c.element})},selector:"."+e.markers.tabClass,executeOnMove:!0})])}},Lk=vo({name:"Tabbar",configFields:kW(),partFields:MW(),factory:EW}),DW=function(e,t){return{uid:e.uid,dom:e.dom,behaviours:Ta(e.tabviewBehaviours,[zt.config({})]),domModification:{attributes:{role:"tabpanel"}}}},_W=Oi({name:"Tabview",configFields:[va("tabviewBehaviours",[zt])],factory:DW}),zW=j([K("selectFirst",!0),An("onChangeTab"),An("onDismissTab"),K("tabs",[]),va("tabSectionBehaviours",[])]),RW=za({factory:Lk,schema:[de("dom"),mc("markers",[de("tabClass"),de("selectedClass")])],name:"tabbar",defaults:function(e){return{tabs:e.tabs}}}),BW=za({factory:_W,name:"tabview"}),FW=j([RW,BW]),HW=function(e,t,n,a){var i=function(l){var v=Ve.getValue(l);jn(l,e,"tabview").each(function(d){var g=Z(e.tabs,function(y){return y.value===v});g.each(function(y){var S=y.view();ja(l.element,"id").each(function(T){Vt(d.element,"aria-labelledby",T)}),zt.set(d,S),e.onChangeTab(d,l,S)})})},c=function(l,v){jn(l,e,"tabbar").each(function(d){v(d).each(Bs)})};return{uid:e.uid,dom:e.dom,components:t,behaviours:nf(e.tabSectionBehaviours),events:rr(ze([e.selectFirst?[br(function(l,v){c(l,Rn.getFirst)})]:[],[we(b1(),function(l,v){var d=v.event.button;i(d)}),we(y1(),function(l,v){var d=v.event.button;e.onDismissTab(l,d)})]])),apis:{getViewItems:function(l){return jn(l,e,"tabview").map(function(v){return zt.contents(v)}).getOr([])},showTab:function(l,v){var d=function(g){var y=Rn.getCandidates(g),S=Z(y,function(T){return Ve.getValue(T)===v});return S.filter(function(T){return!Rn.isHighlighted(g,T)})};c(l,d)}}}},Wm=vo({name:"TabSection",configFields:zW(),partFields:FW(),factory:HW,apis:{getViewItems:function(e,t){return e.getViewItems(t)},showTab:function(e,t,n){e.showTab(t,n)}}}),IW=function(e,t,n){return Se(e,function(a,i){zt.set(n,e[i].view());var c=t.dom.getBoundingClientRect();return zt.set(n,[]),c.height})},$W=function(e){return Xn(Eo(e,function(t,n){return t>n?-1:t<n?1:0}))},LW=function(e,t,n){var a=oc(e).dom,i=bd(e,".tox-dialog-wrap").getOr(e),c=Ga(i,"position")==="fixed",l;c?l=Math.max(a.clientHeight,window.innerHeight):l=Math.max(a.offsetHeight,a.scrollHeight);var v=Jr(t),d=t.dom.offsetLeft>=n.dom.offsetLeft+$a(n),g=d?Math.max(Jr(n),v):v,y=parseInt(Ga(e,"margin-top"),10)||0,S=parseInt(Ga(e,"margin-bottom"),10)||0,T=Jr(e)+y+S,k=T-g;return l-k},PW=function(e,t){Xn(e).each(function(n){return Wm.showTab(t,n.value)})},Pk=function(e,t){_t(e,"height",t+"px"),Ha().browser.isIE()?zn(e,"flex-basis"):_t(e,"flex-basis",t+"px")},My=function(e,t,n){bd(e,'[role="dialog"]').each(function(a){ta(a,'[role="tablist"]').each(function(i){n.get().map(function(c){return _t(t,"height","0"),_t(t,"flex-basis","0"),Math.min(c,LW(a,t,i))}).each(function(c){Pk(t,c)})})})},LT=function(e){return ta(e,'[role="tabpanel"]')},NW=function(e){var t=function(){var a=Fr(),i=[br(function(l){var v=l.element;LT(v).each(function(d){_t(d,"visibility","hidden"),l.getSystem().getByDom(d).toOptional().each(function(g){var y=IW(e,d,g),S=$W(y);S.fold(a.clear,a.set)}),My(v,d,a),zn(d,"visibility"),PW(e,l),hf.requestAnimationFrame(function(){My(v,d,a)})})}),we(zs(),function(l){var v=l.element;LT(v).each(function(d){My(v,d,a)})}),we(V5,function(l,v){var d=l.element;LT(d).each(function(g){var y=Po(sa(g));_t(g,"visibility","hidden");var S=Lr(g,"height").map(function(D){return parseInt(D,10)});zn(g,"height"),zn(g,"flex-basis");var T=g.dom.getBoundingClientRect().height,k=S.forall(function(D){return T>D});k?(a.set(T),My(d,g,a)):S.each(function(D){Pk(g,D)}),zn(g,"visibility"),y.each(Sc)})})],c=!1;return{extraEvents:i,selectFirst:c}}(),n=function(){var a=[],i=!0;return{extraEvents:a,selectFirst:i}}();return{smartTabHeight:t,naiveTabHeight:n}},Nk="send-data-to-section",Vk="send-data-to-view",VW=function(e,t){var n=bt({}),a=function(d){var g=Ve.getValue(d),y=$k(g).getOr({}),S=n.get(),T=fe(S,y);n.set(T)},i=function(d){var g=n.get();Ve.setValue(d,g)},c=bt(null),l=Se(e.tabs,function(d){return{value:d.name,dom:{tag:"div",classes:["tox-dialog__body-nav-item"],innerHtml:t.shared.providers.translate(d.title)},view:function(){return[Rm.sketch(function(g){return{dom:{tag:"div",classes:["tox-form"]},components:Se(d.items,function(y){return kO(g,y,t)}),formBehaviours:Be([ht.config({mode:"acyclic",useTabstopAt:rn(Up)}),Nt("TabView.form.events",[br(i),vu(a)]),ui.config({channels:Xc([{key:Nk,value:{onReceive:a}},{key:Vk,value:{onReceive:i}}])})])}})]}}}),v=NW(l).smartTabHeight;return Wm.sketch({dom:{tag:"div",classes:["tox-dialog__body"]},onChangeTab:function(d,g,y){var S=Ve.getValue(g);yt(d,N5,{name:S,oldName:c.get()}),c.set(S)},tabs:l,components:[Wm.parts.tabbar({dom:{tag:"div",classes:["tox-dialog__body-nav"]},components:[Lk.parts.tabs({})],markers:{tabClass:"tox-tab",selectedClass:"tox-dialog__body-nav-item--active"},tabbarBehaviours:Be([Ur.config({})])}),Wm.parts.tabview({dom:{tag:"div",classes:["tox-dialog__body-content"]}})],selectFirst:v.selectFirst,tabSectionBehaviours:Be([Nt("tabpanel",v.extraEvents),ht.config({mode:"acyclic"}),Zt.config({find:function(d){return Xn(Wm.getViewItems(d))}}),Ve.config({store:{mode:"manual",getValue:function(d){return d.getSystem().broadcastOn([Nk],{}),n.get()},setValue:function(d,g){n.set(g),d.getSystem().broadcastOn([Vk],{})}}})])})},PT=rt("update-dialog"),Uk=rt("update-title"),Wk=rt("update-body"),jk=rt("update-footer"),Gk=rt("body-send-message"),qk=function(e,t,n,a){var i=function(v){switch(v.body.type){case"tabpanel":return[VW(v.body,n)];default:return[CW(v.body,n)]}},c=function(v,d){return p.some({isTabPanel:function(){return d.body.type==="tabpanel"}})},l={"aria-live":"polite"};return{dom:{tag:"div",classes:["tox-dialog__content-js"],attributes:L(L({},t.map(function(v){return{id:v}}).getOr({})),a?l:{})},components:[],behaviours:Be([Rc.childAt(0),Di.config({channel:Wk,updateState:c,renderComponents:i,initialData:e})])}},UW=function(e,t,n,a){return qk(e,p.some(t),n,a)},WW=function(e,t){var n=qk(e,p.none(),t,!1);return ma.parts.body(n)},jW=function(e){var t={dom:{tag:"div",classes:["tox-dialog__content-js"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-iframe"]},components:[V8({dom:{tag:"iframe",attributes:{src:e.url}},behaviours:Be([Ur.config({}),Ot.config({})])})]}],behaviours:Be([ht.config({mode:"acyclic",useTabstopAt:rn(Up)})])};return ma.parts.body(t)},GW=Jx.deviceType.isTouch(),Kk=function(e,t){return{dom:{tag:"div",styles:{display:"none"},classes:["tox-dialog__header"]},components:[e,t]}},Xk=function(e,t){return ma.parts.close(Vo.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":t.translate("Close")}},action:e,buttonBehaviours:Be([Ur.config({})])}))},Yk=function(){return ma.parts.title({dom:{tag:"div",classes:["tox-dialog__title"],innerHtml:"",styles:{display:"none"}}})},Jk=function(e,t){return ma.parts.body({dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[{dom:il("<p>"+u6(t.translate(e))+"</p>")}]}]})},Zk=function(e){return ma.parts.footer({dom:{tag:"div",classes:["tox-dialog__footer"]},components:e})},Qk=function(e,t){return[ho.sketch({dom:{tag:"div",classes:["tox-dialog__footer-start"]},components:e}),ho.sketch({dom:{tag:"div",classes:["tox-dialog__footer-end"]},components:t})]},NT=function(e){var t,n="tox-dialog",a=n+"-wrap",i=a+"__backdrop",c=n+"__disable-scroll";return ma.sketch({lazySink:e.lazySink,onEscape:function(l){return e.onEscape(l),p.some(!0)},useTabstopAt:function(l){return!Up(l)},dom:{tag:"div",classes:[n].concat(e.extraClasses),styles:L({position:"relative"},e.extraStyles)},components:He([e.header,e.body],e.footer.toArray(),!0),parts:{blocker:{dom:il('<div class="'+a+'"></div>'),components:[{dom:{tag:"div",classes:GW?[i,i+"--opaque"]:[i]}}]}},dragBlockClass:a,modalBehaviours:Be(He([Ot.config({}),Nt("dialog-events",e.dialogEvents.concat([Ll(wi(),function(l,v){ht.focusIn(l)})])),Nt("scroll-lock",[br(function(){Sa(Yo(),c)}),vu(function(){Gr(Yo(),c)})])],e.extraBehaviours,!0)),eventOrder:L((t={},t[ai()]=["dialog-events"],t[Zc()]=["scroll-lock","dialog-events","alloy.base.behaviour"],t[Il()]=["alloy.base.behaviour","dialog-events","scroll-lock"],t),e.eventOrder)})},eA=function(e){return Vo.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":e.translate("Close"),title:e.translate("Close")}},components:[Dc("close",{tag:"div",classes:["tox-icon"]},e.icons)],action:function(t){Sn(t,Av)}})},tA=function(e,t,n){var a=function(i){return[es(n.translate(i.title))]};return{dom:{tag:"div",classes:["tox-dialog__title"],attributes:L({},t.map(function(i){return{id:i}}).getOr({}))},components:a(e),behaviours:Be([Di.config({channel:Uk,renderComponents:a})])}},nA=function(){return{dom:il('<div class="tox-dialog__draghandle"></div>')}},qW=function(e,t,n){return ho.sketch({dom:il('<div class="tox-dialog__header"></div>'),components:[tA(e,p.some(t),n),nA(),eA(n)],containerBehaviours:Be([Iv.config({mode:"mouse",blockerClass:"blocker",getTarget:function(a){return Ci(a,'[role="dialog"]').getOrDie()},snaps:{getSnapPoints:function(){return[]},leftAttr:"data-drag-left",topAttr:"data-drag-top"}})])})},KW=function(e,t){var n=ma.parts.title(tA(e,p.none(),t)),a=ma.parts.draghandle(nA()),i=ma.parts.close(eA(t)),c=[n].concat(e.draggable?[a]:[]).concat([i]);return ho.sketch({dom:il('<div class="tox-dialog__header"></div>'),components:c})},rA=function(e,t){return KW({title:t.shared.providers.translate(e),draggable:t.dialog.isDraggableModal()},t.shared.providers)},aA=function(e,t,n){return{dom:{tag:"div",classes:["tox-dialog__busy-spinner"],attributes:{"aria-label":n.translate(e)},styles:{left:"0px",right:"0px",bottom:"0px",top:"0px",position:"absolute"}},behaviours:t,components:[{dom:il('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}},oA=function(e,t,n){return{onClose:function(){return n.closeWindow()},onBlock:function(a){ma.setBusy(e(),function(i,c){return aA(a.message,c,t)})},onUnblock:function(){ma.setIdle(e())}}},iA=function(e,t,n,a){var i,c=function(l,v){return p.some(v)};return ea(NT(L(L({},e),{lazySink:a.shared.getSink,extraBehaviours:He([Di.config({channel:PT,updateState:c,initialData:t}),zv.memory({})],e.extraBehaviours,!0),onEscape:function(l){Sn(l,Av)},dialogEvents:n,eventOrder:(i={},i[Es()]=[Di.name(),ui.name()],i[Zc()]=["scroll-lock",Di.name(),"messages","dialog-events","alloy.base.behaviour"],i[Il()]=["alloy.base.behaviour","dialog-events","messages",Di.name(),"scroll-lock"],i)})))},uA=function(e){var t=function(n){var a=Se(n.items,function(i){var c=bt(!1);return L(L({},i),{storage:c})});return L(L({},n),{items:a})};return Se(e,function(n){return n.type==="menu"?t(n):n})},cA=function(e){return ce(e,function(t,n){if(n.type==="menu"){var a=n;return ce(a.items,function(i,c){return i[c.name]=c.storage,i},t)}return t},{})},sA=function(e,t){return[Cg(wi(),FR),e($p,function(n,a){t.onClose(),a.onClose()}),e(Av,function(n,a,i,c){a.onCancel(n),Sn(c,$p)}),we(cC,function(n,a){return t.onUnblock()}),we(uC,function(n,a){return t.onBlock(a.event)})]},XW=function(e,t){var n=function(i,c){return we(i,function(l,v){a(l,function(d,g){c(e(),d,v.event,l)})})},a=function(i,c){Di.getState(i).get().each(function(l){c(l,i)})};return He(He([],sA(n,t),!0),[n(ds,function(i,c,l){c.onAction(i,{name:l.name})})],!1)},YW=function(e,t,n){var a=function(c,l){return we(c,function(v,d){i(v,function(g,y){l(e(),g,d.event,v)})})},i=function(c,l){Di.getState(c).get().each(function(v){l(v.internalDialog,c)})};return He(He([],sA(a,t),!0),[a(Lp,function(c,l){return l.onSubmit(c)}),a(Ki,function(c,l,v){l.onChange(c,{name:v.name})}),a(ds,function(c,l,v,d){var g=function(){return ht.focusIn(d)},y=function(k){return Uv(k,"disabled")||ja(k,"aria-disabled").exists(function(D){return D==="true"})},S=sa(d.element),T=Po(S);l.onAction(c,{name:v.name,value:v.value}),Po(S).fold(g,function(k){y(k)||T.exists(function(D){return Xo(k,D)&&y(D)})?g():n().toOptional().filter(function(D){return!Xo(D.element,k)}).each(g)})}),a(N5,function(c,l,v){l.onTabChange(c,{newTabName:v.name,oldTabName:v.oldName})}),vu(function(c){var l=e();Ve.setValue(c,l.getData())})],!1)},VT={initUrlDialog:XW,initDialog:YW},JW=function(e,t){return uy(e,e.type,t)},ZW=function(e,t,n){return Z(t,function(a){return a.name===n}).bind(function(a){return a.memento.getOpt(e)})},QW=function(e,t){var n=t.map(function(v){return v.footerButtons}).getOr([]),a=xe(n,function(v){return v.align==="start"}),i=function(v,d){return ho.sketch({dom:{tag:"div",classes:["tox-dialog__footer-"+v]},components:Se(d,function(g){return g.memento.asSpec()})})},c=i("start",a.pass),l=i("end",a.fail);return[c,l]},lA=function(e,t){var n=function(a,i){var c=Se(i.buttons,function(v){var d=Ln(JW(v,t));return{name:v.name,align:v.align,memento:d}}),l=function(v,d){return ZW(v,c,d)};return p.some({lookupByName:l,footerButtons:c})};return{dom:il('<div class="tox-dialog__footer"></div>'),components:[],behaviours:Be([Di.config({channel:jk,initialData:e,updateState:n,renderComponents:QW})])}},ej=function(e,t){return lA(e,t)},fA=function(e,t){return ma.parts.footer(lA(e,t))},UT=function(e,t){var n=e.getRoot();if(n.getSystem().isConnected()){var a=Zt.getCurrent(e.getFormWrapper()).getOr(e.getFormWrapper());return Rm.getField(a,t).fold(function(){var i=e.getFooter(),c=Di.getState(i);return c.get().bind(function(l){return l.lookupByName(a,t)})},function(i){return p.some(i)})}else return p.none()},tj=function(e,t){var n=e.getRoot();return Di.getState(n).get().map(function(a){return fu(hr("data",a.dataValidator,t))}).getOr(t)},vA=function(e,t,n){var a=function(H){var V=e.getRoot();V.getSystem().isConnected()&&H(V)},i=function(){var H=e.getRoot(),V=H.getSystem().isConnected()?e.getFormWrapper():H,z=Ve.getValue(V),W=Qn(n,function(re){return re.get()});return L(L({},z),W)},c=function(H){a(function(V){var z=D.getData(),W=L(L({},z),H),re=tj(e,W),ne=e.getFormWrapper();Ve.setValue(ne,re),sr(n,function(U,Q){pn(W,Q)&&U.set(W[Q])})})},l=function(H){UT(e,H).each(lt.disable)},v=function(H){UT(e,H).each(lt.enable)},d=function(H){UT(e,H).each(Ot.focus)},g=function(H){if(!dt(H))throw new Error("The dialogInstanceAPI.block function should be passed a blocking message of type string as an argument");a(function(V){yt(V,uC,{message:H})})},y=function(){a(function(H){Sn(H,cC)})},S=function(H){a(function(V){var z=e.getBody(),W=Di.getState(z);W.get().exists(function(re){return re.isTabPanel()})&&Zt.getCurrent(z).each(function(re){Wm.showTab(re,H)})})},T=function(H){a(function(V){var z=t(H);V.getSystem().broadcastOn([PT],z),V.getSystem().broadcastOn([Uk],z.internalDialog),V.getSystem().broadcastOn([Wk],z.internalDialog),V.getSystem().broadcastOn([jk],z.internalDialog),D.setData(z.initialData)})},k=function(){a(function(H){Sn(H,$p)})},D={getData:i,setData:c,disable:l,enable:v,focus:d,block:g,unblock:y,showTab:S,redial:T,close:k};return D},nj=function(e){switch(e){case"large":return["tox-dialog--width-lg"];case"medium":return["tox-dialog--width-md"];default:return[]}},rj=function(e,t,n){var a=rA(e.internalDialog.title,n),i=WW({body:e.internalDialog.body},n),c=uA(e.internalDialog.buttons),l=cA(c),v=fA({buttons:c},n),d=VT.initDialog(function(){return k},oA(function(){return S},n.shared.providers,t),n.shared.getSink),g=nj(e.internalDialog.size),y={header:a,body:i,footer:p.some(v),extraClasses:g,extraBehaviours:[],extraStyles:{}},S=iA(y,e,d,n),T=function(){var D=function(){var H=ma.getBody(S);return Zt.getCurrent(H).getOr(H)};return{getRoot:j(S),getBody:function(){return ma.getBody(S)},getFooter:function(){return ma.getFooter(S)},getFormWrapper:D}}(),k=vA(T,t.redial,l);return{dialog:S,instanceApi:k}},aj=function(e,t,n,a){var i,c,l=rt("dialog-label"),v=rt("dialog-content"),d=function(z,W){return p.some(W)},g=Ln(qW({title:e.internalDialog.title,draggable:!0},l,n.shared.providers)),y=Ln(UW({body:e.internalDialog.body},v,n,a)),S=uA(e.internalDialog.buttons),T=cA(S),k=Ln(ej({buttons:S},n)),D=VT.initDialog(function(){return V},{onBlock:function(z){fl.block(H,function(W,re){return aA(z.message,re,n.shared.providers)})},onUnblock:function(){fl.unblock(H)},onClose:function(){return t.closeWindow()}},n.shared.getSink),H=ea({dom:{tag:"div",classes:["tox-dialog","tox-dialog-inline"],attributes:(i={role:"dialog"},i["aria-labelledby"]=l,i["aria-describedby"]=v,i)},eventOrder:(c={},c[Es()]=[Di.name(),ui.name()],c[ai()]=["execute-on-form"],c[Zc()]=["reflecting","execute-on-form"],c),behaviours:Be([ht.config({mode:"cyclic",onEscape:function(z){return Sn(z,$p),p.some(!0)},useTabstopAt:function(z){return!Up(z)&&(Et(z)!=="button"||pa(z,"disabled")!=="disabled")}}),Di.config({channel:PT,updateState:d,initialData:e}),Ot.config({}),Nt("execute-on-form",D.concat([Ll(wi(),function(z,W){ht.focusIn(z)})])),fl.config({getRoot:function(){return p.some(H)}}),zt.config({}),zv.memory({})]),components:[g.asSpec(),y.asSpec(),k.asSpec()]}),V=vA({getRoot:j(H),getFooter:function(){return k.get(H)},getBody:function(){return y.get(H)},getFormWrapper:function(){var z=y.get(H);return Zt.getCurrent(z).getOr(z)}},t.redial,T);return{dialog:H,instanceApi:V}},WT=tinymce.util.Tools.resolve("tinymce.util.URI"),oj=function(e){var t=function(l){e.getSystem().isConnected()&&l(e)},n=function(l){if(!dt(l))throw new Error("The urlDialogInstanceAPI.block function should be passed a blocking message of type string as an argument");t(function(v){yt(v,uC,{message:l})})},a=function(){t(function(l){Sn(l,cC)})},i=function(){t(function(l){Sn(l,$p)})},c=function(l){t(function(v){v.getSystem().broadcastOn([Gk],l)})};return{block:n,unblock:a,close:i,sendMessage:c}},ij=["insertContent","setContent","execCommand","close","block","unblock"],dA=function(e){return Kt(e)&&ij.indexOf(e.mceAction)!==-1},uj=function(e){return!dA(e)&&Kt(e)&&pn(e,"mceAction")},cj=function(e,t,n){switch(n.mceAction){case"insertContent":e.insertContent(n.content);break;case"setContent":e.setContent(n.content);break;case"execCommand":var a=Ze(n.ui)?n.ui:!1;e.execCommand(n.cmd,a,n.value);break;case"close":t.close();break;case"block":t.block(n.message);break;case"unblock":t.unblock();break}},sj=function(e,t,n,a){var i,c=rA(e.title,a),l=jW(e),v=e.buttons.bind(function(W){return W.length===0?p.none():p.some(fA({buttons:W},a))}),d=VT.initUrlDialog(function(){return z},oA(function(){return V},a.shared.providers,t)),g=L(L({},e.height.fold(function(){return{}},function(W){return{height:W+"px","max-height":W+"px"}})),e.width.fold(function(){return{}},function(W){return{width:W+"px","max-width":W+"px"}})),y=e.width.isNone()&&e.height.isNone()?["tox-dialog--width-lg"]:[],S=new WT(e.url,{base_uri:new WT(window.location.href)}),T=S.protocol+"://"+S.host+(S.port?":"+S.port:""),k=Xl(),D=[Nt("messages",[br(function(){var W=Vr($.fromDom(window),"message",function(re){if(S.isSameOrigin(new WT(re.raw.origin))){var ne=re.raw.data;dA(ne)?cj(n,z,ne):uj(ne)&&e.onMessage(z,ne)}});k.set(W)}),vu(k.clear)]),ui.config({channels:(i={},i[Gk]={onReceive:function(W,re){ta(W.element,"iframe").each(function(ne){var U=ne.dom.contentWindow;U.postMessage(re,T)})}},i)})],H={header:c,body:l,footer:v,extraClasses:y,extraBehaviours:D,extraStyles:g},V=iA(H,e,d,a),z=oj(V);return{dialog:V,instanceApi:z}},lj=function(e){var t=e.backstage.shared,n=function(a,i){var c=function(){ma.hide(g),i()},l=Ln(uy({name:"close-alert",text:"OK",primary:!0,align:"end",disabled:!1,icon:p.none()},"cancel",e.backstage)),v=Yk(),d=Xk(c,t.providers),g=ea(NT({lazySink:function(){return t.getSink()},header:Kk(v,d),body:Jk(a,t.providers),footer:p.some(Zk(Qk([],[l.asSpec()]))),onEscape:c,extraClasses:["tox-alert-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[we(Av,c)],eventOrder:{}}));ma.show(g);var y=l.get(g);Ot.focus(y)};return{open:n}},fj=function(e){var t=e.backstage.shared,n=function(a,i){var c=function(T){ma.hide(y),i(T)},l=Ln(uy({name:"yes",text:"Yes",primary:!0,align:"end",disabled:!1,icon:p.none()},"submit",e.backstage)),v=uy({name:"no",text:"No",primary:!1,align:"end",disabled:!1,icon:p.none()},"cancel",e.backstage),d=Yk(),g=Xk(function(){return c(!1)},t.providers),y=ea(NT({lazySink:function(){return t.getSink()},header:Kk(d,g),body:Jk(a,t.providers),footer:p.some(Zk(Qk([],[v,l.asSpec()]))),onEscape:function(){return c(!1)},extraClasses:["tox-confirm-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[we(Av,function(){return c(!1)}),we(Lp,function(){return c(!0)})],eventOrder:{}}));ma.show(y);var S=l.get(y);Ot.focus(S)};return{open:n}},vj=function(e,t){return fu(hr("data",t,e))},dj=function(e){return Fp(e,".tox-alert-dialog")||Fp(e,".tox-confirm-dialog")},mj=function(e,t,n){return t&&n?[]:[Mo.config({contextual:{lazyContext:function(){return p.some(Da($.fromDom(e.getContentAreaContainer())))},fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top"]})]},gj=function(e){var t=e.backstage,n=e.editor,a=N2(n),i=lj(e),c=fj(e),l=function(D,H,V){return H!==void 0&&H.inline==="toolbar"?y(D,t.shared.anchors.inlineDialog(),V,H.ariaAttrs):H!==void 0&&H.inline==="cursor"?y(D,t.shared.anchors.cursor(),V,H.ariaAttrs):g(D,V)},v=function(D,H){return d(D,H)},d=function(D,H){var V=function(z){var W=sj(z,{closeWindow:function(){ma.hide(W.dialog),H(W.instanceApi)}},n,t);return ma.show(W.dialog),W.instanceApi};return Xp.openUrl(V,D)},g=function(D,H){var V=function(z,W,re){var ne=W,U={dataValidator:re,initialData:ne,internalDialog:z},Q=rj(U,{redial:Xp.redial,closeWindow:function(){ma.hide(Q.dialog),H(Q.instanceApi)}},t);return ma.show(Q.dialog),Q.instanceApi.setData(ne),Q.instanceApi};return Xp.open(V,D)},y=function(D,H,V,z){var W=function(re,ne,U){var Q=vj(ne,U),le=Fr(),$e=t.shared.header.isPositionedAtTop(),he={dataValidator:U,initialData:Q,internalDialog:re},Pe=function(){return le.on(function(De){Nn.reposition(De),Mo.refresh(De)})},ye=aj(he,{redial:Xp.redial,closeWindow:function(){le.on(Nn.hide),n.off("ResizeEditor",Pe),le.clear(),V(ye.instanceApi)}},t,z),se=ea(Nn.sketch(L(L({lazySink:t.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:{}},$e?{}:{fireRepositionEventInstead:{}}),{inlineBehaviours:Be(He([Nt("window-manager-inline-events",[we(Rs(),function(De,et){Sn(ye.dialog,Av)})])],mj(n,a,$e),!0)),isExtraPart:function(De,et){return dj(et)}})));return le.set(se),Nn.showWithin(se,xi(ye.dialog),{anchor:H},p.some(Yo())),(!a||!$e)&&(Mo.refresh(se),n.on("ResizeEditor",Pe)),ye.instanceApi.setData(Q),ht.focusIn(ye.dialog),ye.instanceApi};return Xp.open(W,D)},S=function(D,H){c.open(D,function(V){H(V)})},T=function(D,H){i.open(D,function(){H()})},k=function(D){D.close()};return{open:l,openUrl:v,alert:T,close:k,confirm:S}};function hj(){gn.add("silver",function(e){var t=JV(e),n=t.uiMothership,a=t.backstage,i=t.renderUI,c=t.getUi;H_.register(e,a.shared);var l=gj({editor:e,backstage:a});return{renderUI:i,getWindowManagerImpl:j(l),getNotificationManagerImpl:function(){return xM(e,{backstage:a},n)},ui:c()}})}hj()})();tinymce.IconManager.add("default",{icons:{"accessibility-check":'<svg width="24" height="24"><path d="M12 2a2 2 0 012 2 2 2 0 01-2 2 2 2 0 01-2-2c0-1.1.9-2 2-2zm8 7h-5v12c0 .6-.4 1-1 1a1 1 0 01-1-1v-5c0-.6-.4-1-1-1a1 1 0 00-1 1v5c0 .6-.4 1-1 1a1 1 0 01-1-1V9H4a1 1 0 110-2h16c.6 0 1 .4 1 1s-.4 1-1 1z" fill-rule="nonzero"/></svg>',"action-next":'<svg width="24" height="24"><path fill-rule="nonzero" d="M5.7 7.3a1 1 0 00-1.4 1.4l7.7 7.7 7.7-7.7a1 1 0 10-1.4-1.4L12 13.6 5.7 7.3z"/></svg>',"action-prev":'<svg width="24" height="24"><path fill-rule="nonzero" d="M18.3 15.7a1 1 0 001.4-1.4L12 6.6l-7.7 7.7a1 1 0 001.4 1.4L12 9.4l6.3 6.3z"/></svg>',"align-center":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm3 4h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 110-2zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 010-2zm-3-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2z" fill-rule="evenodd"/></svg>',"align-justify":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2z" fill-rule="evenodd"/></svg>',"align-left":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm0 4h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2zm0-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2z" fill-rule="evenodd"/></svg>',"align-none":'<svg width="24" height="24"><path d="M14.2 5L13 7H5a1 1 0 110-2h9.2zm4 0h.8a1 1 0 010 2h-2l1.2-2zm-6.4 4l-1.2 2H5a1 1 0 010-2h6.8zm4 0H19a1 1 0 010 2h-4.4l1.2-2zm-6.4 4l-1.2 2H5a1 1 0 010-2h4.4zm4 0H19a1 1 0 010 2h-6.8l1.2-2zM7 17l-1.2 2H5a1 1 0 010-2h2zm4 0h8a1 1 0 010 2H9.8l1.2-2zm5.2-13.5l1.3.7-9.7 16.3-1.3-.7 9.7-16.3z" fill-rule="evenodd"/></svg>',"align-right":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm6 4h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm-6-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2z" fill-rule="evenodd"/></svg>',"arrow-left":'<svg width="24" height="24"><path d="M5.6 13l12 6a1 1 0 001.4-1V6a1 1 0 00-1.4-.9l-12 6a1 1 0 000 1.8z" fill-rule="evenodd"/></svg>',"arrow-right":'<svg width="24" height="24"><path d="M18.5 13l-12 6A1 1 0 015 18V6a1 1 0 011.4-.9l12 6a1 1 0 010 1.8z" fill-rule="evenodd"/></svg>',bold:'<svg width="24" height="24"><path d="M7.8 19c-.3 0-.5 0-.6-.2l-.2-.5V5.7c0-.2 0-.4.2-.5l.6-.2h5c1.5 0 2.7.3 3.5 1 .7.6 1.1 1.4 1.1 2.5a3 3 0 01-.6 1.9c-.4.6-1 1-1.6 1.2.4.1.9.3 1.3.6s.8.7 1 1.2c.4.4.5 1 .5 1.6 0 1.3-.4 2.3-1.3 3-.8.7-2.1 1-3.8 1H7.8zm5-8.3c.6 0 1.2-.1 1.6-.5.4-.3.6-.7.6-1.3 0-1.1-.8-1.7-2.3-1.7H9.3v3.5h3.4zm.5 6c.7 0 1.3-.1 1.7-.4.4-.4.6-.9.6-1.5s-.2-1-.7-1.4c-.4-.3-1-.4-2-.4H9.4v3.8h4z" fill-rule="evenodd"/></svg>',bookmark:'<svg width="24" height="24"><path d="M6 4v17l6-4 6 4V4c0-.6-.4-1-1-1H7a1 1 0 00-1 1z" fill-rule="nonzero"/></svg>',"border-style":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="2" x="3" y="6" rx="1"/><rect width="2.8" height="2" x="3" y="16" rx="1"/><rect width="2.8" height="2" x="6.8" y="16" rx="1"/><rect width="2.8" height="2" x="10.6" y="16" rx="1"/><rect width="2.8" height="2" x="14.4" y="16" rx="1"/><rect width="2.8" height="2" x="18.2" y="16" rx="1"/><rect width="8" height="2" x="3" y="11" rx="1"/><rect width="8" height="2" x="13" y="11" rx="1"/></g></svg>',"border-width":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="5" x="3" y="5" rx="1"/><rect width="18" height="3.5" x="3" y="11.5" rx="1"/><rect width="18" height="2" x="3" y="17" rx="1"/></g></svg>',brightness:'<svg width="24" height="24"><path d="M12 17c.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 01-.7.3 1 1 0 01-.7-.3 1 1 0 01-.3-.7v-1c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3zm0-10a1 1 0 01-.7-.3A1 1 0 0111 6V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 01-.7.3zm7 4c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 01-.7.3h-1a1 1 0 01-.7-.3 1 1 0 01-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1zM7 12c0 .3-.1.5-.3.7a1 1 0 01-.7.3H5a1 1 0 01-.7-.3A1 1 0 014 12c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1c.3 0 .5.1.7.3.2.2.3.4.3.7zm10 3.5l.7.8c.2.1.3.4.3.6 0 .3-.1.6-.3.8a1 1 0 01-.8.3 1 1 0 01-.6-.3l-.8-.7a1 1 0 01-.3-.8c0-.2.1-.5.3-.7a1 1 0 011.4 0zm-10-7l-.7-.8a1 1 0 01-.3-.6c0-.3.1-.6.3-.8.2-.2.5-.3.8-.3.2 0 .5.1.7.3l.7.7c.2.2.3.5.3.8 0 .2-.1.5-.3.7a1 1 0 01-.7.3 1 1 0 01-.8-.3zm10 0a1 1 0 01-.8.3 1 1 0 01-.7-.3 1 1 0 01-.3-.7c0-.3.1-.6.3-.8l.8-.7c.1-.2.4-.3.6-.3.3 0 .6.1.8.3.2.2.3.5.3.8 0 .2-.1.5-.3.7l-.7.7zm-10 7c.2-.2.5-.3.8-.3.2 0 .5.1.7.3a1 1 0 010 1.4l-.8.8a1 1 0 01-.6.3 1 1 0 01-.8-.3 1 1 0 01-.3-.8c0-.2.1-.5.3-.6l.7-.8zM12 8a4 4 0 013.7 2.4 4 4 0 010 3.2A4 4 0 0112 16a4 4 0 01-3.7-2.4 4 4 0 010-3.2A4 4 0 0112 8zm0 6.5c.7 0 1.3-.2 1.8-.7.5-.5.7-1.1.7-1.8s-.2-1.3-.7-1.8c-.5-.5-1.1-.7-1.8-.7s-1.3.2-1.8.7c-.5.5-.7 1.1-.7 1.8s.2 1.3.7 1.8c.5.5 1.1.7 1.8.7z" fill-rule="evenodd"/></svg>',browse:'<svg width="24" height="24"><path d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2h-4v-2h4V8H5v10h4v2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm-8 9.4l-2.3 2.3a1 1 0 11-1.4-1.4l4-4a1 1 0 011.4 0l4 4a1 1 0 01-1.4 1.4L13 13.4V20a1 1 0 01-2 0v-6.6z" fill-rule="nonzero"/></svg>',cancel:'<svg width="24" height="24"><path d="M12 4.6a7.4 7.4 0 110 14.8 7.4 7.4 0 010-14.8zM12 3a9 9 0 100 18 9 9 0 000-18zm0 8L14.8 8l1 1.1-2.7 2.8 2.7 2.7-1.1 1.1-2.7-2.7-2.7 2.7-1-1.1 2.6-2.7-2.7-2.7 1-1.1 2.8 2.7z" fill-rule="nonzero"/></svg>',"cell-background-color":'<svg width="24" height="24"><path d="M15.7 2l1.6 1.6-2.7 2.6 5.9 5.8c.7.7.7 1.7 0 2.4l-6.3 6.1a1.7 1.7 0 01-2.4 0l-6.3-6.1c-.7-.7-.7-1.7 0-2.4L15.7 2zM18 12l-4.5-4L9 12h9zM4 16s2 2.4 2 3.8C6 21 5.1 22 4 22s-2-1-2-2.2C2 18.4 4 16 4 16z"/></svg>',"cell-border-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M5 13v5h2v2H5a2 2 0 01-2-2v-5h2zm8-7V4h6a2 2 0 012 2h-8z" opacity=".2"/><path fill-rule="nonzero" d="M13 4v2H5v7H3V6c0-1.1.9-2 2-2h8zm-2.6 14.1l.1-.1.1.1.2.3.2.2.2.2c.4.6.8 1.2.8 1.7 0 .8-.7 1.5-1.5 1.5S9 21.3 9 20.5c0-.5.4-1.1.8-1.7l.2-.2.2-.2.2-.3z"/><path d="M13 11l-2 2H5v-2h6V6h2z"/><path fill-rule="nonzero" d="M18.4 8l1 1-1.8 1.9 4 4c.5.4.5 1.1 0 1.6l-4.3 4.2a1.2 1.2 0 01-1.6 0l-4.4-4.2c-.4-.5-.4-1.2 0-1.7l7-6.8zm1.6 7l-3-3-3 3h6z"/></g></svg>',"change-case":'<svg width="24" height="24"><path d="M18.4 18.2v-.6c-.5.8-1.3 1.2-2.4 1.2-2.2 0-3.3-1.6-3.3-4.8 0-3.1 1-4.7 3.3-4.7 1.1 0 1.8.3 2.4 1.1v-.6c0-.5.4-.8.8-.8s.8.3.8.8v8.4c0 .5-.4.8-.8.8a.8.8 0 01-.8-.8zm-2-7.4c-1.3 0-1.8.9-1.8 3.2 0 2.4.5 3.3 1.7 3.3 1.3 0 1.8-.9 1.8-3.2 0-2.4-.5-3.3-1.7-3.3zM10 15.7H5.5l-.8 2.6a1 1 0 01-1 .7h-.2a.7.7 0 01-.7-1l4-12a1 1 0 012 0l4 12a.7.7 0 01-.8 1h-.2a1 1 0 01-1-.7l-.8-2.6zm-.3-1.5l-2-6.5-1.9 6.5h3.9z" fill-rule="evenodd"/></svg>',"character-count":'<svg width="24" height="24"><path d="M4 11.5h16v1H4v-1zm4.8-6.8V10H7.7V5.8h-1v-1h2zM11 8.3V9h2v1h-3V7.7l2-1v-.9h-2v-1h3v2.4l-2 1zm6.3-3.4V10h-3.1V9h2.1V8h-2.1V6.8h2.1v-1h-2.1v-1h3.1zM5.8 16.4c0-.5.2-.8.5-1 .2-.2.6-.3 1.2-.3l.8.1c.2 0 .4.2.5.3l.4.4v2.8l.2.3H8.2v-.1-.2l-.6.3H7c-.4 0-.7 0-1-.2a1 1 0 01-.3-.9c0-.3 0-.6.3-.8.3-.2.7-.4 1.2-.4l.6-.2h.3v-.2l-.1-.2a.8.8 0 00-.5-.1 1 1 0 00-.4 0l-.3.4h-1zm2.3.8h-.2l-.2.1-.4.1a1 1 0 00-.4.2l-.2.2.1.3.5.1h.4l.4-.4v-.6zm2-3.4h1.2v1.7l.5-.3h.5c.5 0 .9.1 1.2.5.3.4.5.8.5 1.4 0 .6-.2 1.1-.5 1.5-.3.4-.7.6-1.3.6l-.6-.1-.4-.4v.4h-1.1v-5.4zm1.1 3.3c0 .3 0 .6.2.8a.7.7 0 001.2 0l.2-.8c0-.4 0-.6-.2-.8a.7.7 0 00-.6-.3l-.6.3-.2.8zm6.1-.5c0-.2 0-.3-.2-.4a.8.8 0 00-.5-.2c-.3 0-.5.1-.6.3l-.2.9c0 .3 0 .6.2.8.1.2.3.3.6.3.2 0 .4 0 .5-.2l.2-.4h1.1c0 .5-.3.8-.6 1.1a2 2 0 01-1.3.4c-.5 0-1-.2-1.3-.6a2 2 0 01-.5-1.4c0-.6.1-1.1.5-1.5.3-.4.8-.5 1.4-.5.5 0 1 0 1.2.3.4.3.5.7.5 1.2h-1v-.1z" fill-rule="evenodd"/></svg>',"checklist-rtl":'<svg width="24" height="24"><path d="M5 17h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm14.2 11c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 010-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 010-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 8c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 010-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8z" fill-rule="evenodd"/></svg>',checklist:'<svg width="24" height="24"><path d="M11 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0-6h8a1 1 0 010 2h-8a1 1 0 010-2zM7.2 16c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 010-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 010-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 8c-.2.3-.7.4-1 0L3.8 6.9a.7.7 0 010-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8z" fill-rule="evenodd"/></svg>',checkmark:'<svg width="24" height="24"><path d="M18.2 5.4a1 1 0 011.6 1.2l-8 12a1 1 0 01-1.5.1l-5-5a1 1 0 111.4-1.4l4.1 4.1 7.4-11z" fill-rule="nonzero"/></svg>',"chevron-down":'<svg width="10" height="10"><path d="M8.7 2.2c.3-.3.8-.3 1 0 .4.4.4.9 0 1.2L5.7 7.8c-.3.3-.9.3-1.2 0L.2 3.4a.8.8 0 010-1.2c.3-.3.8-.3 1.1 0L5 6l3.7-3.8z" fill-rule="nonzero"/></svg>',"chevron-left":'<svg width="10" height="10"><path d="M7.8 1.3L4 5l3.8 3.7c.3.3.3.8 0 1-.4.4-.9.4-1.2 0L2.2 5.7a.8.8 0 010-1.2L6.6.2C7 0 7.4 0 7.8.2c.3.3.3.8 0 1.1z" fill-rule="nonzero"/></svg>',"chevron-right":'<svg width="10" height="10"><path d="M2.2 1.3a.8.8 0 010-1c.4-.4.9-.4 1.2 0l4.4 4.1c.3.4.3.9 0 1.2L3.4 9.8c-.3.3-.8.3-1.2 0a.8.8 0 010-1.1L6 5 2.2 1.3z" fill-rule="nonzero"/></svg>',"chevron-up":'<svg width="10" height="10"><path d="M8.7 7.8L5 4 1.3 7.8c-.3.3-.8.3-1 0a.8.8 0 010-1.2l4.1-4.4c.3-.3.9-.3 1.2 0l4.2 4.4c.3.3.3.9 0 1.2-.3.3-.8.3-1.1 0z" fill-rule="nonzero"/></svg>',close:'<svg width="24" height="24"><path d="M17.3 8.2L13.4 12l3.9 3.8a1 1 0 01-1.5 1.5L12 13.4l-3.8 3.9a1 1 0 01-1.5-1.5l3.9-3.8-3.9-3.8a1 1 0 011.5-1.5l3.8 3.9 3.8-3.9a1 1 0 011.5 1.5z" fill-rule="evenodd"/></svg>',"code-sample":'<svg width="24" height="26"><path d="M7.1 11a2.8 2.8 0 01-.8 2 2.8 2.8 0 01.8 2v1.7c0 .3.1.6.4.8.2.3.5.4.8.4.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.7 0-1.4-.3-2-.8-.5-.6-.8-1.3-.8-2V15c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 01-.4-.4v-.8c0-.2.2-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V9.3c0-.7.3-1.4.8-2 .6-.5 1.3-.8 2-.8.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8V11zm9.8 0V9.3c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 01-.4-.4V7c0-.2.1-.4.4-.4.7 0 1.4.3 2 .8.5.6.8 1.3.8 2V11c0 .3.1.6.4.8.2.3.5.4.8.4.2 0 .4.2.4.4v.8c0 .2-.2.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8v1.7c0 .7-.3 1.4-.8 2-.6.5-1.3.8-2 .8a.4.4 0 01-.4-.4v-.8c0-.2.1-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V15a2.8 2.8 0 01.8-2 2.8 2.8 0 01-.8-2zm-3.3-.4c0 .4-.1.8-.5 1.1-.3.3-.7.5-1.1.5-.4 0-.8-.2-1.1-.5-.4-.3-.5-.7-.5-1.1 0-.5.1-.9.5-1.2.3-.3.7-.4 1.1-.4.4 0 .8.1 1.1.4.4.3.5.7.5 1.2zM12 13c.4 0 .8.1 1.1.5.4.3.5.7.5 1.1 0 1-.1 1.6-.5 2a3 3 0 01-1.1 1c-.4.3-.8.4-1.1.4a.5.5 0 01-.5-.5V17a3 3 0 001-.2l.6-.6c-.6 0-1-.2-1.3-.5-.2-.3-.3-.7-.3-1 0-.5.1-1 .5-1.2.3-.4.7-.5 1.1-.5z" fill-rule="evenodd"/></svg>',"color-levels":'<svg width="24" height="24"><path d="M17.5 11.4A9 9 0 0118 14c0 .5 0 1-.2 1.4 0 .4-.3.9-.5 1.3a6.2 6.2 0 01-3.7 3 5.7 5.7 0 01-3.2 0A5.9 5.9 0 017.6 18a6.2 6.2 0 01-1.4-2.6 6.7 6.7 0 010-2.8c0-.4.1-.9.3-1.3a13.6 13.6 0 012.3-4A20 20 0 0112 4a26.4 26.4 0 013.2 3.4 18.2 18.2 0 012.3 4zm-2 4.5c.4-.7.5-1.4.5-2a7.3 7.3 0 00-1-3.2c.2.6.2 1.2.2 1.9a4.5 4.5 0 01-1.3 3 5.3 5.3 0 01-2.3 1.5 4.9 4.9 0 01-2 .1 4.3 4.3 0 002.4.8 4 4 0 002-.6 4 4 0 001.5-1.5z" fill-rule="evenodd"/></svg>',"color-picker":'<svg width="24" height="24"><path d="M12 3a9 9 0 000 18 1.5 1.5 0 001.1-2.5c-.2-.3-.4-.6-.4-1 0-.8.7-1.5 1.5-1.5H16a5 5 0 005-5c0-4.4-4-8-9-8zm-5.5 9a1.5 1.5 0 110-3 1.5 1.5 0 010 3zm3-4a1.5 1.5 0 110-3 1.5 1.5 0 010 3zm5 0a1.5 1.5 0 110-3 1.5 1.5 0 010 3zm3 4a1.5 1.5 0 110-3 1.5 1.5 0 010 3z" fill-rule="nonzero"/></svg>',"color-swatch-remove-color":'<svg width="24" height="24"><path stroke="#000" stroke-width="2" d="M21 3L3 21" fill-rule="evenodd"/></svg>',"color-swatch":'<svg width="24" height="24"><rect x="3" y="3" width="18" height="18" rx="1" fill-rule="evenodd"/></svg>',"comment-add":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M9 19l3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 00-1 1v10c0 .6.4 1 1 1h4v2zm-2 4v-4H5a3 3 0 01-3-3V6a3 3 0 013-3h14a3 3 0 013 3v10a3 3 0 01-3 3h-6.4L7 23z"/><path d="M13 10h2a1 1 0 010 2h-2v2a1 1 0 01-2 0v-2H9a1 1 0 010-2h2V8a1 1 0 012 0v2z"/></g></svg>',comment:'<svg width="24" height="24"><path fill-rule="nonzero" d="M9 19l3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 00-1 1v10c0 .6.4 1 1 1h4v2zm-2 4v-4H5a3 3 0 01-3-3V6a3 3 0 013-3h14a3 3 0 013 3v10a3 3 0 01-3 3h-6.4L7 23z"/></svg>',contrast:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 015.7 2.3A8 8 0 1112 4zm-6 8a6 6 0 006 6V6a6 6 0 00-6 6z" fill-rule="evenodd"/></svg>',copy:'<svg width="24" height="24"><path d="M16 3H6a2 2 0 00-2 2v11h2V5h10V3zm1 4a2 2 0 012 2v10a2 2 0 01-2 2h-7a2 2 0 01-2-2V9c0-1.2.9-2 2-2h7zm0 12V9h-7v10h7z" fill-rule="nonzero"/></svg>',crop:'<svg width="24" height="24"><path d="M17 8v7h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v2c0 .6-.4 1-1 1a1 1 0 01-1-1v-2H7V9H5a1 1 0 110-2h2V5c0-.6.4-1 1-1s1 .4 1 1v2h7l3-3 1 1-3 3zM9 9v5l5-5H9zm1 6h5v-5l-5 5z" fill-rule="evenodd"/></svg>',"cut-column":'<svg width="24" height="24"><path fill-rule="evenodd" d="M7.2 4.5c.9 0 1.6.4 2.2 1A3.7 3.7 0 0110.5 8v.5l1 1 4-4 1-.5a3.3 3.3 0 012 0c.4 0 .7.3 1 .5L17 8h4v13h-6V10l-1.5 1.5.5.5v4l-2.5-2.5-1 1v.5c0 .4 0 .8-.3 1.2-.2.5-.4.9-.8 1.2-.6.7-1.3 1-2.2 1-.8.2-1.5 0-2-.6l-.5-.8-.2-1c0-.4 0-.8.3-1.2A3.9 3.9 0 017 12.7c.5-.2 1-.3 1.5-.2l1-1-1-1c-.5 0-1 0-1.5-.2-.5-.1-1-.4-1.4-.9-.4-.3-.6-.7-.8-1.2L4.5 7c0-.4 0-.7.2-1 0-.3.3-.6.5-.8.5-.5 1.2-.8 2-.7zm12.3 5h-3v10h3v-10zM8 13.8h-.3l-.4.2a2.8 2.8 0 00-.7.4v.1a2.8 2.8 0 00-.6.8l-.1.4v.7l.2.5.5.2h.7a2.6 2.6 0 00.8-.3 2.4 2.4 0 00.7-.7 2.5 2.5 0 00.3-.8 1.5 1.5 0 000-.8 1 1 0 00-.2-.4 1 1 0 00-.5-.2H8zm3.5-3.7c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4zM7 5.8h-.4a1 1 0 00-.5.3 1 1 0 00-.2.5v.7a2.5 2.5 0 00.3.8l.2.3h.1l.4.4.4.2.4.1h.7L9 9l.2-.4a1.6 1.6 0 000-.8 2.6 2.6 0 00-.3-.8A2.5 2.5 0 007.7 6l-.4-.1H7z"/></svg>',"cut-row":'<svg width="24" height="24"><path fill-rule="evenodd" d="M22 3v5H9l3 3 2-2h4l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8.7.6 1 1.3 1 2.2.2.8 0 1.5-.6 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 01-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 018.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 010-2c0-.4.3-.7.5-1l2 2V3h14zM8.5 15.3h-.3a2.6 2.6 0 00-.8.4 2.5 2.5 0 00-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 00.8-.3L9 18V18l.4-.4.2-.4.1-.4v-.3-.4a1 1 0 00-.2-.5 1 1 0 00-.4-.2h-.5zm7 0H15a1 1 0 00-.4.3 1 1 0 00-.2.5 1.5 1.5 0 000 .7v.4a2.8 2.8 0 00.5.7h.1a2.8 2.8 0 00.8.6l.4.1h.7l.5-.2.2-.5v-.4-.3a2.6 2.6 0 00-.3-.8 2.4 2.4 0 00-.7-.7 2.5 2.5 0 00-.8-.3h-.3zM12 11.6c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4zm8.5-7.1h-11v2h11v-2z"/></svg>',cut:'<svg width="24" height="24"><path d="M18 15c.6.7 1 1.4 1 2.3 0 .8-.2 1.5-.7 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 01-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 018.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 010-2c0-.4.3-.7.5-1l6 6 6-6 .5 1a3.3 3.3 0 010 2c0 .4-.3.7-.5 1l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8zm-8.5 2.2l.1-.4v-.3-.4a1 1 0 00-.2-.5 1 1 0 00-.4-.2 1.6 1.6 0 00-.8 0 2.6 2.6 0 00-.8.3 2.5 2.5 0 00-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 00.8-.3 2.8 2.8 0 001-1zm2.5-2.8c.4 0 .7-.1 1-.4.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4s-.7.1-1 .4c-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4zm5.4 4l.2-.5v-.4-.3a2.6 2.6 0 00-.3-.8 2.4 2.4 0 00-.7-.7 2.5 2.5 0 00-.8-.3 1.5 1.5 0 00-.8 0 1 1 0 00-.4.2 1 1 0 00-.2.5 1.5 1.5 0 000 .7v.4l.3.4.3.4a2.8 2.8 0 00.8.5l.4.1h.7l.5-.2z" fill-rule="evenodd"/></svg>',"document-properties":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 00-2 2v14c0 1.1.9 2 2 2h10a2 2 0 002-2V7.6L14.4 3zM17 19H7V5h6v4h4v10z" fill-rule="nonzero"/></svg>',drag:'<svg width="24" height="24"><path d="M13 5h2v2h-2V5zm0 4h2v2h-2V9zM9 9h2v2H9V9zm4 4h2v2h-2v-2zm-4 0h2v2H9v-2zm0 4h2v2H9v-2zm4 0h2v2h-2v-2zM9 5h2v2H9V5z" fill-rule="evenodd"/></svg>',"duplicate-column":'<svg width="24" height="24"><path d="M17 6v16h-7V6h7zm-2 2h-3v12h3V8zm-2-6v2H8v15H6V2h7z"/></svg>',"duplicate-row":'<svg width="24" height="24"><path d="M22 11v7H6v-7h16zm-2 2H8v3h12v-3zm-1-6v2H4v5H2V7h17z"/></svg>',duplicate:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M16 3v2H6v11H4V5c0-1.1.9-2 2-2h10zm3 8h-2V9h-7v10h9a2 2 0 01-2 2h-7a2 2 0 01-2-2V9c0-1.2.9-2 2-2h7a2 2 0 012 2v2z"/><path d="M17 14h1a1 1 0 010 2h-1v1a1 1 0 01-2 0v-1h-1a1 1 0 010-2h1v-1a1 1 0 012 0v1z"/></g></svg>',"edit-block":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19.8 8.8l-9.4 9.4c-.2.2-.5.4-.9.4l-5.4 1.2 1.2-5.4.5-.8 9.4-9.4c.7-.7 1.8-.7 2.5 0l2.1 2.1c.7.7.7 1.8 0 2.5zm-2-.2l1-.9v-.3l-2.2-2.2a.3.3 0 00-.3 0l-1 1L18 8.5zm-1 1l-2.5-2.4-6 6 2.5 2.5 6-6zm-7 7.1l-2.6-2.4-.3.3-.1.2-.7 3 3.1-.6h.1l.4-.5z"/></svg>',"edit-image":'<svg width="24" height="24"><path d="M18 16h2V7a2 2 0 00-2-2H7v2h11v9zM6 17h15a1 1 0 010 2h-1v1a1 1 0 01-2 0v-1H6a2 2 0 01-2-2V7H3a1 1 0 110-2h1V4a1 1 0 112 0v13zm3-5.3l1.3 2 3-4.7 3.7 6H7l2-3.3z" fill-rule="nonzero"/></svg>',"embed-page":'<svg width="24" height="24"><path d="M19 6V5H5v14h2A13 13 0 0119 6zm0 1.4c-.8.8-1.6 2.4-2.2 4.6H19V7.4zm0 5.6h-2.4c-.4 1.8-.6 3.8-.6 6h3v-6zm-4 6c0-2.2.2-4.2.6-6H13c-.7 1.8-1.1 3.8-1.1 6h3zm-4 0c0-2.2.4-4.2 1-6H9.6A12 12 0 008 19h3zM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 01-1-1V4c0-.6.4-1 1-1zm11.8 9c.4-1.9 1-3.4 1.8-4.5a9.2 9.2 0 00-4 4.5h2.2zm-3.4 0a12 12 0 012.8-4 12 12 0 00-5 4h2.2z" fill-rule="nonzero"/></svg>',embed:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 01-1-1V4c0-.6.4-1 1-1zm1 2v14h14V5H5zm4.8 2.6l5.6 4a.5.5 0 010 .8l-5.6 4A.5.5 0 019 16V8a.5.5 0 01.8-.4z" fill-rule="nonzero"/></svg>',emoji:'<svg width="24" height="24"><path d="M9 11c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 00-1 1c0 .6.4 1 1 1zm6 0c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 00-1 1c0 .6.4 1 1 1zm-3 5.5c2.1 0 4-1.5 4.4-3.5H7.6c.5 2 2.3 3.5 4.4 3.5zM12 4a8 8 0 100 16 8 8 0 000-16zm0 14.5a6.5 6.5 0 110-13 6.5 6.5 0 010 13z" fill-rule="nonzero"/></svg>',export:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M14.4 3L18 7v1h-5V5H7v14h9a1 1 0 012 0c0 1-.8 2-1.9 2H7c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2h7.5z"/><path d="M18.1 12c.5 0 .9.4.9 1 0 .5-.3 1-.8 1h-7.3c-.5 0-.9-.4-.9-1 0-.5.3-1 .8-1h7.3z"/><path d="M16.4 9.2a1 1 0 011.4.2l2.4 3.6-2.4 3.6a1 1 0 01-1.7-1v-.2l1.7-2.4-1.6-2.4a1 1 0 01.2-1.4z"/></g></svg>',fill:'<svg width="24" height="26"><path d="M16.6 12l-9-9-1.4 1.4 2.4 2.4-5.2 5.1c-.5.6-.5 1.6 0 2.2L9 19.6a1.5 1.5 0 002.2 0l5.5-5.5c.5-.6.5-1.6 0-2.2zM5.2 13L10 8.2l4.8 4.8H5.2zM19 14.5s-2 2.2-2 3.5c0 1.1.9 2 2 2a2 2 0 002-2c0-1.3-2-3.5-2-3.5z" fill-rule="nonzero"/></svg>',"flip-horizontally":'<svg width="24" height="24"><path d="M14 19h2v-2h-2v2zm4-8h2V9h-2v2zM4 7v10c0 1.1.9 2 2 2h3v-2H6V7h3V5H6a2 2 0 00-2 2zm14-2v2h2a2 2 0 00-2-2zm-7 16h2V3h-2v18zm7-6h2v-2h-2v2zm-4-8h2V5h-2v2zm4 12a2 2 0 002-2h-2v2z" fill-rule="nonzero"/></svg>',"flip-vertically":'<svg width="24" height="24"><path d="M5 14v2h2v-2H5zm8 4v2h2v-2h-2zm4-14H7a2 2 0 00-2 2v3h2V6h10v3h2V6a2 2 0 00-2-2zm2 14h-2v2a2 2 0 002-2zM3 11v2h18v-2H3zm6 7v2h2v-2H9zm8-4v2h2v-2h-2zM5 18c0 1.1.9 2 2 2v-2H5z" fill-rule="nonzero"/></svg>',"format-painter":'<svg width="24" height="24"><path d="M18 5V4c0-.5-.4-1-1-1H5a1 1 0 00-1 1v4c0 .6.5 1 1 1h12c.6 0 1-.4 1-1V7h1v4H9v9c0 .6.4 1 1 1h2c.6 0 1-.4 1-1v-7h8V5h-3z" fill-rule="nonzero"/></svg>',format:'<svg width="24" height="24"><path fill-rule="evenodd" d="M17 5a1 1 0 010 2h-4v11a1 1 0 01-2 0V7H7a1 1 0 110-2h10z"/></svg>',fullscreen:'<svg width="24" height="24"><path d="M15.3 10l-1.2-1.3 2.9-3h-2.3a.9.9 0 110-1.7H19c.5 0 .9.4.9.9v4.4a.9.9 0 11-1.8 0V7l-2.9 3zm0 4l3 3v-2.3a.9.9 0 111.7 0V19c0 .5-.4.9-.9.9h-4.4a.9.9 0 110-1.8H17l-3-2.9 1.3-1.2zM10 15.4l-2.9 3h2.3a.9.9 0 110 1.7H5a.9.9 0 01-.9-.9v-4.4a.9.9 0 111.8 0V17l2.9-3 1.2 1.3zM8.7 10L5.7 7v2.3a.9.9 0 01-1.7 0V5c0-.5.4-.9.9-.9h4.4a.9.9 0 010 1.8H7l3 2.9-1.3 1.2z" fill-rule="nonzero"/></svg>',gallery:'<svg width="24" height="24"><path fill-rule="nonzero" d="M5 15.7l2.3-2.2c.3-.3.7-.3 1 0L11 16l5.1-5c.3-.4.8-.4 1 0l2 1.9V8H5v7.7zM5 18V19h3l1.8-1.9-2-2L5 17.9zm14-3l-2.5-2.4-6.4 6.5H19v-4zM4 6h16c.6 0 1 .4 1 1v13c0 .6-.4 1-1 1H4a1 1 0 01-1-1V7c0-.6.4-1 1-1zm6 7a2 2 0 110-4 2 2 0 010 4zM4.5 4h15a.5.5 0 110 1h-15a.5.5 0 010-1zm2-2h11a.5.5 0 110 1h-11a.5.5 0 010-1z"/></svg>',gamma:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 01-1-1V4c0-.6.4-1 1-1zm1 2v14h14V5H5zm6.5 11.8V14L9.2 8.7a5.1 5.1 0 00-.4-.8l-.1-.2H8 8v-1l.3-.1.3-.1h.7a1 1 0 01.6.5l.1.3a8.5 8.5 0 01.3.6l1.9 4.6 2-5.2a1 1 0 011-.6.5.5 0 01.5.6L13 14v2.8a.7.7 0 01-1.4 0z" fill-rule="nonzero"/></svg>',help:'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M12 5.5a6.5 6.5 0 00-6 9 6.3 6.3 0 001.4 2l1 1a6.3 6.3 0 003.6 1 6.5 6.5 0 006-9 6.3 6.3 0 00-1.4-2l-1-1a6.3 6.3 0 00-3.6-1zM12 4a7.8 7.8 0 015.7 2.3A8 8 0 1112 4z"/><path d="M9.6 9.7a.7.7 0 01-.7-.8c0-1.1 1.5-1.8 3.2-1.8 1.8 0 3.2.8 3.2 2.4 0 1.4-.4 2.1-1.5 2.8-.2 0-.3.1-.3.2a2 2 0 00-.8.8.8.8 0 01-1.4-.6c.3-.7.8-1 1.3-1.5l.4-.2c.7-.4.8-.6.8-1.5 0-.5-.6-.9-1.7-.9-.5 0-1 .1-1.4.3-.2 0-.3.1-.3.2v-.2c0 .4-.4.8-.8.8z" fill-rule="nonzero"/><circle cx="12" cy="16" r="1"/></g></svg>',"highlight-bg-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path id="tox-icon-highlight-bg-color__color" d="M3 18h18v3H3z"/><path fill-rule="nonzero" d="M7.7 16.7H3l3.3-3.3-.7-.8L10.2 8l4 4.1-4 4.2c-.2.2-.6.2-.8 0l-.6-.7-1.1 1.1zm5-7.5L11 7.4l3-2.9a2 2 0 012.6 0L18 6c.7.7.7 2 0 2.7l-2.9 2.9-1.8-1.8-.5-.6"/></g></svg>',home:'<svg width="24" height="24"><path fill-rule="nonzero" d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>',"horizontal-rule":'<svg width="24" height="24"><path d="M4 11h16v2H4z" fill-rule="evenodd"/></svg>',"image-options":'<svg width="24" height="24"><path d="M6 10a2 2 0 00-2 2c0 1.1.9 2 2 2a2 2 0 002-2 2 2 0 00-2-2zm12 0a2 2 0 00-2 2c0 1.1.9 2 2 2a2 2 0 002-2 2 2 0 00-2-2zm-6 0a2 2 0 00-2 2c0 1.1.9 2 2 2a2 2 0 002-2 2 2 0 00-2-2z" fill-rule="nonzero"/></svg>',image:'<svg width="24" height="24"><path d="M5 15.7l3.3-3.2c.3-.3.7-.3 1 0L12 15l4.1-4c.3-.4.8-.4 1 0l2 1.9V5H5v10.7zM5 18V19h3l2.8-2.9-2-2L5 17.9zm14-3l-2.5-2.4-6.4 6.5H19v-4zM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 01-1-1V4c0-.6.4-1 1-1zm6 8a2 2 0 100-4 2 2 0 000 4z" fill-rule="nonzero"/></svg>',indent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 110-2zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 010-2zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 010-2zm-5 4h12a1 1 0 010 2H7a1 1 0 010-2zm-2.6-3.8L6.2 12l-1.8-1.2a1 1 0 011.2-1.6l3 2a1 1 0 010 1.6l-3 2a1 1 0 11-1.2-1.6z" fill-rule="evenodd"/></svg>',info:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 015.7 2.3A8 8 0 1112 4zm-1 3v2h2V7h-2zm3 10v-1h-1v-5h-3v1h1v4h-1v1h4z" fill-rule="evenodd"/></svg>',"insert-character":'<svg width="24" height="24"><path d="M15 18h4l1-2v4h-6v-3.3l1.4-1a6 6 0 001.8-2.9 6.3 6.3 0 00-.1-4.1 5.8 5.8 0 00-3-3.2c-.6-.3-1.3-.5-2.1-.5a5.1 5.1 0 00-3.9 1.8 6.3 6.3 0 00-1.3 6 6.2 6.2 0 001.8 3l1.4.9V20H4v-4l1 2h4v-.5l-2-1L5.4 15A6.5 6.5 0 014 11c0-1 .2-1.9.6-2.7A7 7 0 016.3 6C7.1 5.4 8 5 9 4.5c1-.3 2-.5 3.1-.5a8.8 8.8 0 015.7 2 7 7 0 011.7 2.3 6 6 0 01.2 4.8c-.2.7-.6 1.3-1 1.9a7.6 7.6 0 01-3.6 2.5v.5z" fill-rule="evenodd"/></svg>',"insert-time":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M12 19a7 7 0 100-14 7 7 0 000 14zm0 2a9 9 0 110-18 9 9 0 010 18z"/><path d="M16 12h-3V7c0-.6-.4-1-1-1a1 1 0 00-1 1v7h5c.6 0 1-.4 1-1s-.4-1-1-1z"/></g></svg>',invert:'<svg width="24" height="24"><path d="M18 19.3L16.5 18a5.8 5.8 0 01-3.1 1.9 6.1 6.1 0 01-5.5-1.6A5.8 5.8 0 016 14v-.3l.1-1.2A13.9 13.9 0 017.7 9l-3-3 .7-.8 2.8 2.9 9 8.9 1.5 1.6-.7.6zm0-5.5v.3l-.1 1.1-.4 1-1.2-1.2a4.3 4.3 0 00.2-1v-.2c0-.4 0-.8-.2-1.3l-.5-1.4a14.8 14.8 0 00-3-4.2L12 6a26.1 26.1 0 00-2.2 2.5l-1-1a20.9 20.9 0 012.9-3.3L12 4l1 .8a22.2 22.2 0 014 5.4c.6 1.2 1 2.4 1 3.6z" fill-rule="evenodd"/></svg>',italic:'<svg width="24" height="24"><path d="M16.7 4.7l-.1.9h-.3c-.6 0-1 0-1.4.3-.3.3-.4.6-.5 1.1l-2.1 9.8v.6c0 .5.4.8 1.4.8h.2l-.2.8H8l.2-.8h.2c1.1 0 1.8-.5 2-1.5l2-9.8.1-.5c0-.6-.4-.8-1.4-.8h-.3l.2-.9h5.8z" fill-rule="evenodd"/></svg>',language:'<svg width="24" height="24"><path d="M12 3a9 9 0 110 18 9 9 0 010-18zm4.3 13.3c-.5 1-1.2 2-2 2.9a7.5 7.5 0 003.2-2.1l-.2-.2a6 6 0 00-1-.6zm-8.6 0c-.5.2-.9.5-1.2.8.9 1 2 1.7 3.2 2a10 10 0 01-2-2.8zm3.6-.8c-.8 0-1.6.1-2.2.3.5 1 1.2 1.9 2.1 2.7zm1.5 0v3c.9-.8 1.6-1.7 2.1-2.7-.6-.2-1.4-.3-2.1-.3zm-6-2.7H4.5c.2 1 .5 2.1 1 3h.3l1.3-1a10 10 0 01-.3-2zm12.7 0h-2.3c0 .7-.1 1.4-.3 2l1.6 1.1c.5-1 .9-2 1-3.1zm-3.8 0h-3V14c1 0 2 .1 2.7.4.2-.5.3-1 .3-1.6zm-4.4 0h-3l.3 1.6c.8-.3 1.7-.4 2.7-.4v-1.3zm-5.5-5c-.7 1-1.1 2.2-1.3 3.5h2.3c0-1 .2-1.8.5-2.6l-1.5-1zm2.9 1.4v.1c-.2.6-.4 1.3-.4 2h3V9.4c-1 0-1.8-.1-2.6-.3zm6.6 0h-.1l-2.4.3v1.8h3l-.5-2.1zm3-1.4l-.3.1-1.3.8c.3.8.5 1.6.5 2.6h2.3a7.5 7.5 0 00-1.3-3.5zm-9 0l2 .2V5.5a9 9 0 00-2 2.2zm3.5-2.3V8c.6 0 1.3 0 1.9-.2a9 9 0 00-2-2.3zm-3-.7h-.1c-1.1.4-2.1 1-3 1.8l1.2.7a10 10 0 011.9-2.5zm4.4 0l.1.1a10 10 0 011.8 2.4l1.1-.7a7.5 7.5 0 00-3-1.8z"/></svg>',"line-height":'<svg width="24" height="24"><path d="M21 5a1 1 0 01.1 2H13a1 1 0 01-.1-2H21zm0 4a1 1 0 01.1 2H13a1 1 0 01-.1-2H21zm0 4a1 1 0 01.1 2H13a1 1 0 01-.1-2H21zm0 4a1 1 0 01.1 2H13a1 1 0 01-.1-2H21zM7 3.6l3.7 3.7a1 1 0 01-1.3 1.5h-.1L8 7.3v9.2l1.3-1.3a1 1 0 011.3 0h.1c.4.4.4 1 0 1.3v.1L7 20.4l-3.7-3.7a1 1 0 011.3-1.5h.1L6 16.7V7.4L4.7 8.7a1 1 0 01-1.3 0h-.1a1 1 0 010-1.3v-.1L7 3.6z"/></svg>',line:'<svg width="24" height="24"><path d="M15 9l-8 8H4v-3l8-8 3 3zm1-1l-3-3 1-1h1c-.2 0 0 0 0 0l2 2s0 .2 0 0v1l-1 1zM4 18h16v2H4v-2z" fill-rule="evenodd"/></svg>',link:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 011.4 1.4l-2.1 2a2 2 0 102.7 2.8l4.8-4.8a1 1 0 000-1.4 1 1 0 111.4-1.3 2.9 2.9 0 010 4L9.6 20a3.9 3.9 0 01-5.5-5.5l2-2zm11.6-.6a1 1 0 01-1.4-1.4l2-2a2 2 0 10-2.6-2.8L11 10.3a1 1 0 000 1.4A1 1 0 119.6 13a2.9 2.9 0 010-4L14.4 4a3.9 3.9 0 015.5 5.5l-2 2z" fill-rule="nonzero"/></svg>',"list-bull-circle":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M11 16a2 2 0 100-4 2 2 0 000 4zm0 1a3 3 0 110-6 3 3 0 010 6zM11 26a2 2 0 100-4 2 2 0 000 4zm0 1a3 3 0 110-6 3 3 0 010 6zM11 36a2 2 0 100-4 2 2 0 000 4zm0 1a3 3 0 110-6 3 3 0 010 6z" fill-rule="nonzero"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-default":'<svg width="48" height="48"><g fill-rule="evenodd"><circle cx="11" cy="14" r="3"/><circle cx="11" cy="24" r="3"/><circle cx="11" cy="34" r="3"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-square":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M8 11h6v6H8zM8 21h6v6H8zM8 31h6v6H8z"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-num-default-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 17v-4.8l-1.6 1v-1.1l1.6-1h1.2V17zM33.3 17.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm1.7 5.7c0-1.2 1-2 2.2-2 1.3 0 2.1.8 2.1 1.8 0 .7-.3 1.2-1.3 2.2l-1.2 1v.2h2.6v1h-4.3v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H35zm-1.7 4.3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm3.2 7.3v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H35c0-1.1 1-1.8 2.2-1.8 1.2 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.7.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .6 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7zm-3.3 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7z"/></g></svg>',"list-num-default":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10 17v-4.8l-1.5 1v-1.1l1.6-1h1.2V17h-1.2zm3.6.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7zm-5 5.7c0-1.2.8-2 2.1-2s2.1.8 2.1 1.8c0 .7-.3 1.2-1.4 2.2l-1.1 1v.2h2.6v1H8.6v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H8.5zm6.3 4.3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zM10 34.4v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H8.6c0-1.1 1-1.8 2.2-1.8 1.3 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.8.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .7 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7zm4.7 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7z"/></g></svg>',"list-num-lower-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M36.5 16c-.9 0-1.5-.5-1.5-1.3s.6-1.3 1.8-1.4h1v-.4c0-.4-.2-.6-.7-.6-.4 0-.7.1-.8.4h-1.1c0-.8.8-1.4 2-1.4S39 12 39 13V16h-1.2v-.6c-.3.4-.8.7-1.4.7zm.4-.8c.6 0 1-.4 1-.9V14h-1c-.5.1-.7.3-.7.6 0 .4.3.6.7.6zM33.1 16.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zM37.7 26c-.7 0-1.2-.2-1.5-.7v.7H35v-6.3h1.2v2.5c.3-.5.8-.9 1.5-.9 1.1 0 1.8 1 1.8 2.4 0 1.5-.7 2.4-1.8 2.4zm-.5-3.6c-.6 0-1 .5-1 1.3s.4 1.4 1 1.4c.7 0 1-.6 1-1.4 0-.8-.3-1.3-1-1.3zM33.2 26.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zm6 7h-1c-.1-.5-.4-.8-1-.8s-1 .5-1 1.4c0 1 .4 1.4 1 1.4.5 0 .9-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7zm-6.1 3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-lower-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.3 15.2c.5 0 1-.4 1-.9V14h-1c-.5.1-.8.3-.8.6 0 .4.3.6.8.6zm-.4.9c-1 0-1.5-.6-1.5-1.4 0-.8.6-1.3 1.7-1.4h1.1v-.4c0-.4-.2-.6-.7-.6-.5 0-.8.1-.9.4h-1c0-.8.8-1.4 2-1.4 1.1 0 1.8.6 1.8 1.6V16h-1.1v-.6h-.1c-.2.4-.7.7-1.3.7zm4.6 0c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm-3.2 10c-.6 0-1.2-.3-1.4-.8v.7H8.5v-6.3H10v2.5c.3-.5.8-.9 1.4-.9 1.2 0 1.9 1 1.9 2.4 0 1.5-.7 2.4-1.9 2.4zm-.4-3.7c-.7 0-1 .5-1 1.3s.3 1.4 1 1.4c.6 0 1-.6 1-1.4 0-.8-.4-1.3-1-1.3zm4 3.7c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm-2.2 7h-1.2c0-.5-.4-.8-.9-.8-.6 0-1 .5-1 1.4 0 1 .4 1.4 1 1.4.5 0 .8-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7zm1.8 3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-lower-greek-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 16c-1.2 0-2-.8-2-2.3 0-1.5.8-2.4 2-2.4.6 0 1 .4 1.3 1v-.9H40v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1-.7h-.2c-.2.4-.7.8-1.3.8zm.3-1c.6 0 1-.5 1-1.3s-.4-1.3-1-1.3-1 .5-1 1.3.4 1.4 1 1.4zM33.3 16.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zM36 21.9c0-1.5.8-2.3 2.1-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.9 1.3.9.3 1.3.8 1.3 1.7 0 1.2-.7 1.9-1.8 1.9-.6 0-1.1-.3-1.4-.8v2.2H36V22zm1.8 1.2v-1h.3c.5 0 .9-.2.9-.7 0-.5-.3-.8-.9-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1 1.3s1-.4 1-1-.4-1-1.2-1h-.3zM33.3 26.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zM37.1 34.6L34.8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.2.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2zm.7 1a2 2 0 00-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1zM33.3 36.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-lower-greek":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.5 15c.7 0 1-.5 1-1.3s-.3-1.3-1-1.3c-.5 0-.9.5-.9 1.3s.4 1.4 1 1.4zm-.3 1c-1.1 0-1.8-.8-1.8-2.3 0-1.5.7-2.4 1.8-2.4.7 0 1.1.4 1.3 1h.1v-.9h1.2v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1.1-.7h-.1c-.2.4-.7.8-1.4.8zm5 .1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zm-4.9 7v-1h.3c.6 0 1-.2 1-.7 0-.5-.4-.8-1-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1.1 1.3.6 0 1-.4 1-1s-.5-1-1.3-1h-.3zM8.6 22c0-1.5.7-2.3 2-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.8 1.3.8.3 1.3.8 1.3 1.7 0 1.2-.8 1.9-1.9 1.9-.6 0-1.1-.3-1.3-.8v2.2H8.5V22zm6.2 4.2c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7zm-4.5 8.5L8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.1.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2zm.7 1a2 2 0 00-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1zm4.5.5c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-lower-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M32.9 16v-1.2h-1.3V16H33zm0 10v-1.2h-1.3V26H33zm0 10v-1.2h-1.3V36H33z"/><path fill-rule="nonzero" d="M36 21h-1.5v5H36zM36 31h-1.5v5H36zM39 21h-1.5v5H39zM39 31h-1.5v5H39zM42 31h-1.5v5H42zM36 11h-1.5v5H36zM36 19h-1.5v1H36zM36 29h-1.5v1H36zM39 19h-1.5v1H39zM39 29h-1.5v1H39zM42 29h-1.5v1H42zM36 9h-1.5v1H36z"/></g></svg>',"list-num-lower-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 16v-1.2h1.3V16H15zm0 10v-1.2h1.3V26H15zm0 10v-1.2h1.3V36H15z"/><path fill-rule="nonzero" d="M12 21h1.5v5H12zM12 31h1.5v5H12zM9 21h1.5v5H9zM9 31h1.5v5H9zM6 31h1.5v5H6zM12 11h1.5v5H12zM12 19h1.5v1H12zM12 29h1.5v1H12zM9 19h1.5v1H9zM9 29h1.5v1H9zM6 29h1.5v1H6zM12 9h1.5v1H12z"/></g></svg>',"list-num-upper-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M39.3 17l-.5-1.4h-2l-.5 1.4H35l2-6h1.6l2 6h-1.3zm-1.6-4.7l-.7 2.3h1.6l-.8-2.3zM33.4 17c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7zm4.7 9.9h-2.7v-6H38c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7zm-1.4-5v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1zm0 4h1.1c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9h-1.1V26zM33 27.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm4.9 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2zm-4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-upper-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M12.6 17l-.5-1.4h-2L9.5 17H8.3l2-6H12l2 6h-1.3zM11 12.3l-.7 2.3h1.6l-.8-2.3zm4.7 4.8c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7zM11.4 27H8.7v-6h2.6c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7zM10 22v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1zm0 4H11c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9H10V26zm5.4 1.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm-4.1 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2zm4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-upper-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M31.6 17v-1.2H33V17h-1.3zm0 10v-1.2H33V27h-1.3zm0 10v-1.2H33V37h-1.3z"/><path fill-rule="nonzero" d="M34.5 20H36v7h-1.5zM34.5 30H36v7h-1.5zM37.5 20H39v7h-1.5zM37.5 30H39v7h-1.5zM40.5 30H42v7h-1.5zM34.5 10H36v7h-1.5z"/></g></svg>',"list-num-upper-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 17v-1.2h1.3V17H15zm0 10v-1.2h1.3V27H15zm0 10v-1.2h1.3V37H15z"/><path fill-rule="nonzero" d="M12 20h1.5v7H12zM12 30h1.5v7H12zM9 20h1.5v7H9zM9 30h1.5v7H9zM6 30h1.5v7H6zM12 10h1.5v7H12z"/></g></svg>',lock:'<svg width="24" height="24"><path d="M16.3 11c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 01-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H8V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h.3zM10 8v3h4V8a1 1 0 00-.3-.7A1 1 0 0013 7h-2a1 1 0 00-.7.3 1 1 0 00-.3.7z" fill-rule="evenodd"/></svg>',ltr:'<svg width="24" height="24"><path d="M11 5h7a1 1 0 010 2h-1v11a1 1 0 01-2 0V7h-2v11a1 1 0 01-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 017.8 10a3.3 3.3 0 010-2.8 3.4 3.4 0 011.8-1.8L11 5zM4.4 16.2L6.2 15l-1.8-1.2a1 1 0 011.2-1.6l3 2a1 1 0 010 1.6l-3 2a1 1 0 11-1.2-1.6z" fill-rule="evenodd"/></svg>',"more-drawer":'<svg width="24" height="24"><path d="M6 10a2 2 0 00-2 2c0 1.1.9 2 2 2a2 2 0 002-2 2 2 0 00-2-2zm12 0a2 2 0 00-2 2c0 1.1.9 2 2 2a2 2 0 002-2 2 2 0 00-2-2zm-6 0a2 2 0 00-2 2c0 1.1.9 2 2 2a2 2 0 002-2 2 2 0 00-2-2z" fill-rule="nonzero"/></svg>',"new-document":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 00-2 2v14c0 1.1.9 2 2 2h10a2 2 0 002-2V7.6L14.4 3zM17 19H7V5h6v4h4v10z" fill-rule="nonzero"/></svg>',"new-tab":'<svg width="24" height="24"><path d="M15 13l2-2v8H5V7h8l-2 2H7v8h8v-4zm4-8v5.5l-2-2-5.6 5.5H10v-1.4L15.5 7l-2-2H19z" fill-rule="evenodd"/></svg>',"non-breaking":'<svg width="24" height="24"><path d="M11 11H8a1 1 0 110-2h3V6c0-.6.4-1 1-1s1 .4 1 1v3h3c.6 0 1 .4 1 1s-.4 1-1 1h-3v3c0 .6-.4 1-1 1a1 1 0 01-1-1v-3zm10 4v5H3v-5c0-.6.4-1 1-1s1 .4 1 1v3h14v-3c0-.6.4-1 1-1s1 .4 1 1z" fill-rule="evenodd"/></svg>',notice:'<svg width="24" height="24"><path d="M17.8 9.8L15.4 4 20 8.5v7L15.5 20h-7L4 15.5v-7L8.5 4h7l2.3 5.8zm0 0l2.2 5.7-2.3-5.8zM13 17v-2h-2v2h2zm0-4V7h-2v6h2z" fill-rule="evenodd"/></svg>',"ordered-list-rtl":'<svg width="24" height="24"><path d="M6 17h8a1 1 0 010 2H6a1 1 0 010-2zm0-6h8a1 1 0 010 2H6a1 1 0 010-2zm0-6h8a1 1 0 010 2H6a1 1 0 110-2zm13-1v3.5a.5.5 0 11-1 0V5h-.5a.5.5 0 110-1H19zm-1 8.8l.2.2h1.3a.5.5 0 110 1h-1.6a1 1 0 01-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 00-.2-.2h-1.3a.5.5 0 01-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3zm2 4.2v2c0 .6-.4 1-1 1h-1.5a.5.5 0 010-1h1.2a.3.3 0 100-.6h-1.3a.4.4 0 110-.8h1.3a.3.3 0 000-.6h-1.2a.5.5 0 110-1H19c.6 0 1 .4 1 1z" fill-rule="evenodd"/></svg>',"ordered-list":'<svg width="24" height="24"><path d="M10 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 110-2zM6 4v3.5c0 .3-.2.5-.5.5a.5.5 0 01-.5-.5V5h-.5a.5.5 0 010-1H6zm-1 8.8l.2.2h1.3c.3 0 .5.2.5.5s-.2.5-.5.5H4.9a1 1 0 01-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 00-.2-.2H4.5a.5.5 0 01-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3zM7 17v2c0 .6-.4 1-1 1H4.5a.5.5 0 010-1h1.2c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.4a.4.4 0 110-.8h1.3c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.5a.5.5 0 110-1H6c.6 0 1 .4 1 1z" fill-rule="evenodd"/></svg>',orientation:'<svg width="24" height="24"><path d="M7.3 6.4L1 13l6.4 6.5 6.5-6.5-6.5-6.5zM3.7 13l3.6-3.7L11 13l-3.7 3.7-3.6-3.7zM12 6l2.8 2.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0L9.2 5.7a.8.8 0 010-1.2L13.6.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L12 4h1a9 9 0 11-4.3 16.9l1.5-1.5A7 7 0 1013 6h-1z" fill-rule="nonzero"/></svg>',outdent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 110-2zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 010-2zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 010-2zm-5 4h12a1 1 0 010 2H7a1 1 0 010-2zm1.6-3.8a1 1 0 01-1.2 1.6l-3-2a1 1 0 010-1.6l3-2a1 1 0 011.2 1.6L6.8 12l1.8 1.2z" fill-rule="evenodd"/></svg>',"page-break":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M5 11c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 010-2zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 010-2zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 010-2zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1h-1a1 1 0 010-2zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 010-2zM7 3v5h10V3c0-.6.4-1 1-1s1 .4 1 1v7H5V3c0-.6.4-1 1-1s1 .4 1 1zM6 22a1 1 0 01-1-1v-7h14v7c0 .6-.4 1-1 1a1 1 0 01-1-1v-5H7v5c0 .6-.4 1-1 1z"/></g></svg>',paragraph:'<svg width="24" height="24"><path fill-rule="evenodd" d="M10 5h7a1 1 0 010 2h-1v11a1 1 0 01-2 0V7h-2v11a1 1 0 01-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 016.8 10a3.3 3.3 0 010-2.8 3.4 3.4 0 011.8-1.8L10 5z"/></svg>',"paste-column-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 012.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 01-1-1V5H6v13h7v2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0112 1zm8 7v12h-6V8h6zm-1.5 1.5h-3v9h3v-9zM12 3a1 1 0 100 2 1 1 0 000-2z"/></svg>',"paste-column-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 012.8 2H18c1 0 2 .8 2 1.9V18c0 1-.8 2-1.9 2H11v-2h7V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 01-1-1V5H6v2H4V5c0-1 .8-2 1.9-2H9.2A3 3 0 0112 1zm-2 7v12H4V8h6zM8.5 9.5h-3v9h3v-9zM12 3a1 1 0 100 2 1 1 0 000-2z"/></svg>',"paste-row-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 012.8 2H18c1 0 2 .8 2 1.9V11h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 01-1-1V5H6v13h14c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0112 1zm10 11v5H8v-5h14zm-1.5 1.5h-11v2h11v-2zM12 3a1 1 0 100 2 1 1 0 000-2z"/></svg>',"paste-row-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 012.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 01-1-1V5H6v13h12v-4h2v4c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0112 1zm10 7v5H8V8h14zm-1.5 1.5h-11v2h11v-2zM12 3a1 1 0 100 2 1 1 0 000-2z"/></svg>',"paste-text":'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 01-1-1V5H6v13h3V9h9zM9 20H6a2 2 0 01-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0112 1a3 3 0 012.8 2H18a2 2 0 012 2v4h1v12H9v-1zm1.5-9.5v9h9v-9h-9zM12 3a1 1 0 00-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1zm0 9h6v2h-.5l-.5-1h-1v4h.8v1h-3.6v-1h.8v-4h-1l-.5 1H12v-2z" fill-rule="nonzero"/></svg>',paste:'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 01-1-1V5H6v13h3V9h9zM9 20H6a2 2 0 01-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0112 1a3 3 0 012.8 2H18a2 2 0 012 2v4h1v12H9v-1zm1.5-9.5v9h9v-9h-9zM12 3a1 1 0 00-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1z" fill-rule="nonzero"/></svg>',"permanent-pen":'<svg width="24" height="24"><path d="M10.5 17.5L8 20H3v-3l3.5-3.5a2 2 0 010-3L14 3l1 1-7.3 7.3a1 1 0 000 1.4l3.6 3.6c.4.4 1 .4 1.4 0L20 9l1 1-7.6 7.6a2 2 0 01-2.8 0l-.1-.1z" fill-rule="nonzero"/></svg>',plus:'<svg width="24" height="24"><path d="M12 4c.5 0 1 .4 1 .9V11h6a1 1 0 01.1 2H13v6a1 1 0 01-2 .1V13H5a1 1 0 01-.1-2H11V5c0-.6.4-1 1-1z"/></svg>',preferences:'<svg width="24" height="24"><path d="M20.1 13.5l-1.9.2a5.8 5.8 0 01-.6 1.5l1.2 1.5c.4.4.3 1 0 1.4l-.7.7a1 1 0 01-1.4 0l-1.5-1.2a6.2 6.2 0 01-1.5.6l-.2 1.9c0 .5-.5.9-1 .9h-1a1 1 0 01-1-.9l-.2-1.9a5.8 5.8 0 01-1.5-.6l-1.5 1.2a1 1 0 01-1.4 0l-.7-.7a1 1 0 010-1.4l1.2-1.5a6.2 6.2 0 01-.6-1.5l-1.9-.2a1 1 0 01-.9-1v-1c0-.5.4-1 .9-1l1.9-.2a5.8 5.8 0 01.6-1.5L5.2 7.3a1 1 0 010-1.4l.7-.7a1 1 0 011.4 0l1.5 1.2a6.2 6.2 0 011.5-.6l.2-1.9c0-.5.5-.9 1-.9h1c.5 0 1 .4 1 .9l.2 1.9a5.8 5.8 0 011.5.6l1.5-1.2a1 1 0 011.4 0l.7.7c.3.4.4 1 0 1.4l-1.2 1.5a6.2 6.2 0 01.6 1.5l1.9.2c.5 0 .9.5.9 1v1c0 .5-.4 1-.9 1zM12 15a3 3 0 100-6 3 3 0 000 6z" fill-rule="evenodd"/></svg>',preview:'<svg width="24" height="24"><path d="M3.5 12.5c.5.8 1.1 1.6 1.8 2.3 2 2 4.2 3.2 6.7 3.2s4.7-1.2 6.7-3.2a16.2 16.2 0 002.1-2.8 15.7 15.7 0 00-2.1-2.8c-2-2-4.2-3.2-6.7-3.2a9.3 9.3 0 00-6.7 3.2A16.2 16.2 0 003.2 12c0 .2.2.3.3.5zm-2.4-1l.7-1.2L4 7.8C6.2 5.4 8.9 4 12 4c3 0 5.8 1.4 8.1 3.8a18.2 18.2 0 012.8 3.7v1l-.7 1.2-2.1 2.5c-2.3 2.4-5 3.8-8.1 3.8-3 0-5.8-1.4-8.1-3.8a18.2 18.2 0 01-2.8-3.7 1 1 0 010-1zm12-3.3a2 2 0 102.7 2.6 4 4 0 11-2.6-2.6z" fill-rule="nonzero"/></svg>',print:'<svg width="24" height="24"><path d="M18 8H6a3 3 0 00-3 3v6h2v3h14v-3h2v-6a3 3 0 00-3-3zm-1 10H7v-4h10v4zm.5-5c-.8 0-1.5-.7-1.5-1.5s.7-1.5 1.5-1.5 1.5.7 1.5 1.5-.7 1.5-1.5 1.5zm.5-8H6v2h12V5z" fill-rule="nonzero"/></svg>',quote:'<svg width="24" height="24"><path d="M7.5 17h.9c.4 0 .7-.2.9-.6L11 13V8c0-.6-.4-1-1-1H6a1 1 0 00-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 00.8 1.3zm8 0h.9c.4 0 .7-.2.9-.6L19 13V8c0-.6-.4-1-1-1h-4a1 1 0 00-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 00.8 1.3z" fill-rule="nonzero"/></svg>',redo:'<svg width="24" height="24"><path d="M17.6 10H12c-2.8 0-4.4 1.4-4.9 3.5-.4 2 .3 4 1.4 4.6a1 1 0 11-1 1.8c-2-1.2-2.9-4.1-2.3-6.8.6-3 3-5.1 6.8-5.1h5.6l-3.3-3.3a1 1 0 111.4-1.4l5 5a1 1 0 010 1.4l-5 5a1 1 0 01-1.4-1.4l3.3-3.3z" fill-rule="nonzero"/></svg>',reload:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M5 22.1l-1.2-4.7v-.2a1 1 0 011-1l5 .4a1 1 0 11-.2 2l-2.2-.2a7.8 7.8 0 008.4.2 7.5 7.5 0 003.5-6.4 1 1 0 112 0 9.5 9.5 0 01-4.5 8 9.9 9.9 0 01-10.2 0l.4 1.4a1 1 0 11-2 .5zM13.6 7.4c0-.5.5-1 1-.9l2.8.2a8 8 0 00-9.5-1 7.5 7.5 0 00-3.6 7 1 1 0 01-2 0 9.5 9.5 0 014.5-8.6 10 10 0 0110.9.3l-.3-1a1 1 0 012-.5l1.1 4.8a1 1 0 01-1 1.2l-5-.4a1 1 0 01-.9-1z"/></g></svg>',"remove-formatting":'<svg width="24" height="24"><path d="M13.2 6a1 1 0 010 .2l-2.6 10a1 1 0 01-1 .8h-.2a.8.8 0 01-.8-1l2.6-10H8a1 1 0 110-2h9a1 1 0 010 2h-3.8zM5 18h7a1 1 0 010 2H5a1 1 0 010-2zm13 1.5L16.5 18 15 19.5a.7.7 0 01-1-1l1.5-1.5-1.5-1.5a.7.7 0 011-1l1.5 1.5 1.5-1.5a.7.7 0 011 1L17.5 17l1.5 1.5a.7.7 0 01-1 1z" fill-rule="evenodd"/></svg>',remove:'<svg width="24" height="24"><path d="M16 7h3a1 1 0 010 2h-1v9a3 3 0 01-3 3H9a3 3 0 01-3-3V9H5a1 1 0 110-2h3V6a3 3 0 013-3h2a3 3 0 013 3v1zm-2 0V6c0-.6-.4-1-1-1h-2a1 1 0 00-1 1v1h4zm2 2H8v9c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V9zm-7 3a1 1 0 012 0v4a1 1 0 01-2 0v-4zm4 0a1 1 0 012 0v4a1 1 0 01-2 0v-4z" fill-rule="nonzero"/></svg>',"resize-handle":'<svg width="10" height="10"><g fill-rule="nonzero"><path d="M8.1 1.1A.5.5 0 119 2l-7 7A.5.5 0 111 8l7-7zM8.1 5.1A.5.5 0 119 6l-3 3A.5.5 0 115 8l3-3z"/></g></svg>',resize:'<svg width="24" height="24"><path d="M4 5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h6c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 01-.7.3H7.4L18 16.6V13c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v6c0 .3-.1.5-.3.7a1 1 0 01-.7.3h-6a1 1 0 01-.7-.3 1 1 0 01-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3.6L6 7.4V11c0 .3-.1.5-.3.7a1 1 0 01-.7.3 1 1 0 01-.7-.3A1 1 0 014 11V5z" fill-rule="evenodd"/></svg>',"restore-draft":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1z"/><path d="M4.7 10H9a1 1 0 010 2H3a1 1 0 01-1-1V5a1 1 0 112 0v3l2.5-2.4a9.2 9.2 0 0110.8-1.5A9 9 0 0113.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 111.3-1.5 7.2 7.2 0 0011.6-3.7 7 7 0 00-3.5-7.7A7.2 7.2 0 008 7L4.7 10z" fill-rule="nonzero"/></g></svg>',"rotate-left":'<svg width="24" height="24"><path d="M4.7 10H9a1 1 0 010 2H3a1 1 0 01-1-1V5a1 1 0 112 0v3l2.5-2.4a9.2 9.2 0 0110.8-1.5A9 9 0 0113.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 111.3-1.5 7.2 7.2 0 0011.6-3.7 7 7 0 00-3.5-7.7A7.2 7.2 0 008 7L4.7 10z" fill-rule="nonzero"/></svg>',"rotate-right":'<svg width="24" height="24"><path d="M20 8V5a1 1 0 012 0v6c0 .6-.4 1-1 1h-6a1 1 0 010-2h4.3L16 7A7.2 7.2 0 007.7 6a7 7 0 003 13.1c1.9.1 3.7-.5 5-1.7a1 1 0 011.4 1.5A9.2 9.2 0 012.2 14c-.9-3.9 1-8 4.5-9.9 3.5-1.9 8-1.3 10.8 1.5L20 8z" fill-rule="nonzero"/></svg>',rtl:'<svg width="24" height="24"><path d="M8 5h8v2h-2v12h-2V7h-2v12H8v-7c-.5 0-1 0-1.4-.3A3.4 3.4 0 014.8 10a3.3 3.3 0 010-2.8 3.4 3.4 0 011.8-1.8L8 5zm12 11.2a1 1 0 11-1 1.6l-3-2a1 1 0 010-1.6l3-2a1 1 0 111 1.6L18.4 15l1.8 1.2z" fill-rule="evenodd"/></svg>',save:'<svg width="24" height="24"><path d="M5 16h14a2 2 0 012 2v2a2 2 0 01-2 2H5a2 2 0 01-2-2v-2c0-1.1.9-2 2-2zm0 2v2h14v-2H5zm10 0h2v2h-2v-2zm-4-6.4L8.7 9.3a1 1 0 10-1.4 1.4l4 4c.4.4 1 .4 1.4 0l4-4a1 1 0 10-1.4-1.4L13 11.6V4a1 1 0 00-2 0v7.6z" fill-rule="nonzero"/></svg>',search:'<svg width="24" height="24"><path d="M16 17.3a8 8 0 111.4-1.4l4.3 4.4a1 1 0 01-1.4 1.4l-4.4-4.3zm-5-.3a6 6 0 100-12 6 6 0 000 12z" fill-rule="nonzero"/></svg>',"select-all":'<svg width="24" height="24"><path d="M3 5h2V3a2 2 0 00-2 2zm0 8h2v-2H3v2zm4 8h2v-2H7v2zM3 9h2V7H3v2zm10-6h-2v2h2V3zm6 0v2h2a2 2 0 00-2-2zM5 21v-2H3c0 1.1.9 2 2 2zm-2-4h2v-2H3v2zM9 3H7v2h2V3zm2 18h2v-2h-2v2zm8-8h2v-2h-2v2zm0 8a2 2 0 002-2h-2v2zm0-12h2V7h-2v2zm0 8h2v-2h-2v2zm-4 4h2v-2h-2v2zm0-16h2V3h-2v2zM7 17h10V7H7v10zm2-8h6v6H9V9z" fill-rule="nonzero"/></svg>',selected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 012 2v12a2 2 0 01-2 2H6a2 2 0 01-2-2V6c0-1.1.9-2 2-2zm3.6 10.9L7 12.3a.7.7 0 00-1 1L9.6 17 18 8.6a.7.7 0 000-1 .7.7 0 00-1 0l-7.4 7.3z"/></svg>',settings:'<svg width="24" height="24"><path d="M11 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 01-.2-.6V8H5a1 1 0 110-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.5V6zM8 8h2V6H8v2zm9 2.8v.2h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v.3c0 .2 0 .3-.2.5l-.6.2h-2.4c-.3 0-.4 0-.6-.2a.7.7 0 01-.2-.6V13H5a1 1 0 010-2h8v-.3c0-.2 0-.3.2-.5l.6-.2h2.4c.3 0 .4 0 .6.2l.2.6zM14 13h2v-2h-2v2zm-3 2.8v.2h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 01-.2-.6V18H5a1 1 0 010-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.6zM8 18h2v-2H8v2z" fill-rule="evenodd"/></svg>',sharpen:'<svg width="24" height="24"><path d="M16 6l4 4-8 9-8-9 4-4h8zm-4 10.2l5.5-6.2-.1-.1H12v-.3h5.1l-.2-.2H12V9h4.6l-.2-.2H12v-.3h4.1l-.2-.2H12V8h3.6l-.2-.2H8.7L6.5 10l.1.1H12v.3H6.9l.2.2H12v.3H7.3l.2.2H12v.3H7.7l.3.2h4v.3H8.2l.2.2H12v.3H8.6l.3.2H12v.3H9l.3.2H12v.3H9.5l.2.2H12v.3h-2l.2.2H12v.3h-1.6l.2.2H12v.3h-1.1l.2.2h.9v.3h-.7l.2.2h.5v.3h-.3l.3.2z" fill-rule="evenodd"/></svg>',sourcecode:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M9.8 15.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0l-4.4-4.1a.8.8 0 010-1.2l4.4-4.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L6 12l3.8 3.7zM14.2 15.7c-.3.3-.3.8 0 1 .4.4.9.4 1.2 0l4.4-4.1c.3-.3.3-.9 0-1.2l-4.4-4.2a.8.8 0 00-1.2 0c-.3.3-.3.8 0 1.1L18 12l-3.8 3.7z"/></g></svg>',"spell-check":'<svg width="24" height="24"><path d="M6 8v3H5V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h2c.3 0 .5.1.7.3.2.2.3.4.3.7v6H8V8H6zm0-3v2h2V5H6zm13 0h-3v5h3v1h-3a1 1 0 01-.7-.3 1 1 0 01-.3-.7V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3v1zm-5 1.5l-.1.7c-.1.2-.3.3-.6.3.3 0 .5.1.6.3l.1.7V10c0 .3-.1.5-.3.7a1 1 0 01-.7.3h-3V4h3c.3 0 .5.1.7.3.2.2.3.4.3.7v1.5zM13 10V8h-2v2h2zm0-3V5h-2v2h2zm3 5l1 1-6.5 7L7 15.5l1.3-1 2.2 2.2L16 12z" fill-rule="evenodd"/></svg>',"strike-through":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M15.6 8.5c-.5-.7-1-1.1-1.3-1.3-.6-.4-1.3-.6-2-.6-2.7 0-2.8 1.7-2.8 2.1 0 1.6 1.8 2 3.2 2.3 4.4.9 4.6 2.8 4.6 3.9 0 1.4-.7 4.1-5 4.1A6.2 6.2 0 017 16.4l1.5-1.1c.4.6 1.6 2 3.7 2 1.6 0 2.5-.4 3-1.2.4-.8.3-2-.8-2.6-.7-.4-1.6-.7-2.9-1-1-.2-3.9-.8-3.9-3.6C7.6 6 10.3 5 12.4 5c2.9 0 4.2 1.6 4.7 2.4l-1.5 1.1z"/><path d="M5 11h14a1 1 0 010 2H5a1 1 0 010-2z" fill-rule="nonzero"/></g></svg>',subscript:'<svg width="24" height="24"><path d="M10.4 10l4.6 4.6-1.4 1.4L9 11.4 4.4 16 3 14.6 7.6 10 3 5.4 4.4 4 9 8.6 13.6 4 15 5.4 10.4 10zM21 19h-5v-1l1-.8 1.7-1.6c.3-.4.5-.8.5-1.2 0-.3 0-.6-.2-.7-.2-.2-.5-.3-.9-.3a2 2 0 00-.8.2l-.7.3-.4-1.1 1-.6 1.2-.2c.8 0 1.4.3 1.8.7.4.4.6.9.6 1.5s-.2 1.1-.5 1.6a8 8 0 01-1.3 1.3l-.6.6h2.6V19z" fill-rule="nonzero"/></svg>',superscript:'<svg width="24" height="24"><path d="M15 9.4L10.4 14l4.6 4.6-1.4 1.4L9 15.4 4.4 20 3 18.6 7.6 14 3 9.4 4.4 8 9 12.6 13.6 8 15 9.4zm5.9 1.6h-5v-1l1-.8 1.7-1.6c.3-.5.5-.9.5-1.3 0-.3 0-.5-.2-.7-.2-.2-.5-.3-.9-.3l-.8.2-.7.4-.4-1.2c.2-.2.5-.4 1-.5.3-.2.8-.2 1.2-.2.8 0 1.4.2 1.8.6.4.4.6 1 .6 1.6 0 .5-.2 1-.5 1.5l-1.3 1.4-.6.5h2.6V11z" fill-rule="nonzero"/></svg>',"table-caption":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="12" height="2" x="3" y="4" rx="1"/><path d="M19 8a2 2 0 012 2v8a2 2 0 01-2 2H5a2 2 0 01-2-2v-8c0-1.1.9-2 2-2h14zM5 15v3h6v-3H5zm14 0h-6v3h6v-3zm0-5h-6v3h6v-3zM5 13h6v-3H5v3z"/></g></svg>',"table-cell-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M13 4v9H3V6c0-1.1.9-2 2-2h8zm-2 2H5v5h6V6z"/><path fill-rule="nonzero" d="M13 4h6a2 2 0 012 2v7h-8v-2h6V6h-6V4z" opacity=".2"/><path d="M18 20l-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3 .2-2.3 2 .7 3z"/><path fill-rule="nonzero" d="M3 13v5c0 1.1.9 2 2 2h8v-7h-2v5H5v-5H3z" opacity=".2"/></g></svg>',"table-cell-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm-8 9H5v5h6v-5zm8 0h-6v5h6v-5zm-8-7H5v5h6V6z"/></svg>',"table-cell-select-all":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm0 2H5v12h14V6z"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2z" opacity=".2"/></g></svg>',"table-cell-select-inner":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm0 2H5v12h14V6z" opacity=".2"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2z"/></g></svg>',"table-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 012 2v7h-8v7H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm-8 9H5v5h6v-5zm8-7h-6v5h6V6zm-8 0H5v5h6V6z"/><path d="M18 20l-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3 .2-2.3 2 .7 3z"/></g></svg>',"table-delete-column":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm-4 4h-2V6h-2v2H9V6H5v12h4v-2h2v2h2v-2h2v2h4V6h-4v2zm.3.5l1 1.2-3 2.3 3 2.3-1 1.2L12 13l-3.3 2.6-1-1.2 3-2.3-3-2.3 1-1.2L12 11l3.3-2.5z"/></svg>',"table-delete-row":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm0 2H5v3h2.5v2H5v2h2.5v2H5v3h14v-3h-2.5v-2H19v-2h-2.5V9H19V6zm-4.7 1.8l1.2 1L13 12l2.6 3.3-1.2 1-2.3-3-2.3 3-1.2-1L11 12 8.5 8.7l1.2-1 2.3 3 2.3-3z"/></svg>',"table-delete-table":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zM5 6v12h14V6H5z"/><path d="M14.4 8.6l1 1-2.3 2.4 2.3 2.4-1 1-2.4-2.3-2.4 2.3-1-1 2.3-2.4-2.3-2.4 1-1 2.4 2.3z"/></g></svg>',"table-insert-column-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M20 4c.6 0 1 .4 1 1v2a1 1 0 01-2 0V6h-8v12h8v-1a1 1 0 012 0v2c0 .5-.4 1-.9 1H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h15zM9 13H5v5h4v-5zm7-5c.5 0 1 .4 1 .9V11h2a1 1 0 01.1 2H17v2a1 1 0 01-2 .1V13h-2a1 1 0 01-.1-2H15V9c0-.6.4-1 1-1zM9 6H5v5h4V6z"/></svg>',"table-insert-column-before":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H4a1 1 0 01-1-1v-2a1 1 0 012 0v1h8V6H5v1a1 1 0 11-2 0V5c0-.6.4-1 1-1h15zm0 9h-4v5h4v-5zM8 8c.5 0 1 .4 1 .9V11h2a1 1 0 01.1 2H9v2a1 1 0 01-2 .1V13H5a1 1 0 01-.1-2H7V9c0-.6.4-1 1-1zm11-2h-4v5h4V6z"/></svg>',"table-insert-row-above":'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4a1 1 0 110 2H5v6h14V6h-1a1 1 0 010-2h2c.6 0 1 .4 1 1v13a2 2 0 01-2 2H5a2 2 0 01-2-2V5c0-.6.4-1 1-1h2zm5 10H5v4h6v-4zm8 0h-6v4h6v-4zM12 3c.5 0 1 .4 1 .9V6h2a1 1 0 010 2h-2v2a1 1 0 01-2 .1V8H9a1 1 0 010-2h2V4c0-.6.4-1 1-1z"/></svg>',"table-insert-row-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M12 13c.5 0 1 .4 1 .9V16h2a1 1 0 01.1 2H13v2a1 1 0 01-2 .1V18H9a1 1 0 01-.1-2H11v-2c0-.6.4-1 1-1zm6 7a1 1 0 010-2h1v-6H5v6h1a1 1 0 010 2H4a1 1 0 01-1-1V6c0-1.1.9-2 2-2h14a2 2 0 012 2v13c0 .5-.4 1-.9 1H18zM11 6H5v4h6V6zm8 0h-6v4h6V6z"/></svg>',"table-left-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm0 9h-4v5h4v-5zm-6 0H9v5h4v-5zm0-7H9v5h4V6zm6 0h-4v5h4V6z"/></svg>',"table-merge-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zM5 15.5V18h3v-2.5H5zm14-5h-9V18h9v-7.5zM19 6h-4v2.5h4V6zM8 6H5v2.5h3V6zm5 0h-3v2.5h3V6zm-8 7.5h3v-3H5v3z"/></svg>',"table-row-numbering-rtl":'<svg width="24" height="24"><path d="M6 4a2 2 0 00-2 2v13c0 1.1.9 2 2 2h12a2 2 0 002-2V6a2 2 0 00-2-2H6zm0 12h8v3H6v-3zm11 0c.6 0 1 .4 1 1v1a1 1 0 01-2 0v-1c0-.6.4-1 1-1zM6 11h8v3H6v-3zm11 0c.6 0 1 .4 1 1v1a1 1 0 01-2 0v-1c0-.6.4-1 1-1zM6 6h8v3H6V6zm11 0c.6 0 1 .4 1 1v1a1 1 0 11-2 0V7c0-.6.4-1 1-1z"/></svg>',"table-row-numbering":'<svg width="24" height="24"><path d="M18 4a2 2 0 012 2v13a2 2 0 01-2 2H6a2 2 0 01-2-2V6c0-1.1.9-2 2-2h12zm0 12h-8v3h8v-3zM7 16a1 1 0 00-1 1v1a1 1 0 002 0v-1c0-.6-.4-1-1-1zm11-5h-8v3h8v-3zM7 11a1 1 0 00-1 1v1a1 1 0 002 0v-1c0-.6-.4-1-1-1zm11-5h-8v3h8V6zM7 6a1 1 0 00-1 1v1a1 1 0 102 0V7c0-.6-.4-1-1-1z"/></svg>',"table-row-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zM5 15v3h6v-3H5zm14 0h-6v3h6v-3zm0-9h-6v3h6V6zM5 9h6V6H5v3z"/></svg>',"table-split-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zM8 15.5H5V18h3v-2.5zm11-5h-9V18h9v-7.5zm-2.5 1l1 1-2 2 2 2-1 1-2-2-2 2-1-1 2-2-2-2 1-1 2 2 2-2zm-8.5-1H5v3h3v-3zM19 6h-4v2.5h4V6zM8 6H5v2.5h3V6zm5 0h-3v2.5h3V6z"/></svg>',"table-top-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm-8 11H5v3h6v-3zm8 0h-6v3h6v-3zm0-5h-6v3h6v-3zM5 13h6v-3H5v3z"/></svg>',table:'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zM5 14v4h6v-4H5zm14 0h-6v4h6v-4zm0-6h-6v4h6V8zM5 12h6V8H5v4z"/></svg>',template:'<svg width="24" height="24"><path d="M19 19v-1H5v1h14zM9 16v-4a5 5 0 116 0v4h4a2 2 0 012 2v3H3v-3c0-1.1.9-2 2-2h4zm4 0v-5l.8-.6a3 3 0 10-3.6 0l.8.6v5h2z" fill-rule="nonzero"/></svg>',"temporary-placeholder":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M9 7.6V6h2.5V4.5a.5.5 0 111 0V6H15v1.6a8 8 0 11-6 0zm-2.6 5.3a.5.5 0 00.3.6c.3 0 .6 0 .6-.3l.1-.2a5 5 0 013.3-2.8c.3-.1.4-.4.4-.6-.1-.3-.4-.5-.6-.4a6 6 0 00-4.1 3.7z"/><circle cx="14" cy="4" r="1"/><circle cx="12" cy="2" r="1"/><circle cx="10" cy="4" r="1"/></g></svg>',"text-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path id="tox-icon-text-color__color" d="M3 18h18v3H3z"/><path d="M8.7 16h-.8a.5.5 0 01-.5-.6l2.7-9c.1-.3.3-.4.5-.4h2.8c.2 0 .4.1.5.4l2.7 9a.5.5 0 01-.5.6h-.8a.5.5 0 01-.4-.4l-.7-2.2c0-.3-.3-.4-.5-.4h-3.4c-.2 0-.4.1-.5.4l-.7 2.2c0 .3-.2.4-.4.4zm2.6-7.6l-.6 2a.5.5 0 00.5.6h1.6a.5.5 0 00.5-.6l-.6-2c0-.3-.3-.4-.5-.4h-.4c-.2 0-.4.1-.5.4z"/></g></svg>',toc:'<svg width="24" height="24"><path d="M5 5c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 110-2zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 110-2zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 010-2zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 010-2zm0-4c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 110-2zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 010-2zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2z" fill-rule="evenodd"/></svg>',translate:'<svg width="24" height="24"><path d="M12.7 14.3l-.3.7-.4.7-2.2-2.2-3.1 3c-.3.4-.8.4-1 0a.7.7 0 010-1l3.1-3A12.4 12.4 0 016.7 9H8a10.1 10.1 0 001.7 2.4c.5-.5 1-1.1 1.4-1.8l.9-2H4.7a.7.7 0 110-1.5h4.4v-.7c0-.4.3-.8.7-.8.4 0 .7.4.7.8v.7H15c.4 0 .8.3.8.7 0 .4-.4.8-.8.8h-1.4a12.3 12.3 0 01-1 2.4 13.5 13.5 0 01-1.7 2.3l1.9 1.8zm4.3-3l2.7 7.3a.5.5 0 01-.4.7 1 1 0 01-1-.7l-.6-1.5h-3.4l-.6 1.5a1 1 0 01-1 .7.5.5 0 01-.4-.7l2.7-7.4a1 1 0 012 0zm-2.2 4.4h2.4L16 12.5l-1.2 3.2z" fill-rule="evenodd"/></svg>',underline:'<svg width="24" height="24"><path d="M16 5c.6 0 1 .4 1 1v5.5a4 4 0 01-.4 1.8l-1 1.4a5.3 5.3 0 01-5.5 1 5 5 0 01-1.6-1c-.5-.4-.8-.9-1.1-1.4a4 4 0 01-.4-1.8V6c0-.6.4-1 1-1s1 .4 1 1v5.5c0 .3 0 .6.2 1l.6.7a3.3 3.3 0 002.2.8 3.4 3.4 0 002.2-.8c.3-.2.4-.5.6-.8l.2-.9V6c0-.6.4-1 1-1zM8 17h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 010-2z" fill-rule="evenodd"/></svg>',undo:'<svg width="24" height="24"><path d="M6.4 8H12c3.7 0 6.2 2 6.8 5.1.6 2.7-.4 5.6-2.3 6.8a1 1 0 01-1-1.8c1.1-.6 1.8-2.7 1.4-4.6-.5-2.1-2.1-3.5-4.9-3.5H6.4l3.3 3.3a1 1 0 11-1.4 1.4l-5-5a1 1 0 010-1.4l5-5a1 1 0 011.4 1.4L6.4 8z" fill-rule="nonzero"/></svg>',unlink:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 011.4 1.4l-2 2a2 2 0 102.6 2.8l4.8-4.8a1 1 0 000-1.4 1 1 0 111.4-1.3 2.9 2.9 0 010 4L9.6 20a3.9 3.9 0 01-5.5-5.5l2-2zm11.6-.6a1 1 0 01-1.4-1.4l2.1-2a2 2 0 10-2.7-2.8L11 10.3a1 1 0 000 1.4A1 1 0 119.6 13a2.9 2.9 0 010-4L14.4 4a3.9 3.9 0 015.5 5.5l-2 2zM7.6 6.3a.8.8 0 01-1 1.1L3.3 4.2a.7.7 0 111-1l3.2 3.1zM5.1 8.6a.8.8 0 010 1.5H3a.8.8 0 010-1.5H5zm5-3.5a.8.8 0 01-1.5 0V3a.8.8 0 011.5 0V5zm6 11.8a.8.8 0 011-1l3.2 3.2a.8.8 0 01-1 1L16 17zm-2.2 2a.8.8 0 011.5 0V21a.8.8 0 01-1.5 0V19zm5-3.5a.7.7 0 110-1.5H21a.8.8 0 010 1.5H19z" fill-rule="nonzero"/></svg>',unlock:'<svg width="24" height="24"><path d="M16 5c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h-2V8a1 1 0 00-.3-.7A1 1 0 0016 7h-2a1 1 0 00-.7.3 1 1 0 00-.3.7v3h.3c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H4.8c-.3 0-.4 0-.6-.2a.7.7 0 01-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H11V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2z" fill-rule="evenodd"/></svg>',"unordered-list":'<svg width="24" height="24"><path d="M11 5h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zM4.5 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1z" fill-rule="evenodd"/></svg>',unselected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 012 2v12a2 2 0 01-2 2H6a2 2 0 01-2-2V6c0-1.1.9-2 2-2zm0 1a1 1 0 00-1 1v12c0 .6.4 1 1 1h12c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H6z"/></svg>',upload:'<svg width="24" height="24"><path d="M18 19v-2a1 1 0 012 0v3c0 .6-.4 1-1 1H5a1 1 0 01-1-1v-3a1 1 0 012 0v2h12zM11 6.4L8.7 8.7a1 1 0 01-1.4-1.4l4-4a1 1 0 011.4 0l4 4a1 1 0 11-1.4 1.4L13 6.4V16a1 1 0 01-2 0V6.4z" fill-rule="nonzero"/></svg>',user:'<svg width="24" height="24"><path d="M12 24a12 12 0 110-24 12 12 0 010 24zm-8.7-5.3a11 11 0 0017.4 0C19.4 16.3 14.6 15 12 15c-2.6 0-7.4 1.3-8.7 3.7zM12 13c2.2 0 4-2 4-4.5S14.2 4 12 4 8 6 8 8.5 9.8 13 12 13z" fill-rule="nonzero"/></svg>',"vertical-align":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="18" height="2" x="3" y="11" rx="1"/><path d="M12 2c.6 0 1 .4 1 1v4l2-1.3a1 1 0 011.2 1.5l-.1.1-4.1 3-4-3a1 1 0 011-1.7l2 1.5V3c0-.6.4-1 1-1zm0 11.8l4 2.9a1 1 0 01-1 1.7l-2-1.5V21c0 .5-.4 1-.9 1H12a1 1 0 01-1-1v-4l-2 1.3a1 1 0 01-1.2-.1l-.1-.1a1 1 0 01.1-1.3l.1-.1 4.1-3z"/></g></svg>',visualblocks:'<svg width="24" height="24"><path d="M9 19v2H7v-2h2zm-4 0v2a2 2 0 01-2-2h2zm8 0v2h-2v-2h2zm8 0a2 2 0 01-2 2v-2h2zm-4 0v2h-2v-2h2zM15 7a1 1 0 010 2v7a1 1 0 01-2 0V9h-1v7a1 1 0 01-2 0v-4a2.5 2.5 0 01-.2-5H15zM5 15v2H3v-2h2zm16 0v2h-2v-2h2zM5 11v2H3v-2h2zm16 0v2h-2v-2h2zM5 7v2H3V7h2zm16 0v2h-2V7h2zM5 3v2H3c0-1.1.9-2 2-2zm8 0v2h-2V3h2zm6 0a2 2 0 012 2h-2V3zM9 3v2H7V3h2zm8 0v2h-2V3h2z" fill-rule="evenodd"/></svg>',visualchars:'<svg width="24" height="24"><path d="M10 5h7a1 1 0 010 2h-1v11a1 1 0 01-2 0V7h-2v11a1 1 0 01-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 016.8 10a3.3 3.3 0 010-2.8 3.4 3.4 0 011.8-1.8L10 5z" fill-rule="evenodd"/></svg>',warning:'<svg width="24" height="24"><path d="M19.8 18.3c.2.5.3.9 0 1.2-.1.3-.5.5-1 .5H5.2c-.5 0-.9-.2-1-.5-.3-.3-.2-.7 0-1.2L11 4.7l.5-.5.5-.2c.2 0 .3 0 .5.2.2 0 .3.3.5.5l6.8 13.6zM12 18c.3 0 .5-.1.7-.3.2-.2.3-.4.3-.7a1 1 0 00-.3-.7 1 1 0 00-.7-.3 1 1 0 00-.7.3 1 1 0 00-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3zm.7-3l.3-4a1 1 0 00-.3-.7 1 1 0 00-.7-.3 1 1 0 00-.7.3 1 1 0 00-.3.7l.3 4h1.4z" fill-rule="evenodd"/></svg>',"zoom-in":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 111.4-1.4l4.3 4.4a1 1 0 01-1.4 1.4l-4.4-4.3zm-5-.3a6 6 0 100-12 6 6 0 000 12zm-1-9a1 1 0 012 0v6a1 1 0 01-2 0V8zm-2 4a1 1 0 010-2h6a1 1 0 010 2H8z" fill-rule="nonzero"/></svg>',"zoom-out":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 111.4-1.4l4.3 4.4a1 1 0 01-1.4 1.4l-4.4-4.3zm-5-.3a6 6 0 100-12 6 6 0 000 12zm-3-5a1 1 0 010-2h6a1 1 0 010 2H8z" fill-rule="nonzero"/></svg>'}});(function(){var nn=tinymce.util.Tools.resolve("tinymce.PluginManager"),Mt=function(_,He,Ft){var Gt=He==="UL"?"InsertUnorderedList":"InsertOrderedList";_.execCommand(Gt,!1,Ft===!1?null:{"list-style-type":Ft})},Fn=function(_){_.addCommand("ApplyUnorderedListStyle",function(He,Ft){Mt(_,"UL",Ft["list-style-type"])}),_.addCommand("ApplyOrderedListStyle",function(He,Ft){Mt(_,"OL",Ft["list-style-type"])})},Qt=tinymce.util.Tools.resolve("tinymce.util.Tools"),dt=function(_){var He=_.getParam("advlist_number_styles","default,lower-alpha,lower-greek,lower-roman,upper-alpha,upper-roman");return He?He.split(/[ ,]/):[]},Kt=function(_){var He=_.getParam("advlist_bullet_styles","default,circle,square");return He?He.split(/[ ,]/):[]},kt=function(){},$t=function(_){return function(){return _}},Ze=function(_){return _},mn=$t(!1),Lt=$t(!0),Oe=function(){return tt},tt=function(){var _=function(Gt){return Gt()},He=Ze,Ft={fold:function(Gt,Xt){return Gt()},isSome:mn,isNone:Lt,getOr:He,getOrThunk:_,getOrDie:function(Gt){throw new Error(Gt||"error: getOrDie called on none.")},getOrNull:$t(null),getOrUndefined:$t(void 0),or:He,orThunk:_,map:Oe,each:kt,bind:Oe,exists:mn,forall:Lt,filter:function(){return Oe()},toArray:function(){return[]},toString:$t("none()")};return Ft}(),jt=function(_){var He=$t(_),Ft=function(){return Xt},Gt=function(Ct){return Ct(_)},Xt={fold:function(Ct,p){return p(_)},isSome:Lt,isNone:mn,getOr:He,getOrThunk:He,getOrDie:He,getOrNull:He,getOrUndefined:He,or:Ft,orThunk:Ft,map:function(Ct){return jt(Ct(_))},each:function(Ct){Ct(_)},bind:Gt,exists:Gt,forall:Gt,filter:function(Ct){return Ct(_)?Xt:tt},toArray:function(){return[_]},toString:function(){return"some("+_+")"}};return Xt},We=function(_){return _==null?tt:jt(_)},be={some:jt,none:Oe,from:We},en=function(_,He){return _.$.contains(_.getBody(),He)},Ae=function(_){return _&&/^(TH|TD)$/.test(_.nodeName)},wt=function(_){return function(He){return He&&/^(OL|UL|DL)$/.test(He.nodeName)&&en(_,He)}},j=function(_){var He=_.dom.getParent(_.selection.getNode(),"ol,ul"),Ft=_.dom.getStyle(He,"listStyleType");return be.from(Ft)},je=function(_,He){for(var Ft=0;Ft<_.length;Ft++){var Gt=_[Ft];if(He(Gt))return Ft}return-1},Ge=function(_){return _.replace(/\-/g," ").replace(/\b\w/g,function(He){return He.toUpperCase()})},Pn=function(_,He,Ft){var Gt=je(He.parents,Ae),Xt=Gt!==-1?He.parents.slice(0,Gt):He.parents,Ct=Qt.grep(Xt,wt(_));return Ct.length>0&&Ct[0].nodeName===Ft},rn=function(_,He){return function(Ft){var Gt=function(Xt){Ft.setActive(Pn(_,Xt,He))};return _.on("NodeChange",Gt),function(){return _.off("NodeChange",Gt)}}},ge=function(_,He,Ft,Gt,Xt,Ct){_.ui.registry.addSplitButton(He,{tooltip:Ft,icon:Xt==="OL"?"ordered-list":"unordered-list",presets:"listpreview",columns:3,fetch:function(p){var tn=Qt.map(Ct,function(Ne){var it=Xt==="OL"?"num":"bull",Gn=Ne==="disc"||Ne==="decimal"?"default":Ne,Dr=Ne==="default"?"":Ne,It=Ge(Ne);return{type:"choiceitem",value:Dr,icon:"list-"+it+"-"+Gn,text:It}});p(tn)},onAction:function(){return _.execCommand(Gt)},onItemAction:function(p,tn){Mt(_,Xt,tn)},select:function(p){var tn=j(_);return tn.map(function(Ne){return p===Ne}).getOr(!1)},onSetup:rn(_,Xt)})},Le=function(_,He,Ft,Gt,Xt,Ct){_.ui.registry.addToggleButton(He,{active:!1,tooltip:Ft,icon:Xt==="OL"?"ordered-list":"unordered-list",onSetup:rn(_,Xt),onAction:function(){return _.execCommand(Gt)}})},qe=function(_,He,Ft,Gt,Xt,Ct){Ct.length>1?ge(_,He,Ft,Gt,Xt,Ct):Le(_,He,Ft,Gt,Xt)},gn=function(_){qe(_,"numlist","Numbered list","InsertOrderedList","OL",dt(_)),qe(_,"bullist","Bullet list","InsertUnorderedList","UL",Kt(_))};function L(){nn.add("advlist",function(_){_.hasPlugin("lists")?(gn(_),Fn(_)):console.error("Please use the Lists plugin together with the Advanced List plugin.")})}L()})();(function(){var nn=tinymce.util.Tools.resolve("tinymce.PluginManager"),Mt=function(ge,Le,qe){return Le===""||ge.length>=Le.length&&ge.substr(qe,qe+Le.length)===Le},Fn=function(ge,Le){return ge.indexOf(Le)!==-1},Qt=function(ge,Le){return Mt(ge,Le,0)},dt=tinymce.util.Tools.resolve("tinymce.Env"),Kt=function(){return/(?:[A-Za-z][A-Za-z\d.+-]{0,14}:\/\/(?:[-.~*+=!&;:'%@?^${}(),\w]+@)?|www\.|[-;:&=+$,.\w]+@)[A-Za-z\d-]+(?:\.[A-Za-z\d-]+)*(?::\d+)?(?:\/(?:[-.~*+=!;:'%@$(),\/\w]*[-~*+=%@$()\/\w])?)?(?:\?(?:[-.~*+=!&;:'%@?^${}(),\/\w]+))?(?:#(?:[-.~*+=!&;:'%@?^${}(),\/\w]+))?/g},kt=new RegExp("^"+Kt().source+"$","i"),$t=function(ge){return ge.getParam("autolink_pattern",kt)},Ze=function(ge){return ge.getParam("default_link_target",!1)},mn=function(ge){return ge.getParam("link_default_protocol","http","string")},Lt=function(ge){return/^[(\[{ \u00a0]$/.test(ge)},Oe=function(ge){return ge.nodeType===3},tt=function(ge){return ge.nodeType===1},jt=function(ge){return Ge(ge,-1)},We=function(ge){return Ge(ge,0)},be=function(ge){return Ge(ge,-1)},en=function(ge,Le){if(Le<0&&(Le=0),Oe(ge)){var qe=ge.data.length;Le>qe&&(Le=qe)}return Le},Ae=function(ge,Le,qe){!tt(Le)||Le.hasChildNodes()?ge.setStart(Le,en(Le,qe)):ge.setStartBefore(Le)},wt=function(ge,Le,qe){!tt(Le)||Le.hasChildNodes()?ge.setEnd(Le,en(Le,qe)):ge.setEndAfter(Le)},j=function(ge){return/^([A-Za-z][A-Za-z\d.+-]*:\/\/)|mailto:/.test(ge)},je=function(ge){return/[?!,.;:]/.test(ge)},Ge=function(ge,Le){var qe,gn,L,_,He,Ft,Gt,Xt=$t(ge),Ct=Ze(ge);if(ge.dom.getParent(ge.selection.getNode(),"a[href]")===null){var p=ge.selection.getRng().cloneRange();if(p.startOffset<5){if(He=p.endContainer.previousSibling,!He){if(!p.endContainer.firstChild||!p.endContainer.firstChild.nextSibling)return;He=p.endContainer.firstChild.nextSibling}if(Ft=He.length,Ae(p,He,Ft),wt(p,He,Ft),p.endOffset<5)return;qe=p.endOffset,gn=He}else{if(gn=p.endContainer,!Oe(gn)&&gn.firstChild){for(;!Oe(gn)&&gn.firstChild;)gn=gn.firstChild;Oe(gn)&&(Ae(p,gn,0),wt(p,gn,gn.nodeValue.length))}p.endOffset===1?qe=2:qe=p.endOffset-1-Le}var tn=qe;do Ae(p,gn,qe>=2?qe-2:0),wt(p,gn,qe>=1?qe-1:0),qe-=1,Gt=p.toString();while(!Lt(Gt)&&qe-2>=0);Lt(p.toString())?(Ae(p,gn,qe),wt(p,gn,tn),qe+=1):p.startOffset===0?(Ae(p,gn,0),wt(p,gn,tn)):(Ae(p,gn,qe),wt(p,gn,tn)),_=p.toString(),je(_.charAt(_.length-1))&&wt(p,gn,tn-1),_=p.toString().trim();var Ne=_.match(Xt),it=mn(ge);if(Ne){var Gn=Ne[0];Qt(Gn,"www.")?Gn=it+"://"+Gn:Fn(Gn,"@")&&!j(Gn)&&(Gn="mailto:"+Gn),L=ge.selection.getBookmark(),ge.selection.setRng(p),ge.execCommand("createlink",!1,Gn),Ct!==!1&&ge.dom.setAttrib(ge.selection.getNode(),"target",Ct),ge.selection.moveToBookmark(L),ge.nodeChanged()}}},Pn=function(ge){var Le;if(ge.on("keydown",function(qe){if(qe.keyCode===13)return be(ge)}),dt.browser.isIE()){ge.on("focus",function(){if(!Le){Le=!0;try{ge.execCommand("AutoUrlDetect",!1,!0)}catch{}}});return}ge.on("keypress",function(qe){if(qe.keyCode===41||qe.keyCode===93||qe.keyCode===125)return jt(ge)}),ge.on("keyup",function(qe){if(qe.keyCode===32)return We(ge)})};function rn(){nn.add("autolink",function(ge){Pn(ge)})}rn()})();(function(){var nn=tinymce.util.Tools.resolve("tinymce.PluginManager"),Mt=tinymce.util.Tools.resolve("tinymce.util.VK"),Fn=function(A){var N=typeof A;return A===null?"null":N==="object"&&(Array.prototype.isPrototypeOf(A)||A.constructor&&A.constructor.name==="Array")?"array":N==="object"&&(String.prototype.isPrototypeOf(A)||A.constructor&&A.constructor.name==="String")?"string":N},Qt=function(A){return function(N){return Fn(N)===A}},dt=function(A){return function(N){return typeof N===A}},Kt=function(A){return function(N){return A===N}},kt=Qt("string"),$t=Qt("array"),Ze=Kt(null),mn=dt("boolean"),Lt=dt("function"),Oe=function(){},tt=function(A){return function(){return A}},jt=function(A){return A},We=function(A,N){return A===N},be=tt(!1),en=tt(!0),Ae=function(){return wt},wt=function(){var A=function(ve){return ve()},N=jt,J={fold:function(ve,Ee){return ve()},isSome:be,isNone:en,getOr:N,getOrThunk:A,getOrDie:function(ve){throw new Error(ve||"error: getOrDie called on none.")},getOrNull:tt(null),getOrUndefined:tt(void 0),or:N,orThunk:A,map:Ae,each:Oe,bind:Ae,exists:be,forall:en,filter:function(){return Ae()},toArray:function(){return[]},toString:tt("none()")};return J}(),j=function(A){var N=tt(A),J=function(){return Ee},ve=function(St){return St(A)},Ee={fold:function(St,_n){return _n(A)},isSome:en,isNone:be,getOr:N,getOrThunk:N,getOrDie:N,getOrNull:N,getOrUndefined:N,or:J,orThunk:J,map:function(St){return j(St(A))},each:function(St){St(A)},bind:ve,exists:ve,forall:ve,filter:function(St){return St(A)?Ee:wt},toArray:function(){return[A]},toString:function(){return"some("+A+")"}};return Ee},je=function(A){return A==null?wt:j(A)},Ge={some:j,none:Ae,from:je},Pn=Array.prototype.indexOf,rn=Array.prototype.push,ge=function(A,N){return Pn.call(A,N)},Le=function(A,N){return ge(A,N)>-1},qe=function(A,N){for(var J=A.length,ve=new Array(J),Ee=0;Ee<J;Ee++){var St=A[Ee];ve[Ee]=N(St,Ee)}return ve},gn=function(A,N){for(var J=0,ve=A.length;J<ve;J++){var Ee=A[J];N(Ee,J)}},L=function(A,N,J){return gn(A,function(ve,Ee){J=N(J,ve,Ee)}),J},_=function(A){for(var N=[],J=0,ve=A.length;J<ve;++J){if(!$t(A[J]))throw new Error("Arr.flatten item "+J+" was not an array, input: "+A);rn.apply(N,A[J])}return N},He=function(A,N){return _(qe(A,N))},Ft=function(A,N){for(var J=0;J<A.length;J++){var ve=N(A[J],J);if(ve.isSome())return ve}return Ge.none()},Gt=function(A,N,J){return J===void 0&&(J=We),A.exists(function(ve){return J(ve,N)})},Xt=function(A){for(var N=[],J=function(Ee){N.push(Ee)},ve=0;ve<A.length;ve++)A[ve].each(J);return N},Ct=function(A,N){return A?Ge.some(N):Ge.none()},p=function(A){var N=A.getParam("link_assume_external_targets",!1);return mn(N)&&N?1:kt(N)&&(N==="http"||N==="https")?N:0},tn=function(A){return A.getParam("link_context_toolbar",!1,"boolean")},Ne=function(A){return A.getParam("link_list")},it=function(A){return A.getParam("default_link_target")},Gn=function(A){return A.getParam("target_list",!0)},Dr=function(A){return A.getParam("rel_list",[],"array")},It=function(A){return A.getParam("link_class_list",[],"array")},Hn=function(A){return A.getParam("link_title",!0,"boolean")},or=function(A){return A.getParam("allow_unsafe_link_target",!1,"boolean")},_r=function(A){return A.getParam("link_quicklink",!1,"boolean")},Se=function(A){return A.getParam("link_default_protocol","http","string")},Ke=tinymce.util.Tools.resolve("tinymce.util.Tools"),$r=function(A){return kt(A.value)?A.value:""},xe=function(A){return kt(A.text)?A.text:kt(A.title)?A.title:""},Ce=function(A,N){var J=[];return Ke.each(A,function(ve){var Ee=xe(ve);if(ve.menu!==void 0){var St=Ce(ve.menu,N);J.push({text:Ee,items:St})}else{var _n=N(ve);J.push({text:Ee,value:_n})}}),J},X=function(A){return A===void 0&&(A=$r),function(N){return Ge.from(N).map(function(J){return Ce(J,A)})}},ce=function(A){return X($r)(A)},Y=function(A,N){return function(J){return{name:A,type:"listbox",label:N,items:J}}},Z={sanitize:ce,sanitizeWith:X,createUi:Y,getValue:$r},Me=function(){return Me=Object.assign||function(N){for(var J,ve=1,Ee=arguments.length;ve<Ee;ve++){J=arguments[ve];for(var St in J)Object.prototype.hasOwnProperty.call(J,St)&&(N[St]=J[St])}return N},Me.apply(this,arguments)},ze=Object.keys,mt=Object.hasOwnProperty,gt=function(A,N){for(var J=ze(A),ve=0,Ee=J.length;ve<Ee;ve++){var St=J[ve],_n=A[St];N(_n,St)}},Re=function(A){return function(N,J){A[J]=N}},cn=function(A,N,J,ve){var Ee={};return gt(A,function(St,_n){(N(St,_n)?J:ve)(St,_n)}),Ee},cr=function(A,N){var J={};return cn(A,N,Re(J),Oe),J},ir=function(A,N){return mt.call(A,N)},Eo=function(A,N){return ir(A,N)&&A[N]!==void 0&&A[N]!==null},wo=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),Xn=tinymce.util.Tools.resolve("tinymce.util.URI"),Cr=function(A){return A&&A.nodeName.toLowerCase()==="a"},zr=function(A){return Cr(A)&&!!So(A)},qn=function(A,N){if(A.collapsed)return[];var J=A.cloneContents(),ve=new wo(J.firstChild,J),Ee=[],St=J.firstChild;do N(St)&&Ee.push(St);while(St=ve.next());return Ee},Zn=function(A){return/^\w+:/i.test(A)},So=function(A){var N=A.getAttribute("data-mce-href");return N||A.getAttribute("href")},sr=function(A,N){var J=["noopener"],ve=A?A.split(/\s+/):[],Ee=function($n){return Ke.trim($n.sort().join(" "))},St=function($n){return $n=_n($n),$n.length>0?$n.concat(J):J},_n=function($n){return $n.filter(function(ga){return Ke.inArray(J,ga)===-1})},Un=N?St(ve):_n(ve);return Un.length>0?Ee(Un):""},Qn=function(A){return A.replace(/\uFEFF/g,"")},oe=function(A,N){return N=N||A.selection.getNode(),yn(N)?A.dom.select("a[href]",N)[0]:A.dom.getParent(N,"a[href]")},Xe=function(A,N){var J=N?N.innerText||N.textContent:A.getContent({format:"text"});return Qn(J)},st=function(A){return Ke.grep(A,zr).length>0},ft=function(A){return qn(A,zr).length>0},hn=function(A){var N=A.schema.getTextInlineElements(),J=function(Ee){return Ee.nodeType===1&&!Cr(Ee)&&!ir(N,Ee.nodeName.toLowerCase())},ve=qn(A.selection.getRng(),J);return ve.length===0},yn=function(A){return A&&A.nodeName==="FIGURE"&&/\bimage\b/i.test(A.className)},Tr=function(A){var N=["title","rel","class","target"];return L(N,function(J,ve){return A[ve].each(function(Ee){J[ve]=Ee.length>0?Ee:null}),J},{href:A.href})},ct=function(A,N){return(N==="http"||N==="https")&&!Zn(A)?N+"://"+A:A},pn=function(A,N){var J=Me({},N);if(!(Dr(A).length>0)&&or(A)===!1){var ve=sr(J.rel,J.target==="_blank");J.rel=ve||null}return Ge.from(J.target).isNone()&&Gn(A)===!1&&(J.target=it(A)),J.href=ct(J.href,p(A)),J},mr=function(A,N,J,ve){J.each(function(Ee){ir(N,"innerText")?N.innerText=Ee:N.textContent=Ee}),A.dom.setAttribs(N,ve),A.selection.select(N)},Aa=function(A,N,J,ve){yn(N)?Ri(A,N,ve):J.fold(function(){A.execCommand("mceInsertLink",!1,ve)},function(Ee){A.insertContent(A.dom.createHTML("a",ve,A.dom.encode(Ee)))})},Go=function(A,N,J){var ve=A.selection.getNode(),Ee=oe(A,ve),St=pn(A,Tr(J));A.undoManager.transact(function(){J.href===N.href&&N.attach(),Ee?(A.focus(),mr(A,Ee,J.text,St)):Aa(A,ve,J.text,St)})},Xr=function(A){var N=A.dom,J=A.selection,ve=J.getBookmark(),Ee=J.getRng().cloneRange(),St=N.getParent(Ee.startContainer,"a[href]",A.getBody()),_n=N.getParent(Ee.endContainer,"a[href]",A.getBody());St&&Ee.setStartBefore(St),_n&&Ee.setEndAfter(_n),J.setRng(Ee),A.execCommand("unlink"),J.moveToBookmark(ve)},Ji=function(A){A.undoManager.transact(function(){var N=A.selection.getNode();yn(N)?Qi(A,N):Xr(A),A.focus()})},vi=function(A){var N=A.class,J=A.href,ve=A.rel,Ee=A.target,St=A.text,_n=A.title;return cr({class:N.getOrNull(),href:J,rel:ve.getOrNull(),target:Ee.getOrNull(),text:St.getOrNull(),title:_n.getOrNull()},function(Un,$n){return Ze(Un)===!1})},Zi=function(A,N){var J=N.href;return Me(Me({},N),{href:Xn.isDomSafe(J,"a",A.settings)?J:""})},no=function(A,N,J){var ve=Zi(A,J);A.hasPlugin("rtc",!0)?A.execCommand("createlink",!1,vi(ve)):Go(A,N,ve)},Fa=function(A){A.hasPlugin("rtc",!0)?A.execCommand("unlink"):Ji(A)},Qi=function(A,N){var J=A.dom.select("img",N)[0];if(J){var ve=A.dom.getParents(J,"a[href]",N)[0];ve&&(ve.parentNode.insertBefore(J,ve),A.dom.remove(ve))}},Ri=function(A,N,J){var ve=A.dom.select("img",N)[0];if(ve){var Ee=A.dom.create("a",J);ve.parentNode.insertBefore(Ee,ve),Ee.appendChild(ve)}},eu=function(A){return Eo(A,"items")},Va=function(A,N){return Ft(N,function(J){return eu(J)?Va(A,J.items):Ct(J.value===A,J)})},tu=function(A,N,J,ve){var Ee=ve[N],St=A.length>0;return Ee!==void 0?Va(Ee,J).map(function(_n){return{url:{value:_n.value,meta:{text:St?A:_n.text,attach:Oe}},text:St?A:_n.text}}):Ge.none()},In=function(A,N){return N==="link"?A.link:N==="anchor"?A.anchor:Ge.none()},Cu=function(A,N){var J={text:A.text,title:A.title},ve=function($n){return Ct(J.title.length<=0,Ge.from($n.meta.title).getOr(""))},Ee=function($n){return Ct(J.text.length<=0,Ge.from($n.meta.text).getOr($n.value))},St=function($n){var ga=Ee($n.url),ca=ve($n.url);return ga.isSome()||ca.isSome()?Ge.some(Me(Me({},ga.map(function(Hi){return{text:Hi}}).getOr({})),ca.map(function(Hi){return{title:Hi}}).getOr({}))):Ge.none()},_n=function($n,ga){var ca=In(N,ga.name).getOr([]);return tu(J.text,ga.name,ca,$n)},Un=function($n,ga){var ca=ga.name;return ca==="url"?St($n()):Le(["anchor","link"],ca)?_n($n(),ga):((ca==="text"||ca==="title")&&(J[ca]=$n()[ca]),Ge.none())};return{onChange:Un}},Do={init:Cu,getDelta:tu},nu=tinymce.util.Tools.resolve("tinymce.util.Delay"),Bi=tinymce.util.Tools.resolve("tinymce.util.Promise"),_o=function(A,N,J){var ve=A.selection.getRng();nu.setEditorTimeout(A,function(){A.windowManager.confirm(N,function(Ee){A.selection.setRng(ve),J(Ee)})})},Ma=function(A){var N=A.href,J=N.indexOf("@")>0&&N.indexOf("/")===-1&&N.indexOf("mailto:")===-1;return J?Ge.some({message:"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",preprocess:function(ve){return Me(Me({},ve),{href:"mailto:"+N})}}):Ge.none()},xo=function(A,N){return function(J){var ve=J.href,Ee=A===1&&!Zn(ve)||A===0&&/^\s*www(\.|\d\.)/i.test(ve);return Ee?Ge.some({message:"The URL you entered seems to be an external link. Do you want to add the required "+N+":// prefix?",preprocess:function(St){return Me(Me({},St),{href:N+"://"+ve})}}):Ge.none()}},Tu=function(A,N){return Ft([Ma,xo(p(A),Se(A))],function(J){return J(N)}).fold(function(){return Bi.resolve(N)},function(J){return new Bi(function(ve){_o(A,J.message,function(Ee){ve(Ee?J.preprocess(N):N)})})})},ro={preprocess:Tu},Ou=function(A){var N=A.dom.select("a:not([href])"),J=He(N,function(ve){var Ee=ve.name||ve.id;return Ee?[{text:Ee,value:"#"+Ee}]:[]});return J.length>0?Ge.some([{text:"None",value:""}].concat(J)):Ge.none()},B={getAnchors:Ou},G=function(A){var N=It(A);return N.length>0?Z.sanitize(N):Ge.none()},$={getClasses:G},ee=tinymce.util.Tools.resolve("tinymce.util.XHR"),Ie=function(A){try{return Ge.some(JSON.parse(A))}catch{return Ge.none()}},Qe=function(A){var N=function(ve){return A.convertURL(ve.value||ve.url,"href")},J=Ne(A);return new Bi(function(ve){kt(J)?ee.send({url:J,success:function(Ee){return ve(Ie(Ee))},error:function(Ee){return ve(Ge.none())}}):Lt(J)?J(function(Ee){return ve(Ge.some(Ee))}):ve(Ge.from(J))}).then(function(ve){return ve.bind(Z.sanitizeWith(N)).map(function(Ee){if(Ee.length>0){var St=[{text:"None",value:""}];return St.concat(Ee)}else return Ee})})},xt={getLinks:Qe},Et=function(A,N){var J=Dr(A);if(J.length>0){var ve=Gt(N,"_blank"),Ee=or(A)===!1,St=function(Un){return sr(Z.getValue(Un),ve)},_n=Ee?Z.sanitizeWith(St):Z.sanitize;return _n(J)}return Ge.none()},wn={getRels:Et},gr=[{text:"Current window",value:""},{text:"New window",value:"_blank"}],Dn=function(A){var N=Gn(A);return $t(N)?Z.sanitize(N).orThunk(function(){return Ge.some(gr)}):N===!1?Ge.none():Ge.some(gr)},Rr={getTargets:Dn},yr=function(A,N,J){var ve=A.getAttrib(N,J);return ve!==null&&ve.length>0?Ge.some(ve):Ge.none()},zo=function(A,N){var J=A.dom,ve=hn(A),Ee=ve?Ge.some(Xe(A.selection,N)):Ge.none(),St=N?Ge.some(J.getAttrib(N,"href")):Ge.none(),_n=N?Ge.from(J.getAttrib(N,"target")):Ge.none(),Un=yr(J,N,"rel"),$n=yr(J,N,"class"),ga=yr(J,N,"title");return{url:St,text:Ee,title:ga,target:_n,rel:Un,linkClass:$n}},ia=function(A,N){return xt.getLinks(A).then(function(J){var ve=zo(A,N);return{anchor:ve,catalogs:{targets:Rr.getTargets(A),rels:wn.getRels(A,ve.target),classes:$.getClasses(A),anchor:B.getAnchors(A),link:J},optNode:Ge.from(N),flags:{titleEnabled:Hn(A)}}})},ru={collect:ia},Fi=function(A,N){return function(J){var ve=J.getData();if(!ve.url.value){Fa(A),J.close();return}var Ee=function(Un){return Ge.from(ve[Un]).filter(function($n){return!Gt(N.anchor[Un],$n)})},St={href:ve.url.value,text:Ee("text"),target:Ee("target"),rel:Ee("rel"),class:Ee("linkClass"),title:Ee("title")},_n={href:ve.url.value,attach:ve.url.meta!==void 0&&ve.url.meta.attach?ve.url.meta.attach:Oe};ro.preprocess(A,St).then(function(Un){no(A,_n,Un)}),J.close()}},wr=function(A){var N=oe(A);return ru.collect(A,N)},ua=function(A,N){var J=A.anchor,ve=J.url.getOr("");return{url:{value:ve,meta:{original:{value:ve}}},text:J.text.getOr(""),title:J.title.getOr(""),anchor:ve,link:ve,rel:J.rel.getOr(""),target:J.target.or(N).getOr(""),linkClass:J.linkClass.getOr("")}},ke=function(A,N,J){var ve=[{name:"url",type:"urlinput",filetype:"file",label:"URL"}],Ee=A.anchor.text.map(function(){return{name:"text",type:"input",label:"Text to display"}}).toArray(),St=A.flags.titleEnabled?[{name:"title",type:"input",label:"Title"}]:[],_n=Ge.from(it(J)),Un=ua(A,_n),$n=A.catalogs,ga=Do.init(Un,$n),ca={type:"panel",items:_([ve,Ee,St,Xt([$n.anchor.map(Z.createUi("anchor","Anchors")),$n.rels.map(Z.createUi("rel","Rel")),$n.targets.map(Z.createUi("target","Open link in...")),$n.link.map(Z.createUi("link","Link list")),$n.classes.map(Z.createUi("linkClass","Class"))])])};return{title:"Insert/Edit Link",size:"normal",body:ca,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:Un,onChange:function(Hi,ha){var hi=ha.name;ga.onChange(Hi.getData,{name:hi}).each(function(Ha){Hi.setData(Ha)})},onSubmit:N}},Wr=function(A){var N=wr(A);N.then(function(J){var ve=Fi(A,J);return ke(J,ve,A)}).then(function(J){A.windowManager.open(J)})},di=function(A,N){document.body.appendChild(A),A.dispatchEvent(N),document.body.removeChild(A)},$c=function(A){var N=document.createElement("a");N.target="_blank",N.href=A,N.rel="noreferrer noopener";var J=document.createEvent("MouseEvents");J.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),di(N,J)},ku=function(A,N){return A.dom.getParent(N,"a[href]")},sn=function(A){return ku(A,A.selection.getStart())},nc=function(A){return A.altKey===!0&&A.shiftKey===!1&&A.ctrlKey===!1&&A.metaKey===!1},mi=function(A,N){if(N){var J=So(N);if(/^#/.test(J)){var ve=A.$(J);ve.length&&A.selection.scrollIntoView(ve[0],!0)}else $c(N.href)}},Sr=function(A){return function(){Wr(A)}},au=function(A){return function(){mi(A,sn(A))}},Ua=function(A){A.on("click",function(N){var J=ku(A,N.target);J&&Mt.metaKeyPressed(N)&&(N.preventDefault(),mi(A,J))}),A.on("keydown",function(N){var J=sn(A);J&&N.keyCode===13&&nc(N)&&(N.preventDefault(),mi(A,J))})},ao=function(A,N){return A.on("NodeChange",N),function(){return A.off("NodeChange",N)}},er=function(A){return function(N){var J=function(){return N.setActive(!A.mode.isReadOnly()&&oe(A,A.selection.getNode())!==null)};return J(),ao(A,J)}},Au=function(A){return function(N){var J=function(){return N.setDisabled(oe(A,A.selection.getNode())===null)};return J(),ao(A,J)}},Mu=function(A){return function(N){var J=function(Ee){return st(Ee)||ft(A.selection.getRng())},ve=A.dom.getParents(A.selection.getStart());return N.setDisabled(!J(ve)),ao(A,function(Ee){return N.setDisabled(!J(Ee.parents))})}},ou=function(A){A.addCommand("mceLink",function(){_r(A)?A.fire("contexttoolbar-show",{toolbarKey:"quicklink"}):Sr(A)()})},rc=function(A){A.addShortcut("Meta+K","",function(){A.execCommand("mceLink")})},gi=function(A){A.ui.registry.addToggleButton("link",{icon:"link",tooltip:"Insert/edit link",onAction:Sr(A),onSetup:er(A)}),A.ui.registry.addButton("openlink",{icon:"new-tab",tooltip:"Open link",onAction:au(A),onSetup:Au(A)}),A.ui.registry.addButton("unlink",{icon:"unlink",tooltip:"Remove link",onAction:function(){return Fa(A)},onSetup:Mu(A)})},qo=function(A){A.ui.registry.addMenuItem("openlink",{text:"Open link",icon:"new-tab",onAction:au(A),onSetup:Au(A)}),A.ui.registry.addMenuItem("link",{icon:"link",text:"Link...",shortcut:"Meta+K",onAction:Sr(A)}),A.ui.registry.addMenuItem("unlink",{icon:"unlink",text:"Remove link",onAction:function(){return Fa(A)},onSetup:Mu(A)})},ac=function(A){var N="link unlink openlink",J="link";A.ui.registry.addContextMenu("link",{update:function(ve){return st(A.dom.getParents(ve,"a"))?N:J}})},Co=function(A){var N=function(Ee){Ee.selection.collapse(!1)},J=function(Ee){var St=A.selection.getNode();return Ee.setDisabled(!oe(A,St)),Oe},ve=function(Ee){var St=oe(A),_n=hn(A);if(!St&&_n){var Un=Xe(A.selection,St);return Ge.some(Un.length>0?Un:Ee)}else return Ge.none()};A.ui.registry.addContextForm("quicklink",{launch:{type:"contextformtogglebutton",icon:"link",tooltip:"Link",onSetup:er(A)},label:"Link",predicate:function(Ee){return!!oe(A,Ee)&&tn(A)},initValue:function(){var Ee=oe(A);return Ee?So(Ee):""},commands:[{type:"contextformtogglebutton",icon:"link",tooltip:"Link",primary:!0,onSetup:function(Ee){var St=A.selection.getNode();return Ee.setActive(!!oe(A,St)),er(A)(Ee)},onAction:function(Ee){var St=Ee.getValue(),_n=ve(St),Un={href:St,attach:Oe};no(A,Un,{href:St,text:_n,title:Ge.none(),rel:Ge.none(),target:Ge.none(),class:Ge.none()}),N(A),Ee.hide()}},{type:"contextformbutton",icon:"unlink",tooltip:"Remove link",onSetup:J,onAction:function(Ee){Fa(A),Ee.hide()}},{type:"contextformbutton",icon:"new-tab",tooltip:"Open link",onSetup:J,onAction:function(Ee){au(A)(),Ee.hide()}}]})};function oo(){nn.add("link",function(A){gi(A),qo(A),ac(A),Co(A),Ua(A),ou(A),rc(A)})}oo()})();(function(){var nn=tinymce.util.Tools.resolve("tinymce.PluginManager"),Mt=function(){return Mt=Object.assign||function(E){for(var I,te=1,Ye=arguments.length;te<Ye;te++){I=arguments[te];for(var Ht in I)Object.prototype.hasOwnProperty.call(I,Ht)&&(E[Ht]=I[Ht])}return E},Mt.apply(this,arguments)},Fn=function(w){var E=typeof w;return w===null?"null":E==="object"&&(Array.prototype.isPrototypeOf(w)||w.constructor&&w.constructor.name==="Array")?"array":E==="object"&&(String.prototype.isPrototypeOf(w)||w.constructor&&w.constructor.name==="String")?"string":E},Qt=function(w){return function(E){return Fn(E)===w}},dt=function(w){return function(E){return typeof E===w}},Kt=function(w){return function(E){return w===E}},kt=Qt("string"),$t=Qt("object"),Ze=Qt("array"),mn=Kt(null),Lt=dt("boolean"),Oe=function(w){return w==null},tt=function(w){return!Oe(w)},jt=dt("function"),We=dt("number"),be=function(){},en=function(w){return function(){return w}},Ae=function(w){return w},wt=en(!1),j=en(!0),je=function(){return Ge},Ge=function(){var w=function(te){return te()},E=Ae,I={fold:function(te,Ye){return te()},isSome:wt,isNone:j,getOr:E,getOrThunk:w,getOrDie:function(te){throw new Error(te||"error: getOrDie called on none.")},getOrNull:en(null),getOrUndefined:en(void 0),or:E,orThunk:w,map:je,each:be,bind:je,exists:wt,forall:j,filter:function(){return je()},toArray:function(){return[]},toString:en("none()")};return I}(),Pn=function(w){var E=en(w),I=function(){return Ye},te=function(Ht){return Ht(w)},Ye={fold:function(Ht,On){return On(w)},isSome:j,isNone:wt,getOr:E,getOrThunk:E,getOrDie:E,getOrNull:E,getOrUndefined:E,or:I,orThunk:I,map:function(Ht){return Pn(Ht(w))},each:function(Ht){Ht(w)},bind:te,exists:te,forall:te,filter:function(Ht){return Ht(w)?Ye:Ge},toArray:function(){return[w]},toString:function(){return"some("+w+")"}};return Ye},rn=function(w){return w==null?Ge:Pn(w)},ge={some:Pn,none:je,from:rn},Le=Object.keys,qe=Object.hasOwnProperty,gn=function(w,E){for(var I=Le(w),te=0,Ye=I.length;te<Ye;te++){var Ht=I[te],On=w[Ht];E(On,Ht)}},L=function(w){return function(E,I){w[I]=E}},_=function(w,E,I,te){var Ye={};return gn(w,function(Ht,On){(E(Ht,On)?I:te)(Ht,On)}),Ye},He=function(w,E){var I={};return _(w,E,L(I),be),I},Ft=function(w,E){return qe.call(w,E)},Gt=function(w,E){return Ft(w,E)&&w[E]!==void 0&&w[E]!==null},Xt=Array.prototype.push,Ct=function(w){for(var E=[],I=0,te=w.length;I<te;++I){if(!Ze(w[I]))throw new Error("Arr.flatten item "+I+" was not an array, input: "+w);Xt.apply(E,w[I])}return E},p=function(w,E){return E>=0&&E<w.length?ge.some(w[E]):ge.none()},tn=function(w){return p(w,0)},Ne=function(w,E){for(var I=0;I<w.length;I++){var te=E(w[I],I);if(te.isSome())return te}return ge.none()};typeof window<"u"||Function("return this;")();var it=function(w,E,I){if(kt(I)||Lt(I)||We(I))w.setAttribute(E,I+"");else throw console.error("Invalid call to Attribute.set. Key ",E,":: Value ",I,":: Element ",w),new Error("Attribute value was not simple")},Gn=function(w,E,I){it(w.dom,E,I)},Dr=function(w,E){w.dom.removeAttribute(E)},It=function(w,E){var I=E||document,te=I.createElement("div");if(te.innerHTML=w,!te.hasChildNodes()||te.childNodes.length>1)throw console.error("HTML does not have a single root node",w),new Error("HTML must have a single root node");return _r(te.childNodes[0])},Hn=function(w,E){var I=E||document,te=I.createElement(w);return _r(te)},or=function(w,E){var I=E||document,te=I.createTextNode(w);return _r(te)},_r=function(w){if(w==null)throw new Error("Node cannot be null or undefined");return{dom:w}},Se=function(w,E,I){return ge.from(w.dom.elementFromPoint(E,I)).map(_r)},Ke={fromHtml:It,fromTag:Hn,fromText:or,fromDom:_r,fromPoint:Se},$r=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),xe=tinymce.util.Tools.resolve("tinymce.util.Promise"),Ce=tinymce.util.Tools.resolve("tinymce.util.URI"),X=tinymce.util.Tools.resolve("tinymce.util.XHR"),ce=function(w){return w.getParam("image_dimensions",!0,"boolean")},Y=function(w){return w.getParam("image_advtab",!1,"boolean")},Z=function(w){return w.getParam("image_uploadtab",!0,"boolean")},Me=function(w){return w.getParam("image_prepend_url","","string")},ze=function(w){return w.getParam("image_class_list")},mt=function(w){return w.getParam("image_description",!0,"boolean")},gt=function(w){return w.getParam("image_title",!1,"boolean")},Re=function(w){return w.getParam("image_caption",!1,"boolean")},cn=function(w){return w.getParam("image_list",!1)},cr=function(w){return tt(w.getParam("images_upload_url"))},ir=function(w){return tt(w.getParam("images_upload_handler"))},Eo=function(w){return w.getParam("a11y_advanced_options",!1,"boolean")},wo=function(w){return w.getParam("automatic_uploads",!0,"boolean")},Xn=function(w,E){return Math.max(parseInt(w,10),parseInt(E,10))},Cr=function(w){return new xe(function(E){var I=document.createElement("img"),te=function(Ht){I.onload=I.onerror=null,I.parentNode&&I.parentNode.removeChild(I),E(Ht)};I.onload=function(){var Ht=Xn(I.width,I.clientWidth),On=Xn(I.height,I.clientHeight),Ia={width:Ht,height:On};te(xe.resolve(Ia))},I.onerror=function(){te(xe.reject("Failed to get image dimensions for: "+w))};var Ye=I.style;Ye.visibility="hidden",Ye.position="fixed",Ye.bottom=Ye.left="0px",Ye.width=Ye.height="auto",document.body.appendChild(I),I.src=w})},zr=function(w){return w&&(w=w.replace(/px$/,"")),w},qn=function(w){return w.length>0&&/^[0-9]+$/.test(w)&&(w+="px"),w},Zn=function(w){if(w.margin){var E=String(w.margin).split(" ");switch(E.length){case 1:w["margin-top"]=w["margin-top"]||E[0],w["margin-right"]=w["margin-right"]||E[0],w["margin-bottom"]=w["margin-bottom"]||E[0],w["margin-left"]=w["margin-left"]||E[0];break;case 2:w["margin-top"]=w["margin-top"]||E[0],w["margin-right"]=w["margin-right"]||E[1],w["margin-bottom"]=w["margin-bottom"]||E[0],w["margin-left"]=w["margin-left"]||E[1];break;case 3:w["margin-top"]=w["margin-top"]||E[0],w["margin-right"]=w["margin-right"]||E[1],w["margin-bottom"]=w["margin-bottom"]||E[2],w["margin-left"]=w["margin-left"]||E[1];break;case 4:w["margin-top"]=w["margin-top"]||E[0],w["margin-right"]=w["margin-right"]||E[1],w["margin-bottom"]=w["margin-bottom"]||E[2],w["margin-left"]=w["margin-left"]||E[3]}delete w.margin}return w},So=function(w,E){var I=cn(w);kt(I)?X.send({url:I,success:function(te){E(JSON.parse(te))}}):jt(I)?I(E):E(I)},sr=function(w,E,I){var te=function(){I.onload=I.onerror=null,w.selection&&(w.selection.select(I),w.nodeChanged())};I.onload=function(){!E.width&&!E.height&&ce(w)&&w.dom.setAttribs(I,{width:String(I.clientWidth),height:String(I.clientHeight)}),te()},I.onerror=te},Qn=function(w){return new xe(function(E,I){var te=new FileReader;te.onload=function(){E(te.result)},te.onerror=function(){I(te.error.message)},te.readAsDataURL(w)})},oe=function(w){return w.nodeName==="IMG"&&(w.hasAttribute("data-mce-object")||w.hasAttribute("data-mce-placeholder"))},Xe=function(w,E){return Ce.isDomSafe(E,"img",w.settings)},st=$r.DOM,ft=function(w){return w.style.marginLeft&&w.style.marginRight&&w.style.marginLeft===w.style.marginRight?zr(w.style.marginLeft):""},hn=function(w){return w.style.marginTop&&w.style.marginBottom&&w.style.marginTop===w.style.marginBottom?zr(w.style.marginTop):""},yn=function(w){return w.style.borderWidth?zr(w.style.borderWidth):""},Tr=function(w,E){return w.hasAttribute(E)?w.getAttribute(E):""},ct=function(w,E){return w.style[E]?w.style[E]:""},pn=function(w){return w.parentNode!==null&&w.parentNode.nodeName==="FIGURE"},mr=function(w,E,I){I===""?w.removeAttribute(E):w.setAttribute(E,I)},Aa=function(w){var E=st.create("figure",{class:"image"});st.insertAfter(E,w),E.appendChild(w),E.appendChild(st.create("figcaption",{contentEditable:"true"},"Caption")),E.contentEditable="false"},Go=function(w){var E=w.parentNode;st.insertAfter(w,E),st.remove(E)},Xr=function(w){pn(w)?Go(w):Aa(w)},Ji=function(w,E){var I=w.getAttribute("style"),te=E(I!==null?I:"");te.length>0?(w.setAttribute("style",te),w.setAttribute("data-mce-style",te)):w.removeAttribute("style")},vi=function(w,E){return function(I,te,Ye){I.style[te]?(I.style[te]=qn(Ye),Ji(I,E)):mr(I,te,Ye)}},Zi=function(w,E){return w.style[E]?zr(w.style[E]):Tr(w,E)},no=function(w,E){var I=qn(E);w.style.marginLeft=I,w.style.marginRight=I},Fa=function(w,E){var I=qn(E);w.style.marginTop=I,w.style.marginBottom=I},Qi=function(w,E){var I=qn(E);w.style.borderWidth=I},Ri=function(w,E){w.style.borderStyle=E},eu=function(w){return ct(w,"borderStyle")},Va=function(w){return w.nodeName==="FIGURE"},tu=function(w){return w.nodeName==="IMG"},In=function(w){return st.getAttrib(w,"alt").length===0&&st.getAttrib(w,"role")==="presentation"},Cu=function(w){return In(w)?"":Tr(w,"alt")},Do=function(){return{src:"",alt:"",title:"",width:"",height:"",class:"",style:"",caption:!1,hspace:"",vspace:"",border:"",borderStyle:"",isDecorative:!1}},nu=function(w,E){var I=document.createElement("img");return mr(I,"style",E.style),(ft(I)||E.hspace!=="")&&no(I,E.hspace),(hn(I)||E.vspace!=="")&&Fa(I,E.vspace),(yn(I)||E.border!=="")&&Qi(I,E.border),(eu(I)||E.borderStyle!=="")&&Ri(I,E.borderStyle),w(I.getAttribute("style"))},Bi=function(w,E){var I=document.createElement("img");if(Ou(w,Mt(Mt({},E),{caption:!1}),I),xo(I,E.alt,E.isDecorative),E.caption){var te=st.create("figure",{class:"image"});return te.appendChild(I),te.appendChild(st.create("figcaption",{contentEditable:"true"},"Caption")),te.contentEditable="false",te}else return I},_o=function(w,E){return{src:Tr(E,"src"),alt:Cu(E),title:Tr(E,"title"),width:Zi(E,"width"),height:Zi(E,"height"),class:Tr(E,"class"),style:w(Tr(E,"style")),caption:pn(E),hspace:ft(E),vspace:hn(E),border:yn(E),borderStyle:ct(E,"borderStyle"),isDecorative:In(E)}},Ma=function(w,E,I,te,Ye){I[te]!==E[te]&&Ye(w,te,I[te])},xo=function(w,E,I){if(I){st.setAttrib(w,"role","presentation");var te=Ke.fromDom(w);Gn(te,"alt","")}else{if(mn(E)){var te=Ke.fromDom(w);Dr(te,"alt")}else{var te=Ke.fromDom(w);Gn(te,"alt",E)}st.getAttrib(w,"role")==="presentation"&&st.setAttrib(w,"role","")}},Tu=function(w,E,I){(I.alt!==E.alt||I.isDecorative!==E.isDecorative)&&xo(w,I.alt,I.isDecorative)},ro=function(w,E){return function(I,te,Ye){w(I,Ye),Ji(I,E)}},Ou=function(w,E,I){var te=_o(w,I);Ma(I,te,E,"caption",function(Ye,Ht,On){return Xr(Ye)}),Ma(I,te,E,"src",mr),Ma(I,te,E,"title",mr),Ma(I,te,E,"width",vi("width",w)),Ma(I,te,E,"height",vi("height",w)),Ma(I,te,E,"class",mr),Ma(I,te,E,"style",ro(function(Ye,Ht){return mr(Ye,"style",Ht)},w)),Ma(I,te,E,"hspace",ro(no,w)),Ma(I,te,E,"vspace",ro(Fa,w)),Ma(I,te,E,"border",ro(Qi,w)),Ma(I,te,E,"borderStyle",ro(Ri,w)),Tu(I,te,E)},B=function(w,E){var I=w.dom.styles.parse(E),te=Zn(I),Ye=w.dom.styles.parse(w.dom.styles.serialize(te));return w.dom.styles.serialize(Ye)},G=function(w){var E=w.selection.getNode(),I=w.dom.getParent(E,"figure.image");return I?w.dom.select("img",I)[0]:E&&(E.nodeName!=="IMG"||oe(E))?null:E},$=function(w,E){var I=w.dom,te=He(w.schema.getTextBlockElements(),function(Ht,On){return!w.schema.isValidChild(On,"figure")}),Ye=I.getParent(E.parentNode,function(Ht){return Gt(te,Ht.nodeName)},w.getBody());return Ye?I.split(Ye,E):E},ee=function(w){var E=G(w);return E?_o(function(I){return B(w,I)},E):Do()},Ie=function(w,E){var I=Bi(function(Ht){return B(w,Ht)},E);w.dom.setAttrib(I,"data-mce-id","__mcenew"),w.focus(),w.selection.setContent(I.outerHTML);var te=w.dom.select('*[data-mce-id="__mcenew"]')[0];if(w.dom.setAttrib(te,"data-mce-id",null),Va(te)){var Ye=$(w,te);w.selection.select(Ye)}else w.selection.select(te)},Qe=function(w,E){w.dom.setAttrib(E,"src",E.getAttribute("src"))},xt=function(w,E){if(E){var I=w.dom.is(E.parentNode,"figure.image")?E.parentNode:E;w.dom.remove(I),w.focus(),w.nodeChanged(),w.dom.isEmpty(w.getBody())&&(w.setContent(""),w.selection.setCursorLocation())}},Et=function(w,E){var I=G(w);if(Ou(function(Ye){return B(w,Ye)},E,I),Qe(w,I),Va(I.parentNode)){var te=I.parentNode;$(w,te),w.selection.select(I.parentNode)}else w.selection.select(I),sr(w,E,I)},wn=function(w,E){var I=E.src;return Mt(Mt({},E),{src:Xe(w,I)?I:""})},gr=function(w,E){var I=G(w);if(I){var te=_o(function(On){return B(w,On)},I),Ye=Mt(Mt({},te),E),Ht=wn(w,Ye);Ye.src?Et(w,Ht):xt(w,I)}else E.src&&Ie(w,Mt(Mt({},Do()),E))},Dn=function(w,E){var I=$t(w)&&$t(E);return I?yr(w,E):E},Rr=function(w){return function(){for(var E=[],I=0;I<arguments.length;I++)E[I]=arguments[I];if(E.length===0)throw new Error("Can't merge zero objects");for(var te={},Ye=0;Ye<E.length;Ye++){var Ht=E[Ye];for(var On in Ht)Ft(Ht,On)&&(te[On]=w(te[On],Ht[On]))}return te}},yr=Rr(Dn),zo=function(w){return w.length>0},ia=tinymce.util.Tools.resolve("tinymce.util.ImageUploader"),ru=tinymce.util.Tools.resolve("tinymce.util.Tools"),Fi=function(w){return kt(w.value)?w.value:""},wr=function(w){return kt(w.text)?w.text:kt(w.title)?w.title:""},ua=function(w,E){var I=[];return ru.each(w,function(te){var Ye=wr(te);if(te.menu!==void 0){var Ht=ua(te.menu,E);I.push({text:Ye,items:Ht})}else{var On=E(te);I.push({text:Ye,value:On})}}),I},ke=function(w){return w===void 0&&(w=Fi),function(E){return E?ge.from(E).map(function(I){return ua(I,w)}):ge.none()}},Wr=function(w){return ke(Fi)(w)},di=function(w){return Ft(w,"items")},$c=function(w,E){return Ne(w,function(I){return di(I)?$c(I.items,E):I.value===E?ge.some(I):ge.none()})},ku=function(w,E){return w.bind(function(I){return $c(I,E)})},sn={sanitizer:ke,sanitize:Wr,findEntry:ku},nc=function(w){return{title:"Advanced",name:"advanced",items:[{type:"input",label:"Style",name:"style"},{type:"grid",columns:2,items:[{type:"input",label:"Vertical space",name:"vspace",inputMode:"numeric"},{type:"input",label:"Horizontal space",name:"hspace",inputMode:"numeric"},{type:"input",label:"Border width",name:"border",inputMode:"numeric"},{type:"listbox",name:"borderstyle",label:"Border style",items:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]}]}]}},mi={makeTab:nc},Sr=function(w){var E=sn.sanitizer(function(kr){return w.convertURL(kr.value||kr.url,"src")}),I=new xe(function(kr){So(w,function(Yo){kr(E(Yo).map(function(Cs){return Ct([[{text:"None",value:""}],Cs])}))})}),te=sn.sanitize(ze(w)),Ye=Y(w),Ht=Z(w),On=cr(w),Ia=ir(w),Ii=ee(w),sa=mt(w),Wa=gt(w),uc=ce(w),xl=Re(w),pi=Eo(w),zf=wo(w),Cl=ge.some(Me(w)).filter(function(kr){return kt(kr)&&kr.length>0});return I.then(function(kr){return{image:Ii,imageList:kr,classList:te,hasAdvTab:Ye,hasUploadTab:Ht,hasUploadUrl:On,hasUploadHandler:Ia,hasDescription:sa,hasImageTitle:Wa,hasDimensions:uc,hasImageCaption:xl,prependURL:Cl,hasAccessibilityOptions:pi,automaticUploads:zf}})},au=function(w){var E={name:"src",type:"urlinput",filetype:"image",label:"Source"},I=w.imageList.map(function(Wa){return{name:"images",type:"listbox",label:"Image list",items:Wa}}),te={name:"alt",type:"input",label:"Alternative description",disabled:w.hasAccessibilityOptions&&w.image.isDecorative},Ye={name:"title",type:"input",label:"Image title"},Ht={name:"dimensions",type:"sizeinput"},On={type:"label",label:"Accessibility",items:[{name:"isDecorative",type:"checkbox",label:"Image is decorative"}]},Ia=w.classList.map(function(Wa){return{name:"classes",type:"listbox",label:"Class",items:Wa}}),Ii={type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]},sa=function(Wa){return Wa?{type:"grid",columns:2}:{type:"panel"}};return Ct([[E],I.toArray(),w.hasAccessibilityOptions&&w.hasDescription?[On]:[],w.hasDescription?[te]:[],w.hasImageTitle?[Ye]:[],w.hasDimensions?[Ht]:[],[Mt(Mt({},sa(w.classList.isSome()&&w.hasImageCaption)),{items:Ct([Ia.toArray(),w.hasImageCaption?[Ii]:[]])})]])},Ua=function(w){return{title:"General",name:"general",items:au(w)}},ao={makeTab:Ua,makeItems:au},er=function(w){var E=[{type:"dropzone",name:"fileinput"}];return{title:"Upload",name:"upload",items:E}},Au={makeTab:er},Mu=function(w){return{prevImage:sn.findEntry(w.imageList,w.image.src),prevAlt:w.image.alt,open:!0}},ou=function(w){return{src:{value:w.src,meta:{}},images:w.src,alt:w.alt,title:w.title,dimensions:{width:w.width,height:w.height},classes:w.class,caption:w.caption,style:w.style,vspace:w.vspace,border:w.border,hspace:w.hspace,borderstyle:w.borderStyle,fileinput:[],isDecorative:w.isDecorative}},rc=function(w,E){return{src:w.src.value,alt:w.alt.length===0&&E?null:w.alt,title:w.title,width:w.dimensions.width,height:w.dimensions.height,class:w.classes,style:w.style,caption:w.caption,hspace:w.hspace,vspace:w.vspace,border:w.border,borderStyle:w.borderstyle,isDecorative:w.isDecorative}},gi=function(w,E){return/^(?:[a-zA-Z]+:)?\/\//.test(E)?ge.none():w.prependURL.bind(function(I){return E.substring(0,I.length)!==I?ge.some(I+E):ge.none()})},qo=function(w,E){var I=E.getData();gi(w,I.src.value).each(function(te){E.setData({src:{value:te,meta:I.src.meta}})})},ac=function(w,E,I){w.hasDescription&&kt(I.alt)&&(E.alt=I.alt),w.hasAccessibilityOptions&&(E.isDecorative=I.isDecorative||E.isDecorative||!1),w.hasImageTitle&&kt(I.title)&&(E.title=I.title),w.hasDimensions&&(kt(I.width)&&(E.dimensions.width=I.width),kt(I.height)&&(E.dimensions.height=I.height)),kt(I.class)&&sn.findEntry(w.classList,I.class).each(function(te){E.classes=te.value}),w.hasImageCaption&&Lt(I.caption)&&(E.caption=I.caption),w.hasAdvTab&&(kt(I.style)&&(E.style=I.style),kt(I.vspace)&&(E.vspace=I.vspace),kt(I.border)&&(E.border=I.border),kt(I.hspace)&&(E.hspace=I.hspace),kt(I.borderstyle)&&(E.borderstyle=I.borderstyle))},Co=function(w,E){var I=E.getData(),te=I.src.meta;if(te!==void 0){var Ye=yr({},I);ac(w,Ye,te),E.setData(Ye)}},oo=function(w,E,I,te){var Ye=te.getData(),Ht=Ye.src.value,On=Ye.src.meta||{};!On.width&&!On.height&&E.hasDimensions&&(zo(Ht)?w.imageSize(Ht).then(function(Ia){I.open&&te.setData({dimensions:Ia})}).catch(function(Ia){return console.error(Ia)}):te.setData({dimensions:{width:"",height:""}}))},A=function(w,E,I){var te=I.getData(),Ye=sn.findEntry(w.imageList,te.src.value);E.prevImage=Ye,I.setData({images:Ye.map(function(Ht){return Ht.value}).getOr("")})},N=function(w,E,I,te){qo(E,te),Co(E,te),oo(w,E,I,te),A(E,I,te)},J=function(w,E,I,te){var Ye=te.getData(),Ht=sn.findEntry(E.imageList,Ye.images);Ht.each(function(On){var Ia=Ye.alt===""||I.prevImage.map(function(Ii){return Ii.text===Ye.alt}).getOr(!1);Ia?On.value===""?te.setData({src:On,alt:I.prevAlt}):te.setData({src:On,alt:On.text}):te.setData({src:On})}),I.prevImage=Ht,N(w,E,I,te)},ve=function(w){var E=w["margin-top"]&&w["margin-bottom"]&&w["margin-top"]===w["margin-bottom"];return E?zr(String(w["margin-top"])):""},Ee=function(w){var E=w["margin-right"]&&w["margin-left"]&&w["margin-right"]===w["margin-left"];return E?zr(String(w["margin-right"])):""},St=function(w){return w["border-width"]?zr(String(w["border-width"])):""},_n=function(w){return w["border-style"]?String(w["border-style"]):""},Un=function(w,E,I){return E(w(E(I)))},$n=function(w,E,I){var te=Zn(w(I.style)),Ye=yr({},I);return Ye.vspace=ve(te),Ye.hspace=Ee(te),Ye.border=St(te),Ye.borderstyle=_n(te),Ye.style=Un(w,E,te),Ye},ga=function(w,E){var I=E.getData(),te=$n(w.parseStyle,w.serializeStyle,I);E.setData(te)},ca=function(w,E,I){var te=yr(ou(E.image),I.getData()),Ye=nu(w.normalizeCss,rc(te,!1));I.setData({style:Ye})},Hi=function(w,E,I,te){var Ye=te.getData();te.block("Uploading image"),tn(Ye.fileinput).fold(function(){te.unblock()},function(Ht){var On=URL.createObjectURL(Ht),Ia=function(){te.unblock(),URL.revokeObjectURL(On)},Ii=function(sa){te.setData({src:{value:sa,meta:{}}}),te.showTab("general"),N(w,E,I,te)};Qn(Ht).then(function(sa){var Wa=w.createBlobCache(Ht,On,sa);E.automaticUploads?w.uploadImage(Wa).then(function(uc){Ii(uc.url),Ia()}).catch(function(uc){Ia(),w.alertErr(uc)}):(w.addToBlobCache(Wa),Ii(Wa.blobUri()),te.unblock())})})},ha=function(w,E,I){return function(te,Ye){Ye.name==="src"?N(w,E,I,te):Ye.name==="images"?J(w,E,I,te):Ye.name==="alt"?I.prevAlt=te.getData().alt:Ye.name==="style"?ga(w,te):Ye.name==="vspace"||Ye.name==="hspace"||Ye.name==="border"||Ye.name==="borderstyle"?ca(w,E,te):Ye.name==="fileinput"?Hi(w,E,I,te):Ye.name==="isDecorative"&&(te.getData().isDecorative?te.disable("alt"):te.enable("alt"))}},hi=function(w){return function(){w.open=!1}},Ha=function(w){if(w.hasAdvTab||w.hasUploadUrl||w.hasUploadHandler){var E={type:"tabpanel",tabs:Ct([[ao.makeTab(w)],w.hasAdvTab?[mi.makeTab(w)]:[],w.hasUploadTab&&(w.hasUploadUrl||w.hasUploadHandler)?[Au.makeTab(w)]:[]])};return E}else{var I={type:"panel",items:ao.makeItems(w)};return I}},Lc=function(w){return function(E){var I=Mu(E);return{title:"Insert/Edit Image",size:"normal",body:Ha(E),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:ou(E.image),onSubmit:w.onSubmit(E),onChange:ha(w,E,I),onClose:hi(I)}}},wl=function(w){return function(E){return function(I){var te=yr(ou(E.image),I.getData());w.execCommand("mceUpdateImage",!1,rc(te,E.hasAccessibilityOptions)),w.editorUpload.uploadImagesAuto(),I.close()}}},Tn=function(w){return function(E){return Xe(w,E)?Cr(w.documentBaseURI.toAbsolute(E)).then(function(I){return{width:String(I.width),height:String(I.height)}}):xe.resolve({width:"",height:""})}},Ss=function(w){return function(E,I,te){return w.editorUpload.blobCache.create({blob:E,blobUri:I,name:E.name?E.name.replace(/\.[^\.]+$/,""):null,filename:E.name,base64:te.split(",")[1]})}},Pc=function(w){return function(E){w.editorUpload.blobCache.add(E)}},Df=function(w){return function(E){w.windowManager.alert(E)}},Wn=function(w){return function(E){return B(w,E)}},Ko=function(w){return function(E){return w.dom.parseStyle(E)}},_f=function(w){return function(E,I){return w.dom.serializeStyle(E,I)}},Xo=function(w){return function(E){return ia(w).upload([E],!1).then(function(I){return I.length===0?xe.reject("Failed to upload image"):I[0].status===!1?xe.reject(I[0].error.message):I[0]})}},Br=function(w){var E={onSubmit:wl(w),imageSize:Tn(w),addToBlobCache:Pc(w),createBlobCache:Ss(w),alertErr:Df(w),normalizeCss:Wn(w),parseStyle:Ko(w),serializeStyle:_f(w),uploadImage:Xo(w)},I=function(){Sr(w).then(Lc(E)).then(w.windowManager.open)};return{open:I}},iu=function(w){w.addCommand("mceImage",Br(w).open),w.addCommand("mceUpdateImage",function(E,I){w.undoManager.transact(function(){return gr(w,I)})})},oc=function(w){var E=w.attr("class");return E&&/\bimage\b/.test(E)},ic=function(w){return function(E){for(var I=E.length,te=function(Ht){Ht.attr("contenteditable",w?"true":null)};I--;){var Ye=E[I];oc(Ye)&&(Ye.attr("contenteditable",w?"false":null),ru.each(Ye.getAll("figcaption"),te))}}},Or=function(w){w.on("PreInit",function(){w.parser.addNodeFilter("figure",ic(!0)),w.serializer.addNodeFilter("figure",ic(!1))})},Sl=function(w){w.ui.registry.addToggleButton("image",{icon:"image",tooltip:"Insert/edit image",onAction:Br(w).open,onSetup:function(E){return E.setActive(tt(G(w))),w.selection.selectorChangedWithUnbind("img:not([data-mce-object],[data-mce-placeholder]),figure.image",E.setActive).unbind}}),w.ui.registry.addMenuItem("image",{icon:"image",text:"Image...",onAction:Br(w).open}),w.ui.registry.addContextMenu("image",{update:function(E){return Va(E)||tu(E)&&!oe(E)?["image"]:[]}})};function xs(){nn.add("image",function(w){Or(w),Sl(w),iu(w)})}xs()})();(function(){var nn=tinymce.util.Tools.resolve("tinymce.PluginManager"),Mt=function(h){var C=typeof h;return h===null?"null":C==="object"&&(Array.prototype.isPrototypeOf(h)||h.constructor&&h.constructor.name==="Array")?"array":C==="object"&&(String.prototype.isPrototypeOf(h)||h.constructor&&h.constructor.name==="String")?"string":C},Fn=function(h){return function(C){return Mt(C)===h}},Qt=function(h){return function(C){return typeof C===h}},dt=Fn("string"),Kt=Fn("object"),kt=Fn("array"),$t=Qt("boolean"),Ze=Qt("function"),mn=Qt("number"),Lt=function(){},Oe=function(h){return function(){return h}},tt=function(h){return h},jt=function(h,C){return h===C},We=function(h){return function(C){return!h(C)}},be=Oe(!1),en=Oe(!0),Ae=function(){return wt},wt=function(){var h=function(F){return F()},C=tt,O={fold:function(F,q){return F()},isSome:be,isNone:en,getOr:C,getOrThunk:h,getOrDie:function(F){throw new Error(F||"error: getOrDie called on none.")},getOrNull:Oe(null),getOrUndefined:Oe(void 0),or:C,orThunk:h,map:Ae,each:Lt,bind:Ae,exists:be,forall:en,filter:function(){return Ae()},toArray:function(){return[]},toString:Oe("none()")};return O}(),j=function(h){var C=Oe(h),O=function(){return q},F=function(fe){return fe(h)},q={fold:function(fe,ot){return ot(h)},isSome:en,isNone:be,getOr:C,getOrThunk:C,getOrDie:C,getOrNull:C,getOrUndefined:C,or:O,orThunk:O,map:function(fe){return j(fe(h))},each:function(fe){fe(h)},bind:F,exists:F,forall:F,filter:function(fe){return fe(h)?q:wt},toArray:function(){return[h]},toString:function(){return"some("+h+")"}};return q},je=function(h){return h==null?wt:j(h)},Ge={some:j,none:Ae,from:je},Pn=Array.prototype.slice,rn=Array.prototype.push,ge=function(h,C){for(var O=h.length,F=new Array(O),q=0;q<O;q++){var fe=h[q];F[q]=C(fe,q)}return F},Le=function(h,C){for(var O=0,F=h.length;O<F;O++){var q=h[O];C(q,O)}},qe=function(h,C){for(var O=[],F=0,q=h.length;F<q;F++){var fe=h[F];C(fe,F)&&O.push(fe)}return O},gn=function(h,C){if(h.length===0)return[];for(var O=C(h[0]),F=[],q=[],fe=0,ot=h.length;fe<ot;fe++){var Dt=h[fe],an=C(Dt);an!==O&&(F.push(q),q=[]),O=an,q.push(Dt)}return q.length!==0&&F.push(q),F},L=function(h,C,O){return Le(h,function(F,q){O=C(O,F,q)}),O},_=function(h,C,O){for(var F=0,q=h.length;F<q;F++){var fe=h[F];if(C(fe,F))return Ge.some(fe);if(O(fe,F))break}return Ge.none()},He=function(h,C){return _(h,C,be)},Ft=function(h){for(var C=[],O=0,F=h.length;O<F;++O){if(!kt(h[O]))throw new Error("Arr.flatten item "+O+" was not an array, input: "+h);rn.apply(C,h[O])}return C},Gt=function(h,C){return Ft(ge(h,C))},Xt=function(h){var C=Pn.call(h,0);return C.reverse(),C},Ct=function(h,C){return C>=0&&C<h.length?Ge.some(h[C]):Ge.none()},p=function(h){return Ct(h,0)},tn=function(h){return Ct(h,h.length-1)},Ne=function(h,C){for(var O=0;O<h.length;O++){var F=C(h[O],O);if(F.isSome())return F}return Ge.none()},it=function(){return it=Object.assign||function(C){for(var O,F=1,q=arguments.length;F<q;F++){O=arguments[F];for(var fe in O)Object.prototype.hasOwnProperty.call(O,fe)&&(C[fe]=O[fe])}return C},it.apply(this,arguments)};function Gn(h,C,O){if(O||arguments.length===2)for(var F=0,q=C.length,fe;F<q;F++)(fe||!(F in C))&&(fe||(fe=Array.prototype.slice.call(C,0,F)),fe[F]=C[F]);return h.concat(fe||Array.prototype.slice.call(C))}var Dr=function(h){var C=!1,O;return function(){for(var F=[],q=0;q<arguments.length;q++)F[q]=arguments[q];return C||(C=!0,O=h.apply(null,F)),O}},It=function(h,C,O,F){var q=h.isiOS()&&/ipad/i.test(O)===!0,fe=h.isiOS()&&!q,ot=h.isiOS()||h.isAndroid(),Dt=ot||F("(pointer:coarse)"),an=q||!fe&&ot&&F("(min-device-width:768px)"),ln=fe||ot&&!an,tr=C.isSafari()&&h.isiOS()&&/safari/i.test(O)===!1,Ya=!ln&&!an&&!tr;return{isiPad:Oe(q),isiPhone:Oe(fe),isTablet:Oe(an),isPhone:Oe(ln),isTouch:Oe(Dt),isAndroid:h.isAndroid,isiOS:h.isiOS,isWebView:Oe(tr),isDesktop:Oe(Ya)}},Hn=function(h,C){for(var O=0;O<h.length;O++){var F=h[O];if(F.test(C))return F}},or=function(h,C){var O=Hn(h,C);if(!O)return{major:0,minor:0};var F=function(q){return Number(C.replace(O,"$"+q))};return Ke(F(1),F(2))},_r=function(h,C){var O=String(C).toLowerCase();return h.length===0?Se():or(h,O)},Se=function(){return Ke(0,0)},Ke=function(h,C){return{major:h,minor:C}},$r={nu:Ke,detect:_r,unknown:Se},xe=function(h,C){return Ne(C.brands,function(O){var F=O.brand.toLowerCase();return He(h,function(q){var fe;return F===((fe=q.brand)===null||fe===void 0?void 0:fe.toLowerCase())}).map(function(q){return{current:q.name,version:$r.nu(parseInt(O.version,10),0)}})})},Ce=function(h,C){var O=String(C).toLowerCase();return He(h,function(F){return F.search(O)})},X=function(h,C){return Ce(h,C).map(function(O){var F=$r.detect(O.versionRegexes,C);return{current:O.name,version:F}})},ce=function(h,C){return Ce(h,C).map(function(O){var F=$r.detect(O.versionRegexes,C);return{current:O.name,version:F}})},Y=function(h,C){return h.indexOf(C)!==-1},Z=function(h){return function(C){return C.replace(h,"")}},Me=Z(/^\s+|\s+$/g),ze=function(h){return h.length>0},mt=function(h){return!ze(h)},gt=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Re=function(h){return function(C){return Y(C,h)}},cn=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(h){return Y(h,"edge/")&&Y(h,"chrome")&&Y(h,"safari")&&Y(h,"applewebkit")}},{name:"Chrome",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,gt],search:function(h){return Y(h,"chrome")&&!Y(h,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(h){return Y(h,"msie")||Y(h,"trident")}},{name:"Opera",versionRegexes:[gt,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Re("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Re("firefox")},{name:"Safari",versionRegexes:[gt,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(h){return(Y(h,"safari")||Y(h,"mobile/"))&&Y(h,"applewebkit")}}],cr=[{name:"Windows",search:Re("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(h){return Y(h,"iphone")||Y(h,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Re("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:Re("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Re("linux"),versionRegexes:[]},{name:"Solaris",search:Re("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Re("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Re("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],ir={browsers:Oe(cn),oses:Oe(cr)},Eo="Edge",wo="Chrome",Xn="IE",Cr="Opera",zr="Firefox",qn="Safari",Zn=function(){return So({current:void 0,version:$r.unknown()})},So=function(h){var C=h.current,O=h.version,F=function(q){return function(){return C===q}};return{current:C,version:O,isEdge:F(Eo),isChrome:F(wo),isIE:F(Xn),isOpera:F(Cr),isFirefox:F(zr),isSafari:F(qn)}},sr={unknown:Zn,nu:So,edge:Oe(Eo),chrome:Oe(wo),ie:Oe(Xn),opera:Oe(Cr),firefox:Oe(zr),safari:Oe(qn)},Qn="Windows",oe="iOS",Xe="Android",st="Linux",ft="OSX",hn="Solaris",yn="FreeBSD",Tr="ChromeOS",ct=function(){return pn({current:void 0,version:$r.unknown()})},pn=function(h){var C=h.current,O=h.version,F=function(q){return function(){return C===q}};return{current:C,version:O,isWindows:F(Qn),isiOS:F(oe),isAndroid:F(Xe),isOSX:F(ft),isLinux:F(st),isSolaris:F(hn),isFreeBSD:F(yn),isChromeOS:F(Tr)}},mr={unknown:ct,nu:pn,windows:Oe(Qn),ios:Oe(oe),android:Oe(Xe),linux:Oe(st),osx:Oe(ft),solaris:Oe(hn),freebsd:Oe(yn),chromeos:Oe(Tr)},Aa=function(h,C,O){var F=ir.browsers(),q=ir.oses(),fe=C.bind(function(an){return xe(F,an)}).orThunk(function(){return X(F,h)}).fold(sr.unknown,sr.nu),ot=ce(q,h).fold(mr.unknown,mr.nu),Dt=It(ot,fe,h,O);return{browser:fe,os:ot,deviceType:Dt}},Go={detect:Aa},Xr=function(h){return window.matchMedia(h).matches},Ji=Dr(function(){return Go.detect(navigator.userAgent,Ge.from(navigator.userAgentData),Xr)}),vi=function(){return Ji()},Zi=function(h,C,O){return(h.compareDocumentPosition(C)&O)!==0},no=function(h,C){return Zi(h,C,Node.DOCUMENT_POSITION_CONTAINED_BY)},Fa=1,Qi=function(h,C){var O=C||document,F=O.createElement("div");if(F.innerHTML=h,!F.hasChildNodes()||F.childNodes.length>1)throw console.error("HTML does not have a single root node",h),new Error("HTML must have a single root node");return Va(F.childNodes[0])},Ri=function(h,C){var O=C||document,F=O.createElement(h);return Va(F)},eu=function(h,C){var O=C||document,F=O.createTextNode(h);return Va(F)},Va=function(h){if(h==null)throw new Error("Node cannot be null or undefined");return{dom:h}},tu=function(h,C,O){return Ge.from(h.dom.elementFromPoint(C,O)).map(Va)},In={fromHtml:Qi,fromTag:Ri,fromText:eu,fromDom:Va,fromPoint:tu},Cu=function(h,C){var O=h.dom;if(O.nodeType!==Fa)return!1;var F=O;if(F.matches!==void 0)return F.matches(C);if(F.msMatchesSelector!==void 0)return F.msMatchesSelector(C);if(F.webkitMatchesSelector!==void 0)return F.webkitMatchesSelector(C);if(F.mozMatchesSelector!==void 0)return F.mozMatchesSelector(C);throw new Error("Browser lacks native selectors")},Do=function(h,C){return h.dom===C.dom},nu=function(h,C){var O=h.dom,F=C.dom;return O===F?!1:O.contains(F)},Bi=function(h,C){return no(h.dom,C.dom)},_o=function(h,C){return vi().browser.isIE()?Bi(h,C):nu(h,C)},Ma=Cu,xo=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),Tu=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),ro=tinymce.util.Tools.resolve("tinymce.util.VK"),Ou=Object.keys,B=function(h,C){for(var O=Ou(h),F=0,q=O.length;F<q;F++){var fe=O[F],ot=h[fe];C(ot,fe)}},G=function(h){return function(C,O){h[O]=C}},$=function(h,C,O,F){var q={};return B(h,function(fe,ot){(C(fe,ot)?O:F)(fe,ot)}),q},ee=function(h,C){var O={};return $(h,C,G(O),Lt),O};typeof window<"u"||Function("return this;")();var Ie=function(h){var C=h.dom.nodeName;return C.toLowerCase()},Qe=function(h){return h.dom.nodeType},xt=function(h){return function(C){return Qe(C)===h}},Et=xt(Fa),wn=function(h){return function(C){return Et(C)&&Ie(C)===h}},gr=function(h,C,O){if(dt(O)||$t(O)||mn(O))h.setAttribute(C,O+"");else throw console.error("Invalid call to Attribute.set. Key ",C,":: Value ",O,":: Element ",h),new Error("Attribute value was not simple")},Dn=function(h,C){var O=h.dom;B(C,function(F,q){gr(O,q,F)})},Rr=function(h){return L(h.dom.attributes,function(C,O){return C[O.name]=O.value,C},{})},yr=function(h){return Ge.from(h.dom.parentNode).map(In.fromDom)},zo=function(h){return ge(h.dom.childNodes,In.fromDom)},ia=function(h,C){var O=h.dom.childNodes;return Ge.from(O[C]).map(In.fromDom)},ru=function(h){return ia(h,0)},Fi=function(h){return ia(h,h.dom.childNodes.length-1)},wr=function(h,C){var O=yr(h);O.each(function(F){F.dom.insertBefore(C.dom,h.dom)})},ua=function(h,C){h.dom.appendChild(C.dom)},ke=function(h,C){Le(C,function(O){wr(h,O)})},Wr=function(h,C){Le(C,function(O){ua(h,O)})},di=function(h){var C=h.dom;C.parentNode!==null&&C.parentNode.removeChild(C)},$c=function(h,C){return In.fromDom(h.dom.cloneNode(C))},ku=function(h){return $c(h,!0)},sn=function(h,C){var O=In.fromTag(C),F=Rr(h);return Dn(O,F),O},nc=function(h,C){var O=sn(h,C);wr(h,O);var F=zo(h);return Wr(O,F),di(h),O},mi=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),Sr=tinymce.util.Tools.resolve("tinymce.util.Tools"),au=function(h){return function(C){return C&&C.nodeName.toLowerCase()===h}},Ua=function(h){return function(C){return C&&h.test(C.nodeName)}},ao=function(h){return h&&h.nodeType===3},er=Ua(/^(OL|UL|DL)$/),Au=Ua(/^(OL|UL)$/),Mu=au("ol"),ou=Ua(/^(LI|DT|DD)$/),rc=Ua(/^(DT|DD)$/),gi=Ua(/^(TH|TD)$/),qo=au("br"),ac=function(h){return h.parentNode.firstChild===h},Co=function(h,C){return C&&!!h.schema.getTextBlockElements()[C.nodeName]},oo=function(h,C){return h&&h.nodeName in C},A=function(h,C){return qo(C)?h.isBlock(C.nextSibling)&&!qo(C.previousSibling):!1},N=function(h,C,O){var F=h.isEmpty(C);return O&&h.select("span[data-mce-type=bookmark]",C).length>0?!1:F},J=function(h,C){return h.isChildOf(C,h.getRoot())},ve=function(h){return h.getParam("lists_indent_on_tab",!0)},Ee=function(h){var C=h.getParam("forced_root_block","p");return C===!1?"":C===!0?"p":C},St=function(h){return h.getParam("forced_root_block_attrs",{})},_n=function(h,C){var O=h.dom,F=h.schema.getBlockElements(),q=O.createFragment(),fe=Ee(h),ot,Dt,an;if(fe&&(Dt=O.create(fe),Dt.tagName===fe.toUpperCase()&&O.setAttribs(Dt,St(h)),oo(C.firstChild,F)||q.appendChild(Dt)),C)for(;ot=C.firstChild;){var ln=ot.nodeName;!an&&(ln!=="SPAN"||ot.getAttribute("data-mce-type")!=="bookmark")&&(an=!0),oo(ot,F)?(q.appendChild(ot),Dt=null):fe?(Dt||(Dt=O.create(fe),q.appendChild(Dt)),Dt.appendChild(ot)):q.appendChild(ot)}return fe?an||Dt.appendChild(O.create("br",{"data-mce-bogus":"1"})):q.appendChild(O.create("br")),q},Un=mi.DOM,$n=function(h,C,O){var F=function(ln){Sr.each(q,function(tr){ln.parentNode.insertBefore(tr,O.parentNode)}),Un.remove(ln)},q=Un.select('span[data-mce-type="bookmark"]',C),fe=_n(h,O),ot=Un.createRng();ot.setStartAfter(O),ot.setEndAfter(C);for(var Dt=ot.extractContents(),an=Dt.firstChild;an;an=an.firstChild)if(an.nodeName==="LI"&&h.dom.isEmpty(an)){Un.remove(an);break}h.dom.isEmpty(Dt)||Un.insertAfter(Dt,C),Un.insertAfter(fe,C),N(h.dom,O.parentNode)&&F(O.parentNode),Un.remove(O),N(h.dom,C)&&Un.remove(C)},ga=wn("dd"),ca=wn("dt"),Hi=function(h,C){ga(C)?nc(C,"dt"):ca(C)&&yr(C).each(function(O){return $n(h,O.dom,C.dom)})},ha=function(h){ca(h)&&nc(h,"dd")},hi=function(h,C,O){C==="Indent"?Le(O,ha):Le(O,function(F){return Hi(h,F)})},Ha=function(h,C){if(ao(h))return{container:h,offset:C};var O=xo.getNode(h,C);return ao(O)?{container:O,offset:C>=h.childNodes.length?O.data.length:0}:O.previousSibling&&ao(O.previousSibling)?{container:O.previousSibling,offset:O.previousSibling.data.length}:O.nextSibling&&ao(O.nextSibling)?{container:O.nextSibling,offset:0}:{container:h,offset:C}},Lc=function(h){var C=h.cloneRange(),O=Ha(h.startContainer,h.startOffset);C.setStart(O.container,O.offset);var F=Ha(h.endContainer,h.endOffset);return C.setEnd(F.container,F.offset),C},wl=tinymce.util.Tools.resolve("tinymce.dom.DomQuery"),Tn=function(h,C){var O=C||h.selection.getStart(!0);return h.dom.getParent(O,"OL,UL,DL",Xo(h,O))},Ss=function(h,C){return h&&C.length===1&&C[0]===h},Pc=function(h){return qe(h.querySelectorAll("ol,ul,dl"),er)},Df=function(h){var C=Tn(h),O=h.selection.getSelectedBlocks();return Ss(C,O)?Pc(C):qe(O,function(F){return er(F)&&C!==F})},Wn=function(h,C){var O=Sr.map(C,function(F){var q=h.dom.getParent(F,"li,dd,dt",Xo(h,F));return q||F});return wl.unique(O)},Ko=function(h){var C=h.selection.getSelectedBlocks();return qe(Wn(h,C),ou)},_f=function(h){return qe(Ko(h),rc)},Xo=function(h,C){var O=h.dom.getParents(C,"TD,TH");return O.length>0?O[0]:h.getBody()},Br=function(h,C){var O=h.dom.getParents(C,"ol,ul",Xo(h,C));return tn(O)},iu=function(h){var C=Br(h,h.selection.getStart()),O=qe(h.selection.getSelectedBlocks(),Au);return C.toArray().concat(O)},oc=function(h){var C=iu(h);return ic(h,C)},ic=function(h,C){var O=ge(C,function(F){return Br(h,F).getOr(F)});return wl.unique(O)},Or=function(h,C,O){return O===void 0&&(O=jt),h.exists(function(F){return O(F,C)})},Sl=function(h,C,O){return h.isSome()&&C.isSome()?Ge.some(O(h.getOrDie(),C.getOrDie())):Ge.none()},xs=function(h,C){var O=C||document,F=O.createDocumentFragment();return Le(h,function(q){F.appendChild(q.dom)}),In.fromDom(F)},w=function(h,C,O){return h.fire("ListMutation",{action:C,element:O})},E=function(h){return h.style!==void 0&&Ze(h.style.getPropertyValue)},I=function(h,C,O){if(!dt(O))throw console.error("Invalid call to CSS.set. Property ",C,":: Value ",O,":: Element ",h),new Error("CSS value must be a string: "+O);E(h)&&h.style.setProperty(C,O)},te=function(h,C,O){var F=h.dom;I(F,C,O)},Ye=function(h,C){ua(h.item,C.list)},Ht=function(h){for(var C=1;C<h.length;C++)Ye(h[C-1],h[C])},On=function(h,C){Sl(tn(h),p(C),Ye)},Ia=function(h,C){var O={list:In.fromTag(C,h),item:In.fromTag("li",h)};return ua(O.list,O.item),O},Ii=function(h,C,O){for(var F=[],q=0;q<O;q++)F.push(Ia(h,C.listType));return F},sa=function(h,C){for(var O=0;O<h.length-1;O++)te(h[O].item,"list-style-type","none");tn(h).each(function(F){Dn(F.list,C.listAttributes),Dn(F.item,C.itemAttributes),Wr(F.item,C.content)})},Wa=function(h,C){Ie(h.list)!==C.listType&&(h.list=nc(h.list,C.listType)),Dn(h.list,C.listAttributes)},uc=function(h,C,O){var F=In.fromTag("li",h);return Dn(F,C),Wr(F,O),F},xl=function(h,C){ua(h.list,C),h.item=C},pi=function(h,C,O){var F=C.slice(0,O.depth);return tn(F).each(function(q){var fe=uc(h,O.itemAttributes,O.content);xl(q,fe),Wa(q,O)}),F},zf=function(h,C,O){var F=Ii(h,O,O.depth-C.length);return Ht(F),sa(F,O),On(C,F),C.concat(F)},Cl=function(h,C){var O=L(C,function(F,q){return q.depth>F.length?zf(h,F,q):pi(h,F,q)},[]);return p(O).map(function(F){return F.list})},kr=function(h){return Ma(h,"OL,UL")},Yo=function(h){return ru(h).exists(kr)},Cs=function(h){return Fi(h).exists(kr)},cc=function(h){return h.depth>0},Vt=function(h){return h.isSelected},Ro=function(h){var C=zo(h),O=Cs(h)?C.slice(0,-1):C;return ge(O,ku)},pa=function(h,C,O){return yr(h).filter(Et).map(function(F){return{depth:C,dirty:!1,isSelected:O,content:Ro(h),itemAttributes:Rr(h),listAttributes:Rr(F),listType:Ie(F)}})},ja=function(h,C){switch(h){case"Indent":C.depth++;break;case"Outdent":C.depth--;break;case"Flatten":C.depth=0}C.dirty=!0},Uv=function(h,C){h.listType=C.listType,h.listAttributes=it({},C.listAttributes)},ba=function(h){h.listAttributes=ee(h.listAttributes,function(C,O){return O!=="start"})},Rf=function(h,C){var O=h[C].depth,F=function(fe){return fe.depth===O&&!fe.dirty},q=function(fe){return fe.depth<O};return _(Xt(h.slice(0,C)),F,q).orThunk(function(){return _(h.slice(C+1),F,q)})},uu=function(h){return Le(h,function(C,O){Rf(h,O).fold(function(){C.dirty&&ba(C)},function(F){return Uv(C,F)})}),h},_t=function(h){var C=h,O=function(){return C},F=function(q){C=q};return{get:O,set:F}},Bo=function(h,C,O,F){return ru(F).filter(kr).fold(function(){C.each(function(ot){Do(ot.start,F)&&O.set(!0)});var q=pa(F,h,O.get());C.each(function(ot){Do(ot.end,F)&&O.set(!1)});var fe=Fi(F).filter(kr).map(function(ot){return Ar(h,C,O,ot)}).getOr([]);return q.toArray().concat(fe)},function(q){return Ar(h,C,O,q)})},Ar=function(h,C,O,F){return Gt(zo(F),function(q){var fe=kr(q)?Ar:Bo,ot=h+1;return fe(ot,C,O,q)})},Ga=function(h,C){var O=_t(!1),F=0;return ge(h,function(q){return{sourceList:q,entries:Ar(F,C,O,q)}})},Yr=function(h,C){var O=uu(C);return ge(O,function(F){var q=xs(F.content);return In.fromDom(_n(h,q.dom))})},Lr=function(h,C){var O=uu(C);return Cl(h.contentDocument,O).toArray()},qm=function(h,C){return Gt(gn(C,cc),function(O){var F=p(O).exists(cc);return F?Lr(h,O):Yr(h,O)})},Eu=function(h,C){Le(qe(h,Vt),function(O){return ja(C,O)})},zn=function(h){var C=ge(Ko(h),In.fromDom);return Sl(He(C,We(Yo)),He(Xt(C),We(Yo)),function(O,F){return{start:O,end:F}})},ur=function(h,C,O){var F=Ga(C,zn(h));Le(F,function(q){Eu(q.entries,O);var fe=qm(h,q.entries);Le(fe,function(ot){w(h,O==="Indent"?"IndentList":"OutdentList",ot.dom)}),ke(q.sourceList,fe),di(q.sourceList)})},Ts=function(h,C){var O=ge(oc(h),In.fromDom),F=ge(_f(h),In.fromDom),q=!1;if(O.length||F.length){var fe=h.selection.getBookmark();ur(h,O,C),hi(h,C,F),h.selection.moveToBookmark(fe),h.selection.setRng(Lc(h.selection.getRng())),h.nodeChanged(),q=!0}return q},Nc=function(h){return Ts(h,"Indent")},Jr=function(h){return Ts(h,"Outdent")},bi=function(h){return Ts(h,"Flatten")},Km=tinymce.util.Tools.resolve("tinymce.dom.BookmarkManager"),sc=mi.DOM,Yn=function(h){var C={},O=function(F){var q=h[F?"startContainer":"endContainer"],fe=h[F?"startOffset":"endOffset"];if(q.nodeType===1){var ot=sc.create("span",{"data-mce-type":"bookmark"});q.hasChildNodes()?(fe=Math.min(fe,q.childNodes.length-1),F?q.insertBefore(ot,q.childNodes[fe]):sc.insertAfter(ot,q.childNodes[fe])):q.appendChild(ot),q=ot,fe=0}C[F?"startContainer":"endContainer"]=q,C[F?"startOffset":"endOffset"]=fe};return O(!0),h.collapsed||O(),C},$i=function(h){var C=function(F){var q,fe=function(an){for(var ln=an.parentNode.firstChild,tr=0;ln;){if(ln===an)return tr;(ln.nodeType!==1||ln.getAttribute("data-mce-type")!=="bookmark")&&tr++,ln=ln.nextSibling}return-1},ot=q=h[F?"startContainer":"endContainer"],Dt=h[F?"startOffset":"endOffset"];ot&&(ot.nodeType===1&&(Dt=fe(ot),ot=ot.parentNode,sc.remove(q),!ot.hasChildNodes()&&sc.isBlock(ot)&&ot.appendChild(sc.create("br"))),h[F?"startContainer":"endContainer"]=ot,h[F?"startOffset":"endOffset"]=Dt)};C(!0),C();var O=sc.createRng();return O.setStart(h.startContainer,h.startOffset),h.endContainer&&O.setEnd(h.endContainer,h.endOffset),Lc(O)},Du=function(h){switch(h){case"UL":return"ToggleUlList";case"OL":return"ToggleOlList";case"DL":return"ToggleDLList"}},cu=function(h){return/\btox\-/.test(h.className)},Pr=function(h,C,O){var F=function(fe){var ot=_(fe.parents,er,gi).filter(function(Dt){return Dt.nodeName===C&&!cu(Dt)}).isSome();O(ot)},q=h.dom.getParents(h.selection.getNode());return F({parents:q}),h.on("NodeChange",F),function(){return h.off("NodeChange",F)}},_u=function(h,C,O){var F=O["list-style-type"]?O["list-style-type"]:null;h.setStyle(C,"list-style-type",F)},su=function(h,C){Sr.each(C,function(O,F){h.setAttribute(F,O)})},$a=function(h,C,O){su(C,O["list-attributes"]),Sr.each(h.select("li",C),function(F){su(F,O["list-item-attributes"])})},io=function(h,C,O){_u(h,C,O),$a(h,C,O)},zu=function(h,C,O){Sr.each(O,function(F){var q;return h.setStyle(C,(q={},q[F]="",q))})},Wv=function(h,C,O,F){var q=C[O?"startContainer":"endContainer"],fe=C[O?"startOffset":"endOffset"];for(q.nodeType===1&&(q=q.childNodes[Math.min(fe,q.childNodes.length-1)]||q),!O&&qo(q.nextSibling)&&(q=q.nextSibling);q.parentNode!==F;){if(Co(h,q)||/^(TD|TH)$/.test(q.parentNode.nodeName))return q;q=q.parentNode}return q},Li=function(h,C,O){for(var F=[],q=h.dom,fe=Wv(h,C,!0,O),ot=Wv(h,C,!1,O),Dt,an=[],ln=fe;ln&&(an.push(ln),ln!==ot);ln=ln.nextSibling);return Sr.each(an,function(tr){if(Co(h,tr)){F.push(tr),Dt=null;return}if(q.isBlock(tr)||qo(tr)){qo(tr)&&q.remove(tr),Dt=null;return}var Ya=tr.nextSibling;if(Km.isBookmarkNode(tr)&&(er(Ya)||Co(h,Ya)||!Ya&&tr.parentNode===O)){Dt=null;return}Dt||(Dt=q.create("p"),tr.parentNode.insertBefore(Dt,tr),F.push(Dt)),Dt.appendChild(tr)}),F},Tl=function(h,C,O){var F=h.getStyle(C,"list-style-type"),q=O?O["list-style-type"]:"";return q=q===null?"":q,F===q},Os=function(h,C,O){var F=h.selection.getRng(),q="LI",fe=Xo(h,h.selection.getStart(!0)),ot=h.dom;if(ot.getContentEditable(h.selection.getNode())!=="false"){C=C.toUpperCase(),C==="DL"&&(q="DT");var Dt=Yn(F),an=Li(h,F,fe);Sr.each(an,function(ln){var tr,Ya=ln.previousSibling,Er=ln.parentNode;ou(Er)||(Ya&&er(Ya)&&Ya.nodeName===C&&Tl(ot,Ya,O)?(tr=Ya,ln=ot.rename(ln,q),Ya.appendChild(ln)):(tr=ot.create(C),ln.parentNode.insertBefore(tr,ln),tr.appendChild(ln),ln=ot.rename(ln,q)),zu(ot,ln,["margin","margin-right","margin-bottom","margin-left","margin-top","padding","padding-right","padding-bottom","padding-left","padding-top"]),io(ot,tr,O),Vc(h.dom,tr))}),h.selection.setRng($i(Dt))}},jv=function(h,C){return h&&C&&er(h)&&h.nodeName===C.nodeName},Ol=function(h,C,O){var F=h.getStyle(C,"list-style-type",!0),q=h.getStyle(O,"list-style-type",!0);return F===q},ks=function(h,C){return h.className===C.className},lc=function(h,C,O){return jv(C,O)&&Ol(h,C,O)&&ks(C,O)},Vc=function(h,C){var O,F;if(O=C.nextSibling,lc(h,C,O)){for(;F=O.firstChild;)C.appendChild(F);h.remove(O)}if(O=C.previousSibling,lc(h,C,O)){for(;F=O.lastChild;)C.insertBefore(F,C.firstChild);h.remove(O)}},Bf=function(h,C,O,F){if(C.nodeName!==O){var q=h.dom.rename(C,O);io(h.dom,q,F),w(h,Du(O),q)}else io(h.dom,C,F),w(h,Du(O),C)},qa=function(h,C,O,F,q){var fe=er(C);if(fe&&C.nodeName===F&&!kl(q))bi(h);else{Os(h,F,q);var ot=Yn(h.selection.getRng()),Dt=fe?Gn([C],O,!0):O;Sr.each(Dt,function(an){Bf(h,an,F,q)}),h.selection.setRng($i(ot))}},kl=function(h){return"list-style-type"in h},fc=function(h,C,O,F){if(C!==h.getBody())if(C)if(C.nodeName===O&&!kl(F)&&!cu(C))bi(h);else{var q=Yn(h.selection.getRng());io(h.dom,C,F);var fe=h.dom.rename(C,O);Vc(h.dom,fe),h.selection.setRng($i(q)),Os(h,O,F),w(h,Du(O),fe)}else Os(h,O,F),w(h,Du(O),C)},Uc=function(h,C,O){var F=Tn(h),q=Df(h),fe=Kt(O)?O:{};q.length>0?qa(h,F,q,C,fe):fc(h,F,C,fe)},vr=mi.DOM,Jo=function(h,C){var O=C.parentNode;if(O.nodeName==="LI"&&O.firstChild===C){var F=O.previousSibling;F&&F.nodeName==="LI"?(F.appendChild(C),N(h,O)&&vr.remove(O)):vr.setStyle(O,"listStyleType","none")}if(er(O)){var F=O.previousSibling;F&&F.nodeName==="LI"&&F.appendChild(C)}},Gv=function(h,C){var O=Sr.grep(h.select("ol,ul",C));Sr.each(O,function(F){Jo(h,F)})},Zo=function(h,C,O,F){var q=C.startContainer,fe=C.startOffset;if(ao(q)&&(O?fe<q.data.length:fe>0))return q;var ot=h.schema.getNonEmptyElements();q.nodeType===1&&(q=xo.getNode(q,fe));var Dt=new Tu(q,F);for(O&&A(h.dom,q)&&Dt.next();q=Dt[O?"next":"prev2"]();)if(q.nodeName==="LI"&&!q.hasChildNodes()||ot[q.nodeName]||ao(q)&&q.data.length>0)return q},Ff=function(h,C){var O=C.childNodes;return O.length===1&&!er(O[0])&&h.isBlock(O[0])},qv=function(h,C){Ff(h,C)&&h.remove(C.firstChild,!0)},Kv=function(h,C,O){var F,q=Ff(h,O)?O.firstChild:O;if(qv(h,C),!N(h,C,!0))for(;F=C.firstChild;)q.appendChild(F)},Wc=function(h,C,O){var F,q=C.parentNode;if(!(!J(h,C)||!J(h,O))){er(O.lastChild)&&(F=O.lastChild),q===O.lastChild&&qo(q.previousSibling)&&h.remove(q.previousSibling);var fe=O.lastChild;fe&&qo(fe)&&C.hasChildNodes()&&h.remove(fe),N(h,O,!0)&&h.$(O).empty(),Kv(h,C,O),F&&O.appendChild(F);var ot=_o(In.fromDom(O),In.fromDom(C)),Dt=ot?h.getParents(C,er,O):[];h.remove(C),Le(Dt,function(an){N(h,an)&&an!==h.getRoot()&&h.remove(an)})}},Hf=function(h,C,O){h.dom.$(O).empty(),Wc(h.dom,C,O),h.selection.setCursorLocation(O,0)},As=function(h,C,O,F){var q=h.dom;if(q.isEmpty(F))Hf(h,O,F);else{var fe=Yn(C);Wc(q,O,F),h.selection.setRng($i(fe))}},Xv=function(h,C,O,F){var q=Yn(C);Wc(h.dom,O,F);var fe=$i(q);h.selection.setRng(fe)},Xm=function(h,C){var O=h.dom,F=h.selection,q=F.getStart(),fe=Xo(h,q),ot=O.getParent(F.getStart(),"LI",fe);if(ot){var Dt=ot.parentNode;if(Dt===h.getBody()&&N(O,Dt))return!0;var an=Lc(F.getRng()),ln=O.getParent(Zo(h,an,C,fe),"LI",fe);if(ln&&ln!==ot)return h.undoManager.transact(function(){C?As(h,an,ln,ot):ac(ot)?Jr(h):Xv(h,an,ot,ln)}),!0;if(!ln&&!C&&an.startOffset===0&&an.endOffset===0)return h.undoManager.transact(function(){bi(h)}),!0}return!1},Qo=function(h,C,O){var F=h.getParent(C.parentNode,h.isBlock,O);h.remove(C),F&&h.isEmpty(F)&&h.remove(F)},Ka=function(h,C){var O=h.dom,F=h.selection.getStart(),q=Xo(h,F),fe=O.getParent(F,O.isBlock,q);if(fe&&O.isEmpty(fe)){var ot=Lc(h.selection.getRng()),Dt=O.getParent(Zo(h,ot,C,q),"LI",q);if(Dt)return h.undoManager.transact(function(){Qo(O,fe,q),Vc(O,Dt.parentNode),h.selection.select(Dt,!0),h.selection.collapse(C)}),!0}return!1},ei=function(h,C){return Xm(h,C)||Ka(h,C)},Ea=function(h){var C=h.selection.getStart(),O=Xo(h,C),F=h.dom.getParent(C,"LI,DT,DD",O);return F||Ko(h).length>0?(h.undoManager.transact(function(){h.execCommand("Delete"),Gv(h.dom,h.getBody())}),!0):!1},Zr=function(h,C){return h.selection.isCollapsed()?ei(h,C):Ea(h)},Da=function(h){h.on("keydown",function(C){C.keyCode===ro.BACKSPACE?Zr(h,!1)&&C.preventDefault():C.keyCode===ro.DELETE&&Zr(h,!0)&&C.preventDefault()})},vc=function(h){return{backspaceDelete:function(C){Zr(h,C)}}},Xa=function(h,C){var O=Tn(h);h.undoManager.transact(function(){Kt(C.styles)&&h.dom.setStyles(O,C.styles),Kt(C.attrs)&&B(C.attrs,function(F,q){return h.dom.setAttrib(O,q,F)})})},lu=function(h){var C=Xt(Me(h).split("")),O=ge(C,function(F,q){var fe=F.toUpperCase().charCodeAt(0)-"A".charCodeAt(0)+1;return Math.pow(26,q)*fe});return L(O,function(F,q){return F+q},0)},dc=function(h){if(h--,h<0)return"";var C=h%26,O=Math.floor(h/26),F=dc(O),q=String.fromCharCode("A".charCodeAt(0)+C);return F+q},Ym=function(h){return/^[A-Z]+$/.test(h)},Ut=function(h){return/^[a-z]+$/.test(h)},ti=function(h){return/^[0-9]+$/.test(h)},Al=function(h){return ti(h)?2:Ym(h)?0:Ut(h)?1:mt(h)?3:4},Jm=function(h){switch(Al(h)){case 2:return Ge.some({listStyleType:Ge.none(),start:h});case 0:return Ge.some({listStyleType:Ge.some("upper-alpha"),start:lu(h).toString()});case 1:return Ge.some({listStyleType:Ge.some("lower-alpha"),start:lu(h).toString()});case 3:return Ge.some({listStyleType:Ge.none(),start:""});case 4:return Ge.none()}},Zm=function(h){var C=parseInt(h.start,10);return Or(h.listStyleType,"upper-alpha")?dc(C):Or(h.listStyleType,"lower-alpha")?dc(C).toLowerCase():h.start},Qm=function(h){var C=Tn(h);Mu(C)&&h.windowManager.open({title:"List Properties",body:{type:"panel",items:[{type:"input",name:"start",label:"Start list at number",inputMode:"numeric"}]},initialData:{start:Zm({start:h.dom.getAttrib(C,"start","1"),listStyleType:Ge.some(h.dom.getStyle(C,"list-style-type"))})},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:function(O){var F=O.getData();Jm(F.start).each(function(q){h.execCommand("mceListUpdate",!1,{attrs:{start:q.start==="1"?"":q.start},styles:{"list-style-type":q.listStyleType.getOr("")}})}),O.close()}})},If=function(h,C){return function(){var O=Tn(h);return O&&O.nodeName===C}},Yv=function(h){h.addCommand("mceListProps",function(){Qm(h)})},Wt=function(h){h.on("BeforeExecCommand",function(C){var O=C.command.toLowerCase();O==="indent"?Nc(h):O==="outdent"&&Jr(h)}),h.addCommand("InsertUnorderedList",function(C,O){Uc(h,"UL",O)}),h.addCommand("InsertOrderedList",function(C,O){Uc(h,"OL",O)}),h.addCommand("InsertDefinitionList",function(C,O){Uc(h,"DL",O)}),h.addCommand("RemoveList",function(){bi(h)}),Yv(h),h.addCommand("mceListUpdate",function(C,O){Kt(O)&&Xa(h,O)}),h.addQueryStateHandler("InsertUnorderedList",If(h,"UL")),h.addQueryStateHandler("InsertOrderedList",If(h,"OL")),h.addQueryStateHandler("InsertDefinitionList",If(h,"DL"))},Jv=function(h){h.on("keydown",function(C){C.keyCode!==ro.TAB||ro.metaKeyPressed(C)||h.undoManager.transact(function(){(C.shiftKey?Jr(h):Nc(h))&&C.preventDefault()})})},eg=function(h){ve(h)&&Jv(h),Da(h)},tg=function(h){var C=function(O){return function(){return h.execCommand(O)}};h.hasPlugin("advlist")||(h.ui.registry.addToggleButton("numlist",{icon:"ordered-list",active:!1,tooltip:"Numbered list",onAction:C("InsertOrderedList"),onSetup:function(O){return Pr(h,"OL",O.setActive)}}),h.ui.registry.addToggleButton("bullist",{icon:"unordered-list",active:!1,tooltip:"Bullet list",onAction:C("InsertUnorderedList"),onSetup:function(O){return Pr(h,"UL",O.setActive)}}))},Mr=function(h){var C={text:"List properties...",icon:"ordered-list",onAction:function(){return h.execCommand("mceListProps")},onSetup:function(O){return Pr(h,"OL",function(F){return O.setDisabled(!F)})}};h.ui.registry.addMenuItem("listprops",C),h.ui.registry.addContextMenu("lists",{update:function(O){var F=Tn(h,O);return Mu(F)?["listprops"]:[]}})};function $f(){nn.add("lists",function(h){return h.hasPlugin("rtc",!0)===!1?(eg(h),Wt(h)):Yv(h),tg(h),Mr(h),vc(h)})}$f()})();(function(){var nn=tinymce.util.Tools.resolve("tinymce.PluginManager"),Mt=function(X,ce){return X.fire("insertCustomChar",{chr:ce})},Fn=function(X,ce){var Y=Mt(X,ce).chr;X.execCommand("mceInsertContent",!1,Y)},Qt=function(X){var ce=typeof X;return X===null?"null":ce==="object"&&(Array.prototype.isPrototypeOf(X)||X.constructor&&X.constructor.name==="Array")?"array":ce==="object"&&(String.prototype.isPrototypeOf(X)||X.constructor&&X.constructor.name==="String")?"string":ce},dt=function(X){return function(ce){return Qt(ce)===X}},Kt=function(X){return function(ce){return X===ce}},kt=dt("array"),$t=Kt(null),Ze=function(){},mn=function(X){return function(){return X}},Lt=function(X){return X},Oe=mn(!1),tt=mn(!0),jt=function(){return We},We=function(){var X=function(Z){return Z()},ce=Lt,Y={fold:function(Z,Me){return Z()},isSome:Oe,isNone:tt,getOr:ce,getOrThunk:X,getOrDie:function(Z){throw new Error(Z||"error: getOrDie called on none.")},getOrNull:mn(null),getOrUndefined:mn(void 0),or:ce,orThunk:X,map:jt,each:Ze,bind:jt,exists:Oe,forall:tt,filter:function(){return jt()},toArray:function(){return[]},toString:mn("none()")};return Y}(),be=function(X){var ce=mn(X),Y=function(){return Me},Z=function(ze){return ze(X)},Me={fold:function(ze,mt){return mt(X)},isSome:tt,isNone:Oe,getOr:ce,getOrThunk:ce,getOrDie:ce,getOrNull:ce,getOrUndefined:ce,or:Y,orThunk:Y,map:function(ze){return be(ze(X))},each:function(ze){ze(X)},bind:Z,exists:Z,forall:Z,filter:function(ze){return ze(X)?Me:We},toArray:function(){return[X]},toString:function(){return"some("+X+")"}};return Me},en=function(X){return X==null?We:be(X)},Ae={some:be,none:jt,from:en},wt=Array.prototype.push,j=function(X,ce){for(var Y=X.length,Z=new Array(Y),Me=0;Me<Y;Me++){var ze=X[Me];Z[Me]=ce(ze,Me)}return Z},je=function(X,ce){for(var Y=0,Z=X.length;Y<Z;Y++){var Me=X[Y];ce(Me,Y)}},Ge=function(X,ce,Y){for(var Z=0,Me=X.length;Z<Me;Z++){var ze=X[Z];if(ce(ze,Z))return Ae.some(ze);if(Y(ze,Z))break}return Ae.none()},Pn=function(X,ce){return Ge(X,ce,Oe)},rn=function(X){for(var ce=[],Y=0,Z=X.length;Y<Z;++Y){if(!kt(X[Y]))throw new Error("Arr.flatten item "+Y+" was not an array, input: "+X);wt.apply(ce,X[Y])}return ce},ge=function(X,ce){return rn(j(X,ce))},Le=tinymce.util.Tools.resolve("tinymce.util.Tools"),qe=function(X){return X.getParam("charmap")},gn=function(X){return X.getParam("charmap_append")},L=Le.isArray,_="User Defined",He=function(){return[{name:"Currency",characters:[[36,"dollar sign"],[162,"cent sign"],[8364,"euro sign"],[163,"pound sign"],[165,"yen sign"],[164,"currency sign"],[8352,"euro-currency sign"],[8353,"colon sign"],[8354,"cruzeiro sign"],[8355,"french franc sign"],[8356,"lira sign"],[8357,"mill sign"],[8358,"naira sign"],[8359,"peseta sign"],[8360,"rupee sign"],[8361,"won sign"],[8362,"new sheqel sign"],[8363,"dong sign"],[8365,"kip sign"],[8366,"tugrik sign"],[8367,"drachma sign"],[8368,"german penny symbol"],[8369,"peso sign"],[8370,"guarani sign"],[8371,"austral sign"],[8372,"hryvnia sign"],[8373,"cedi sign"],[8374,"livre tournois sign"],[8375,"spesmilo sign"],[8376,"tenge sign"],[8377,"indian rupee sign"],[8378,"turkish lira sign"],[8379,"nordic mark sign"],[8380,"manat sign"],[8381,"ruble sign"],[20870,"yen character"],[20803,"yuan character"],[22291,"yuan character, in hong kong and taiwan"],[22278,"yen/yuan character variant one"]]},{name:"Text",characters:[[169,"copyright sign"],[174,"registered sign"],[8482,"trade mark sign"],[8240,"per mille sign"],[181,"micro sign"],[183,"middle dot"],[8226,"bullet"],[8230,"three dot leader"],[8242,"minutes / feet"],[8243,"seconds / inches"],[167,"section sign"],[182,"paragraph sign"],[223,"sharp s / ess-zed"]]},{name:"Quotations",characters:[[8249,"single left-pointing angle quotation mark"],[8250,"single right-pointing angle quotation mark"],[171,"left pointing guillemet"],[187,"right pointing guillemet"],[8216,"left single quotation mark"],[8217,"right single quotation mark"],[8220,"left double quotation mark"],[8221,"right double quotation mark"],[8218,"single low-9 quotation mark"],[8222,"double low-9 quotation mark"],[60,"less-than sign"],[62,"greater-than sign"],[8804,"less-than or equal to"],[8805,"greater-than or equal to"],[8211,"en dash"],[8212,"em dash"],[175,"macron"],[8254,"overline"],[164,"currency sign"],[166,"broken bar"],[168,"diaeresis"],[161,"inverted exclamation mark"],[191,"turned question mark"],[710,"circumflex accent"],[732,"small tilde"],[176,"degree sign"],[8722,"minus sign"],[177,"plus-minus sign"],[247,"division sign"],[8260,"fraction slash"],[215,"multiplication sign"],[185,"superscript one"],[178,"superscript two"],[179,"superscript three"],[188,"fraction one quarter"],[189,"fraction one half"],[190,"fraction three quarters"]]},{name:"Mathematical",characters:[[402,"function / florin"],[8747,"integral"],[8721,"n-ary sumation"],[8734,"infinity"],[8730,"square root"],[8764,"similar to"],[8773,"approximately equal to"],[8776,"almost equal to"],[8800,"not equal to"],[8801,"identical to"],[8712,"element of"],[8713,"not an element of"],[8715,"contains as member"],[8719,"n-ary product"],[8743,"logical and"],[8744,"logical or"],[172,"not sign"],[8745,"intersection"],[8746,"union"],[8706,"partial differential"],[8704,"for all"],[8707,"there exists"],[8709,"diameter"],[8711,"backward difference"],[8727,"asterisk operator"],[8733,"proportional to"],[8736,"angle"]]},{name:"Extended Latin",characters:[[192,"A - grave"],[193,"A - acute"],[194,"A - circumflex"],[195,"A - tilde"],[196,"A - diaeresis"],[197,"A - ring above"],[256,"A - macron"],[198,"ligature AE"],[199,"C - cedilla"],[200,"E - grave"],[201,"E - acute"],[202,"E - circumflex"],[203,"E - diaeresis"],[274,"E - macron"],[204,"I - grave"],[205,"I - acute"],[206,"I - circumflex"],[207,"I - diaeresis"],[298,"I - macron"],[208,"ETH"],[209,"N - tilde"],[210,"O - grave"],[211,"O - acute"],[212,"O - circumflex"],[213,"O - tilde"],[214,"O - diaeresis"],[216,"O - slash"],[332,"O - macron"],[338,"ligature OE"],[352,"S - caron"],[217,"U - grave"],[218,"U - acute"],[219,"U - circumflex"],[220,"U - diaeresis"],[362,"U - macron"],[221,"Y - acute"],[376,"Y - diaeresis"],[562,"Y - macron"],[222,"THORN"],[224,"a - grave"],[225,"a - acute"],[226,"a - circumflex"],[227,"a - tilde"],[228,"a - diaeresis"],[229,"a - ring above"],[257,"a - macron"],[230,"ligature ae"],[231,"c - cedilla"],[232,"e - grave"],[233,"e - acute"],[234,"e - circumflex"],[235,"e - diaeresis"],[275,"e - macron"],[236,"i - grave"],[237,"i - acute"],[238,"i - circumflex"],[239,"i - diaeresis"],[299,"i - macron"],[240,"eth"],[241,"n - tilde"],[242,"o - grave"],[243,"o - acute"],[244,"o - circumflex"],[245,"o - tilde"],[246,"o - diaeresis"],[248,"o slash"],[333,"o macron"],[339,"ligature oe"],[353,"s - caron"],[249,"u - grave"],[250,"u - acute"],[251,"u - circumflex"],[252,"u - diaeresis"],[363,"u - macron"],[253,"y - acute"],[254,"thorn"],[255,"y - diaeresis"],[563,"y - macron"],[913,"Alpha"],[914,"Beta"],[915,"Gamma"],[916,"Delta"],[917,"Epsilon"],[918,"Zeta"],[919,"Eta"],[920,"Theta"],[921,"Iota"],[922,"Kappa"],[923,"Lambda"],[924,"Mu"],[925,"Nu"],[926,"Xi"],[927,"Omicron"],[928,"Pi"],[929,"Rho"],[931,"Sigma"],[932,"Tau"],[933,"Upsilon"],[934,"Phi"],[935,"Chi"],[936,"Psi"],[937,"Omega"],[945,"alpha"],[946,"beta"],[947,"gamma"],[948,"delta"],[949,"epsilon"],[950,"zeta"],[951,"eta"],[952,"theta"],[953,"iota"],[954,"kappa"],[955,"lambda"],[956,"mu"],[957,"nu"],[958,"xi"],[959,"omicron"],[960,"pi"],[961,"rho"],[962,"final sigma"],[963,"sigma"],[964,"tau"],[965,"upsilon"],[966,"phi"],[967,"chi"],[968,"psi"],[969,"omega"]]},{name:"Symbols",characters:[[8501,"alef symbol"],[982,"pi symbol"],[8476,"real part symbol"],[978,"upsilon - hook symbol"],[8472,"Weierstrass p"],[8465,"imaginary part"]]},{name:"Arrows",characters:[[8592,"leftwards arrow"],[8593,"upwards arrow"],[8594,"rightwards arrow"],[8595,"downwards arrow"],[8596,"left right arrow"],[8629,"carriage return"],[8656,"leftwards double arrow"],[8657,"upwards double arrow"],[8658,"rightwards double arrow"],[8659,"downwards double arrow"],[8660,"left right double arrow"],[8756,"therefore"],[8834,"subset of"],[8835,"superset of"],[8836,"not a subset of"],[8838,"subset of or equal to"],[8839,"superset of or equal to"],[8853,"circled plus"],[8855,"circled times"],[8869,"perpendicular"],[8901,"dot operator"],[8968,"left ceiling"],[8969,"right ceiling"],[8970,"left floor"],[8971,"right floor"],[9001,"left-pointing angle bracket"],[9002,"right-pointing angle bracket"],[9674,"lozenge"],[9824,"black spade suit"],[9827,"black club suit"],[9829,"black heart suit"],[9830,"black diamond suit"],[8194,"en space"],[8195,"em space"],[8201,"thin space"],[8204,"zero width non-joiner"],[8205,"zero width joiner"],[8206,"left-to-right mark"],[8207,"right-to-left mark"]]}]},Ft=function(X){return Le.grep(X,function(ce){return L(ce)&&ce.length===2})},Gt=function(X){return L(X)?Ft(X):typeof X=="function"?X():[]},Xt=function(X,ce){var Y=qe(X);Y&&(ce=[{name:_,characters:Gt(Y)}]);var Z=gn(X);if(Z){var Me=Le.grep(ce,function(ze){return ze.name===_});return Me.length?(Me[0].characters=[].concat(Me[0].characters).concat(Gt(Z)),ce):ce.concat({name:_,characters:Gt(Z)})}return ce},Ct=function(X){var ce=Xt(X,He());return ce.length>1?[{name:"All",characters:ge(ce,function(Y){return Y.characters})}].concat(ce):ce},p=function(X){var ce=function(){return Ct(X)},Y=function(Z){Fn(X,Z)};return{getCharMap:ce,insertChar:Y}},tn=function(X){var ce=X,Y=function(){return ce},Z=function(Me){ce=Me};return{get:Y,set:Z}},Ne=function(X,ce){var Y=null,Z=function(){$t(Y)||(clearTimeout(Y),Y=null)},Me=function(){for(var ze=[],mt=0;mt<arguments.length;mt++)ze[mt]=arguments[mt];Z(),Y=setTimeout(function(){Y=null,X.apply(null,ze)},ce)};return{cancel:Z,throttle:Me}},it=String.fromCodePoint,Gn=function(X,ce){return X.indexOf(ce)!==-1},Dr=function(){for(var X=[],ce=0;ce<arguments.length;ce++)X[ce]=arguments[ce];if(it)return it.apply(void 0,X);for(var Y=[],Z=0,Me="",ze=0,mt=X.length;ze!==mt;++ze){var gt=+X[ze];if(!(gt<1114111&&gt>>>0===gt))throw RangeError("Invalid code point: "+gt);gt<=65535?Z=Y.push(gt):(gt-=65536,Z=Y.push((gt>>10)+55296,gt%1024+56320)),Z>=16383&&(Me+=String.fromCharCode.apply(null,Y),Y.length=0)}return Me+String.fromCharCode.apply(null,Y)},It=function(X,ce,Y){return Gn(Dr(X).toLowerCase(),Y)?!0:Gn(ce.toLowerCase(),Y)||Gn(ce.toLowerCase().replace(/\s+/g,""),Y)},Hn=function(X,ce){var Y=[],Z=ce.toLowerCase();return je(X.characters,function(Me){It(Me[0],Me[1],Z)&&Y.push(Me)}),j(Y,function(Me){return{text:Me[1],value:Dr(Me[0]),icon:Dr(Me[0])}})},or="pattern",_r=function(X,ce){var Y=function(){return[{label:"Search",type:"input",name:or},{type:"collection",name:"results"}]},Z=function(){return j(ce,function(Xn){return{title:Xn.name,name:Xn.name,items:Y()}})},Me=function(){return{type:"panel",items:Y()}},ze=function(){return{type:"tabpanel",tabs:Z()}},mt=ce.length===1?tn(_):tn("All"),gt=function(Xn,Cr){Pn(ce,function(zr){return zr.name===mt.get()}).each(function(zr){var qn=Hn(zr,Cr);Xn.setData({results:qn})})},Re=40,cn=Ne(function(Xn){var Cr=Xn.getData().pattern;gt(Xn,Cr)},Re),cr=ce.length===1?Me():ze(),ir={pattern:"",results:Hn(ce[0],"")},Eo={title:"Special Character",size:"normal",body:cr,buttons:[{type:"cancel",name:"close",text:"Close",primary:!0}],initialData:ir,onAction:function(Xn,Cr){Cr.name==="results"&&(Fn(X,Cr.value),Xn.close())},onTabChange:function(Xn,Cr){mt.set(Cr.newTabName),cn.throttle(Xn)},onChange:function(Xn,Cr){Cr.name===or&&cn.throttle(Xn)}},wo=X.windowManager.open(Eo);wo.focus(or)},Se=function(X,ce){X.addCommand("mceShowCharmap",function(){_r(X,ce)})},Ke=tinymce.util.Tools.resolve("tinymce.util.Promise"),$r=function(X,ce){X.ui.registry.addAutocompleter("charmap",{ch:":",columns:"auto",minChars:2,fetch:function(Y,Z){return new Ke(function(Me,ze){Me(Hn(ce,Y))})},onAction:function(Y,Z,Me){X.selection.setRng(Z),X.insertContent(Me),Y.hide()}})},xe=function(X){X.ui.registry.addButton("charmap",{icon:"insert-character",tooltip:"Special character",onAction:function(){return X.execCommand("mceShowCharmap")}}),X.ui.registry.addMenuItem("charmap",{icon:"insert-character",text:"Special character...",onAction:function(){return X.execCommand("mceShowCharmap")}})};function Ce(){nn.add("charmap",function(X){var ce=Ct(X);return Se(X,ce),xe(X),$r(X,ce[0]),p(X)})}Ce()})();(function(){var nn=tinymce.util.Tools.resolve("tinymce.PluginManager"),Mt=function(){return Mt=Object.assign||function(G){for(var $,ee=1,Ie=arguments.length;ee<Ie;ee++){$=arguments[ee];for(var Qe in $)Object.prototype.hasOwnProperty.call($,Qe)&&(G[Qe]=$[Qe])}return G},Mt.apply(this,arguments)},Fn=function(B){var G=typeof B;return B===null?"null":G==="object"&&(Array.prototype.isPrototypeOf(B)||B.constructor&&B.constructor.name==="Array")?"array":G==="object"&&(String.prototype.isPrototypeOf(B)||B.constructor&&B.constructor.name==="String")?"string":G},Qt=function(B){return function(G){return Fn(G)===B}},dt=Qt("string"),Kt=Qt("object"),kt=Qt("array"),$t=function(B){return B==null},Ze=function(B){return!$t(B)},mn=function(){},Lt=function(B){return function(){return B}},Oe=function(B){return B},tt=Lt(!1),jt=Lt(!0),We=function(){return be},be=function(){var B=function(ee){return ee()},G=Oe,$={fold:function(ee,Ie){return ee()},isSome:tt,isNone:jt,getOr:G,getOrThunk:B,getOrDie:function(ee){throw new Error(ee||"error: getOrDie called on none.")},getOrNull:Lt(null),getOrUndefined:Lt(void 0),or:G,orThunk:B,map:We,each:mn,bind:We,exists:tt,forall:jt,filter:function(){return We()},toArray:function(){return[]},toString:Lt("none()")};return $}(),en=function(B){var G=Lt(B),$=function(){return Ie},ee=function(Qe){return Qe(B)},Ie={fold:function(Qe,xt){return xt(B)},isSome:jt,isNone:tt,getOr:G,getOrThunk:G,getOrDie:G,getOrNull:G,getOrUndefined:G,or:$,orThunk:$,map:function(Qe){return en(Qe(B))},each:function(Qe){Qe(B)},bind:ee,exists:ee,forall:ee,filter:function(Qe){return Qe(B)?Ie:be},toArray:function(){return[B]},toString:function(){return"some("+B+")"}};return Ie},Ae=function(B){return B==null?be:en(B)},wt={some:en,none:We,from:Ae},j=Array.prototype.push,je=function(B,G){for(var $=0,ee=B.length;$<ee;$++){var Ie=B[$];G(Ie,$)}},Ge=function(B){for(var G=[],$=0,ee=B.length;$<ee;++$){if(!kt(B[$]))throw new Error("Arr.flatten item "+$+" was not an array, input: "+B);j.apply(G,B[$])}return G},Pn=function(B){var G=B,$=function(){return G},ee=function(Ie){G=Ie};return{get:$,set:ee}},rn=Object.keys,ge=Object.hasOwnProperty,Le=function(B,G){for(var $=rn(B),ee=0,Ie=$.length;ee<Ie;ee++){var Qe=$[ee],xt=B[Qe];G(xt,Qe)}},qe=function(B,G){return gn(B,G)?wt.from(B[G]):wt.none()},gn=function(B,G){return ge.call(B,G)},L=function(B){return B.getParam("media_scripts")},_=function(B){return B.getParam("audio_template_callback")},He=function(B){return B.getParam("video_template_callback")},Ft=function(B){return B.getParam("media_live_embeds",!0)},Gt=function(B){return B.getParam("media_filter_html",!0)},Xt=function(B){return B.getParam("media_url_resolver")},Ct=function(B){return B.getParam("media_alt_source",!0)},p=function(B){return B.getParam("media_poster",!0)},tn=function(B){return B.getParam("media_dimensions",!0)},Ne=tinymce.util.Tools.resolve("tinymce.util.Tools"),it=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),Gn=tinymce.util.Tools.resolve("tinymce.html.SaxParser"),Dr=function(B,G){if(B){for(var $=0;$<B.length;$++)if(G.indexOf(B[$].filter)!==-1)return B[$]}},It=it.DOM,Hn=function(B){return B.replace(/px$/,"")},or=function(B){var G=B.map.style,$=G?It.parseStyle(G):{};return{type:"ephox-embed-iri",source:B.map["data-ephox-embed-iri"],altsource:"",poster:"",width:qe($,"max-width").map(Hn).getOr(""),height:qe($,"max-height").map(Hn).getOr("")}},_r=function(B,G){var $=Pn(!1),ee={};return Gn({validate:!1,allow_conditional_comments:!0,start:function(Ie,Qe){if(!$.get())if(gn(Qe.map,"data-ephox-embed-iri"))$.set(!0),ee=or(Qe);else{if(!ee.source&&Ie==="param"&&(ee.source=Qe.map.movie),(Ie==="iframe"||Ie==="object"||Ie==="embed"||Ie==="video"||Ie==="audio")&&(ee.type||(ee.type=Ie),ee=Ne.extend(Qe.map,ee)),Ie==="script"){var xt=Dr(B,Qe.map.src);if(!xt)return;ee={type:"script",source:Qe.map.src,width:String(xt.width),height:String(xt.height)}}Ie==="source"&&(ee.source?ee.altsource||(ee.altsource=Qe.map.src):ee.source=Qe.map.src),Ie==="img"&&!ee.poster&&(ee.poster=Qe.map.src)}}}).parse(G),ee.source=ee.source||ee.src||ee.data,ee.altsource=ee.altsource||"",ee.poster=ee.poster||"",ee},Se=function(B){var G={mp3:"audio/mpeg",m4a:"audio/x-m4a",wav:"audio/wav",mp4:"video/mp4",webm:"video/webm",ogg:"video/ogg",swf:"application/x-shockwave-flash"},$=B.toLowerCase().split(".").pop(),ee=G[$];return ee||""},Ke=tinymce.util.Tools.resolve("tinymce.html.Schema"),$r=tinymce.util.Tools.resolve("tinymce.html.Writer"),xe=it.DOM,Ce=function(B){return/^[0-9.]+$/.test(B)?B+"px":B},X=function(B,G){Le(G,function($,ee){var Ie=""+$;if(B.map[ee])for(var Qe=B.length;Qe--;){var xt=B[Qe];xt.name===ee&&(Ie?(B.map[ee]=Ie,xt.value=Ie):(delete B.map[ee],B.splice(Qe,1)))}else Ie&&(B.push({name:ee,value:Ie}),B.map[ee]=Ie)})},ce=function(B,G){var $=G.map.style,ee=$?xe.parseStyle($):{};ee["max-width"]=Ce(B.width),ee["max-height"]=Ce(B.height),X(G,{style:xe.serializeStyle(ee)})},Y=["source","altsource"],Z=function(B,G,$){var ee=$r(),Ie=Pn(!1),Qe=0,xt;return Gn({validate:!1,allow_conditional_comments:!0,comment:function(Et){ee.comment(Et)},cdata:function(Et){ee.cdata(Et)},text:function(Et,wn){ee.text(Et,wn)},start:function(Et,wn,gr){if(!Ie.get())if(gn(wn.map,"data-ephox-embed-iri"))Ie.set(!0),ce(G,wn);else{switch(Et){case"video":case"object":case"embed":case"img":case"iframe":G.height!==void 0&&G.width!==void 0&&X(wn,{width:G.width,height:G.height});break}if($)switch(Et){case"video":X(wn,{poster:G.poster,src:""}),G.altsource&&X(wn,{src:""});break;case"iframe":X(wn,{src:G.source});break;case"source":if(Qe<2&&(X(wn,{src:G[Y[Qe]],type:G[Y[Qe]+"mime"]}),!G[Y[Qe]]))return;Qe++;break;case"img":if(!G.poster)return;xt=!0;break}}ee.start(Et,wn,gr)},end:function(Et){if(!Ie.get()){if(Et==="video"&&$){for(var wn=0;wn<2;wn++)if(G[Y[wn]]){var gr=[];gr.map={},Qe<=wn&&(X(gr,{src:G[Y[wn]],type:G[Y[wn]+"mime"]}),ee.start("source",gr,!0))}}if(G.poster&&Et==="object"&&$&&!xt){var Dn=[];Dn.map={},X(Dn,{src:G.poster,width:G.width,height:G.height}),ee.start("img",Dn,!0)}}ee.end(Et)}},Ke({})).parse(B),ee.getContent()},Me=[{regex:/youtu\.be\/([\w\-_\?&=.]+)/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/youtube\.com(.+)v=([^&]+)(&([a-z0-9&=\-_]+))?/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$2?$4",allowFullscreen:!0},{regex:/youtube.com\/embed\/([a-z0-9\?&=\-_]+)/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/vimeo\.com\/([0-9]+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$1?title=0&byline=0&portrait=0&color=8dc7dc",allowFullscreen:!0},{regex:/vimeo\.com\/(.*)\/([0-9]+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$2?title=0&amp;byline=0",allowFullscreen:!0},{regex:/maps\.google\.([a-z]{2,3})\/maps\/(.+)msid=(.+)/,type:"iframe",w:425,h:350,url:'maps.google.com/maps/ms?msid=$2&output=embed"',allowFullscreen:!1},{regex:/dailymotion\.com\/video\/([^_]+)/,type:"iframe",w:480,h:270,url:"www.dailymotion.com/embed/video/$1",allowFullscreen:!0},{regex:/dai\.ly\/([^_]+)/,type:"iframe",w:480,h:270,url:"www.dailymotion.com/embed/video/$1",allowFullscreen:!0}],ze=function(B){var G=B.match(/^(https?:\/\/|www\.)(.+)$/i);return G&&G.length>1?G[1]==="www."?"https://":G[1]:"https://"},mt=function(B,G){for(var $=ze(G),ee=B.regex.exec(G),Ie=$+B.url,Qe=function(Et){Ie=Ie.replace("$"+Et,function(){return ee[Et]?ee[Et]:""})},xt=0;xt<ee.length;xt++)Qe(xt);return Ie.replace(/\?$/,"")},gt=function(B){var G=Me.filter(function($){return $.regex.test(B)});return G.length>0?Ne.extend({},G[0],{url:mt(G[0],B)}):null},Re=function(B){var G=B.allowfullscreen?' allowFullscreen="1"':"";return'<iframe src="'+B.source+'" width="'+B.width+'" height="'+B.height+'"'+G+"></iframe>"},cn=function(B){var G='<object data="'+B.source+'" width="'+B.width+'" height="'+B.height+'" type="application/x-shockwave-flash">';return B.poster&&(G+='<img src="'+B.poster+'" width="'+B.width+'" height="'+B.height+'" />'),G+="</object>",G},cr=function(B,G){return G?G(B):'<audio controls="controls" src="'+B.source+'">'+(B.altsource?`
<source src="`+B.altsource+'"'+(B.altsourcemime?' type="'+B.altsourcemime+'"':"")+` />
`:"")+"</audio>"},ir=function(B,G){return G?G(B):'<video width="'+B.width+'" height="'+B.height+'"'+(B.poster?' poster="'+B.poster+'"':"")+` controls="controls">
<source src="`+B.source+'"'+(B.sourcemime?' type="'+B.sourcemime+'"':"")+` />
`+(B.altsource?'<source src="'+B.altsource+'"'+(B.altsourcemime?' type="'+B.altsourcemime+'"':"")+` />
`:"")+"</video>"},Eo=function(B){return'<script src="'+B.source+'"><\/script>'},wo=function(B,G){var $=Ne.extend({},G);if(!$.source&&(Ne.extend($,_r(L(B),$.embed)),!$.source))return"";$.altsource||($.altsource=""),$.poster||($.poster=""),$.source=B.convertURL($.source,"source"),$.altsource=B.convertURL($.altsource,"source"),$.sourcemime=Se($.source),$.altsourcemime=Se($.altsource),$.poster=B.convertURL($.poster,"poster");var ee=gt($.source);if(ee&&($.source=ee.url,$.type=ee.type,$.allowfullscreen=ee.allowFullscreen,$.width=$.width||String(ee.w),$.height=$.height||String(ee.h)),$.embed)return Z($.embed,$,!0);var Ie=Dr(L(B),$.source);Ie&&($.type="script",$.width=String(Ie.width),$.height=String(Ie.height));var Qe=_(B),xt=He(B);return $.width=$.width||"300",$.height=$.height||"150",Ne.each($,function(Et,wn){$[wn]=B.dom.encode(""+Et)}),$.type==="iframe"?Re($):$.sourcemime==="application/x-shockwave-flash"?cn($):$.sourcemime.indexOf("audio")!==-1?cr($,Qe):$.type==="script"?Eo($):ir($,xt)},Xn=function(B){return B.hasAttribute("data-mce-object")||B.hasAttribute("data-ephox-embed-iri")},Cr=function(B){B.on("click keyup touchend",function(){var G=B.selection.getNode();G&&B.dom.hasClass(G,"mce-preview-object")&&B.dom.getAttrib(G,"data-mce-selected")&&G.setAttribute("data-mce-selected","2")}),B.on("ObjectSelected",function(G){var $=G.target.getAttribute("data-mce-object");$==="script"&&G.preventDefault()}),B.on("ObjectResized",function(G){var $=G.target;if($.getAttribute("data-mce-object")){var ee=$.getAttribute("data-mce-html");ee&&(ee=unescape(ee),$.setAttribute("data-mce-html",escape(Z(ee,{width:String(G.width),height:String(G.height)}))))}})},zr=tinymce.util.Tools.resolve("tinymce.util.Promise"),qn={},Zn=function(B,G,$){return new zr(function(ee,Ie){var Qe=function(xt){return xt.html&&(qn[B.source]=xt),ee({url:B.source,html:xt.html?xt.html:G(B)})};qn[B.source]?Qe(qn[B.source]):$({url:B.source},Qe,Ie)})},So=function(B,G){return zr.resolve({html:G(B),url:B.source})},sr=function(B){return function(G){return wo(B,G)}},Qn=function(B,G){var $=Xt(B);return $?Zn(G,sr(B),$):So(G,sr(B))},oe=function(B){return gn(qn,B)},Xe=function(B,G){return qe(G,B).bind(function($){return qe($,"meta")})},st=function(B,G,$){return function(ee){var Ie,Qe=function(){return qe(B,ee)},xt=function(){return qe(G,ee)},Et=function(Dn){return qe(Dn,"value").bind(function(Rr){return Rr.length>0?wt.some(Rr):wt.none()})},wn=function(){return Qe().bind(function(Dn){return Kt(Dn)?Et(Dn).orThunk(xt):xt().orThunk(function(){return wt.from(Dn)})})},gr=function(){return xt().orThunk(function(){return Qe().bind(function(Dn){return Kt(Dn)?Et(Dn):wt.from(Dn)})})};return Ie={},Ie[ee]=(ee===$?wn():gr()).getOr(""),Ie}},ft=function(B,G){var $={};return qe(B,"dimensions").each(function(ee){je(["width","height"],function(Ie){qe(G,Ie).orThunk(function(){return qe(ee,Ie)}).each(function(Qe){return $[Ie]=Qe})})}),$},hn=function(B,G){var $=G?Xe(G,B).getOr({}):{},ee=st(B,$,G);return Mt(Mt(Mt(Mt(Mt({},ee("source")),ee("altsource")),ee("poster")),ee("embed")),ft(B,$))},yn=function(B){var G=Mt(Mt({},B),{source:{value:qe(B,"source").getOr("")},altsource:{value:qe(B,"altsource").getOr("")},poster:{value:qe(B,"poster").getOr("")}});return je(["width","height"],function($){qe(B,$).each(function(ee){var Ie=G.dimensions||{};Ie[$]=ee,G.dimensions=Ie})}),G},Tr=function(B){return function(G){var $=G&&G.msg?"Media embed handler error: "+G.msg:"Media embed handler threw unknown error.";B.notificationManager.open({type:"error",text:$})}},ct=function(B,G){return _r(L(B),G)},pn=function(B){var G=B.selection.getNode(),$=Xn(G)?B.serializer.serialize(G,{selection:!0}):"";return Mt({embed:$},_r(L(B),$))},mr=function(B,G){return function($){if(dt($.url)&&$.url.trim().length>0){var ee=$.html,Ie=ct(G,ee),Qe=Mt(Mt({},Ie),{source:$.url,embed:ee});B.setData(yn(Qe))}}},Aa=function(B,G){for(var $=B.dom.select("*[data-mce-object]"),ee=0;ee<G.length;ee++)for(var Ie=$.length-1;Ie>=0;Ie--)G[ee]===$[Ie]&&$.splice(Ie,1);B.selection.select($[0])},Go=function(B,G){var $=B.dom.select("*[data-mce-object]");B.insertContent(G),Aa(B,$),B.nodeChanged()},Xr=function(B,G,$){G.embed=Z(G.embed,G),G.embed&&(B.source===G.source||oe(G.source))?Go($,G.embed):Qn($,G).then(function(ee){Go($,ee.html)}).catch(Tr($))},Ji=function(B){var G=pn(B),$=Pn(G),ee=yn(G),Ie=function(wr,ua){var ke=hn(ua.getData(),"source");wr.source!==ke.source&&(mr(Fi,B)({url:ke.source,html:""}),Qn(B,ke).then(mr(Fi,B)).catch(Tr(B)))},Qe=function(wr){var ua=hn(wr.getData()),ke=ct(B,ua.embed);wr.setData(yn(ke))},xt=function(wr,ua){var ke=hn(wr.getData(),ua),Wr=wo(B,ke);wr.setData(yn(Mt(Mt({},ke),{embed:Wr})))},Et=[{name:"source",type:"urlinput",filetype:"media",label:"Source"}],wn=tn(B)?[{type:"sizeinput",name:"dimensions",label:"Constrain proportions",constrain:!0}]:[],gr={title:"General",name:"general",items:Ge([Et,wn])},Dn={type:"textarea",name:"embed",label:"Paste your embed code below:"},Rr={title:"Embed",items:[Dn]},yr=[];Ct(B)&&yr.push({name:"altsource",type:"urlinput",filetype:"media",label:"Alternative source URL"}),p(B)&&yr.push({name:"poster",type:"urlinput",filetype:"image",label:"Media poster (Image URL)"});var zo={title:"Advanced",name:"advanced",items:yr},ia=[gr,Rr];yr.length>0&&ia.push(zo);var ru={type:"tabpanel",tabs:ia},Fi=B.windowManager.open({title:"Insert/Edit Media",size:"normal",body:ru,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:function(wr){var ua=hn(wr.getData());Xr($.get(),ua,B),wr.close()},onChange:function(wr,ua){switch(ua.name){case"source":Ie($.get(),wr);break;case"embed":Qe(wr);break;case"dimensions":case"altsource":case"poster":xt(wr,ua.name);break}$.set(hn(wr.getData()))},initialData:ee})},vi=function(B){var G=function(){Ji(B)};return{showDialog:G}},Zi=function(B){var G=function(){Ji(B)};B.addCommand("mceMedia",G)},no=tinymce.util.Tools.resolve("tinymce.html.Node"),Fa=tinymce.util.Tools.resolve("tinymce.Env"),Qi=tinymce.util.Tools.resolve("tinymce.html.DomParser"),Ri=function(B,G){if(Gt(B)===!1)return G;var $=$r(),ee;return Gn({validate:!1,allow_conditional_comments:!1,comment:function(Ie){ee||$.comment(Ie)},cdata:function(Ie){ee||$.cdata(Ie)},text:function(Ie,Qe){ee||$.text(Ie,Qe)},start:function(Ie,Qe,xt){if(ee=!0,!(Ie==="script"||Ie==="noscript"||Ie==="svg")){for(var Et=Qe.length-1;Et>=0;Et--){var wn=Qe[Et].name;wn.indexOf("on")===0&&(delete Qe.map[wn],Qe.splice(Et,1)),wn==="style"&&(Qe[Et].value=B.dom.serializeStyle(B.dom.parseStyle(Qe[Et].value),Ie))}$.start(Ie,Qe,xt),ee=!1}},end:function(Ie){ee||$.end(Ie)}},Ke({})).parse(G),$.getContent()},eu=function(B){var G=B.name;return G==="iframe"||G==="video"||G==="audio"},Va=function(B,G,$,ee){ee===void 0&&(ee=null);var Ie=B.attr($);return Ze(Ie)?Ie:gn(G,$)?null:ee},tu=function(B,G,$){var ee=G.name==="img"||B.name==="video",Ie=ee?"300":null,Qe=B.name==="audio"?"30":"150",xt=ee?Qe:null;G.attr({width:Va(B,$,"width",Ie),height:Va(B,$,"height",xt)})},In=function(B,G,$,ee){for(var Ie=Qi({forced_root_block:!1,validate:!1},B.schema).parse(ee,{context:G});Ie.firstChild;)$.append(Ie.firstChild)},Cu=function(B,G){var $=G.name,ee=new no("img",1);return ee.shortEnded=!0,nu(B,G,ee),tu(G,ee,{}),ee.attr({style:G.attr("style"),src:Fa.transparentSrc,"data-mce-object":$,class:"mce-object mce-object-"+$}),ee},Do=function(B,G){var $=G.name,ee=new no("span",1);ee.attr({contentEditable:"false",style:G.attr("style"),"data-mce-object":$,class:"mce-preview-object mce-object-"+$}),nu(B,G,ee);var Ie=B.dom.parseStyle(G.attr("style")),Qe=new no($,1);if(tu(G,Qe,Ie),Qe.attr({src:G.attr("src"),style:G.attr("style"),class:G.attr("class")}),$==="iframe")Qe.attr({allowfullscreen:G.attr("allowfullscreen"),frameborder:"0"});else{var xt=["controls","crossorigin","currentTime","loop","muted","poster","preload"];je(xt,function(gr){Qe.attr(gr,G.attr(gr))});var Et=ee.attr("data-mce-html");Ze(Et)&&In(B,$,Qe,unescape(Et))}var wn=new no("span",1);return wn.attr("class","mce-shim"),ee.append(Qe),ee.append(wn),ee},nu=function(B,G,$){for(var ee=G.attributes,Ie=ee.length;Ie--;){var Qe=ee[Ie].name,xt=ee[Ie].value;Qe!=="width"&&Qe!=="height"&&Qe!=="style"&&((Qe==="data"||Qe==="src")&&(xt=B.convertURL(xt,Qe)),$.attr("data-mce-p-"+Qe,xt))}var Et=G.firstChild&&G.firstChild.value;Et&&($.attr("data-mce-html",escape(Ri(B,Et))),$.firstChild=null)},Bi=function(B){var G=B.attr("class");return G&&/\btiny-pageembed\b/.test(G)},_o=function(B){for(;B=B.parent;)if(B.attr("data-ephox-embed-iri")||Bi(B))return!0;return!1},Ma=function(B){return function(G){for(var $=G.length,ee,Ie;$--;)ee=G[$],ee.parent&&(ee.parent.attr("data-mce-object")||ee.name==="script"&&(Ie=Dr(L(B),ee.attr("src")),!Ie)||(Ie&&(Ie.width&&ee.attr("width",Ie.width.toString()),Ie.height&&ee.attr("height",Ie.height.toString())),eu(ee)&&Ft(B)&&Fa.ceFalse?_o(ee)||ee.replace(Do(B,ee)):_o(ee)||ee.replace(Cu(B,ee))))}},xo=function(B){B.on("preInit",function(){var G=B.schema.getSpecialElements();Ne.each("video audio iframe object".split(" "),function(ee){G[ee]=new RegExp("</"+ee+"[^>]*>","gi")});var $=B.schema.getBoolAttrs();Ne.each("webkitallowfullscreen mozallowfullscreen allowfullscreen".split(" "),function(ee){$[ee]={}}),B.parser.addNodeFilter("iframe,video,audio,object,embed,script",Ma(B)),B.serializer.addAttributeFilter("data-mce-object",function(ee,Ie){for(var Qe=ee.length,xt,Et,wn,gr,Dn,Rr,yr,zo;Qe--;)if(xt=ee[Qe],!!xt.parent){for(yr=xt.attr(Ie),Et=new no(yr,1),yr!=="audio"&&yr!=="script"&&(zo=xt.attr("class"),zo&&zo.indexOf("mce-preview-object")!==-1?Et.attr({width:xt.firstChild.attr("width"),height:xt.firstChild.attr("height")}):Et.attr({width:xt.attr("width"),height:xt.attr("height")})),Et.attr({style:xt.attr("style")}),gr=xt.attributes,wn=gr.length;wn--;){var ia=gr[wn].name;ia.indexOf("data-mce-p-")===0&&Et.attr(ia.substr(11),gr[wn].value)}yr==="script"&&Et.attr("type","text/javascript"),Dn=xt.attr("data-mce-html"),Dn&&(Rr=new no("#text",3),Rr.raw=!0,Rr.value=Ri(B,unescape(Dn)),Et.append(Rr)),xt.replace(Et)}})}),B.on("SetContent",function(){B.$("span.mce-preview-object").each(function(G,$){var ee=B.$($);ee.find("span.mce-shim").length===0&&ee.append('<span class="mce-shim"></span>')})})},Tu=function(B){B.on("ResolveName",function(G){var $;G.target.nodeType===1&&($=G.target.getAttribute("data-mce-object"))&&(G.name=$)})},ro=function(B){var G=function(){return B.execCommand("mceMedia")};B.ui.registry.addToggleButton("media",{tooltip:"Insert/edit media",icon:"embed",onAction:G,onSetup:function($){var ee=B.selection;return $.setActive(Xn(ee.getNode())),ee.selectorChangedWithUnbind("img[data-mce-object],span[data-mce-object],div[data-ephox-embed-iri]",$.setActive).unbind}}),B.ui.registry.addMenuItem("media",{icon:"embed",text:"Media...",onAction:G})};function Ou(){nn.add("media",function(B){return Zi(B),ro(B),Tu(B),xo(B),Cr(B),vi(B)})}Ou()})();(function(){var nn=tinymce.util.Tools.resolve("tinymce.PluginManager"),Mt=function(xe){return xe},Fn=function(){return Fn=Object.assign||function(Ce){for(var X,ce=1,Y=arguments.length;ce<Y;ce++){X=arguments[ce];for(var Z in X)Object.prototype.hasOwnProperty.call(X,Z)&&(Ce[Z]=X[Z])}return Ce},Fn.apply(this,arguments)},Qt="\uFEFF",dt=function(xe){return xe.replace(/\uFEFF/g,"")},Kt=function(xe,Ce){for(var X=xe.length,ce=new Array(X),Y=0;Y<X;Y++){var Z=xe[Y];ce[Y]=Ce(Z,Y)}return ce},kt="[!-#%-*,-\\/:;?@\\[-\\]_{};----------------------------------------------]",$t={aletter:"[A-Za-z---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------]",midnumlet:"[-'\\.]",midletter:"[:]",midnum:"[+*/,;;]",numeric:"[0-9---------------------------------]",cr:"\\r",lf:"\\n",newline:"[\v\f\u2028\u2029]",extend:"[------------------------------------------------------------------------------------------------------]",format:"[----\uFEFF-]",katakana:"[-------]",extendnumlet:"[=_--<>]",punctuation:kt},Ze={ALETTER:0,MIDNUMLET:1,MIDLETTER:2,MIDNUM:3,NUMERIC:4,CR:5,LF:6,NEWLINE:7,EXTEND:8,FORMAT:9,KATAKANA:10,EXTENDNUMLET:11,AT:12,OTHER:13},mn=[new RegExp($t.aletter),new RegExp($t.midnumlet),new RegExp($t.midletter),new RegExp($t.midnum),new RegExp($t.numeric),new RegExp($t.cr),new RegExp($t.lf),new RegExp($t.newline),new RegExp($t.extend),new RegExp($t.format),new RegExp($t.katakana),new RegExp($t.extendnumlet),new RegExp("@")],Lt="",Oe=new RegExp("^"+$t.punctuation+"$"),tt=/^\s+$/,jt=mn,We=Ze.OTHER,be=function(xe){for(var Ce=We,X=jt.length,ce=0;ce<X;++ce){var Y=jt[ce];if(Y&&Y.test(xe)){Ce=ce;break}}return Ce},en=function(xe){var Ce={};return function(X){if(Ce[X])return Ce[X];var ce=xe(X);return Ce[X]=ce,ce}},Ae=function(xe){var Ce=en(be);return Kt(xe,Ce)},wt=function(xe,Ce){var X=xe[Ce],ce=xe[Ce+1];if(Ce<0||Ce>xe.length-1&&Ce!==0||X===Ze.ALETTER&&ce===Ze.ALETTER)return!1;var Y=xe[Ce+2];if(X===Ze.ALETTER&&(ce===Ze.MIDLETTER||ce===Ze.MIDNUMLET||ce===Ze.AT)&&Y===Ze.ALETTER)return!1;var Z=xe[Ce-1];return(X===Ze.MIDLETTER||X===Ze.MIDNUMLET||ce===Ze.AT)&&ce===Ze.ALETTER&&Z===Ze.ALETTER||(X===Ze.NUMERIC||X===Ze.ALETTER)&&(ce===Ze.NUMERIC||ce===Ze.ALETTER)||(X===Ze.MIDNUM||X===Ze.MIDNUMLET)&&ce===Ze.NUMERIC&&Z===Ze.NUMERIC||X===Ze.NUMERIC&&(ce===Ze.MIDNUM||ce===Ze.MIDNUMLET)&&Y===Ze.NUMERIC||X===Ze.EXTEND||X===Ze.FORMAT||Z===Ze.EXTEND||Z===Ze.FORMAT||ce===Ze.EXTEND||ce===Ze.FORMAT||X===Ze.CR&&ce===Ze.LF?!1:X===Ze.NEWLINE||X===Ze.CR||X===Ze.LF||ce===Ze.NEWLINE||ce===Ze.CR||ce===Ze.LF?!0:!(X===Ze.KATAKANA&&ce===Ze.KATAKANA||ce===Ze.EXTENDNUMLET&&(X===Ze.ALETTER||X===Ze.NUMERIC||X===Ze.KATAKANA||X===Ze.EXTENDNUMLET)||X===Ze.EXTENDNUMLET&&(ce===Ze.ALETTER||ce===Ze.NUMERIC||ce===Ze.KATAKANA)||X===Ze.AT)},j=Lt,je=tt,Ge=Oe,Pn=function(xe){return xe==="http"||xe==="https"},rn=function(xe,Ce){var X;for(X=Ce;X<xe.length&&!je.test(xe[X]);X++);return X},ge=function(xe,Ce){var X=rn(xe,Ce+1),ce=xe.slice(Ce+1,X).join(j);return ce.substr(0,3)==="://"?X:Ce},Le=function(xe,Ce,X,ce){for(var Y=[],Z=[],Me=0;Me<X.length;++Me)if(Z.push(xe[Me]),wt(X,Me)){var ze=Ce[Me];if((ce.includeWhitespace||!je.test(ze))&&(ce.includePunctuation||!Ge.test(ze))){var mt=Me-Z.length+1,gt=Me+1,Re=Ce.slice(mt,gt).join(j);if(Pn(Re)){var cn=ge(Ce,Me),cr=xe.slice(gt,cn);Array.prototype.push.apply(Z,cr),Me=cn}Y.push(Z)}Z=[]}return Y},qe=function(){return{includeWhitespace:!1,includePunctuation:!1}},gn=function(xe,Ce,X){X=Fn(Fn({},qe()),X);for(var ce=[],Y=[],Z=0;Z<xe.length;Z++){var Me=Ce(xe[Z]);Me!==Qt&&(ce.push(xe[Z]),Y.push(Me))}var ze=Ae(Y);return Le(ce,Y,ze,X)},L=gn,_=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),He=function(xe,Ce){for(var X=Ce.getBlockElements(),ce=Ce.getShortEndedElements(),Y=function(mt){return X[mt.nodeName]||ce[mt.nodeName]},Z=[],Me="",ze=new _(xe,xe);xe=ze.next();)xe.nodeType===3?Me+=dt(xe.data):Y(xe)&&Me.length&&(Z.push(Me),Me="");return Me.length&&Z.push(Me),Z},Ft=function(xe){return xe.replace(/\u200B/g,"")},Gt=function(xe){return xe.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"_").length},Xt=function(xe,Ce){var X=Ft(He(xe,Ce).join(`
`));return L(X.split(""),Mt).length},Ct=function(xe,Ce){var X=He(xe,Ce).join("");return Gt(X)},p=function(xe,Ce){var X=He(xe,Ce).join("").replace(/\s/g,"");return Gt(X)},tn=function(xe,Ce){return function(){return Ce(xe.getBody(),xe.schema)}},Ne=function(xe,Ce){return function(){return Ce(xe.selection.getRng().cloneContents(),xe.schema)}},it=function(xe){return tn(xe,Xt)},Gn=function(xe){return{body:{getWordCount:it(xe),getCharacterCount:tn(xe,Ct),getCharacterCountWithoutSpaces:tn(xe,p)},selection:{getWordCount:Ne(xe,Xt),getCharacterCount:Ne(xe,Ct),getCharacterCountWithoutSpaces:Ne(xe,p)},getCount:it(xe)}},Dr=function(xe,Ce){xe.windowManager.open({title:"Word Count",body:{type:"panel",items:[{type:"table",header:["Count","Document","Selection"],cells:[["Words",String(Ce.body.getWordCount()),String(Ce.selection.getWordCount())],["Characters (no spaces)",String(Ce.body.getCharacterCountWithoutSpaces()),String(Ce.selection.getCharacterCountWithoutSpaces())],["Characters",String(Ce.body.getCharacterCount()),String(Ce.selection.getCharacterCount())]]}]},buttons:[{type:"cancel",name:"close",text:"Close",primary:!0}]})},It=function(xe,Ce){xe.addCommand("mceWordCount",function(){return Dr(xe,Ce)})},Hn=tinymce.util.Tools.resolve("tinymce.util.Delay"),or=function(xe,Ce){xe.fire("wordCountUpdate",{wordCount:{words:Ce.body.getWordCount(),characters:Ce.body.getCharacterCount(),charactersWithoutSpaces:Ce.body.getCharacterCountWithoutSpaces()}})},_r=function(xe,Ce){or(xe,Ce)},Se=function(xe,Ce,X){var ce=Hn.debounce(function(){return _r(xe,Ce)},X);xe.on("init",function(){_r(xe,Ce),Hn.setEditorTimeout(xe,function(){xe.on("SetContent BeforeAddUndo Undo Redo ViewUpdate keyup",ce)},0)})},Ke=function(xe){var Ce=function(){return xe.execCommand("mceWordCount")};xe.ui.registry.addButton("wordcount",{tooltip:"Word count",icon:"character-count",onAction:Ce}),xe.ui.registry.addMenuItem("wordcount",{text:"Word count",icon:"character-count",onAction:Ce})};function $r(xe){xe===void 0&&(xe=300),nn.add("wordcount",function(Ce){var X=Gn(Ce);return It(Ce,X),Ke(Ce),Se(Ce,X,xe),X})}$r()})();(function(){var nn=function(r){var o=typeof r;return r===null?"null":o==="object"&&(Array.prototype.isPrototypeOf(r)||r.constructor&&r.constructor.name==="Array")?"array":o==="object"&&(String.prototype.isPrototypeOf(r)||r.constructor&&r.constructor.name==="String")?"string":o},Mt=function(r){return function(o){return nn(o)===r}},Fn=function(r){return function(o){return typeof o===r}},Qt=function(r){return function(o){return r===o}},dt=Mt("string"),Kt=Mt("object"),kt=Mt("array"),$t=Qt(null),Ze=Fn("boolean"),mn=Qt(void 0),Lt=function(r){return r==null},Oe=function(r){return!Lt(r)},tt=Fn("function"),jt=Fn("number"),We=function(){},be=function(r,o){return function(){for(var u=[],s=0;s<arguments.length;s++)u[s]=arguments[s];return r(o.apply(null,u))}},en=function(r,o){return function(u){return r(o(u))}},Ae=function(r){return function(){return r}},wt=function(r){return r},j=function(r,o){return r===o};function je(r){for(var o=[],u=1;u<arguments.length;u++)o[u-1]=arguments[u];return function(){for(var s=[],f=0;f<arguments.length;f++)s[f]=arguments[f];var m=o.concat(s);return r.apply(null,m)}}var Ge=function(r){return function(o){return!r(o)}},Pn=function(r){return function(){throw new Error(r)}},rn=Ae(!1),ge=Ae(!0),Le=function(){return qe},qe=function(){var r=function(s){return s()},o=wt,u={fold:function(s,f){return s()},isSome:rn,isNone:ge,getOr:o,getOrThunk:r,getOrDie:function(s){throw new Error(s||"error: getOrDie called on none.")},getOrNull:Ae(null),getOrUndefined:Ae(void 0),or:o,orThunk:r,map:Le,each:We,bind:Le,exists:rn,forall:ge,filter:function(){return Le()},toArray:function(){return[]},toString:Ae("none()")};return u}(),gn=function(r){var o=Ae(r),u=function(){return f},s=function(m){return m(r)},f={fold:function(m,b){return b(r)},isSome:ge,isNone:rn,getOr:o,getOrThunk:o,getOrDie:o,getOrNull:o,getOrUndefined:o,or:u,orThunk:u,map:function(m){return gn(m(r))},each:function(m){m(r)},bind:s,exists:s,forall:s,filter:function(m){return m(r)?f:qe},toArray:function(){return[r]},toString:function(){return"some("+r+")"}};return f},L=function(r){return r==null?qe:gn(r)},_={some:gn,none:Le,from:L},He=Array.prototype.slice,Ft=Array.prototype.indexOf,Gt=Array.prototype.push,Xt=function(r,o){return Ft.call(r,o)},Ct=function(r,o){return Xt(r,o)>-1},p=function(r,o){for(var u=0,s=r.length;u<s;u++){var f=r[u];if(o(f,u))return!0}return!1},tn=function(r,o){for(var u=[],s=0;s<r;s++)u.push(o(s));return u},Ne=function(r,o){for(var u=r.length,s=new Array(u),f=0;f<u;f++){var m=r[f];s[f]=o(m,f)}return s},it=function(r,o){for(var u=0,s=r.length;u<s;u++){var f=r[u];o(f,u)}},Gn=function(r,o){for(var u=r.length-1;u>=0;u--){var s=r[u];o(s,u)}},Dr=function(r,o){for(var u=[],s=[],f=0,m=r.length;f<m;f++){var b=r[f],x=o(b,f)?u:s;x.push(b)}return{pass:u,fail:s}},It=function(r,o){for(var u=[],s=0,f=r.length;s<f;s++){var m=r[s];o(m,s)&&u.push(m)}return u},Hn=function(r,o,u){return Gn(r,function(s,f){u=o(u,s,f)}),u},or=function(r,o,u){return it(r,function(s,f){u=o(u,s,f)}),u},_r=function(r,o,u){for(var s=0,f=r.length;s<f;s++){var m=r[s];if(o(m,s))return _.some(m);if(u(m,s))break}return _.none()},Se=function(r,o){return _r(r,o,rn)},Ke=function(r,o){for(var u=0,s=r.length;u<s;u++){var f=r[u];if(o(f,u))return _.some(u)}return _.none()},$r=function(r){for(var o=[],u=0,s=r.length;u<s;++u){if(!kt(r[u]))throw new Error("Arr.flatten item "+u+" was not an array, input: "+r);Gt.apply(o,r[u])}return o},xe=function(r,o){return $r(Ne(r,o))},Ce=function(r,o){for(var u=0,s=r.length;u<s;++u){var f=r[u];if(o(f,u)!==!0)return!1}return!0},X=function(r){var o=He.call(r,0);return o.reverse(),o},ce=function(r,o){for(var u={},s=0,f=r.length;s<f;s++){var m=r[s];u[String(m)]=o(m,s)}return u},Y=function(r){return[r]},Z=function(r,o){var u=He.call(r,0);return u.sort(o),u},Me=function(r,o){return o>=0&&o<r.length?_.some(r[o]):_.none()},ze=function(r){return Me(r,0)},mt=function(r){return Me(r,r.length-1)},gt=function(r,o){for(var u=0;u<r.length;u++){var s=o(r[u],u);if(s.isSome())return s}return _.none()},Re=function(){return Re=Object.assign||function(o){for(var u,s=1,f=arguments.length;s<f;s++){u=arguments[s];for(var m in u)Object.prototype.hasOwnProperty.call(u,m)&&(o[m]=u[m])}return o},Re.apply(this,arguments)};function cn(r,o,u){if(u||arguments.length===2)for(var s=0,f=o.length,m;s<f;s++)(m||!(s in o))&&(m||(m=Array.prototype.slice.call(o,0,s)),m[s]=o[s]);return r.concat(m||Array.prototype.slice.call(o))}var cr=function(r){var o=!1,u;return function(){for(var s=[],f=0;f<arguments.length;f++)s[f]=arguments[f];return o||(o=!0,u=r.apply(null,s)),u}},ir=function(r,o,u,s){var f=r.isiOS()&&/ipad/i.test(u)===!0,m=r.isiOS()&&!f,b=r.isiOS()||r.isAndroid(),x=b||s("(pointer:coarse)"),M=f||!m&&b&&s("(min-device-width:768px)"),R=m||b&&!M,P=o.isSafari()&&r.isiOS()&&/safari/i.test(u)===!1,ie=!R&&!M&&!P;return{isiPad:Ae(f),isiPhone:Ae(m),isTablet:Ae(M),isPhone:Ae(R),isTouch:Ae(x),isAndroid:r.isAndroid,isiOS:r.isiOS,isWebView:Ae(P),isDesktop:Ae(ie)}},Eo=function(r,o){for(var u=0;u<r.length;u++){var s=r[u];if(s.test(o))return s}},wo=function(r,o){var u=Eo(r,o);if(!u)return{major:0,minor:0};var s=function(f){return Number(o.replace(u,"$"+f))};return zr(s(1),s(2))},Xn=function(r,o){var u=String(o).toLowerCase();return r.length===0?Cr():wo(r,u)},Cr=function(){return zr(0,0)},zr=function(r,o){return{major:r,minor:o}},qn={nu:zr,detect:Xn,unknown:Cr},Zn=function(r,o){return gt(o.brands,function(u){var s=u.brand.toLowerCase();return Se(r,function(f){var m;return s===((m=f.brand)===null||m===void 0?void 0:m.toLowerCase())}).map(function(f){return{current:f.name,version:qn.nu(parseInt(u.version,10),0)}})})},So=function(r,o){var u=String(o).toLowerCase();return Se(r,function(s){return s.search(u)})},sr=function(r,o){return So(r,o).map(function(u){var s=qn.detect(u.versionRegexes,o);return{current:u.name,version:s}})},Qn=function(r,o){return So(r,o).map(function(u){var s=qn.detect(u.versionRegexes,o);return{current:u.name,version:s}})},oe=function(r,o){return r.substring(o)},Xe=function(r,o,u){return o===""||r.length>=o.length&&r.substr(u,u+o.length)===o},st=function(r,o){return hn(r,o)?oe(r,o.length):r},ft=function(r,o){return r.indexOf(o)!==-1},hn=function(r,o){return Xe(r,o,0)},yn=function(r,o){return Xe(r,o,r.length-o.length)},Tr=function(r){return function(o){return o.replace(r,"")}},ct=Tr(/^\s+|\s+$/g),pn=function(r){return r.length>0},mr=function(r){return!pn(r)},Aa=function(r){var o=parseFloat(r);return isNaN(o)?_.none():_.some(o)},Go=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Xr=function(r){return function(o){return ft(o,r)}},Ji=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(r){return ft(r,"edge/")&&ft(r,"chrome")&&ft(r,"safari")&&ft(r,"applewebkit")}},{name:"Chrome",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Go],search:function(r){return ft(r,"chrome")&&!ft(r,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(r){return ft(r,"msie")||ft(r,"trident")}},{name:"Opera",versionRegexes:[Go,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Xr("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Xr("firefox")},{name:"Safari",versionRegexes:[Go,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(r){return(ft(r,"safari")||ft(r,"mobile/"))&&ft(r,"applewebkit")}}],vi=[{name:"Windows",search:Xr("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(r){return ft(r,"iphone")||ft(r,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Xr("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:Xr("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Xr("linux"),versionRegexes:[]},{name:"Solaris",search:Xr("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Xr("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Xr("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Zi={browsers:Ae(Ji),oses:Ae(vi)},no="Edge",Fa="Chrome",Qi="IE",Ri="Opera",eu="Firefox",Va="Safari",tu=function(){return In({current:void 0,version:qn.unknown()})},In=function(r){var o=r.current,u=r.version,s=function(f){return function(){return o===f}};return{current:o,version:u,isEdge:s(no),isChrome:s(Fa),isIE:s(Qi),isOpera:s(Ri),isFirefox:s(eu),isSafari:s(Va)}},Cu={unknown:tu,nu:In,edge:Ae(no),chrome:Ae(Fa),ie:Ae(Qi),opera:Ae(Ri),firefox:Ae(eu),safari:Ae(Va)},Do="Windows",nu="iOS",Bi="Android",_o="Linux",Ma="OSX",xo="Solaris",Tu="FreeBSD",ro="ChromeOS",Ou=function(){return B({current:void 0,version:qn.unknown()})},B=function(r){var o=r.current,u=r.version,s=function(f){return function(){return o===f}};return{current:o,version:u,isWindows:s(Do),isiOS:s(nu),isAndroid:s(Bi),isOSX:s(Ma),isLinux:s(_o),isSolaris:s(xo),isFreeBSD:s(Tu),isChromeOS:s(ro)}},G={unknown:Ou,nu:B,windows:Ae(Do),ios:Ae(nu),android:Ae(Bi),linux:Ae(_o),osx:Ae(Ma),solaris:Ae(xo),freebsd:Ae(Tu),chromeos:Ae(ro)},$=function(r,o,u){var s=Zi.browsers(),f=Zi.oses(),m=o.bind(function(M){return Zn(s,M)}).orThunk(function(){return sr(s,r)}).fold(Cu.unknown,Cu.nu),b=Qn(f,r).fold(G.unknown,G.nu),x=ir(b,m,r,u);return{browser:m,os:b,deviceType:x}},ee={detect:$},Ie=function(r){return window.matchMedia(r).matches},Qe=cr(function(){return ee.detect(navigator.userAgent,_.from(navigator.userAgentData),Ie)}),xt=function(){return Qe()},Et=function(r,o,u){return(r.compareDocumentPosition(o)&u)!==0},wn=function(r,o){return Et(r,o,Node.DOCUMENT_POSITION_CONTAINED_BY)},gr=8,Dn=9,Rr=11,yr=1,zo=3,ia=function(r,o){var u=o||document,s=u.createElement("div");if(s.innerHTML=r,!s.hasChildNodes()||s.childNodes.length>1)throw console.error("HTML does not have a single root node",r),new Error("HTML must have a single root node");return wr(s.childNodes[0])},ru=function(r,o){var u=o||document,s=u.createElement(r);return wr(s)},Fi=function(r,o){var u=o||document,s=u.createTextNode(r);return wr(s)},wr=function(r){if(r==null)throw new Error("Node cannot be null or undefined");return{dom:r}},ua=function(r,o,u){return _.from(r.dom.elementFromPoint(o,u)).map(wr)},ke={fromHtml:ia,fromTag:ru,fromText:Fi,fromDom:wr,fromPoint:ua},Wr=function(r,o){var u=r.dom;if(u.nodeType!==yr)return!1;var s=u;if(s.matches!==void 0)return s.matches(o);if(s.msMatchesSelector!==void 0)return s.msMatchesSelector(o);if(s.webkitMatchesSelector!==void 0)return s.webkitMatchesSelector(o);if(s.mozMatchesSelector!==void 0)return s.mozMatchesSelector(o);throw new Error("Browser lacks native selectors")},di=function(r){return r.nodeType!==yr&&r.nodeType!==Dn&&r.nodeType!==Rr||r.childElementCount===0},$c=function(r,o){var u=o===void 0?document:o.dom;return di(u)?[]:Ne(u.querySelectorAll(r),ke.fromDom)},ku=function(r,o){var u=o===void 0?document:o.dom;return di(u)?_.none():_.from(u.querySelector(r)).map(ke.fromDom)},sn=function(r,o){return r.dom===o.dom},nc=function(r,o){var u=r.dom,s=o.dom;return u===s?!1:u.contains(s)},mi=function(r,o){return wn(r.dom,o.dom)},Sr=function(r,o){return xt().browser.isIE()?mi(r,o):nc(r,o)},au=Wr,Ua=Object.keys,ao=Object.hasOwnProperty,er=function(r,o){for(var u=Ua(r),s=0,f=u.length;s<f;s++){var m=u[s],b=r[m];o(b,m)}},Au=function(r,o){return Mu(r,function(u,s){return{k:s,v:o(u,s)}})},Mu=function(r,o){var u={};return er(r,function(s,f){var m=o(s,f);u[m.k]=m.v}),u},ou=function(r){return function(o,u){r[u]=o}},rc=function(r,o,u,s){var f={};return er(r,function(m,b){(o(m,b)?u:s)(m,b)}),f},gi=function(r,o){var u={};return rc(r,o,ou(u),We),u},qo=function(r,o){var u=[];return er(r,function(s,f){u.push(o(s,f))}),u},ac=function(r){return qo(r,wt)},Co=function(r){return Ua(r).length},oo=function(r,o){return A(r,o)?_.from(r[o]):_.none()},A=function(r,o){return ao.call(r,o)},N=function(r,o){return A(r,o)&&r[o]!==void 0&&r[o]!==null},J=function(r){for(var o in r)if(ao.call(r,o))return!1;return!0},ve=["tfoot","thead","tbody","colgroup"],Ee=function(r){return Ct(ve,r)},St=function(r,o){return{rows:r,columns:o}},_n=function(r,o){return{row:r,column:o}},Un=function(r,o,u){return{element:r,rowspan:o,colspan:u}},$n=function(r,o,u,s){return{element:r,rowspan:o,colspan:u,isNew:s}},ga=function(r,o,u,s,f,m){return{element:r,rowspan:o,colspan:u,row:s,column:f,isLocked:m}},ca=function(r,o,u){return{element:r,cells:o,section:u}},Hi=function(r,o,u,s){return{element:r,cells:o,section:u,isNew:s}},ha=function(r,o,u){return{element:r,isNew:o,isLocked:u}},hi=function(r,o,u,s){return{element:r,cells:o,section:u,isNew:s}},Ha=function(r,o,u,s){return{startRow:r,startCol:o,finishRow:u,finishCol:s}},Lc=function(r,o,u){return{element:r,colspan:o,column:u}},wl=function(r,o){return{element:r,columns:o}};typeof window<"u"||Function("return this;")();var Tn=function(r){var o=r.dom.nodeName;return o.toLowerCase()},Ss=function(r){return r.dom.nodeType},Pc=function(r){return function(o){return Ss(o)===r}},Df=function(r){return Ss(r)===gr||Tn(r)==="#comment"},Wn=Pc(yr),Ko=Pc(zo),_f=Pc(Dn),Xo=Pc(Rr),Br=function(r){return function(o){return Wn(o)&&Tn(o)===r}},iu=function(r){return ke.fromDom(r.dom.ownerDocument)},oc=function(r){return _f(r)?r:iu(r)},ic=function(r){return ke.fromDom(oc(r).dom.defaultView)},Or=function(r){return _.from(r.dom.parentNode).map(ke.fromDom)},Sl=function(r){return _.from(r.dom.parentElement).map(ke.fromDom)},xs=function(r,o){for(var u=tt(o)?o:rn,s=r.dom,f=[];s.parentNode!==null&&s.parentNode!==void 0;){var m=s.parentNode,b=ke.fromDom(m);if(f.push(b),u(b)===!0)break;s=m}return f},w=function(r){return _.from(r.dom.previousSibling).map(ke.fromDom)},E=function(r){return _.from(r.dom.nextSibling).map(ke.fromDom)},I=function(r){return Ne(r.dom.childNodes,ke.fromDom)},te=function(r,o){var u=r.dom.childNodes;return _.from(u[o]).map(ke.fromDom)},Ye=function(r){return te(r,0)},Ht=function(r){return Xo(r)&&Oe(r.dom.host)},On=tt(Element.prototype.attachShadow)&&tt(Node.prototype.getRootNode),Ia=Ae(On),Ii=On?function(r){return ke.fromDom(r.dom.getRootNode())}:oc,sa=function(r){var o=Ii(r);return Ht(o)?_.some(o):_.none()},Wa=function(r){return ke.fromDom(r.dom.host)},uc=function(r){if(Ia()&&Oe(r.target)){var o=ke.fromDom(r.target);if(Wn(o)&&xl(o)&&r.composed&&r.composedPath){var u=r.composedPath();if(u)return ze(u)}}return _.from(r.target)},xl=function(r){return Oe(r.dom.shadowRoot)},pi=function(r){var o=Ko(r)?r.dom.parentNode:r.dom;if(o==null||o.ownerDocument===null)return!1;var u=o.ownerDocument;return sa(ke.fromDom(o)).fold(function(){return u.body.contains(o)},en(pi,Wa))},zf=function(){return Cl(ke.fromDom(document))},Cl=function(r){var o=r.dom.body;if(o==null)throw new Error("Body is not available yet");return ke.fromDom(o)},kr=function(r,o,u){return It(xs(r,u),o)},Yo=function(r,o){return It(I(r),o)},Cs=function(r,o){var u=[];return it(I(r),function(s){o(s)&&(u=u.concat([s])),u=u.concat(Cs(s,o))}),u},cc=function(r,o,u){return kr(r,function(s){return Wr(s,o)},u)},Vt=function(r,o){return Yo(r,function(u){return Wr(u,o)})},Ro=function(r,o){return $c(o,r)};function pa(r,o,u,s,f){return r(u,s)?_.some(u):tt(f)&&f(u)?_.none():o(u,s,f)}var ja=function(r,o,u){for(var s=r.dom,f=tt(u)?u:rn;s.parentNode;){s=s.parentNode;var m=ke.fromDom(s);if(o(m))return _.some(m);if(f(m))break}return _.none()},Uv=function(r,o,u){var s=function(f,m){return m(f)};return pa(s,ja,r,o,u)},ba=function(r,o){var u=function(f){return o(ke.fromDom(f))},s=Se(r.dom.childNodes,u);return s.map(ke.fromDom)},Rf=function(r,o){var u=function(s){for(var f=0;f<s.childNodes.length;f++){var m=ke.fromDom(s.childNodes[f]);if(o(m))return _.some(m);var b=u(s.childNodes[f]);if(b.isSome())return b}return _.none()};return u(r.dom)},uu=function(r,o,u){return ja(r,function(s){return Wr(s,o)},u)},_t=function(r,o){return ba(r,function(u){return Wr(u,o)})},Bo=function(r,o){return ku(o,r)},Ar=function(r,o,u){var s=function(f,m){return Wr(f,m)};return pa(s,uu,r,o,u)},Ga=function(r,o,u){if(dt(u)||Ze(u)||jt(u))r.setAttribute(o,u+"");else throw console.error("Invalid call to Attribute.set. Key ",o,":: Value ",u,":: Element ",r),new Error("Attribute value was not simple")},Yr=function(r,o,u){Ga(r.dom,o,u)},Lr=function(r,o){var u=r.dom;er(o,function(s,f){Ga(u,f,s)})},qm=function(r,o){er(o,function(u,s){u.fold(function(){ur(r,s)},function(f){Ga(r.dom,s,f)})})},Eu=function(r,o){var u=r.dom.getAttribute(o);return u===null?void 0:u},zn=function(r,o){return _.from(Eu(r,o))},ur=function(r,o){r.dom.removeAttribute(o)},Ts=function(r){return or(r.dom.attributes,function(o,u){return o[u.name]=u.value,o},{})},Nc=function(r,o,u){return u===void 0&&(u=j),r.exists(function(s){return u(s,o)})},Jr=function(r){for(var o=[],u=function(f){o.push(f)},s=0;s<r.length;s++)r[s].each(u);return o},bi=function(r,o,u){return r.isSome()&&o.isSome()?_.some(u(r.getOrDie(),o.getOrDie())):_.none()},Km=function(r,o){return r!=null?o(r):_.none()},sc=function(r){return r.bind(wt)},Yn=function(r,o){return r?_.some(o):_.none()},$i=function(r){return r.style!==void 0&&tt(r.style.getPropertyValue)},Du=function(r,o,u){if(!dt(u))throw console.error("Invalid call to CSS.set. Property ",o,":: Value ",u,":: Element ",r),new Error("CSS value must be a string: "+u);$i(r)&&r.style.setProperty(o,u)},cu=function(r,o){$i(r)&&r.style.removeProperty(o)},Pr=function(r,o,u){var s=r.dom;Du(s,o,u)},_u=function(r,o){var u=r.dom;er(o,function(s,f){Du(u,f,s)})},su=function(r,o){var u=r.dom,s=window.getComputedStyle(u),f=s.getPropertyValue(o);return f===""&&!pi(r)?$a(u,o):f},$a=function(r,o){return $i(r)?r.style.getPropertyValue(o):""},io=function(r,o){var u=r.dom,s=$a(u,o);return _.from(s).filter(function(f){return f.length>0})},zu=function(r,o){var u=r.dom;cu(u,o),Nc(zn(r,"style").map(ct),"")&&ur(r,"style")},Wv=function(r,o){var u=r.dom,s=o.dom;$i(u)&&$i(s)&&(s.style.cssText=u.style.cssText)},Li=function(r,o,u){return u===void 0&&(u=0),zn(r,o).map(function(s){return parseInt(s,10)}).getOr(u)},Tl=function(r,o){return Li(r,o,1)},Os=function(r){return Br("col")(r)?Li(r,"span",1)>1:Tl(r,"colspan")>1},jv=function(r){return Tl(r,"rowspan")>1},Ol=function(r,o){return parseInt(su(r,o),10)},ks=Ae(10),lc=Ae(10),Vc=function(r,o){return Bf(r,o,ge)},Bf=function(r,o,u){return xe(I(r),function(s){return Wr(s,o)?u(s)?[s]:[]:Bf(s,o,u)})},qa=function(r,o,u){if(u===void 0&&(u=rn),u(o))return _.none();if(Ct(r,Tn(o)))return _.some(o);var s=function(f){return Wr(f,"table")||u(f)};return uu(o,r.join(","),s)},kl=function(r,o){return qa(["td","th"],r,o)},fc=function(r){return Vc(r,"th,td")},Uc=function(r){return Wr(r,"colgroup")?Vt(r,"col"):xe(Gv(r),function(o){return Vt(o,"col")})},vr=function(r,o){return Ar(r,"table",o)},Jo=function(r){return Vc(r,"tr")},Gv=function(r){return vr(r).fold(Ae([]),function(o){return Vt(o,"colgroup")})},Zo=function(r,o){return Ne(r,function(u){if(Tn(u)==="colgroup"){var s=Ne(Uc(u),function(f){var m=Li(f,"span",1);return Un(f,1,m)});return ca(u,s,"colgroup")}else{var s=Ne(fc(u),function(m){var b=Li(m,"rowspan",1),x=Li(m,"colspan",1);return Un(m,b,x)});return ca(u,s,o(u))}})},Ff=function(r){return Or(r).map(function(o){var u=Tn(o);return Ee(u)?u:"tbody"}).getOr("tbody")},qv=function(r){var o=Jo(r),u=Gv(r),s=cn(cn([],u,!0),o,!0);return Zo(s,Ff)},Kv=function(r,o){return Zo(r,function(){return o})},Wc=function(r,o,u){var s=r.cells,f=s.slice(0,o),m=s.slice(o),b=f.concat(u).concat(m);return Xv(r,b)},Hf=function(r,o,u){return Wc(r,o,[u])},As=function(r,o,u){var s=r.cells;s[o]=u},Xv=function(r,o){return hi(r.element,o,r.section,r.isNew)},Xm=function(r,o){var u=r.cells,s=Ne(u,o);return hi(r.element,s,r.section,r.isNew)},Qo=function(r,o){return r.cells[o]},Ka=function(r,o){return Qo(r,o).element},ei=function(r){return r.cells.length},Ea=function(r){var o=Dr(r,function(u){return u.section==="colgroup"});return{rows:o.fail,cols:o.pass}},Zr=function(r,o,u){var s=Ne(r.cells,u);return hi(o(r.element),s,r.section,!0)},Da="data-snooker-locked-cols",vc=function(r){return zn(r,Da).bind(function(o){return _.from(o.match(/\d+/g))}).map(function(o){return ce(o,ge)})},Xa=function(r){var o=or(Ea(r).rows,function(s,f){return it(f.cells,function(m,b){m.isLocked&&(s[b]=!0)}),s},{}),u=qo(o,function(s,f){return parseInt(f,10)});return Z(u)},lu=function(r,o){return r+","+o},dc=function(r,o,u){return _.from(r.access[lu(o,u)])},Ym=function(r,o,u){var s=Ut(r,function(f){return u(o,f.element)});return s.length>0?_.some(s[0]):_.none()},Ut=function(r,o){var u=xe(r.all,function(s){return s.cells});return It(u,o)},ti=function(r){var o={},u=0;return it(r.cells,function(s){var f=s.colspan;tn(f,function(m){var b=u+m;o[b]=Lc(s.element,f,b)}),u+=f}),o},Al=function(r){var o={},u=[],s=ze(r).map(function(_e){return _e.element}).bind(vr),f=s.bind(vc).getOr({}),m=0,b=0,x=0,M=Dr(r,function(_e){return _e.section==="colgroup"}),R=M.pass,P=M.fail;it(P,function(_e){var Fe=[];it(_e.cells,function(ut){for(var xn=0;o[lu(x,xn)]!==void 0;)xn++;for(var vt=N(f,xn.toString()),At=ga(ut.element,ut.rowspan,ut.colspan,x,xn,vt),un=0;un<ut.colspan;un++)for(var Yt=0;Yt<ut.rowspan;Yt++){var qr=x+Yt,Oa=xn+un,go=lu(qr,Oa);o[go]=At,b=Math.max(b,Oa+1)}Fe.push(At)}),m++,u.push(ca(_e.element,Fe,_e.section)),x++});var ie=mt(R).map(function(_e){var Fe=ti(_e),ut=wl(_e.element,ac(Fe));return{colgroups:[ut],columns:Fe}}).getOrThunk(function(){return{colgroups:[],columns:{}}}),Te=ie.columns,pe=ie.colgroups,ue=St(m,b);return{grid:ue,access:o,all:u,columns:Te,colgroups:pe}},Jm=function(r){var o=qv(r);return Al(o)},Zm=function(r){return xe(r.all,function(o){return o.cells})},Qm=function(r){return ac(r.columns)},If=function(r){return Ua(r.columns).length>0},Yv=function(r,o){return _.from(r.columns[o])},Wt={fromTable:Jm,generate:Al,getAt:dc,findItem:Ym,filterItems:Ut,justCells:Zm,justColumns:Qm,hasColumns:If,getColumnAt:Yv},Jv=function(r,o){var u=o.column,s=o.column+o.colspan-1,f=o.row,m=o.row+o.rowspan-1;return u<=r.finishCol&&s>=r.startCol&&f<=r.finishRow&&m>=r.startRow},eg=function(r,o){return o.column>=r.startCol&&o.column+o.colspan-1<=r.finishCol&&o.row>=r.startRow&&o.row+o.rowspan-1<=r.finishRow},tg=function(r,o){for(var u=!0,s=je(eg,o),f=o.startRow;f<=o.finishRow;f++)for(var m=o.startCol;m<=o.finishCol;m++)u=u&&Wt.getAt(r,f,m).exists(s);return u?_.some(o):_.none()},Mr=function(r,o){return Ha(Math.min(r.row,o.row),Math.min(r.column,o.column),Math.max(r.row+r.rowspan-1,o.row+o.rowspan-1),Math.max(r.column+r.colspan-1,o.column+o.colspan-1))},$f=function(r,o,u){var s=Wt.findItem(r,o,sn),f=Wt.findItem(r,u,sn);return s.bind(function(m){return f.map(function(b){return Mr(m,b)})})},h=function(r,o,u){return $f(r,o,u).bind(function(s){return tg(r,s)})},C=function(r,o,u,s){return Wt.findItem(r,o,sn).bind(function(f){var m=u>0?f.row+f.rowspan-1:f.row,b=s>0?f.column+f.colspan-1:f.column,x=Wt.getAt(r,m+u,b+s);return x.map(function(M){return M.element})})},O=function(r,o,u){return $f(r,o,u).map(function(s){var f=Wt.filterItems(r,je(Jv,s));return Ne(f,function(m){return m.element})})},F=function(r,o){var u=function(s,f){return Sr(f,s)};return Wt.findItem(r,o,u).map(function(s){return s.element})},q=function(r,o,u){return vr(r).bind(function(s){var f=an(s);return C(f,r,o,u)})},fe=function(r,o,u){var s=an(r);return O(s,o,u)},ot=function(r,o,u,s,f){var m=an(r),b=sn(r,u)?_.some(o):F(m,o),x=sn(r,f)?_.some(s):F(m,s);return b.bind(function(M){return x.bind(function(R){return O(m,M,R)})})},Dt=function(r,o,u){var s=an(r);return h(s,o,u)},an=Wt.fromTable,ln=function(r,o){var u=Or(r);u.each(function(s){s.dom.insertBefore(o.dom,r.dom)})},tr=function(r,o){var u=E(r);u.fold(function(){var s=Or(r);s.each(function(f){Er(f,o)})},function(s){ln(s,o)})},Ya=function(r,o){var u=Ye(r);u.fold(function(){Er(r,o)},function(s){r.dom.insertBefore(o.dom,s.dom)})},Er=function(r,o){r.dom.appendChild(o.dom)},zy=function(r,o,u){te(r,u).fold(function(){Er(r,o)},function(s){ln(s,o)})},Jp=function(r,o){ln(r,o),Er(o,r)},Ry=function(r,o){it(o,function(u){ln(r,u)})},By=function(r,o){it(o,function(u,s){var f=s===0?r:o[s-1];tr(f,u)})},Ru=function(r,o){it(o,function(u){Er(r,u)})},Lf=function(r){r.dom.textContent="",it(I(r),function(o){Fo(o)})},Fo=function(r){var o=r.dom;o.parentNode!==null&&o.parentNode.removeChild(o)},Pf=function(r){var o=I(r);o.length>0&&Ry(r,o),Fo(r)},Fy=function(r,o){var u=function(m){if(!r(m))throw new Error("Can only get "+o+" value of a "+o+" node");return s(m).getOr("")},s=function(m){return r(m)?_.from(m.dom.nodeValue):_.none()},f=function(m,b){if(!r(m))throw new Error("Can only set raw "+o+" value of a "+o+" node");m.dom.nodeValue=b};return{get:u,getOption:s,set:f}},ng=Fy(Ko,"text"),Zv=function(r){return ng.get(r)},Zp=function(r){return ng.getOption(r)},Hy=function(r,o){return ng.set(r,o)},Ml=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"];function Nf(){var r=function(R){return ke.fromDom(R.dom.cloneNode(!1))},o=function(R){return oc(R).dom},u=function(R){return Wn(R)?Tn(R)==="body"?!0:Ct(Ml,Tn(R)):!1},s=function(R){return Wn(R)?Ct(["br","img","hr","input"],Tn(R)):!1},f=function(R){return Wn(R)&&Eu(R,"contenteditable")==="false"},m=function(R,P){return R.dom.compareDocumentPosition(P.dom)},b=function(R,P){var ie=Ts(R);Lr(P,ie)},x=function(R){var P=Tn(R);return Ct(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],P)},M=function(R){return Wn(R)?zn(R,"lang"):_.none()};return{up:Ae({selector:uu,closest:Ar,predicate:ja,all:xs}),down:Ae({selector:Ro,predicate:Cs}),styles:Ae({get:su,getRaw:io,set:Pr,remove:zu}),attrs:Ae({get:Eu,set:Yr,remove:ur,copyTo:b}),insert:Ae({before:ln,after:tr,afterAll:By,append:Er,appendAll:Ru,prepend:Ya,wrap:Jp}),remove:Ae({unwrap:Pf,remove:Fo}),create:Ae({nu:ke.fromTag,clone:r,text:ke.fromText}),query:Ae({comparePosition:m,prevSibling:w,nextSibling:E}),property:Ae({children:I,name:Tn,parent:Or,document:o,isText:Ko,isComment:Df,isElement:Wn,isSpecial:x,getLanguage:M,getText:Zv,setText:Hy,isBoundary:u,isEmptyTag:s,isNonEditable:f}),eq:sn,is:au}}var Iy=function(r,o,u,s){var f=u[0],m=u.slice(1);return s(r,o,f,m)},Qp=function(r,o,u){return u.length>0?Iy(r,o,u,$y):_.none()},$y=function(r,o,u,s){var f=o(r,u);return Hn(s,function(m,b){var x=o(r,b);return Ly(r,m,x)},f)},Ly=function(r,o,u){return o.bind(function(s){return u.filter(je(r.eq,s))})},Py=function(r,o){return je(r.eq,o)},Ny=function(r,o,u,s){s===void 0&&(s=rn);var f=[o].concat(r.up().all(o)),m=[u].concat(r.up().all(u)),b=function(P){var ie=Ke(P,s);return ie.fold(function(){return P},function(Te){return P.slice(0,Te+1)})},x=b(f),M=b(m),R=Se(x,function(P){return p(M,Py(r,P))});return{firstpath:x,secondpath:M,shared:R}},e1=Qp,Vy=Ny,Ho=Nf(),pt=function(r,o){return e1(Ho,function(u,s){return r(s)},o)},jc=function(r,o,u){return Vy(Ho,r,o,u)},Qv=function(r){return uu(r,"table")},ed=function(r,o,u){var s=function(f){return function(m){return u!==void 0&&u(m)||sn(m,f)}};return sn(r,o)?_.some({boxes:_.some([r]),start:r,finish:o}):Qv(r).bind(function(f){return Qv(o).bind(function(m){if(sn(f,m))return _.some({boxes:fe(f,r,o),start:r,finish:o});if(Sr(f,m)){var b=cc(o,"td,th",s(f)),x=b.length>0?b[b.length-1]:o;return _.some({boxes:ot(f,r,f,o,m),start:r,finish:x})}else if(Sr(m,f)){var b=cc(r,"td,th",s(m)),M=b.length>0?b[b.length-1]:r;return _.some({boxes:ot(m,r,f,o,m),start:r,finish:M})}else return jc(r,o).shared.bind(function(R){return Ar(R,"table",u).bind(function(P){var ie=cc(o,"td,th",s(P)),Te=ie.length>0?ie[ie.length-1]:o,pe=cc(r,"td,th",s(P)),ue=pe.length>0?pe[pe.length-1]:r;return _.some({boxes:ot(P,r,f,o,m),start:ue,finish:Te})})})})})},rg=function(r,o){var u=Ro(r,o);return u.length>0?_.some(u):_.none()},ag=function(r,o){return Se(r,function(u){return Wr(u,o)})},Pi=function(r,o,u){return Bo(r,o).bind(function(s){return Bo(r,u).bind(function(f){return pt(Qv,[s,f]).map(function(m){return{first:s,last:f,table:m}})})})},td=function(r,o){return uu(r,"table").bind(function(u){return Bo(u,o).bind(function(s){return ed(s,r).bind(function(f){return f.boxes.map(function(m){return{boxes:m,start:f.start,finish:f.finish}})})})})},og=function(r,o,u,s,f){return ag(r,f).bind(function(m){return q(m,o,u).bind(function(b){return td(b,s)})})},jr=function(r,o){return rg(r,o)},nd=function(r,o,u){return Pi(r,o,u).bind(function(s){var f=function(M){return sn(r,M)},m="thead,tfoot,tbody,table",b=uu(s.first,m,f),x=uu(s.last,m,f);return b.bind(function(M){return x.bind(function(R){return sn(M,R)?Dt(s.table,s.first,s.last):_.none()})})})},ig=function(r){if(!kt(r))throw new Error("cases must be an array");if(r.length===0)throw new Error("there must be at least one case");var o=[],u={};return it(r,function(s,f){var m=Ua(s);if(m.length!==1)throw new Error("one and only one name per case");var b=m[0],x=s[b];if(u[b]!==void 0)throw new Error("duplicate key detected:"+b);if(b==="cata")throw new Error("cannot have a case named cata (sorry)");if(!kt(x))throw new Error("case arguments must be an array");o.push(b),u[b]=function(){for(var M=[],R=0;R<arguments.length;R++)M[R]=arguments[R];var P=M.length;if(P!==x.length)throw new Error("Wrong number of arguments to case "+b+". Expected "+x.length+" ("+x+"), got "+P);var ie=function(Te){var pe=Ua(Te);if(o.length!==pe.length)throw new Error("Wrong number of arguments to match. Expected: "+o.join(",")+`
Actual: `+pe.join(","));var ue=Ce(o,function(_e){return Ct(pe,_e)});if(!ue)throw new Error("Not all branches were specified when using match. Specified: "+pe.join(", ")+`
Required: `+o.join(", "));return Te[b].apply(null,M)};return{fold:function(){for(var Te=[],pe=0;pe<arguments.length;pe++)Te[pe]=arguments[pe];if(Te.length!==r.length)throw new Error("Wrong number of arguments to fold. Expected "+r.length+", got "+Te.length);var ue=Te[f];return ue.apply(null,M)},match:ie,log:function(Te){console.log(Te,{constructors:o,constructor:b,params:M})}}}}),u},Bu={generate:ig},ug=Bu.generate([{none:[]},{multiple:["elements"]},{single:["element"]}]),cg=function(r,o,u,s){return r.fold(o,u,s)},rd=ug.none,Uy=ug.multiple,Vf=ug.single,t1=function(r,o,u){var s=function(){return jr(r(),u).fold(function(){return o().fold(rd,Vf)},function(f){return Uy(f)})};return{get:s}},Wy=tinymce.util.Tools.resolve("tinymce.PluginManager"),hr=function(r,o){return ke.fromDom(r.dom.cloneNode(o))},fu=function(r){return hr(r,!1)},ya=function(r){return hr(r,!0)},Gc=function(r,o){var u=ke.fromTag(o),s=Ts(r);return Lr(u,s),u},yi=function(r,o){var u=Gc(r,o),s=I(ya(r));return Ru(u,s),u},jy=function(r,o){var u=Gc(r,o);ln(r,u);var s=I(r);return Ru(u,s),Fo(r),u},Qr=function(r,o){var u=function(x,M){if(!jt(M)&&!M.match(/^[0-9]+$/))throw new Error(r+".set accepts only positive integer values. Value was "+M);var R=x.dom;$i(R)&&(R.style[r]=M+"px")},s=function(x){var M=o(x);if(M<=0||M===null){var R=su(x,r);return parseFloat(R)||0}return M},f=s,m=function(x,M){return or(M,function(R,P){var ie=su(x,P),Te=ie===void 0?0:parseInt(ie,10);return isNaN(Te)?R:R+Te},0)},b=function(x,M,R){var P=m(x,R),ie=M>P?M-P:0;return ie};return{set:u,get:s,getOuter:f,aggregate:m,max:b}},uo=function(){var r=xt().browser;return r.isIE()||r.isEdge()},n1=function(r,o){return Aa(r).getOr(o)},de=function(r,o,u){return n1(su(r,o),u)},To=function(r){return su(r,"box-sizing")},r1=function(r,o,u,s){var f=de(r,"padding-"+u,0),m=de(r,"padding-"+s,0),b=de(r,"border-"+u+"-width",0),x=de(r,"border-"+s+"-width",0);return o-f-m-b-x},Tt=function(r,o){var u=r.dom,s=u.getBoundingClientRect().height||u.offsetHeight;return o==="border-box"?s:r1(r,s,"top","bottom")},Uf=function(r,o){var u=r.dom,s=u.getBoundingClientRect().width||u.offsetWidth;return o==="border-box"?s:r1(r,s,"left","right")},Gy=function(r){return uo()?Tt(r,To(r)):de(r,"height",r.dom.offsetHeight)},Oo=function(r){return uo()?Uf(r,To(r)):de(r,"width",r.dom.offsetWidth)},qy=function(r){return Uf(r,"content-box")},mc=Qr("width",function(r){return r.dom.offsetWidth}),Fu=function(r){return mc.get(r)},Io=function(r){return mc.getOuter(r)},kn=qy,qc=Oo,ad=function(r,o){o===void 0&&(o=ge);var u=r.grid,s=tn(u.columns,wt),f=tn(u.rows,wt);return Ne(s,function(m){var b=function(){return xe(f,function(R){return Wt.getAt(r,R,m).filter(function(P){return P.column===m}).toArray()})},x=function(R){return R.colspan===1&&o(R.element)},M=function(){return Wt.getAt(r,0,m)};return nr(b,x,M)})},nr=function(r,o,u){var s=r(),f=Se(s,o),m=f.orThunk(function(){return _.from(s[0]).orThunk(u)});return m.map(function(b){return b.element})},El=function(r){var o=r.grid,u=tn(o.rows,wt),s=tn(o.columns,wt);return Ne(u,function(f){var m=function(){return xe(s,function(M){return Wt.getAt(r,f,M).filter(function(R){return R.row===f}).fold(Ae([]),function(R){return[R]})})},b=function(M){return M.rowspan===1},x=function(){return Wt.getAt(r,f,0)};return nr(m,b,x)})},a1=function(r,o){if(o<0||o>=r.length-1)return _.none();var u=r[o].fold(function(){var f=X(r.slice(0,o));return gt(f,function(m,b){return m.map(function(x){return{value:x,delta:b+1}})})},function(f){return _.some({value:f,delta:0})}),s=r[o+1].fold(function(){var f=r.slice(o+1);return gt(f,function(m,b){return m.map(function(x){return{value:x,delta:b+1}})})},function(f){return _.some({value:f,delta:1})});return u.bind(function(f){return s.map(function(m){var b=m.delta+f.delta;return Math.abs(m.value-f.value)/b})})},$o=function(r,o){return function(u){return Ky(u)==="rtl"?o:r}},Ky=function(r){return su(r,"direction")==="rtl"?"rtl":"ltr"},K=Qr("height",function(r){var o=r.dom;return pi(r)?o.getBoundingClientRect().height:o.offsetHeight}),ni=function(r){return K.get(r)},od=function(r){return K.getOuter(r)},Dl=Gy,gc=function(r,o){var u=function(s,f){return gc(r+s,o+f)};return{left:r,top:o,translate:u}},lr=gc,pr=function(r){var o=r.getBoundingClientRect();return lr(o.left,o.top)},id=function(r,o){return r!==void 0?r:o!==void 0?o:0},Kc=function(r){var o=r.dom.ownerDocument,u=o.body,s=o.defaultView,f=o.documentElement;if(u===r.dom)return lr(u.offsetLeft,u.offsetTop);var m=id(s==null?void 0:s.pageYOffset,f.scrollTop),b=id(s==null?void 0:s.pageXOffset,f.scrollLeft),x=id(f.clientTop,u.clientTop),M=id(f.clientLeft,u.clientLeft);return sg(r).translate(b-M,m-x)},sg=function(r){var o=r.dom,u=o.ownerDocument,s=u.body;return s===o?lr(s.offsetLeft,s.offsetTop):pi(r)?pr(o):lr(0,0)},bt=function(r,o){return{row:r,y:o}},o1=function(r,o){return{col:r,x:o}},ri=function(r){var o=Kc(r);return o.left+Io(r)},i1=function(r){return Kc(r).left},u1=function(r,o){return o1(r,i1(o))},c1=function(r,o){return o1(r,ri(o))},lg=function(r){return Kc(r).top},Xy=function(r,o){return bt(r,lg(o))},hc=function(r,o){return bt(r,lg(o)+od(o))},Xc=function(r,o,u){if(u.length===0)return[];var s=Ne(u.slice(1),function(m,b){return m.map(function(x){return r(b,x)})}),f=u[u.length-1].map(function(m){return o(u.length-1,m)});return s.concat([f])},Yy=function(r){return-r},fg={delta:wt,positions:function(r){return Xc(Xy,hc,r)},edge:lg},Jy={delta:wt,edge:i1,positions:function(r){return Xc(u1,c1,r)}},s1={delta:Yy,edge:ri,positions:function(r){return Xc(c1,u1,r)}},ud=$o(Jy,s1),_l={delta:function(r,o){return ud(o).delta(r,o)},positions:function(r,o){return ud(o).positions(r,o)},edge:function(r){return ud(r).edge(r)}},l1={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},Zy=function(){var r="[0-9]+",o="[+-]?"+r,u="[eE]"+o,s="\\.",f=function(x){return"(?:"+x+")?"},m=["Infinity",r+s+f(r)+f(u),s+r+f(u),r+f(u)].join("|"),b="[+-]?(?:"+m+")";return new RegExp("^("+b+")(.*)$")}(),zl=function(r,o){return p(o,function(u){return p(l1[u],function(s){return r===s})})},Qy=function(r,o){var u=_.from(Zy.exec(r));return u.bind(function(s){var f=Number(s[1]),m=s[2];return zl(m,o)?_.some({value:f,unit:m}):_.none()})},f1=/(\d+(\.\d+)?)%/,ew=/(\d+(\.\d+)?)px|em/,tw=Br("col"),wa=function(r,o,u){var s=Sl(r).getOrThunk(function(){return Cl(iu(r))});return o(r)/u(s)*100},Hu=function(r,o){Pr(r,"width",o+"px")},Rl=function(r,o){Pr(r,"width",o+"%")},Yc=function(r,o){Pr(r,"height",o+"px")},v1=function(r){return Dl(r)+"px"},Ni=function(r,o,u,s){var f=vr(r).map(function(m){var b=u(m);return Math.floor(o/100*b)}).getOr(o);return s(r,f),f},cd=function(r,o,u,s){var f=parseFloat(r);return yn(r,"%")&&Tn(o)!=="table"?Ni(o,f,u,s):f},vg=function(r){var o=v1(r);return o?cd(o,r,ni,Yc):ni(r)},dg=function(r,o,u){var s=u(r),f=Tl(r,o);return s/f},pc=function(r,o){return io(r,o).orThunk(function(){return zn(r,o).map(function(u){return u+"px"})})},wi=function(r){return pc(r,"width")},nw=function(r){return pc(r,"height")},sd=function(r){return wa(r,Fu,kn)},d1=function(r){return tw(r)?Fu(r):qc(r)},Ms=function(r){return dg(r,"rowspan",vg)},Wf=function(r){var o=wi(r);return o.bind(function(u){return Qy(u,["fixed","relative","empty"])})},Bl=function(r,o,u){Pr(r,"width",o+u)},rw=function(r){return Fu(r)+"px"},Fl=function(r){return wa(r,Fu,kn)+"%"},aw=function(r){return wi(r).exists(function(o){return f1.test(o)})},ow=function(r){return wi(r).exists(function(o){return ew.test(o)})},Nr=function(r){return wi(r).isNone()},iw=Ae(f1),Jc=Br("col"),mg=function(r){return wi(r).getOrThunk(function(){return d1(r)+"px"})},gg=function(r){return nw(r).getOrThunk(function(){return Ms(r)+"px"})},Es=function(r){return Ne(Wt.justColumns(r),function(o){return _.from(o.element)})},ai=function(r){var o=xt().browser,u=o.isChrome()||o.isFirefox();return Jc(r)?u:!0},Ds=function(r,o,u,s,f,m){return r.filter(s).fold(function(){return m(a1(u,o))},function(b){return f(b)})},_s=function(r,o,u,s){var f=ad(r),m=Wt.hasColumns(r)?Es(r):f,b=[_.some(_l.edge(o))].concat(Ne(_l.positions(f,o),function(M){return M.map(function(R){return R.x})})),x=Ge(Os);return Ne(m,function(M,R){return Ds(M,R,b,x,function(P){if(ai(P))return u(P);var ie=Km(f[R],wt);return Ds(ie,R,b,x,function(Te){return s(_.some(Fu(Te)))},s)},s)})},m1=function(r){return r.map(function(o){return o+"px"}).getOr("")},ld=function(r,o){return _s(r,o,mg,m1)},hg=function(r,o,u){return _s(r,o,sd,function(s){return s.fold(function(){return u.minCellWidth()},function(f){return f/u.pixelWidth()*100})})},Hl=function(r,o,u){return _s(r,o,d1,function(s){return s.getOrThunk(u.minCellWidth)})},g1=function(r,o,u,s,f){var m=El(r),b=[_.some(u.edge(o))].concat(Ne(u.positions(m,o),function(x){return x.map(function(M){return M.y})}));return Ne(m,function(x,M){return Ds(x,M,b,Ge(jv),s,f)})},uw=function(r,o,u){return g1(r,o,u,Ms,function(s){return s.getOrThunk(lc)})},pg=function(r,o,u){return g1(r,o,u,gg,m1)},zs=function(r,o){return function(){return pi(r)?o(r):parseFloat(io(r,"width").getOr("0"))}},Zc=function(r){var o=zs(r,Fu),u=Ae(0),s=function(f,m){return Hl(f,r,m)};return{width:o,pixelWidth:o,getWidths:s,getCellDelta:u,singleColumnWidth:Ae([0]),minCellWidth:u,setElementWidth:We,adjustTableWidth:We,isRelative:!0,label:"none"}},Il=function(r){var o=zs(r,function(M){return parseFloat(Fl(M))}),u=zs(r,Fu),s=function(M){return M/u()*100},f=function(M,R){return[100-M]},m=function(){return ks()/u()*100},b=function(M){var R=o(),P=M/100*R,ie=R+P;Rl(r,ie)},x=function(M,R){return hg(M,r,R)};return{width:o,pixelWidth:u,getWidths:x,getCellDelta:s,singleColumnWidth:f,minCellWidth:m,setElementWidth:Rl,adjustTableWidth:b,isRelative:!0,label:"percent"}},Rs=function(r){var o=zs(r,Fu),u=wt,s=function(b,x){var M=Math.max(ks(),b+x);return[M-b]},f=function(b){var x=o()+b;Hu(r,x)},m=function(b,x){return Hl(b,r,x)};return{width:o,pixelWidth:o,getWidths:m,getCellDelta:u,singleColumnWidth:s,minCellWidth:ks,setElementWidth:Hu,adjustTableWidth:f,isRelative:!1,label:"pixel"}},h1=function(r,o){var u=iw().exec(o);return u!==null?Il(r):Rs(r)},p1=function(r){var o=wi(r);return o.fold(function(){return Zc(r)},function(u){return h1(r,u)})},Qc={getTableSize:p1,pixelSize:Rs,percentageSize:Il,noneSize:Zc},b1=function(r,o,u,s,f,m){return{minRow:r,minCol:o,maxRow:u,maxCol:s,allCells:f,selectedCells:m}},y1=function(r,o){var u=r.grid.columns,s=r.grid.rows,f=s,m=u,b=0,x=0,M=[],R=[];return er(r.access,function(P){if(M.push(P),o(P)){R.push(P);var ie=P.row,Te=ie+P.rowspan-1,pe=P.column,ue=pe+P.colspan-1;ie<f?f=ie:Te>b&&(b=Te),pe<m?m=pe:ue>x&&(x=ue)}}),b1(f,m,b,x,M,R)},w1=function(r,o,u){var s=r[u].element,f=ke.fromTag("td");Er(f,ke.fromTag("br"));var m=o?Er:Ya;m(s,f)},bg=function(r,o,u,s){for(var f=o.grid.columns,m=o.grid.rows,b=0;b<m;b++)for(var x=!1,M=0;M<f;M++)if(!(b<u.minRow||b>u.maxRow||M<u.minCol||M>u.maxCol)){var R=Wt.getAt(o,b,M).filter(s).isNone();R?w1(r,x,b):x=!0}},Sn=function(r,o,u,s){er(u.columns,function(b){(b.column<o.minCol||b.column>o.maxCol)&&Fo(b.element)});var f=It(Vc(r,"tr"),function(b){return b.dom.childElementCount===0});it(f,Fo),(o.minCol===o.maxCol||o.minRow===o.maxRow)&&it(Vc(r,"th,td"),function(b){ur(b,"rowspan"),ur(b,"colspan")}),ur(r,Da),ur(r,"data-snooker-col-series");var m=Qc.getTableSize(r);m.adjustTableWidth(s)},yt=function(r,o,u,s){if(s.minCol===0&&o.grid.columns===s.maxCol+1)return 0;var f=Hl(o,r,u),m=or(f,function(R,P){return R+P},0),b=or(f.slice(s.minCol,s.maxCol+1),function(R,P){return R+P},0),x=b/m*u.pixelWidth(),M=x-u.pixelWidth();return u.getCellDelta(M)},Bs=function(r,o){var u=function(Te){return Wr(Te.element,o)},s=ya(r),f=qv(s),m=Qc.getTableSize(r),b=Wt.generate(f),x=y1(b,u),M="th:not("+o+"),td:not("+o+")",R=Bf(s,"th,td",function(Te){return Wr(Te,M)});it(R,Fo),bg(f,b,x,u);var P=Wt.fromTable(r),ie=yt(r,P,m,x);return Sn(s,x,b,ie),s},yg="",Iu=function(r){return Tn(r)==="img"?1:Zp(r).fold(function(){return I(r).length},function(o){return o.length})},S1=function(r){return Zp(r).filter(function(o){return o.trim().length!==0||o.indexOf(yg)>-1}).isSome()},rr=["img","br"],wg=function(r){var o=S1(r);return o||Ct(rr,Tn(r))},fd=function(r){return Rf(r,wg)},vd=function(r){return we(r,wg)},we=function(r,o){var u=function(s){for(var f=I(s),m=f.length-1;m>=0;m--){var b=f[m];if(o(b))return _.some(b);var x=u(b);if(x.isSome())return x}return _.none()};return u(r)},Sg={scope:["row","col"]},xg=function(r){return function(){var o=ke.fromTag("td",r.dom);return Er(o,ke.fromTag("br",r.dom)),o}},$l=function(r){return function(){return ke.fromTag("col",r.dom)}},x1=function(r){return function(){return ke.fromTag("colgroup",r.dom)}},Fs=function(r){return function(){return ke.fromTag("tr",r.dom)}},Cg=function(r,o,u){var s=yi(r,o);return er(u,function(f,m){f===null?ur(s,m):Yr(s,m,f)}),s},Hs=function(r){return r},cw=function(r,o,u){var s=fd(r);return s.map(function(f){var m=u.join(","),b=cc(f,m,function(x){return sn(x,r)});return Hn(b,function(x,M){var R=fu(M);return ur(R,"contenteditable"),Er(x,R),R},o)}).getOr(o)},Ll=function(r,o){er(Sg,function(u,s){return zn(r,s).filter(function(f){return Ct(u,f)}).each(function(f){return Yr(o,s,f)})})},br=function(r,o,u){var s=function(b,x){Wv(b.element,x),zu(x,"height"),b.colspan!==1&&zu(x,"width")},f=function(b){var x=ke.fromTag(Tn(b.element),o.dom),M=u.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),R=M.length>0?cw(b.element,x,M):x;return Er(R,ke.fromTag("br")),s(b,x),Ll(b.element,x),r(b.element,x),x},m=function(b){var x=ke.fromTag(Tn(b.element),o.dom);return s(b,x),r(b.element,x),x};return{col:m,colgroup:x1(o),row:Fs(o),cell:f,replace:Cg,colGap:$l(o),gap:xg(o)}},vu=function(r){return{col:$l(r),colgroup:x1(r),row:Fs(r),cell:xg(r),replace:Hs,colGap:$l(r),gap:xg(r)}},sw=function(r,o){var u=o||document,s=u.createElement("div");return s.innerHTML=r,I(ke.fromDom(s))},du=function(r){return Ne(r,ke.fromDom)},lw=function(r){return r.nodeName.toLowerCase()},bc=function(r){return ke.fromDom(r.getBody())},Pl=function(r){return r.getBoundingClientRect().width},C1=function(r){return r.getBoundingClientRect().height},yc=function(r){return function(o){return sn(o,bc(r))}},fw=function(r){return r?r.replace(/px$/,""):""},$u=function(r){return/^\d+(\.\d+)?$/.test(r)?r+"px":r},oi=function(r){ur(r,"data-mce-style");var o=function(u){return ur(u,"data-mce-style")};it(fc(r),o),it(Uc(r),o),it(Jo(r),o)},vw=function(r,o){var u=r.dom.getStyle(o,"width")||r.dom.getAttrib(o,"width");return _.from(u).filter(pn)},dw=function(r){return/^(\d+(\.\d+)?)%$/.test(r)},mw=function(r){return/^(\d+(\.\d+)?)px$/.test(r)},Is=function(r){return ke.fromDom(r.selection.getStart())},rt=function(r){return ke.fromDom(r.selection.getEnd())},dd=function(r){return cg(r.get(),Ae([]),wt,Y)},gw=function(r){var o=function(f,m){return zn(f,m).exists(function(b){return parseInt(b,10)>1})},u=function(f){return o(f,"rowspan")||o(f,"colspan")},s=dd(r);return s.length>0&&Ce(s,u)?_.some(s):_.none()},hw=function(r,o,u){return cg(o.get(),_.none,function(s){return s.length<=1?_.none():nd(r,u.firstSelectedSelector,u.lastSelectedSelector).map(function(f){return{bounds:f,cells:s}})},_.none)},jf="data-mce-selected",pw="td["+jf+"],th["+jf+"]",Tg="["+jf+"]",$s="data-mce-first-selected",Nl="td["+$s+"],th["+$s+"]",Og="data-mce-last-selected",md="td["+Og+"],th["+Og+"]",bw=Tg,Ls={selected:jf,selectedSelector:pw,firstSelected:$s,firstSelectedSelector:Nl,lastSelected:Og,lastSelectedSelector:md},kg=function(r){return{element:r,mergable:_.none(),unmergable:_.none(),selection:[r]}},Ps=function(r,o,u){return{element:u,mergable:hw(o,r,Ls),unmergable:gw(r),selection:dd(r)}},yw=function(r,o,u){return{element:r,clipboard:o,generators:u}},T1=function(r,o,u,s){return{selection:dd(r),clipboard:u,generators:s}},O1=function(r){return vr(r).bind(function(o){return jr(o,Ls.firstSelectedSelector)}).fold(Ae(r),function(o){return o[0]})},k1=function(r){return function(o,u){var s=Tn(o),f=s==="col"||s==="colgroup"?O1(o):o;return Ar(f,r,u)}},Vl=k1("th,td,caption"),ii=k1("th,td"),Ja=function(r){return dd(r)},ww=function(r,o){var u=ii(r),s=u.bind(function(f){return vr(f)}).map(function(f){return Jo(f)});return bi(u,s,function(f,m){return It(m,function(b){return p(du(b.dom.cells),function(x){return Eu(x,o)==="1"||sn(x,f)})})}).getOr([])},Sw=function(r){return vr(r[0]).map(function(o){var u=Bs(o,bw);return oi(u),[u]})},xw=function(r,o){return Ne(o,function(u){return r.selection.serializer.serialize(u.dom,{})}).join("")},A1=function(r){return Ne(r,function(o){return o.dom.innerText}).join("")},Vi=function(r,o,u){r.on("BeforeGetContent",function(s){var f=function(m){s.preventDefault(),Sw(m).each(function(b){s.content=s.format==="text"?A1(b):xw(r,b)})};s.selection===!0&&cg(o.get(),We,f,We)}),r.on("BeforeSetContent",function(s){if(s.selection===!0&&s.paste===!0){var f=Ja(o);ze(f).each(function(m){vr(m).each(function(b){var x=It(sw(s.content),function(Te){return Tn(Te)!=="meta"}),M=Br("table");if(x.length===1&&M(x[0])){s.preventDefault();var R=ke.fromDom(r.getDoc()),P=vu(R),ie=yw(m,x[0],P);u.pasteCells(b,ie).each(function(){r.focus()})}})})}})},Cw=Bu.generate([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}]),Ul=Re({},Cw),Tw=function(r,o){return r.length===0?Ul.none():r.length===1?Ul.only(0):o===0?Ul.left(0,1):o===r.length-1?Ul.right(o-1,o):o>0&&o<r.length-1?Ul.middle(o-1,o,o+1):Ul.none()},Ow=function(r,o,u,s,f){var m=r.slice(0),b=Tw(r,o),x=Ae(Ne(m,Ae(0))),M=function(Te){return s.singleColumnWidth(m[Te],u)},R=function(Te,pe){return f.calcLeftEdgeDeltas(m,Te,pe,u,s.minCellWidth(),s.isRelative)},P=function(Te,pe,ue){return f.calcMiddleDeltas(m,Te,pe,ue,u,s.minCellWidth(),s.isRelative)},ie=function(Te,pe){return f.calcRightEdgeDeltas(m,Te,pe,u,s.minCellWidth(),s.isRelative)};return b.fold(x,M,R,P,ie)},M1=function(r,o,u){for(var s=0,f=r;f<o;f++)s+=u[f]!==void 0?u[f]:0;return s},kw=function(r,o){var u=Wt.justCells(r);return Ne(u,function(s){var f=M1(s.column,s.column+s.colspan,o);return{element:s.element,width:f,colspan:s.colspan}})},Ag=function(r,o){var u=Wt.justColumns(r);return Ne(u,function(s,f){return{element:s.element,width:o[f],colspan:s.colspan}})},Aw=function(r,o){var u=Wt.justCells(r);return Ne(u,function(s){var f=M1(s.row,s.row+s.rowspan,o);return{element:s.element,height:f,rowspan:s.rowspan}})},Mw=function(r,o){return Ne(r.all,function(u,s){return{element:u.element,height:o[s]}})},Ew=function(r){return Hn(r,function(o,u){return o+u},0)},Dw=function(r,o){return Wt.hasColumns(r)?Ag(r,o):kw(r,o)},Mg=function(r,o,u){var s=Dw(r,o);it(s,function(f){u.setElementWidth(f.element,f.width)})},E1=function(r,o,u,s,f){var m=Wt.fromTable(r),b=f.getCellDelta(o),x=f.getWidths(m,f),M=u===m.grid.columns-1,R=s.clampTableDelta(x,u,b,f.minCellWidth(),M),P=Ow(x,u,R,f,s),ie=Ne(P,function(Te,pe){return Te+x[pe]});Mg(m,ie,f),s.resizeTable(f.adjustTableWidth,R,M)},_w=function(r,o,u,s){var f=Wt.fromTable(r),m=uw(f,r,s),b=Ne(m,function(P,ie){return u===ie?Math.max(o+P,lc()):P}),x=Aw(f,b),M=Mw(f,b);it(M,function(P){Yc(P.element,P.height)}),it(x,function(P){Yc(P.element,P.height)});var R=Ew(b);Yc(r,R)},zw=function(r,o,u,s,f){var m=Wt.generate(o),b=s.getWidths(m,s),x=s.pixelWidth(),M=f.calcRedestributedWidths(b,x,u.pixelDelta,s.isRelative),R=M.newSizes,P=M.delta;Mg(m,R,s),s.adjustTableWidth(P)},mu=function(r,o,u,s){var f=Wt.generate(o),m=s.getWidths(f,s);Mg(f,m,s)},Lu=function(r){return Ne(r,Ae(0))},D1=function(r,o,u,s,f){return f(r.slice(0,o)).concat(s).concat(f(r.slice(u)))},_1=function(r){return function(o,u,s,f){if(r(s)){var m=Math.max(f,o[u]-Math.abs(s)),b=Math.abs(m-o[u]);return s>=0?b:-b}else return s}},gd=_1(function(r){return r<0}),Rw=_1(ge),z1=function(){var r=function(x,M,R,P,ie){var Te=gd(x,M,P,ie);return D1(x,M,R+1,[Te,0],Lu)},o=function(x,M,R,P){var ie=(100+R)/100,Te=Math.max(P,(x[M]+R)/ie);return Ne(x,function(pe,ue){var _e=ue===M?Te:pe/ie;return _e-pe})},u=function(x,M,R,P,ie,Te){return Te?o(x,M,P,ie):r(x,M,R,P,ie)},s=function(x,M,R,P,ie,Te,pe){return u(x,R,P,ie,Te,pe)},f=function(x,M){return x(M)},m=function(x,M,R,P,ie,Te){if(Te)return o(x,R,P,ie);var pe=gd(x,R,P,ie);return Lu(x.slice(0,R)).concat([pe])},b=function(x,M,R,P){if(P){var ie=M+R,Te=ie/M,pe=Ne(x,function(ue){return ue/Te});return{delta:Te*100-100,newSizes:pe}}else return{delta:R,newSizes:x}};return{resizeTable:f,clampTableDelta:gd,calcLeftEdgeDeltas:u,calcMiddleDeltas:s,calcRightEdgeDeltas:m,calcRedestributedWidths:b}},Gf=function(){var r=function(b,x,M,R,P){var ie=R>=0?M:x,Te=Rw(b,ie,R,P);return D1(b,x,M+1,[Te,-Te],Lu)},o=function(b,x,M,R,P,ie){return r(b,M,R,P,ie)},u=function(b,x,M){M&&b(x)},s=function(b,x,M,R,P,ie){if(ie)return Lu(b);var Te=R/b.length;return Ne(b,Ae(Te))},f=function(b,x,M,R,P){if(P){if(M>=0)return M;var ie=or(b,function(Te,pe){return Te+pe-R},0);return Math.max(-ie,M)}else return gd(b,x,M,R)},m=function(b,x,M,R){return{delta:0,newSizes:b}};return{resizeTable:u,clampTableDelta:f,calcLeftEdgeDeltas:r,calcMiddleDeltas:o,calcRightEdgeDeltas:s,calcRedestributedWidths:m}},Bw=function(r,o){var u=_.from(r.dom.documentElement).map(ke.fromDom).getOr(r);return{parent:Ae(u),view:Ae(r),origin:Ae(lr(0,0)),isResizable:o}},Fw=function(r,o,u){var s=function(){return Kc(o)};return{parent:Ae(o),view:Ae(r),origin:s,isResizable:u}},hd=function(r,o,u){return{parent:Ae(o),view:Ae(r),origin:Ae(lr(0,0)),isResizable:u}},Eg={only:Bw,detached:Fw,body:hd},qf=Bu.generate([{invalid:["raw"]},{pixels:["value"]},{percent:["value"]}]),R1=function(r,o,u){var s=u.substring(0,u.length-r.length),f=parseFloat(s);return s===f.toString()?o(f):qf.invalid(u)},Sa=function(r){return yn(r,"%")?R1("%",qf.percent,r):yn(r,"px")?R1("px",qf.pixels,r):qf.invalid(r)},Ns=Re(Re({},qf),{from:Sa}),Gr=function(r,o){return Ne(r,function(u){var s=Ns.from(u);return s.fold(function(){return u},function(f){var m=f/o*100;return m+"%"},function(f){return f+"%"})})},Si=function(r,o,u){var s=u/o;return Ne(r,function(f){var m=Ns.from(f);return m.fold(function(){return f},function(b){return b*s+"px"},function(b){return b/100*u+"px"})})},Vs=function(r,o){var u=r.fold(function(){return Ae("")},function(s){var f=s/o;return Ae(f+"px")},function(){var s=100/o;return Ae(s+"%")});return tn(o,u)},Pu=function(r,o,u){return r.fold(function(){return o},function(s){return Si(o,u,s)},function(s){return Gr(o,u)})},B1=function(r,o,u){var s=Ns.from(u),f=Ce(r,function(m){return m==="0px"})?Vs(s,r.length):Pu(s,r,o);return Iw(f)},Nu=function(r,o){return r.length===0?o:Hn(r,function(u,s){return Ns.from(s).fold(Ae(0),wt,wt)+u},0)},Kf=function(r,o){var u=Math.floor(r);return{value:u+o,remainder:r-u}},Hw=function(r,o){return Ns.from(r).fold(Ae(r),function(u){return u+o+"px"},function(u){return u+o+"%"})},Iw=function(r){if(r.length===0)return r;var o=Hn(r,function(s,f){var m=Ns.from(f).fold(function(){return{value:f,remainder:0}},function(b){return Kf(b,"px")},function(b){return{value:b+"%",remainder:0}});return{output:[m.value].concat(s.output),remainder:s.remainder+m.remainder}},{output:[],remainder:0}),u=o.output;return u.slice(0,u.length-1).concat([Hw(u[u.length-1],Math.round(o.remainder))])},$w=Ns.from,Lw=function(r,o,u){it(o,function(s){var f=r.slice(s.column,s.colspan+s.column),m=Nu(f,ks());Pr(s.element,"width",m+u)})},Pw=function(r,o,u){it(o,function(s,f){var m=Nu([r[f]],ks());Pr(s.element,"width",m+u)})},Nw=function(r,o,u,s){it(u,function(f){var m=r.slice(f.row,f.rowspan+f.row),b=Nu(m,lc());Pr(f.element,"height",b+s)}),it(o,function(f,m){Pr(f.element,"height",r[m])})},F1=function(r){return $w(r).fold(Ae("px"),Ae("px"),Ae("%"))},H1=function(r,o,u){var s=Wt.fromTable(r),f=s.all,m=Wt.justCells(s),b=Wt.justColumns(s);o.each(function(x){var M=F1(x),R=Fu(r),P=ld(s,r),ie=B1(P,R,x);Wt.hasColumns(s)?Pw(ie,b,M):Lw(ie,m,M),Pr(r,"width",x)}),u.each(function(x){var M=F1(x),R=ni(r),P=pg(s,r,fg),ie=B1(P,R,x);Nw(ie,f,m,M),Pr(r,"height",x)})},I1=aw,es=ow,pd=Nr,Dg=function(r){var o=Wt.fromTable(r);return o.grid},Ui=function(r){var o=[],u=function(m){if(m===void 0)throw new Error("Event bind error: undefined handler");o.push(m)},s=function(m){o=It(o,function(b){return b!==m})},f=function(){for(var m=[],b=0;b<arguments.length;b++)m[b]=arguments[b];var x={};it(r,function(M,R){x[M]=m[R]}),it(o,function(M){M(x)})};return{bind:u,unbind:s,trigger:f}},ea=function(r){var o=Au(r,function(s){return{bind:s.bind,unbind:s.unbind}}),u=Au(r,function(s){return s.trigger});return{registry:o,trigger:u}},xi=function(r,o){var u=null,s=function(){$t(u)||(clearTimeout(u),u=null)},f=function(){for(var m=[],b=0;b<arguments.length;b++)m[b]=arguments[b];s(),u=setTimeout(function(){u=null,r.apply(null,m)},o)};return{cancel:s,throttle:f}},Wl=function(r){return r.slice(0).sort()},$1=function(r,o){throw new Error("All required keys ("+Wl(r).join(", ")+") were not specified. Specified keys were: "+Wl(o).join(", ")+".")},L1=function(r){throw new Error("Unsupported keys for object: "+Wl(r).join(", "))},Vw=function(r,o){if(!kt(o))throw new Error("The "+r+" fields must be an array. Was: "+o+".");it(o,function(u){if(!dt(u))throw new Error("The value "+u+" in the "+r+" fields was not a string.")})},Uw=function(r,o){throw new Error("All values need to be of type: "+o+". Keys ("+Wl(r).join(", ")+") were not.")},P1=function(r){var o=Wl(r),u=Se(o,function(s,f){return f<o.length-1&&s===o[f+1]});u.each(function(s){throw new Error("The field: "+s+" occurs more than once in the combined fields: ["+o.join(", ")+"].")})},bd=function(r,o){return Ww(r,o,{validate:tt,label:"function"})},Ww=function(r,o,u){if(o.length===0)throw new Error("You must specify at least one required field.");return Vw("required",o),P1(o),function(s){var f=Ua(s),m=Ce(o,function(x){return Ct(f,x)});m||$1(o,f),r(o,f);var b=It(o,function(x){return!u.validate(s[x],x)});return b.length>0&&Uw(b,u.label),s}},ta=function(r,o){var u=It(o,function(s){return!Ct(r,s)});u.length>0&&L1(u)},Ci=function(r){return bd(ta,r)},jw=Ci(["compare","extract","mutate","sink"]),N1=Ci(["element","start","stop","destroy"]),Gw=Ci(["forceDrop","drop","move","delayDrop"]),Us=function(){var r=_.none(),o=function(){r=_.none()},u=function(m,b){var x=r.map(function(M){return m.compare(M,b)});return r=_.some(b),x},s=function(m,b){var x=b.extract(m);x.each(function(M){var R=u(b,M);R.each(function(P){f.trigger.move(P)})})},f=ea({move:Ui(["info"])});return{onEvent:s,reset:o,events:f.registry}},V1=function(){var r=ea({move:Ui(["info"])});return{onEvent:We,reset:We,events:r.registry}},jl=function(){var r=V1(),o=Us(),u=r,s=function(){u.reset(),u=o},f=function(){u.reset(),u=r},m=function(x,M){u.onEvent(x,M)},b=function(){return u===o};return{on:s,off:f,isOn:b,onEvent:m,events:o.events}},_g=function(r,o,u){var s=!1,f=ea({start:Ui([]),stop:Ui([])}),m=jl(),b=function(){pe.stop(),m.isOn()&&(m.off(),f.trigger.stop())},x=xi(b,200),M=function(_e){pe.start(_e),m.on(),f.trigger.start()},R=function(_e){x.cancel(),m.onEvent(_e,o)};m.events.move.bind(function(_e){o.mutate(r,_e.info)});var P=function(){s=!0},ie=function(){s=!1},Te=function(_e){return function(){for(var Fe=[],ut=0;ut<arguments.length;ut++)Fe[ut]=arguments[ut];s&&_e.apply(null,Fe)}},pe=o.sink(Gw({forceDrop:b,drop:Te(b),move:Te(R),delayDrop:Te(x.throttle)}),u),ue=function(){pe.destroy()};return{element:pe.element,go:M,on:P,off:ie,destroy:ue,events:f.registry}},qw=function(r,o,u,s,f,m,b){return{target:r,x:o,y:u,stop:s,prevent:f,kill:m,raw:b}},U1=function(r){var o=ke.fromDom(uc(r).getOr(r.target)),u=function(){return r.stopPropagation()},s=function(){return r.preventDefault()},f=be(s,u);return qw(o,r.clientX,r.clientY,u,s,f,r)},Kw=function(r,o){return function(u){r(u)&&o(U1(u))}},Xw=function(r,o,u,s,f){var m=Kw(u,s);return r.dom.addEventListener(o,m,f),{unbind:je(zg,r,o,m,f)}},Yw=function(r,o,u,s){return Xw(r,o,u,s,!1)},zg=function(r,o,u,s){r.dom.removeEventListener(o,u,s)},Jw=ge,Ws=function(r,o,u){return Yw(r,o,Jw,u)},js=U1,Rg=function(r,o){var u=Eu(r,o);return u===void 0||u===""?[]:u.split(" ")},Zw=function(r,o,u){var s=Rg(r,o),f=s.concat([u]);return Yr(r,o,f.join(" ")),!0},Qw=function(r,o,u){var s=It(Rg(r,o),function(f){return f!==u});return s.length>0?Yr(r,o,s.join(" ")):ur(r,o),!1},Gs=function(r){return r.dom.classList!==void 0},qs=function(r){return Rg(r,"class")},yd=function(r,o){return Zw(r,"class",o)},An=function(r,o){return Qw(r,"class",o)},na=function(r,o){Gs(r)?r.dom.classList.add(o):yd(r,o)},Ks=function(r){var o=Gs(r)?r.dom.classList:qs(r);o.length===0&&ur(r,"class")},Bg=function(r,o){if(Gs(r)){var u=r.dom.classList;u.remove(o)}else An(r,o);Ks(r)},Jn=function(r,o){return Gs(r)&&r.dom.classList.contains(o)},Fg=function(r){var o=r.replace(/\./g,"-"),u=function(s){return o+"-"+s};return{resolve:u}},W1=Fg("ephox-dragster"),xa=W1.resolve,ts=function(r){var o=Re({layerClass:xa("blocker")},r),u=ke.fromTag("div");Yr(u,"role","presentation"),_u(u,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),na(u,xa("blocker")),na(u,o.layerClass);var s=Ae(u),f=function(){Fo(u)};return{element:s,destroy:f}},e3=function(r,o){return lr(o.left-r.left,o.top-r.top)},t3=function(r){return _.some(lr(r.x,r.y))},n3=function(r,o){r.mutate(o.left,o.top)},wd=function(r,o){var u=ts(o),s=Ws(u.element(),"mousedown",r.forceDrop),f=Ws(u.element(),"mouseup",r.drop),m=Ws(u.element(),"mousemove",r.move),b=Ws(u.element(),"mouseout",r.delayDrop),x=function(){u.destroy(),f.unbind(),m.unbind(),b.unbind(),s.unbind()},M=function(P){Er(P,u.element())},R=function(){Fo(u.element())};return N1({element:u.element,start:M,stop:R,destroy:x})},Hg=jw({compare:e3,extract:t3,sink:wd,mutate:n3}),Ig=function(r,o){o===void 0&&(o={});var u=o.mode!==void 0?o.mode:Hg;return _g(r,u,o)},Sd=function(r){return Ar(r,"[contenteditable]")},Xf=function(r,o){return o===void 0&&(o=!1),!xt().browser.isIE()&&pi(r)?r.dom.isContentEditable:Sd(r).fold(Ae(o),function(u){return $g(u)==="true"})},$g=function(r){return r.dom.contentEditable},j1=Fg("ephox-snooker"),Yf=j1.resolve,Gl=function(){var r=ea({drag:Ui(["xDelta","yDelta"])}),o=function(u,s){r.trigger.drag(u,s)};return{mutate:o,events:r.registry}},Ti=function(){var r=ea({drag:Ui(["xDelta","yDelta","target"])}),o=_.none(),u=Gl();u.events.drag.bind(function(m){o.each(function(b){r.trigger.drag(m.xDelta,m.yDelta,b)})});var s=function(m){o=_.some(m)},f=function(){return o};return{assign:s,get:f,mutate:u.mutate,events:r.registry}},r3=function(r,o,u,s,f){var m=ke.fromTag("div");return _u(m,{position:"absolute",left:o-s/2+"px",top:u+"px",height:f+"px",width:s+"px"}),Lr(m,{"data-column":r,role:"presentation"}),m},_a=function(r,o,u,s,f){var m=ke.fromTag("div");return _u(m,{position:"absolute",left:o+"px",top:u-f/2+"px",height:f+"px",width:s+"px"}),Lr(m,{"data-row":r,role:"presentation"}),m},Lg=Yf("resizer-bar"),wc=Yf("resizer-rows"),Pg=Yf("resizer-cols"),Ng=7,G1=function(r,o){return xe(r.all,function(u,s){return o(u.element)?[s]:[]})},Vg=function(r,o){var u=[];return tn(r.grid.columns,function(s){var f=Wt.getColumnAt(r,s).map(function(m){return m.element});f.forall(o)&&u.push(s)}),It(u,function(s){var f=Wt.filterItems(r,function(m){return m.column===s});return Ce(f,function(m){return o(m.element)})})},Jf=function(r){var o=Ro(r.parent(),"."+Lg);it(o,Fo)},Ug=function(r,o,u){var s=r.origin();it(o,function(f){f.each(function(m){var b=u(s,m);na(b,Lg),Er(r.parent(),b)})})},a3=function(r,o,u,s){Ug(r,o,function(f,m){var b=r3(m.col,m.x-f.left,u.top-f.top,Ng,s);return na(b,Pg),b})},o3=function(r,o,u,s){Ug(r,o,function(f,m){var b=_a(m.row,u.left-f.left,m.y-f.top,s,Ng);return na(b,wc),b})},La=function(r,o,u,s,f){var m=Kc(u),b=o.isResizable,x=s.length>0?fg.positions(s,u):[],M=x.length>0?G1(r,b):[],R=It(x,function(pe,ue){return p(M,function(_e){return ue===_e})});o3(o,R,m,Io(u));var P=f.length>0?_l.positions(f,u):[],ie=P.length>0?Vg(r,b):[],Te=It(P,function(pe,ue){return p(ie,function(_e){return ue===_e})});a3(o,Te,m,od(u))},la=function(r,o){if(Jf(r),r.isResizable(o)){var u=Wt.fromTable(o),s=El(u),f=ad(u);La(u,r,o,s,f)}},co=function(r,o){var u=Ro(r.parent(),"."+Lg);it(u,o)},ko=function(r){co(r,function(o){Pr(o,"display","none")})},Lo=function(r){co(r,function(o){Pr(o,"display","block")})},Pa=function(r){return Jn(r,wc)},Wg=function(r){return Jn(r,Pg)},jg=Yf("resizer-bar-dragging"),q1=function(r){var o=Ti(),u=Ig(o,{}),s=_.none(),f=function(ue,_e){return _.from(Eu(ue,_e))};o.events.drag.bind(function(ue){f(ue.target,"data-row").each(function(_e){var Fe=Ol(ue.target,"top");Pr(ue.target,"top",Fe+ue.yDelta+"px")}),f(ue.target,"data-column").each(function(_e){var Fe=Ol(ue.target,"left");Pr(ue.target,"left",Fe+ue.xDelta+"px")})});var m=function(ue,_e){var Fe=Ol(ue,_e),ut=Li(ue,"data-initial-"+_e,0);return Fe-ut};u.events.stop.bind(function(){o.get().each(function(ue){s.each(function(_e){f(ue,"data-row").each(function(Fe){var ut=m(ue,"top");ur(ue,"data-initial-top"),pe.trigger.adjustHeight(_e,ut,parseInt(Fe,10))}),f(ue,"data-column").each(function(Fe){var ut=m(ue,"left");ur(ue,"data-initial-left"),pe.trigger.adjustWidth(_e,ut,parseInt(Fe,10))}),la(r,_e)})})});var b=function(ue,_e){pe.trigger.startAdjust(),o.assign(ue),Yr(ue,"data-initial-"+_e,Ol(ue,_e)),na(ue,jg),Pr(ue,"opacity","0.2"),u.go(r.parent())},x=Ws(r.parent(),"mousedown",function(ue){Pa(ue.target)&&b(ue.target,"top"),Wg(ue.target)&&b(ue.target,"left")}),M=function(ue){return sn(ue,r.view())},R=function(ue){return Ar(ue,"table",M).filter(Xf)},P=Ws(r.view(),"mouseover",function(ue){R(ue.target).fold(function(){pi(ue.target)&&Jf(r)},function(_e){s=_.some(_e),la(r,_e)})}),ie=function(){x.unbind(),P.unbind(),u.destroy(),Jf(r)},Te=function(ue){la(r,ue)},pe=ea({adjustHeight:Ui(["table","delta","row"]),adjustWidth:Ui(["table","delta","column"]),startAdjust:Ui([])});return{destroy:ie,refresh:Te,on:u.on,off:u.off,hideBars:je(ko,r),showBars:je(Lo,r),events:pe.registry}},K1=function(r,o,u){var s=fg,f=_l,m=q1(r),b=ea({beforeResize:Ui(["table","type"]),afterResize:Ui(["table","type"]),startDrag:Ui([])});return m.events.adjustHeight.bind(function(x){var M=x.table;b.trigger.beforeResize(M,"row");var R=s.delta(x.delta,M);_w(M,R,x.row,s),b.trigger.afterResize(M,"row")}),m.events.startAdjust.bind(function(x){b.trigger.startDrag()}),m.events.adjustWidth.bind(function(x){var M=x.table;b.trigger.beforeResize(M,"col");var R=f.delta(x.delta,M),P=u(M);E1(M,R,x.column,o,P),b.trigger.afterResize(M,"col")}),{on:m.on,off:m.off,hideBars:m.hideBars,showBars:m.showBars,destroy:m.destroy,events:b.registry}},X1={create:K1},Gg=function(r,o){return r.fire("newrow",{node:o})},xd=function(r,o){return r.fire("newcell",{node:o})},qg=function(r,o,u,s,f){r.fire("ObjectResizeStart",{target:o,width:u,height:s,origin:f})},i3=function(r,o,u,s,f){r.fire("ObjectResized",{target:o,width:u,height:s,origin:f})},u3=function(r,o,u,s,f){r.fire("TableSelectionChange",{cells:o,start:u,finish:s,otherCells:f})},c3=function(r){r.fire("TableSelectionClear")},Vu=function(r,o,u){r.fire("TableModified",Re(Re({},u),{table:o}))},Cd={structure:!1,style:!0},ra={structure:!0,style:!1},s3={structure:!0,style:!0},l3="tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol",Kg={"border-collapse":"collapse",width:"100%"},f3=tn(5,function(r){var o=r+1+"px";return{title:o,value:o}}),Y1=Ne(["Solid","Dotted","Dashed","Double","Groove","Ridge","Inset","Outset","None","Hidden"],function(r){return{title:r,value:r.toLowerCase()}}),Be=function(r){var o;if(ql(r)){var u=r.dom,s=(o=u.getParent(r.selection.getStart(),u.isBlock))!==null&&o!==void 0?o:r.getBody(),f=kn(ke.fromDom(s));return Re(Re({},Kg),{width:f+"px"})}else return Kl(r)?gi(Kg,function(m,b){return b!=="width"}):Kg},v3={border:"1"},fa="preservetable",Xg=function(r){return r.getParam("table_sizing_mode","auto")},Yg=function(r){return r.getParam("table_responsive_width")},J1=function(r){return r.getParam("table_border_widths",f3,"array")},ui=function(r){return r.getParam("table_border_styles",Y1,"array")},Jg=function(r){return r.getParam("table_default_attributes",v3,"object")},Zg=function(r){return r.getParam("table_default_styles",Be(r),"object")},Z1=function(r){return r.getParam("table_resize_bars",!0,"boolean")},Sc=function(r){return r.getParam("table_tab_navigation",!0,"boolean")},Qg=function(r){return r.getParam("table_cell_advtab",!0,"boolean")},Td=function(r){return r.getParam("table_row_advtab",!0,"boolean")},Po=function(r){return r.getParam("table_advtab",!0,"boolean")},gu=function(r){return r.getParam("table_appearance_options",!0,"boolean")},Q1=function(r){return r.getParam("table_grid",!0,"boolean")},so=function(r){return r.getParam("table_style_by_css",!1,"boolean")},eh=function(r){return r.getParam("table_cell_class_list",[],"array")},e0=function(r){return r.getParam("table_row_class_list",[],"array")},Zf=function(r){return r.getParam("table_class_list",[],"array")},Qf=function(r){return Xg(r)==="relative"||Yg(r)===!0},ql=function(r){return Xg(r)==="fixed"||Yg(r)===!1},Kl=function(r){return Xg(r)==="responsive"},d3=function(r){return r.getParam("table_toolbar",l3)},t0=function(r){return r.getParam("table_use_colgroups",!1,"boolean")},n0=function(r){var o="section",u=r.getParam("table_header_type",o,"string"),s=["section","cells","sectionCells","auto"];return Ct(s,u)?u:o},th=function(r){var o=["preservetable","resizetable"],u=r.getParam("table_column_resizing",fa,"string");return Se(o,function(s){return s===u}).getOr(fa)},r0=function(r){return th(r)==="preservetable"},a0=function(r){return th(r)==="resizetable"},o0=function(r){var o=r.getParam("table_clone_elements");return dt(o)?_.some(o.split(/[ ,]/)):Array.isArray(o)?_.some(o):_.none()},nh=function(r){var o=r.getParam("object_resizing",!0);return dt(o)?o==="table":o},i0=function(r){return r.getParam("table_background_color_map",[],"array")},rh=function(r){return r.getParam("table_border_color_map",[],"array")},u0=function(r,o){return Qf(r)?Qc.percentageSize(o):ql(r)?Qc.pixelSize(o):Qc.getTableSize(o)},Xs=function(r){ur(r,"width")},m3=function(r){var o=Fl(r);H1(r,_.some(o),_.none()),Xs(r)},g3=function(r){var o=rw(r);H1(r,_.some(o),_.none()),Xs(r)},h3=function(r){zu(r,"width");var o=Uc(r),u=o.length>0?o:fc(r);it(u,function(s){zu(s,"width"),Xs(s)}),Xs(r)},ev=m3,ah=g3,Od=h3,c0=function(r){var o=Wt.fromTable(r);Wt.hasColumns(o)||it(fc(r),function(u){var s=su(u,"width");Pr(u,"width",s),ur(u,"width")})},Xl=function(){var r=ke.fromTag("div");return _u(r,{position:"static",height:"0",width:"0",padding:"0",margin:"0",border:"0"}),Er(zf(),r),r},p3=function(r,o){return r.inline?Eg.body(bc(r),Xl(),o):Eg.only(ke.fromDom(r.getDoc()),o)},Fr=function(r,o){r.inline&&Fo(o.parent())},kd="bar-",Vr=function(r){return Eu(r,"data-mce-resize")!=="false"},Ad=function(r){var o=_.none(),u=_.none(),s=_.none(),f,m,b=function(ue){return ue.nodeName==="TABLE"},x=function(){return u},M=function(){return s.getOr(Eg.only(ke.fromDom(r.getBody()),Vr))},R=function(ue){return u0(r,ue)},P=function(){return r0(r)?Gf():z1()},ie=function(ue){return Dg(ue).columns},Te=function(ue,_e,Fe){var ut=yn(_e,"e");if(m===""&&ev(ue),Fe!==f&&m!==""){Pr(ue,"width",m);var xn=P(),vt=R(ue),At=r0(r)||ut?ie(ue)-1:0;E1(ue,Fe-f,At,xn,vt)}else if(dw(m)){var un=parseFloat(m.replace("%","")),Yt=Fe*un/f;Pr(ue,"width",Yt+"%")}mw(m)&&c0(ue)},pe=function(){u.each(function(ue){ue.destroy()}),s.each(function(ue){Fr(r,ue)})};return r.on("init",function(){var ue=p3(r,Vr);if(s=_.some(ue),nh(r)&&Z1(r)){var _e=P(),Fe=X1.create(ue,_e,R);Fe.on(),Fe.events.startDrag.bind(function(ut){o=_.some(r.selection.getRng())}),Fe.events.beforeResize.bind(function(ut){var xn=ut.table.dom;qg(r,xn,Pl(xn),C1(xn),kd+ut.type)}),Fe.events.afterResize.bind(function(ut){var xn=ut.table,vt=xn.dom;oi(xn),o.each(function(At){r.selection.setRng(At),r.focus()}),i3(r,vt,Pl(vt),C1(vt),kd+ut.type),r.undoManager.add()}),u=_.some(Fe)}}),r.on("ObjectResizeStart",function(ue){var _e=ue.target;if(b(_e)){var Fe=ke.fromDom(_e);it(r.dom.select(".mce-clonedresizable"),function(ut){r.dom.addClass(ut,"mce-"+th(r)+"-columns")}),!es(Fe)&&ql(r)?ah(Fe):!I1(Fe)&&Qf(r)&&ev(Fe),pd(Fe)&&hn(ue.origin,kd)&&ev(Fe),f=ue.width,m=Kl(r)?"":vw(r,_e).getOr("")}}),r.on("ObjectResized",function(ue){var _e=ue.target;if(b(_e)){var Fe=ke.fromDom(_e),ut=ue.origin;hn(ut,"corner-")&&Te(Fe,ut,ue.width),oi(Fe),Vu(r,Fe.dom,Cd)}}),r.on("SwitchMode",function(){x().each(function(ue){r.mode.isReadOnly()?ue.hideBars():ue.showBars()})}),{lazyResize:x,lazyWire:M,destroy:pe}},Yl=function(r,o){return{element:r,offset:o}},oh=function(r,o,u){return r.property().isText(o)&&r.property().getText(o).trim().length===0||r.property().isComment(o)?u(o).bind(function(s){return oh(r,s,u).orThunk(function(){return _.some(s)})}):_.none()},tv=function(r,o){if(r.property().isText(o))return r.property().getText(o).length;var u=r.property().children(o);return u.length},s0=function(r,o){var u=oh(r,o,r.query().prevSibling).getOr(o);if(r.property().isText(u))return Yl(u,tv(r,u));var s=r.property().children(u);return s.length>0?s0(r,s[s.length-1]):Yl(u,tv(r,u))},b3=s0,y3=Nf(),w3=function(r){return b3(y3,r)},S3=function(r,o){var u=Tl(r,"colspan");if(u===1){var s=Wf(r);s.each(function(f){var m=f.value/2;Bl(r,m,f.unit),Bl(o,m,f.unit)})}},Md=Br("th"),Ed=function(r){return Ce(r,function(o){return Md(o.element)})},x3=function(r,o){return r&&o?"sectionCells":r?"section":"cells"},l0=function(r){var o=r.section==="thead",u=Nc(ih(r.cells),"th");return o||u?{type:"header",subType:x3(o,u)}:r.section==="tfoot"?{type:"footer"}:{type:"body"}},ih=function(r){var o=It(r,function(u){return Md(u.element)});return o.length===0?_.some("td"):o.length===r.length?_.some("th"):_.none()},C3=function(r){var o=Ne(r,function(m){return l0(m).type}),u=Ct(o,"header"),s=Ct(o,"footer");if(!u&&!s)return _.some("body");var f=Ct(o,"body");return u&&!f&&!s?_.some("header"):!u&&!f&&s?_.some("footer"):_.none()},T3=function(r){return gt(r.all,function(o){var u=l0(o);return u.type==="header"?_.from(u.subType):_.none()})},uh=function(r,o,u){return ha(u(r.element,o),!0,r.isLocked)},ch=function(r,o){return r.section!==o?hi(r.element,r.cells,o,r.isNew):r},sh=function(){return{transformRow:ch,transformCell:function(r,o,u){var s=u(r.element,o),f=Tn(s)!=="td"?jy(s,"td"):s;return ha(f,r.isNew,r.isLocked)}}},f0=function(){return{transformRow:ch,transformCell:uh}},Jl=function(){return{transformRow:function(r,o){var u=o==="thead"?"tbody":o;return ch(r,u)},transformCell:uh}},v0=function(){return{transformRow:wt,transformCell:uh}},O3=function(r,o){var u=Wt.fromTable(r),s=T3(u).getOr(o);switch(s){case"section":return sh();case"sectionCells":return f0();case"cells":return Jl()}},nv={getTableSectionType:O3,section:sh,sectionCells:f0,cells:Jl,fallback:v0},rv=function(r,o,u,s){u===s?ur(r,o):Yr(r,o,u)},Ys=function(r,o,u){mt(Vt(r,o)).fold(function(){return Ya(r,u)},function(s){return tr(s,u)})},Dd=function(r,o){var u=_t(r,o).getOrThunk(function(){var s=ke.fromTag(o,iu(r).dom);return o==="thead"?Ys(r,"caption,colgroup",s):o==="colgroup"?Ys(r,"caption",s):Er(r,s),s});return Lf(u),u},_d=function(r,o){var u=[],s=[],f=function(pe){return Ne(pe,function(ue){ue.isNew&&u.push(ue.element);var _e=ue.element;return Lf(_e),it(ue.cells,function(Fe){Fe.isNew&&s.push(Fe.element),rv(Fe.element,"colspan",Fe.colspan,1),rv(Fe.element,"rowspan",Fe.rowspan,1),Er(_e,Fe.element)}),_e})},m=function(pe){return xe(pe,function(ue){return Ne(ue.cells,function(_e){return rv(_e.element,"span",_e.colspan,1),_e.element})})},b=function(pe,ue){var _e=Dd(r,ue),Fe=ue==="colgroup"?m:f,ut=Fe(pe);Ru(_e,ut)},x=function(pe){_t(r,pe).each(Fo)},M=function(pe,ue){pe.length>0?b(pe,ue):x(ue)},R=[],P=[],ie=[],Te=[];return it(o,function(pe){switch(pe.section){case"thead":R.push(pe);break;case"tbody":P.push(pe);break;case"tfoot":ie.push(pe);break;case"colgroup":Te.push(pe);break}}),M(Te,"colgroup"),M(R,"thead"),M(P,"tbody"),M(ie,"tfoot"),{newRows:u,newCells:s}},lh=function(r){return Ne(r,function(o){var u=fu(o.element);return it(o.cells,function(s){var f=ya(s.element);rv(f,"colspan",s.colspan,1),rv(f,"rowspan",s.rowspan,1),Er(u,f)}),u})},k3=function(r,o){return Ne(r,function(u){return Qo(u,o)})},xc=function(r,o){return r[o]},zd=function(r,o){if(r.length===0)return 0;var u=r[0],s=Ke(r,function(f){return!o(u.element,f.element)});return s.getOr(r.length)},A3=function(r,o,u,s){var f=xc(r,o),m=f.section==="colgroup",b=zd(f.cells.slice(u),s),x=m?1:zd(k3(r.slice(o),u),s);return{colspan:b,rowspan:x}},ns=function(r,o){var u=Ne(r,function(f){return Ne(f.cells,rn)}),s=function(f,m,b,x){for(var M=f;M<f+b;M++)for(var R=m;R<m+x;R++)u[M][R]=!0};return Ne(r,function(f,m){var b=xe(f.cells,function(x,M){if(u[m][M]===!1){var R=A3(r,m,M,o);return s(m,M,R.rowspan,R.colspan),[$n(x.element,R.rowspan,R.colspan,x.isNew)]}else return[]});return Hi(f.element,b,f.section,f.isNew)})},rs=function(r,o,u){var s=[];it(r.colgroups,function(P){for(var ie=[],Te=0;Te<r.grid.columns;Te++){var pe=Wt.getColumnAt(r,Te).map(function(ue){return ha(ue.element,u,!1)}).getOrThunk(function(){return ha(o.colGap(),!0,!1)});ie.push(pe)}s.push(hi(P.element,ie,"colgroup",u))});for(var f=0;f<r.grid.rows;f++){for(var m=[],b=0;b<r.grid.columns;b++){var x=Wt.getAt(r,f,b).map(function(P){return ha(P.element,u,P.isLocked)}).getOrThunk(function(){return ha(o.gap(),!0,!1)});m.push(x)}var M=r.all[f],R=hi(M.element,m,M.section,u);s.push(R)}return s},M3=function(r,o){return rs(r,o,!1)},Rd=function(r){return ns(r,sn)},fh=function(r,o){return gt(r.all,function(u){return Se(u.cells,function(s){return sn(o,s.element)})})},vh=function(r,o,u){var s=Ne(o.selection,function(m){return kl(m).bind(function(b){return fh(r,b)}).filter(u)}),f=Jr(s);return Yn(f.length>0,f)},Ca=function(r,o,u,s,f){return function(m,b,x,M,R){var P=Wt.fromTable(b),ie=_.from(R==null?void 0:R.section).getOrThunk(nv.fallback),Te=o(P,x).map(function(pe){var ue=M3(P,M),_e=r(ue,pe,sn,f(M),ie),Fe=Xa(_e.grid),ut=Rd(_e.grid);return{info:pe,grid:ut,cursor:_e.cursor,lockedColumns:Fe}});return Te.bind(function(pe){var ue=_d(b,pe.grid),_e=_.from(R==null?void 0:R.sizing).getOrThunk(function(){return Qc.getTableSize(b)}),Fe=_.from(R==null?void 0:R.resize).getOrThunk(Gf);return u(b,pe.grid,pe.info,{sizing:_e,resize:Fe,section:ie}),s(b),la(m,b),ur(b,Da),pe.lockedColumns.length>0&&Yr(b,Da,pe.lockedColumns.join(",")),_.some({cursor:pe.cursor,newRows:ue.newRows,newCells:ue.newCells})})}},E3=function(r,o){return kl(o.element).bind(function(u){return fh(r,u).map(function(s){var f=Re(Re({},s),{generators:o.generators,clipboard:o.clipboard});return f})})},dh=function(r,o){return vh(r,o,ge).map(function(u){return{cells:u,generators:o.generators,clipboard:o.clipboard}})},d0=function(r,o){return o.mergable},D3=function(r,o){return o.unmergable},hu=function(r,o){return vh(r,o,ge)},Cc=function(r,o){return vh(r,o,function(u){return!u.isLocked})},_3=function(r,o){return fh(r,o).exists(function(u){return!u.isLocked})},m0=function(r,o){return Ce(o,function(u){return _3(r,u)})},mh=function(r,o){return d0(r,o).filter(function(u){return m0(r,u.cells)})},gh=function(r,o){return D3(r,o).filter(function(u){return m0(r,u)})},g0=function(r,o,u,s){var f=Ea(r).rows;if(f.length===0)return r;for(var m=o.startRow;m<=o.finishRow;m++)for(var b=o.startCol;b<=o.finishCol;b++){var x=f[m],M=Qo(x,b).isLocked;As(x,b,ha(s(),!1,M))}return r},h0=function(r,o,u,s){for(var f=Ea(r).rows,m=!0,b=0;b<f.length;b++)for(var x=0;x<ei(f[0]);x++){var M=f[b],R=Qo(M,x),P=R.element,ie=u(P,o);ie===!0&&m===!1?As(M,x,ha(s(),!0,R.isLocked)):ie===!0&&(m=!1)}return r},z3=function(r,o){return or(r,function(u,s){return p(u,function(f){return o(f.element,s.element)})?u:u.concat([s])},[])},R3=function(r,o,u,s){return o>0&&o<r[0].cells.length&&it(r,function(f){var m=f.cells[o-1],b=f.cells[o],x=u(b.element,m.element);x&&As(f,o,ha(s(),!0,b.isLocked))}),r},B3=function(r,o,u,s){var f=Ea(r).rows;if(o>0&&o<f.length){var m=f[o-1].cells,b=z3(m,u);it(b,function(x){for(var M=_.none(),R=o;R<f.length;R++)for(var P=function(Te){var pe=f[R],ue=Qo(pe,Te),_e=u(ue.element,x.element);_e&&(M.isNone()&&(M=_.some(s())),M.each(function(Fe){As(pe,Te,ha(Fe,!0,ue.isLocked))}))},ie=0;ie<ei(f[0]);ie++)P(ie)})}return r},Zl=function(r){var o=function(ie){return Zl(r)},u=function(ie){return Zl(r)},s=function(ie){return Zl(ie(r))},f=function(ie){return Zl(r)},m=function(ie){ie(r)},b=function(ie){return ie(r)},x=function(ie,Te){return Te(r)},M=function(ie){return ie(r)},R=function(ie){return ie(r)},P=function(){return _.some(r)};return{isValue:ge,isError:rn,getOr:Ae(r),getOrThunk:Ae(r),getOrDie:Ae(r),or:o,orThunk:u,fold:x,map:s,mapError:f,each:m,bind:b,exists:M,forall:R,toOptional:P}},Js=function(r){var o=function(R){return R()},u=function(){return Pn(String(r))()},s=wt,f=function(R){return R()},m=function(R){return Js(r)},b=function(R){return Js(R(r))},x=function(R){return Js(r)},M=function(R,P){return R(r)};return{isValue:rn,isError:ge,getOr:wt,getOrThunk:o,getOrDie:u,or:s,orThunk:f,fold:M,map:m,mapError:b,each:We,bind:x,exists:rn,forall:ge,toOptional:_.none}},hh=function(r,o){return r.fold(function(){return Js(o)},Zl)},p0={value:Zl,error:Js,fromOption:hh},F3=function(r,o,u){if(r.row>=o.length||r.column>ei(o[0]))return p0.error("invalid start address out of table bounds, row: "+r.row+", column: "+r.column);var s=o.slice(r.row),f=s[0].cells.slice(r.column),m=ei(u[0]),b=u.length;return p0.value({rowDelta:s.length-b,colDelta:f.length-m})},b0=function(r,o){var u=ei(r[0]),s=ei(o[0]);return{rowDelta:0,colDelta:u-s}},y0=function(r,o){var u=r.length,s=o.length;return{rowDelta:u-s,colDelta:0}},ph=function(r,o,u,s){var f=o.section==="colgroup"?u.col:u.cell;return tn(r,function(m){return ha(f(),!0,s(m))})},H3=function(r,o,u,s){var f=r[r.length-1];return r.concat(tn(o,function(){var m=f.section==="colgroup"?u.colgroup:u.row,b=Zr(f,m,wt),x=ph(b.cells.length,b,u,function(M){return A(s,M.toString())});return Xv(b,x)}))},Bd=function(r,o,u,s){return Ne(r,function(f){var m=ph(o,f,u,rn);return Wc(f,s,m)})},I3=function(r,o,u){return Ne(r,function(s){return or(u,function(f,m){var b=ph(1,s,o,ge)[0];return Hf(f,m,b)},s)})},av=function(r,o,u){var s=o.colDelta<0?Bd:wt,f=o.rowDelta<0?H3:wt,m=Xa(r),b=ei(r[0]),x=p(m,function(P){return P===b-1}),M=s(r,Math.abs(o.colDelta),u,x?b-1:b),R=Xa(M);return f(M,Math.abs(o.rowDelta),u,ce(R,ge))},$3=function(r,o,u,s){var f=Qo(r[o],u),m=je(s,f.element),b=r[o];return r.length>1&&ei(b)>1&&(u>0&&m(Ka(b,u-1))||u<b.cells.length-1&&m(Ka(b,u+1))||o>0&&m(Ka(r[o-1],u))||o<r.length-1&&m(Ka(r[o+1],u)))},L3=function(r,o,u,s,f,m){for(var b=r.row,x=r.column,M=u.length,R=ei(u[0]),P=b+M,ie=x+R+m.length,Te=ce(m,ge),pe=b;pe<P;pe++)for(var ue=0,_e=x;_e<ie;_e++){if(Te[_e]){ue++;continue}$3(o,pe,_e,f)&&h0(o,Ka(o[pe],_e),f,s.cell);var Fe=_e-x-ue,ut=Qo(u[pe-b],Fe),xn=ut.element,vt=s.replace(xn);As(o[pe],_e,ha(vt,!0,ut.isLocked))}return o},P3=function(r,o,u){var s=ei(o[0]),f=Ea(o).cols.length+r.row,m=tn(s-r.column,function(x){return x+r.column}),b=Se(m,function(x){return Ce(u,function(M){return M!==x})}).getOr(s-1);return{row:f,column:b}},w0=function(r,o,u){return It(u,function(s){return s>=r.column&&s<=ei(o[0])+r.column})},N3=function(r,o,u,s,f){var m=Xa(o),b=P3(r,o,m),x=Ea(u).rows,M=w0(b,x,m),R=F3(b,o,x);return R.map(function(P){var ie=Re(Re({},P),{colDelta:P.colDelta-M.length}),Te=av(o,ie,s),pe=Xa(Te),ue=w0(b,x,pe);return L3(b,Te,x,s,f,ue)})},Ql=function(r,o,u,s,f){R3(o,r,f,s.cell);var m=y0(u,o),b=av(u,m,s),x=y0(o,b),M=av(o,x,s);return Ne(M,function(R,P){return Wc(R,r,b[P].cells)})},S0=function(r,o,u,s,f){B3(o,r,f,s.cell);var m=Xa(o),b=b0(o,u),x=Re(Re({},b),{colDelta:b.colDelta-m.length}),M=av(o,x,s),R=Ea(M),P=R.cols,ie=R.rows,Te=Xa(M),pe=b0(u,o),ue=Re(Re({},pe),{colDelta:pe.colDelta+Te.length}),_e=I3(u,s,Te),Fe=av(_e,ue,s);return P.concat(ie.slice(0,r)).concat(Fe).concat(ie.slice(r,ie.length))},V3=function(r,o,u,s){return Zr(r,function(f){return s(f,u)},o)},bh=function(r,o,u,s,f){var m=Ea(r),b=m.rows,x=m.cols,M=b.slice(0,o),R=b.slice(o),P=V3(b[u],function(ie,Te){var pe=o>0&&o<b.length&&s(Ka(b[o-1],Te),Ka(b[o],Te)),ue=pe?Qo(b[o],Te):ha(f(ie.element,s),!0,ie.isLocked);return ue},s,f);return x.concat(M).concat([P]).concat(R)},x0=function(r,o,u,s,f,m,b){if(u==="colgroup"||!s){var x=Qo(r,f);return ha(b(x.element,m),!0,!1)}else return Qo(r,o)},yh=function(r,o,u,s,f){return Ne(r,function(m){var b=o>0&&o<ei(m)&&s(Ka(m,o-1),Ka(m,o)),x=x0(m,o,m.section,b,u,s,f);return Hf(m,o,x)})},U3=function(r,o){return xe(r,function(u){var s=u.cells,f=Hn(o,function(m,b){return b>=0&&b<m.length?m.slice(0,b).concat(m.slice(b+1)):m},s);return f.length>0?[hi(u.element,f,u.section,u.isNew)]:[]})},W3=function(r,o,u){var s=Ea(r),f=s.rows,m=s.cols;return m.concat(f.slice(0,o)).concat(f.slice(u+1))},ov=function(r,o,u,s){return Ka(r[o],u)!==void 0&&o>0&&s(Ka(r[o-1],u),Ka(r[o],u))},C0=function(r,o,u){return o>0&&u(Ka(r,o-1),Ka(r,o))},T0=function(r,o,u,s){return ov(r,o,u,s)||C0(r[o],u,s)},j3=function(r,o){var u=Ce(o,wt)&&Ed(r.cells);return u?ge:function(s,f,m){var b=Tn(s.element);return!(b==="th"&&o[m])}},G3=function(r,o){var u=Ce(o,wt)&&Ed(r);return u?ge:function(s,f,m){var b=Tn(s.element);return!(b==="th"&&o[f])}},wh=function(r,o,u,s){var f=function(x){return x==="row"?jv(o):Os(o)},m=function(x){return f(x)?x+"group":x};if(r)return Md(o)?m(u):null;if(s&&Md(o)){var b=u==="row"?"col":"row";return m(b)}else return null},q3=function(r,o){return function(u,s,f){return _.some(wh(r,u.element,"col",o[f]))}},O0=function(r,o){return function(u,s){return _.some(wh(r,u.element,"row",o[s]))}},k0=function(r,o,u){return ha(u(r.element,o),!0,r.isLocked)},Fd=function(r,o,u,s,f,m,b){var x=function(M){return p(o,function(R){return u(M.element,R.element)})};return Ne(r,function(M,R){return Xm(M,function(P,ie){if(x(P)){var Te=b(P,R,ie)?f(P,u,s):P;return m(Te,R,ie).each(function(pe){qm(Te.element,{scope:_.from(pe)})}),Te}else return P})})},A0=function(r,o,u){return xe(r,function(s,f){return T0(r,f,o,u)?[]:[Qo(s,o)]})},K3=function(r,o,u){var s=r[o];return xe(s.cells,function(f,m){return T0(r,o,m,u)?[]:[f]})},M0=function(r,o,u,s,f){var m=Ea(r).rows,b=xe(o,function(P){return A0(m,P,s)}),x=Ne(r,function(P){return Ed(P.cells)}),M=G3(b,x),R=O0(u,x);return Fd(r,b,s,f,k0,R,M)},X3=function(r,o,u,s,f,m,b){var x=Ea(r),M=x.cols,R=x.rows,P=R[o[0]],ie=xe(o,function(ut){return K3(R,ut,f)}),Te=Ne(P.cells,function(ut,xn){return Ed(A0(R,xn,f))}),pe=cn([],R,!0);it(o,function(ut){pe[ut]=b.transformRow(R[ut],u)});var ue=M.concat(pe),_e=j3(P,Te),Fe=q3(s,Te);return Fd(ue,ie,f,m,b.transformCell,Fe,_e)},E0=function(r,o,u,s){var f=Ea(r).rows,m=Ne(o,function(b){return Qo(f[b.row],b.column)});return Fd(r,m,u,s,k0,_.none,ge)},ef=function(r){var o=function(u,s){var f=p(u,function(m){return m.column===s.column});return f?u:u.concat([s])};return or(r,o,[]).sort(function(u,s){return u.column-s.column})},Za=Br("col"),D0=Br("colgroup"),_0=function(r){return Tn(r)==="tr"||D0(r)},Y3=function(r){var o=Li(r,"colspan",1),u=Li(r,"rowspan",1);return{element:r,colspan:o,rowspan:u}},z0=function(r,o){o===void 0&&(o=Y3);var u=function(x){return Za(x.element)?r.col(x):r.cell(x)},s=function(x){return D0(x.element)?r.colgroup(x):r.row(x)},f=function(x){if(_0(x))return s({element:x});var M=u(o(x));return m=_.some({item:x,replacement:M}),M},m=_.none(),b=function(x,M){return m.fold(function(){return f(x)},function(R){return M(x,R.item)?R.replacement:f(x)})};return{getOrInit:b}},J3=function(r){return function(o){var u=[],s=function(b,x){return Se(u,function(M){return x(M.item,b)})},f=function(b){var x=r==="td"?{scope:null}:{},M=o.replace(b,r,x);return u.push({item:b,sub:M}),M},m=function(b,x){return _0(b)||Za(b)?b:s(b,x).fold(function(){return f(b)},function(M){return x(b,M.item)?M.sub:f(b)})};return{replaceOrInit:m}}},R0=function(r){return zn(r,"scope").map(function(o){return o.substr(0,3)})},B0=function(r){var o=function(s){var f=R0(s);return f.each(function(m){return Yr(s,"scope",m)}),function(){var m=r.cell({element:s,colspan:1,rowspan:1});return zu(m,"width"),zu(s,"width"),f.each(function(b){return Yr(m,"scope",b)}),m}},u=function(s){var f=function(){var m=Jr(Ne(s,R0));if(m.length===0)return _.none();var b=m[0],x=["row","col"],M=p(m,function(R){return R!==b&&Ct(x,R)});return M?_.none():_.from(b)};return zu(s[0],"width"),f().fold(function(){return ur(s[0],"scope")},function(m){return Yr(s[0],"scope",m+"group")}),Ae(s[0])};return{unmerge:o,merge:u}},No={modification:z0,transform:J3,merging:B0},Hd=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],Z3=function(r,o){var u=r.property().name(o);return Ct(["ol","ul"],u)},F0=function(r,o){var u=r.property().name(o);return Ct(Hd,u)},H0=function(r,o){return Ct(["br","img","hr","input"],r.property().name(o))},Sh=Nf(),xh=function(r){return F0(Sh,r)},Id=function(r){return Z3(Sh,r)},I0=function(r){return H0(Sh,r)},$0=function(r){var o=function(M){return Tn(M)==="br"},u=function(M){return Ce(M,function(R){return o(R)||Ko(R)&&Zv(R).trim().length===0})},s=function(M){return Tn(M)==="li"||ja(M,Id).isSome()},f=function(M){return E(M).map(function(R){return xh(R)?!0:I0(R)?Tn(R)!=="img":!1}).getOr(!1)},m=function(M){return vd(M).bind(function(R){var P=f(R);return Or(R).map(function(ie){return P===!0||s(ie)||o(R)||xh(ie)&&!sn(M,ie)?[]:[ke.fromTag("br")]})}).getOr([])},b=function(){var M=xe(r,function(R){var P=I(R);return u(P)?[]:P.concat(m(R))});return M.length===0?[ke.fromTag("br")]:M},x=b();Lf(r[0]),Ru(r[0],x)},Ch=function(r){return Xf(r,!0)},Th=function(r){var o=fc(r);o.length===0&&Fo(r)},iv=function(r,o){return{grid:r,cursor:o}},L0=function(r){return gt(r,function(o){return gt(o.cells,function(u){var s=u.element;return Yn(Ch(s),s)})})},P0=function(r,o,u){var s,f,m=Ea(r).rows;return _.from((f=(s=m[o])===null||s===void 0?void 0:s.cells[u])===null||f===void 0?void 0:f.element).filter(Ch).orThunk(function(){return L0(m)})},lo=function(r,o,u){var s=P0(r,o,u);return iv(r,s)},uv=function(r){var o=function(u,s){var f=p(u,function(m){return m.row===s.row});return f?u:u.concat([s])};return or(r,o,[]).sort(function(u,s){return u.row-s.row})},N0=function(r,o,u,s){var f=o[0].row,m=uv(o),b=Hn(m,function(x,M){var R=bh(x.grid,f,M.row+x.delta,u,s.getOrInit);return{grid:R,delta:x.delta+1}},{grid:r,delta:0}).grid;return lo(b,f,o[0].column)},Q3=function(r,o,u,s){var f=uv(o),m=f[f.length-1],b=m.row+m.rowspan,x=Hn(f,function(M,R){return bh(M,b,R.row,u,s.getOrInit)},r);return lo(x,b,o[0].column)},e4=function(r,o,u,s){var f=o.details,m=ef(f),b=m[0].column,x=Hn(m,function(M,R){var P=yh(M.grid,b,R.column+M.delta,u,s.getOrInit);return{grid:P,delta:M.delta+1}},{grid:r,delta:0}).grid;return lo(x,f[0].row,b)},t4=function(r,o,u,s){var f=o.details,m=f[f.length-1],b=m.column+m.colspan,x=ef(f),M=Hn(x,function(R,P){return yh(R,b,P.column,u,s.getOrInit)},r);return lo(M,f[0].row,b)},n4=function(r,o,u,s){var f=ef(o),m=Ne(f,function(x){return x.column}),b=M0(r,m,!0,u,s.replaceOrInit);return lo(b,o[0].row,o[0].column)},r4=function(r,o,u,s){var f=E0(r,o,u,s.replaceOrInit);return lo(f,o[0].row,o[0].column)},a4=function(r,o,u,s){var f=ef(o),m=Ne(f,function(x){return x.column}),b=M0(r,m,!1,u,s.replaceOrInit);return lo(b,o[0].row,o[0].column)},o4=function(r,o,u,s){var f=E0(r,o,u,s.replaceOrInit);return lo(f,o[0].row,o[0].column)},Oh=function(r,o){return function(u,s,f,m,b){var x=uv(s),M=Ne(x,function(P){return P.row}),R=X3(u,M,r,o,f,m.replaceOrInit,b);return lo(R,s[0].row,s[0].column)}},i4=Oh("thead",!0),u4=Oh("tbody",!1),V0=Oh("tfoot",!1),U0=function(r,o,u,s){var f=ef(o.details),m=U3(r,Ne(f,function(x){return x.column})),b=m.length>0?m[0].cells.length-1:0;return lo(m,f[0].row,Math.min(f[0].column,b))},c4=function(r,o,u,s){var f=uv(o),m=W3(r,f[0].row,f[f.length-1].row),b=m.length>0?m.length-1:0;return lo(m,Math.min(o[0].row,b),o[0].column)},s4=function(r,o,u,s){var f=o.cells;$0(f);var m=g0(r,o.bounds,u,s.merge(f));return iv(m,_.from(f[0]))},l4=function(r,o,u,s){var f=function(b,x){return h0(b,x,u,s.unmerge(x))},m=Hn(o,f,r);return iv(m,_.from(o[0]))},f4=function(r,o,u,s){var f=function(M,R){var P=Wt.fromTable(M);return rs(P,R,!0)},m=f(o.clipboard,o.generators),b=_n(o.row,o.column),x=N3(b,r,m,o.generators,u);return x.fold(function(){return iv(r,_.some(o.element))},function(M){return lo(M,o.row,o.column)})},$d=function(r,o,u){var s=Kv(r,u.section),f=Wt.generate(s);return rs(f,o,!0)},fo=function(r,o,u,s){var f=Ea(r).rows,m=o.cells[0].column,b=f[o.cells[0].row],x=$d(o.clipboard,o.generators,b),M=Ql(m,r,x,o.generators,u);return lo(M,o.cells[0].row,o.cells[0].column)},Ld=function(r,o,u,s){var f=Ea(r).rows,m=o.cells[o.cells.length-1].column+o.cells[o.cells.length-1].colspan,b=f[o.cells[0].row],x=$d(o.clipboard,o.generators,b),M=Ql(m,r,x,o.generators,u);return lo(M,o.cells[0].row,o.cells[0].column)},Pd=function(r,o,u,s){var f=Ea(r).rows,m=o.cells[0].row,b=f[m],x=$d(o.clipboard,o.generators,b),M=S0(m,r,x,o.generators,u);return lo(M,o.cells[0].row,o.cells[0].column)},W0=function(r,o,u,s){var f=Ea(r).rows,m=o.cells[o.cells.length-1].row+o.cells[o.cells.length-1].rowspan,b=f[o.cells[0].row],x=$d(o.clipboard,o.generators,b),M=S0(m,r,x,o.generators,u);return lo(M,o.cells[0].row,o.cells[0].column)},v4=function(r,o){var u=Wt.fromTable(r),s=hu(u,o);return s.bind(function(f){var m=f[f.length-1],b=f[0].column,x=m.column+m.colspan,M=$r(Ne(u.all,function(R){return It(R.cells,function(P){return P.column>=b&&P.column<x})}));return ih(M)}).getOr("")},j0=function(r,o){var u=Wt.fromTable(r),s=hu(u,o);return s.bind(ih).getOr("")},Zs=function(r,o){var u=Wt.fromTable(r),s=hu(u,o);return s.bind(function(f){var m=f[f.length-1],b=f[0].row,x=m.row+m.rowspan,M=u.all.slice(b,x);return C3(M)}).getOr("")},Nd=function(r,o,u,s){return mu(r,o,u,s.sizing)},Vd=function(r,o,u,s){return zw(r,o,u,s.sizing,s.resize)},as=function(r,o){return p(o,function(u){return u.column===0&&u.isLocked})},kh=function(r,o){return p(o,function(u){return u.column+u.colspan>=r.grid.columns&&u.isLocked})},Ud=function(r,o){var u=ad(r),s=ef(o);return or(s,function(f,m){var b=u[m.column],x=b.map(Io).getOr(0);return f+x},0)},G0=function(r){return function(o,u){return hu(o,u).filter(function(s){var f=r?as:kh;return!f(o,s)}).map(function(s){return{details:s,pixelDelta:Ud(o,s)}})}},q0=function(r,o){return Cc(r,o).map(function(u){return{details:u,pixelDelta:-Ud(r,u)}})},Ah=function(r){return function(o,u){return dh(o,u).filter(function(s){var f=r?as:kh;return!f(o,s.cells)})}},Wd=No.transform("th"),cv=No.transform("td"),d4=Ca(N0,hu,We,We,No.modification),m4=Ca(Q3,hu,We,We,No.modification),K0=Ca(e4,G0(!0),Vd,We,No.modification),X0=Ca(t4,G0(!1),Vd,We,No.modification),g4=Ca(U0,q0,Vd,Th,No.modification),h4=Ca(c4,hu,We,Th,No.modification),p4=Ca(n4,Cc,We,We,Wd),b4=Ca(a4,Cc,We,We,cv),Y0=Ca(i4,Cc,We,We,Wd),y4=Ca(u4,Cc,We,We,cv),J0=Ca(V0,Cc,We,We,cv),w4=Ca(r4,Cc,We,We,Wd),S4=Ca(o4,Cc,We,We,cv),x4=Ca(s4,mh,Nd,We,No.merging),C4=Ca(l4,gh,Nd,We,No.merging),T4=Ca(f4,E3,Nd,We,No.modification),O4=Ca(fo,Ah(!0),We,We,No.modification),fn=Ca(Ld,Ah(!1),We,We,No.modification),Qs=Ca(Pd,dh,We,We,No.modification),tf=Ca(W0,dh,We,We,No.modification),Mh=v4,k4=j0,jd=Zs,A4=function(r,o,u){var s=function(Ra){return Tn(bc(Ra))==="table"},f=function(Ra){return s(r)===!1||Dg(Ra).rows>1},m=function(Ra){return s(r)===!1||Dg(Ra).columns>1},b=o0(r),x=a0(r)?We:S3,M=function(Ra){switch(n0(r)){case"section":return nv.section();case"sectionCells":return nv.sectionCells();case"cells":return nv.cells();default:return nv.getTableSectionType(Ra,"section")}},R=function(Ra,Sm){return Sm.cursor.fold(function(){var ol=fc(Ra);return ze(ol).filter(pi).map(function(pu){o.clear(Ra);var Ai=r.dom.createRng();return Ai.selectNode(pu.dom),r.selection.setRng(Ai),Yr(pu,"data-mce-selected","1"),Ai})},function(ol){var pu=w3(ol),Ai=r.dom.createRng();return Ai.setStart(pu.element.dom,pu.offset),Ai.setEnd(pu.element.dom,pu.offset),r.selection.setRng(Ai),o.clear(Ra),_.some(Ai)})},P=function(Ra,Sm,ol,pu,Ai){return function(Ku,xm,mf){mf===void 0&&(mf=!1),oi(Ku);var Sv=pu(),xv=ke.fromDom(r.getDoc()),bu=br(ol,xv,b),gf={sizing:u0(r,Ku),resize:a0(r)?z1():Gf(),section:M(Ku)};return Sm(Ku)?Ra(Sv,Ku,xm,bu,gf).bind(function(Cm){it(Cm.newRows,function(Cv){Gg(r,Cv.dom)}),it(Cm.newCells,function(Cv){xd(r,Cv.dom)});var E2=R(Ku,Cm);return pi(Ku)&&(oi(Ku),mf||Vu(r,Ku.dom,Ai)),E2.map(function(Cv){return{rng:Cv,effect:Ai}})}):_.none()}},ie=P(h4,f,We,u,ra),Te=P(g4,m,We,u,ra),pe=P(d4,ge,We,u,ra),ue=P(m4,ge,We,u,ra),_e=P(K0,ge,x,u,ra),Fe=P(X0,ge,x,u,ra),ut=P(x4,ge,We,u,ra),xn=P(C4,ge,We,u,ra),vt=P(O4,ge,We,u,ra),At=P(fn,ge,We,u,ra),un=P(Qs,ge,We,u,ra),Yt=P(tf,ge,We,u,ra),qr=P(T4,ge,We,u,s3),Oa=P(w4,ge,We,u,ra),go=P(S4,ge,We,u,ra),Cn=P(p4,ge,We,u,ra),Rt=P(b4,ge,We,u,ra),dn=P(Y0,ge,We,u,ra),Vn=P(y4,ge,We,u,ra),xr=P(J0,ge,We,u,ra),kc=k4,Nn=Mh,ki=jd;return{deleteRow:ie,deleteColumn:Te,insertRowsBefore:pe,insertRowsAfter:ue,insertColumnsBefore:_e,insertColumnsAfter:Fe,mergeCells:ut,unmergeCells:xn,pasteColsBefore:vt,pasteColsAfter:At,pasteRowsBefore:un,pasteRowsAfter:Yt,pasteCells:qr,makeCellsHeader:Oa,unmakeCellsHeader:go,makeColumnsHeader:Cn,unmakeColumnsHeader:Rt,makeRowsHeader:dn,makeRowsBody:Vn,makeRowsFooter:xr,getTableRowType:ki,getTableCellType:kc,getTableColType:Nn}},Eh={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},colGroups:!1},Dh=function(){return ke.fromTag("th")},Z0=function(){return ke.fromTag("td")},M4=function(){return ke.fromTag("col")},E4=function(r,o,u,s){for(var f=ke.fromTag("tr"),m=0;m<r;m++){var b=s<o||m<u?Dh():Z0();m<u&&Yr(b,"scope","row"),s<o&&Yr(b,"scope","col"),Er(b,ke.fromTag("br")),Er(f,b)}return f},D4=function(r){var o=ke.fromTag("colgroup");return tn(r,function(){return Er(o,M4())}),o},Q0=function(r,o,u,s){return tn(r,function(f){return E4(o,u,s,f)})},_4=function(r,o,u,s,f,m){m===void 0&&(m=Eh);var b=ke.fromTag("table"),x=f!=="cells";_u(b,m.styles),Lr(b,m.attributes),m.colGroups&&Er(b,D4(o));var M=Math.min(r,u);if(x&&u>0){var R=ke.fromTag("thead");Er(b,R);var P=f==="sectionCells"?M:0,ie=Q0(u,o,P,s);Ru(R,ie)}var Te=ke.fromTag("tbody");Er(b,Te);var pe=x?r-M:r,ue=x?0:u,_e=Q0(pe,o,ue,s);return Ru(Te,_e),b},z4=function(r){return r.dom.innerHTML},eb=function(r){var o=ke.fromTag("div"),u=ke.fromDom(r.dom.cloneNode(!0));return Er(o,u),z4(o)},R4=function(r,o){r.selection.select(o.dom,!0),r.selection.collapse(!0)},tb=function(r,o){Bo(o,"td,th").each(je(R4,r))},B4=function(r,o){it(Ro(o,"tr"),function(u){Gg(r,u.dom),it(Ro(u,"th,td"),function(s){xd(r,s.dom)})})},F4=function(r){return dt(r)&&r.indexOf("%")!==-1},_h=function(r,o,u,s,f){var m=Zg(r),b={styles:m,attributes:Jg(r),colGroups:t0(r)};return r.undoManager.ignore(function(){var x=_4(u,o,f,s,n0(r),b);Yr(x,"data-mce-id","__mce");var M=eb(x);r.insertContent(M),r.addVisual()}),Bo(bc(r),'table[data-mce-id="__mce"]').map(function(x){return ql(r)?ah(x):Kl(r)?Od(x):(Qf(r)||F4(m.width))&&ev(x),oi(x),ur(x,"data-mce-id"),B4(r,x),tb(r,x),x.dom}).getOr(null)},nb=function(r,o,u,s,f){s===void 0&&(s={});var m=function(M){return jt(M)&&M>0};if(m(o)&&m(u)){var b=s.headerRows||0,x=s.headerColumns||0;return _h(r,u,o,x,b)}else return console.error(f),null},rb=function(r){return function(){return r().fold(function(){return[]},function(o){return Ne(o,function(u){return u.dom})})}},ab=function(r){return function(o){var u=o.length>0?_.some(du(o)):_.none();r(u)}},H4=function(r){return function(o,u,s){s===void 0&&(s={});var f=nb(r,u,o,s,"Invalid values for insertTable - rows and columns values are required to insert a table.");return r.undoManager.add(),f}},I4=function(r,o,u,s){return{insertTable:H4(r),setClipboardRows:ab(o.setRows),getClipboardRows:rb(o.getRows),setClipboardCols:ab(o.setColumns),getClipboardCols:rb(o.getColumns),resizeHandler:u,selectionTargets:s}},ob=function(r,o,u){var s=Li(r,o,1);u===1||s<=1?ur(r,o):Yr(r,o,Math.min(u,s))},$4=function(r,o,u){if(Wt.hasColumns(r)){var s=It(Wt.justColumns(r),function(b){return b.column>=o&&b.column<u}),f=Ne(s,function(b){var x=ya(b.element);return ob(x,"span",u-o),x}),m=ke.fromTag("colgroup");return Ru(m,f),[m]}else return[]},L4=function(r,o,u){return Ne(r.all,function(s){var f=It(s.cells,function(x){return x.column>=o&&x.column<u}),m=Ne(f,function(x){var M=ya(x.element);return ob(M,"colspan",u-o),M}),b=ke.fromTag("tr");return Ru(b,m),b})},P4=function(r,o){var u=Wt.fromTable(r),s=Cc(u,o);return s.map(function(f){var m=f[f.length-1],b=f[0].column,x=m.column+m.colspan,M=$4(u,b,x),R=L4(u,b,x);return cn(cn([],M,!0),R,!0)})},N4=function(r,o,u){var s=Wt.fromTable(r),f=hu(s,o);return f.bind(function(m){var b=rs(s,u,!1),x=Ea(b).rows,M=x.slice(m[0].row,m[m.length-1].row+m[m.length-1].rowspan),R=xe(M,function(ie){var Te=It(ie.cells,function(pe){return!pe.isLocked});return Te.length>0?[Re(Re({},ie),{cells:Te})]:[]}),P=Rd(R);return Yn(P.length>0,P)}).map(function(m){return lh(m)})},ib=tinymce.util.Tools.resolve("tinymce.util.Tools"),Gd=function(r,o,u){var s=r.select("td,th",o),f,m=function(b,x){for(var M=0;M<x.length;M++){var R=r.getStyle(x[M],u);if(typeof b>"u"&&(b=R),b!==R)return""}return b};return m(f,s)},zh=function(r,o,u){u&&r.formatter.apply("align"+u,{},o)},V4=function(r,o,u){u&&r.formatter.apply("valign"+u,{},o)},Ve=function(r,o){ib.each("left center right".split(" "),function(u){r.formatter.remove("align"+u,{},o)})},va=function(r,o){ib.each("top middle bottom".split(" "),function(u){r.formatter.remove("valign"+u,{},o)})},nf=[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}],Ta=function(r){return{value:r}},Wi=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,ub=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,qd=function(r){return Wi.test(r)||ub.test(r)},Rh=function(r){return st(r,"#").toUpperCase()},U4=function(r){return qd(r)?_.some({value:Rh(r)}):_.none()},Bh=function(r){var o=r.toString(16);return(o.length===1?"0"+o:o).toUpperCase()},Fh=function(r){var o=Bh(r.red)+Bh(r.green)+Bh(r.blue);return Ta(o)},W4=/^rgb\((\d+),\s*(\d+),\s*(\d+)\)/,j4=/^rgba\((\d+),\s*(\d+),\s*(\d+),\s*(\d?(?:\.\d+)?)\)/,Hh=function(r,o,u,s){return{red:r,green:o,blue:u,alpha:s}},Ih=function(r,o,u,s){var f=parseInt(r,10),m=parseInt(o,10),b=parseInt(u,10),x=parseFloat(s);return Hh(f,m,b,x)},G4=function(r){if(r==="transparent")return _.some(Hh(0,0,0,0));var o=W4.exec(r);if(o!==null)return _.some(Ih(o[1],o[2],o[3],"1"));var u=j4.exec(r);return u!==null?_.some(Ih(u[1],u[2],u[3],u[4])):_.none()},cb=function(r){return U4(r).orThunk(function(){return G4(r).map(Fh)}).getOrThunk(function(){var o=document.createElement("canvas");o.height=1,o.width=1;var u=o.getContext("2d");u.clearRect(0,0,o.width,o.height),u.fillStyle="#FFFFFF",u.fillStyle=r,u.fillRect(0,0,1,1);var s=u.getImageData(0,0,1,1).data,f=s[0],m=s[1],b=s[2],x=s[3];return Fh(Hh(f,m,b,x))})},os=function(r){var o=r,u=function(){return o},s=function(f){o=f};return{get:u,set:s}},sv=function(r){var o=os(_.none()),u=function(){return o.get().each(r)},s=function(){u(),o.set(_.none())},f=function(){return o.get().isSome()},m=function(){return o.get()},b=function(x){u(),o.set(_.some(x))};return{clear:s,isSet:f,get:m,set:b}},$h=function(){return sv(function(r){return r.unbind()})},rf=function(){var r=sv(We),o=function(u){return r.get().each(u)};return Re(Re({},r),{on:o})},Lh=function(r,o,u,s){return function(f){var m=$h(),b=mr(s),x=function(){var M=Ja(o),R=function(P){return r.formatter.match(u,{value:s},P.dom,b)};b?(f.setActive(!p(M,R)),m.set(r.formatter.formatChanged(u,function(P){return f.setActive(!P)},!0))):(f.setActive(Ce(M,R)),m.set(r.formatter.formatChanged(u,f.setActive,!1,{value:s})))};return r.initialized?x():r.on("init",x),m.clear}},Ph=function(r){return N(r,"menu")},is=function(r){return Ne(r,function(o){var u=o.text||o.title;return Ph(o)?{text:u,items:is(o.menu)}:{text:u,value:o.value}})},Uu=function(r,o,u,s,f){return Ne(u,function(m){var b=m.text||m.title;return Ph(m)?{type:"nestedmenuitem",text:b,getSubmenuItems:function(){return Uu(r,o,m.menu,s,f)}}:{text:b,type:"togglemenuitem",onAction:function(){return f(m.value)},onSetup:Lh(r,o,s,m.value)}})},af=function(r,o){return function(u){var s;r.execCommand("mceTableApplyCellStyle",!1,(s={},s[o]=u,s))}},lv=function(r){return xe(r,function(o){return Ph(o)?[Re(Re({},o),{menu:lv(o.menu)})]:pn(o.value)?[o]:[]})},fv=function(r,o,u,s,f){return function(m){return m(Uu(r,o,u,s,f))}},Kd=function(r,o,u){var s=Ne(o,function(f){return{text:f.title,value:"#"+cb(f.value).value,type:"choiceitem"}});return[{type:"fancymenuitem",fancytype:"colorswatch",initData:{colors:s.length>0?s:void 0,allowCustomColors:!1},onAction:function(f){var m,b=f.value==="remove"?"":f.value;r.execCommand("mceTableApplyCellStyle",!1,(m={},m[u]=b,m))}}]},Nh=function(r){return function(){var o=r.queryCommandValue("mceTableRowType"),u=o==="header"?"body":"header";r.execCommand("mceTableRowType",!1,{type:u})}},Vh=function(r){return function(){var o=r.queryCommandValue("mceTableColType"),u=o==="th"?"td":"th";r.execCommand("mceTableColType",!1,{type:u})}},q4=function(r){var o=is(eh(r));return o.length>0?_.some({name:"class",type:"listbox",label:"Class",items:o}):_.none()},Xd=[{name:"width",type:"input",label:"Width"},{name:"height",type:"input",label:"Height"},{name:"celltype",type:"listbox",label:"Cell type",items:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{name:"scope",type:"listbox",label:"Scope",items:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{name:"halign",type:"listbox",label:"Horizontal align",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{name:"valign",type:"listbox",label:"Vertical align",items:nf}],za=function(r){return Xd.concat(q4(r).toArray())},ci=function(r,o){var u=[{text:"Select...",value:""}],s=[{name:"borderstyle",type:"listbox",label:"Border style",items:u.concat(is(ui(r)))},{name:"bordercolor",type:"colorinput",label:"Border color"},{name:"backgroundcolor",type:"colorinput",label:"Background color"}],f={name:"borderwidth",type:"input",label:"Border width"},m=o==="cell"?[f].concat(s):s;return{title:"Advanced",name:"advanced",items:m}},ji=function(r){return function(o,u){var s=o.dom,f=function(x,M){(!r||M)&&s.setAttrib(u,x,M)},m=function(x,M){(!r||M)&&s.setStyle(u,x,M)},b=function(x,M){(!r||M)&&(M===""?o.formatter.remove(x,{value:null},u,!0):o.formatter.apply(x,{value:M},u))};return{setAttrib:f,setStyle:m,setFormat:b}}},Wu={normal:ji(!1),ifTruthy:ji(!0)},of=function(r){return function(o){return hn(o,"rgb")?r.toHex(o):o}},Uh=function(r,o){var u=ke.fromDom(o);return{borderwidth:io(u,"border-width").getOr(""),borderstyle:io(u,"border-style").getOr(""),bordercolor:io(u,"border-color").map(of(r)).getOr(""),backgroundcolor:io(u,"background-color").map(of(r)).getOr("")}},Yd=function(r){var o=r[0],u=r.slice(1);return it(u,function(s){it(Ua(o),function(f){er(s,function(m,b){var x=o[f];x!==""&&f===b&&x!==m&&(o[f]="")})})}),o},sb=function(r,o,u,s){return Se(r,function(f){return!mn(u.formatter.matchNode(s,o+f))}).getOr("")},vv=je(sb,["left","center","right"],"align"),K4=je(sb,["top","middle","bottom"],"valign"),Wh=function(r,o){var u=Zg(r),s=Jg(r),f=function(P){return{borderstyle:oo(u,"border-style").getOr(""),bordercolor:of(P)(oo(u,"border-color").getOr("")),backgroundcolor:of(P)(oo(u,"background-color").getOr(""))}},m={height:"",width:"100%",cellspacing:"",cellpadding:"",caption:!1,class:"",align:"",border:""},b=function(){var P=u["border-width"];return so(r)&&P?{border:P}:oo(s,"border").fold(function(){return{}},function(ie){return{border:ie}})},x=o?f(r.dom):{},M=function(){var P=oo(u,"border-spacing").or(oo(s,"cellspacing")).fold(function(){return{}},function(Te){return{cellspacing:Te}}),ie=oo(u,"border-padding").or(oo(s,"cellpadding")).fold(function(){return{}},function(Te){return{cellpadding:Te}});return Re(Re({},P),ie)},R=Re(Re(Re(Re(Re(Re({},m),u),s),x),b()),M());return R},lb=function(r){return vr(ke.fromDom(r)).map(function(o){var u={selection:du(r.cells)};return jd(o,u)}).getOr("")},fb=function(r,o,u){var s=function(x,M){var R=io(ke.fromDom(M),"border-width");return so(r)&&R.isSome()?R.getOr(""):x.getAttrib(M,"border")||Gd(r.dom,M,"border-width")||Gd(r.dom,M,"border")},f=r.dom,m=so(r)?f.getStyle(o,"border-spacing")||f.getAttrib(o,"cellspacing"):f.getAttrib(o,"cellspacing")||f.getStyle(o,"border-spacing"),b=so(r)?Gd(f,o,"padding")||f.getAttrib(o,"cellpadding"):f.getAttrib(o,"cellpadding")||Gd(f,o,"padding");return Re({width:f.getStyle(o,"width")||f.getAttrib(o,"width"),height:f.getStyle(o,"height")||f.getAttrib(o,"height"),cellspacing:m,cellpadding:b,border:s(f,o),caption:!!f.select("caption",o)[0],class:f.getAttrib(o,"class",""),align:vv(r,o)},u?Uh(f,o):{})},jh=function(r,o,u){var s=r.dom;return Re({height:s.getStyle(o,"height")||s.getAttrib(o,"height"),class:s.getAttrib(o,"class",""),type:lb(o),align:vv(r,o)},u?Uh(s,o):{})},Gh=function(r,o,u,s){var f=r.dom,m=s.getOr(o),b=function(x,M){return f.getStyle(x,M)||f.getAttrib(x,M)};return Re({width:b(m,"width"),height:b(o,"height"),scope:f.getAttrib(o,"scope"),celltype:lw(o),class:f.getAttrib(o,"class",""),halign:vv(r,o),valign:K4(r,o)},u?Uh(f,o):{})},jn=function(r,o){var u=Wt.fromTable(r),s=Wt.justCells(u),f=It(s,function(m){return p(o,function(b){return sn(m.element,b)})});return Ne(f,function(m){return{element:m.element.dom,column:Wt.getColumnAt(u,m.column).map(function(b){return b.element.dom})}})},ju=function(r,o,u){r.setAttrib("scope",u.scope),r.setAttrib("class",u.class),r.setStyle("height",$u(u.height)),o.setStyle("width",$u(u.width))},vb=function(r,o){r.setFormat("tablecellbackgroundcolor",o.backgroundcolor),r.setFormat("tablecellbordercolor",o.bordercolor),r.setFormat("tablecellborderstyle",o.borderstyle),r.setFormat("tablecellborderwidth",$u(o.borderwidth))},db=function(r,o,u){var s=o.length===1;it(o,function(f){var m=f.element,b=s?Wu.normal(r,m):Wu.ifTruthy(r,m),x=f.column.map(function(M){return s?Wu.normal(r,M):Wu.ifTruthy(r,M)}).getOr(b);ju(b,x,u),Qg(r)&&vb(b,u),s&&(Ve(r,m),va(r,m)),u.halign&&zh(r,m,u.halign),u.valign&&V4(r,m,u.valign)})},mb=function(r,o){r.execCommand("mceTableCellType",!1,{type:o.celltype,no_events:!0})},qh=function(r,o,u,s){var f=gi(s,function(m,b){return u[b]!==m});Co(f)>0&&o.length>=1&&vr(o[0]).each(function(m){var b=jn(m,o),x=Co(gi(f,function(R,P){return P!=="scope"&&P!=="celltype"}))>0,M=A(f,"celltype");(x||A(f,"scope"))&&db(r,b,s),M&&mb(r,s),Vu(r,m.dom,{structure:M,style:x})})},gb=function(r,o,u,s){var f=s.getData();s.close(),r.undoManager.transact(function(){qh(r,o,u,f),r.focus()})},Kh=function(r,o){var u=vr(o[0]).map(function(s){return Ne(jn(s,o),function(f){return Gh(r,f.element,Qg(r),f.column)})});return Yd(u.getOrDie())},X4=function(r,o){var u=Ja(o);if(u.length!==0){var s=Kh(r,u),f={type:"tabpanel",tabs:[{title:"General",name:"general",items:za(r)},ci(r,"cell")]},m={type:"panel",items:[{type:"grid",columns:2,items:za(r)}]};r.windowManager.open({title:"Cell Properties",size:"normal",body:Qg(r)?f:m,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:s,onSubmit:je(gb,r,u,s)})}},Y4=function(r){var o=is(e0(r));return o.length>0?_.some({name:"class",type:"listbox",label:"Class",items:o}):_.none()},hb=[{type:"listbox",name:"type",label:"Row type",items:[{text:"Header",value:"header"},{text:"Body",value:"body"},{text:"Footer",value:"footer"}]},{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height",type:"input"}],pb=function(r){return hb.concat(Y4(r).toArray())},Xh=function(r,o){r.setAttrib("class",o.class),r.setStyle("height",$u(o.height))},J4=function(r,o){r.setStyle("background-color",o.backgroundcolor),r.setStyle("border-color",o.bordercolor),r.setStyle("border-style",o.borderstyle)},bb=function(r,o,u,s){var f=o.length===1;it(o,function(m){var b=f?Wu.normal(r,m):Wu.ifTruthy(r,m);Xh(b,u),Td(r)&&J4(b,u),u.align!==s.align&&(Ve(r,m),zh(r,m,u.align))})},Z4=function(r,o){r.execCommand("mceTableRowType",!1,{type:o.type,no_events:!0})},Q4=function(r,o,u,s){var f=gi(s,function(x,M){return u[M]!==x});if(Co(f)>0){var m=A(f,"type"),b=m?Co(f)>1:!0;b&&bb(r,o,s,u),m&&Z4(r,s),vr(ke.fromDom(o[0])).each(function(x){return Vu(r,x.dom,{structure:m,style:b})})}},eS=function(r,o,u,s){var f=s.getData();s.close(),r.undoManager.transact(function(){Q4(r,o,u,f),r.focus()})},Oi=function(r){var o=ww(Is(r),Ls.selected);if(o.length!==0){var u=Ne(o,function(b){return jh(r,b.dom,Td(r))}),s=Yd(u),f={type:"tabpanel",tabs:[{title:"General",name:"general",items:pb(r)},ci(r,"row")]},m={type:"panel",items:[{type:"grid",columns:2,items:pb(r)}]};r.windowManager.open({title:"Row Properties",size:"normal",body:Td(r)?f:m,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:s,onSubmit:je(eS,r,Ne(o,function(b){return b.dom}),s)})}},vo=function(r,o,u){var s=u?[{type:"input",name:"cols",label:"Cols",inputMode:"numeric"},{type:"input",name:"rows",label:"Rows",inputMode:"numeric"}]:[],f=[{type:"input",name:"width",label:"Width"},{type:"input",name:"height",label:"Height"}],m=gu(r)?[{type:"input",name:"cellspacing",label:"Cell spacing",inputMode:"numeric"},{type:"input",name:"cellpadding",label:"Cell padding",inputMode:"numeric"},{type:"input",name:"border",label:"Border width"},{type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]}]:[],b=[{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]}],x=o.length>0?[{type:"listbox",name:"class",label:"Class",items:o}]:[];return s.concat(f).concat(m).concat(b).concat(x)},us=function(r,o,u,s){if(o.tagName==="TD"||o.tagName==="TH")dt(u)?r.setStyle(o,u,s):r.setStyle(o,u);else if(o.children)for(var f=0;f<o.children.length;f++)us(r,o.children[f],u,s)},tS=function(r,o,u){var s=r.dom,f={},m={};if(f.class=u.class,m.height=$u(u.height),s.getAttrib(o,"width")&&!so(r)?f.width=fw(u.width):m.width=$u(u.width),so(r)?(m["border-width"]=$u(u.border),m["border-spacing"]=$u(u.cellspacing)):(f.border=u.border,f.cellpadding=u.cellpadding,f.cellspacing=u.cellspacing),so(r)&&o.children)for(var b=0;b<o.children.length;b++)us(s,o.children[b],{"border-width":$u(u.border),padding:$u(u.cellpadding)}),Po(r)&&us(s,o.children[b],{"border-color":u.bordercolor});Po(r)&&(m["background-color"]=u.backgroundcolor,m["border-color"]=u.bordercolor,m["border-style"]=u.borderstyle),f.style=s.serializeStyle(Re(Re({},Zg(r)),m)),s.setAttribs(o,Re(Re({},Jg(r)),f))},nS=function(r,o,u,s){var f=r.dom,m=s.getData(),b=gi(m,function(x,M){return u[M]!==x});s.close(),m.class===""&&delete m.class,r.undoManager.transact(function(){if(!o){var x=parseInt(m.cols,10)||1,M=parseInt(m.rows,10)||1;o=_h(r,x,M,0,0)}if(Co(b)>0){tS(r,o,m);var R=f.select("caption",o)[0];(R&&!m.caption||!R&&m.caption)&&r.execCommand("mceTableToggleCaption"),m.align===""?Ve(r,o):zh(r,o,m.align)}if(r.focus(),r.addVisual(),Co(b)>0){var P=A(b,"caption"),ie=P?Co(b)>1:!0;Vu(r,o,{structure:P,style:ie})}})},yb=function(r,o){var u=r.dom,s,f=Wh(r,Po(r));o===!1?(s=u.getParent(r.selection.getStart(),"table",r.getBody()),s?f=fb(r,s,Po(r)):Po(r)&&(f.borderstyle="",f.bordercolor="",f.backgroundcolor="")):(f.cols="1",f.rows="1",Po(r)&&(f.borderstyle="",f.bordercolor="",f.backgroundcolor=""));var m=is(Zf(r));m.length>0&&f.class&&(f.class=f.class.replace(/\s*mce\-item\-table\s*/g,""));var b={type:"grid",columns:2,items:vo(r,m,o)},x=function(){return{type:"panel",items:[b]}},M=function(){return{type:"tabpanel",tabs:[{title:"General",name:"general",items:[b]},ci(r,"table")]}},R=Po(r)?M():x();r.windowManager.open({title:"Table Properties",size:"normal",body:R,onSubmit:je(nS,r,s,f),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:f})},Zt=function(r){return Vl(Is(r),yc(r))},rS=function(r){return ii(Is(r),yc(r))},wb=function(r,o,u,s,f){var m=yc(r),b=function(){return Zt(r).each(function(vt){vr(vt,m).filter(Ge(m)).each(function(At){var un=ke.fromText("");if(tr(At,un),Fo(At),r.dom.isEmpty(r.getBody()))r.setContent(""),r.selection.setCursorLocation();else{var Yt=r.dom.createRng();Yt.setStart(un.dom,0),Yt.setEnd(un.dom,0),r.selection.setRng(Yt),r.nodeChanged()}})})},x=function(vt){return Zt(r).each(function(At){var un=Kl(r)||ql(r)||Qf(r);un||vr(At,m).each(function(Yt){vt==="relative"&&!I1(Yt)?ev(Yt):vt==="fixed"&&!es(Yt)?ah(Yt):vt==="responsive"&&!pd(Yt)&&Od(Yt),oi(Yt),Vu(r,Yt.dom,ra)})})},M=function(vt){return vr(vt,m)},R=function(vt){return rS(r).bind(function(At){return M(At).map(function(un){return vt(un,At)})})},P=function(vt,At){R(function(un){r.formatter.toggle("tableclass",{value:At},un.dom),Vu(r,un.dom,Cd)})},ie=function(vt,At){R(function(un){var Yt=Ja(s),qr=Ce(Yt,function(go){return r.formatter.match("tablecellclass",{value:At},go.dom)}),Oa=qr?r.formatter.remove:r.formatter.apply;it(Yt,function(go){return Oa("tablecellclass",{value:At},go.dom)}),Vu(r,un.dom,Cd)})},Te=function(){Zt(r).each(function(vt){vr(vt,m).each(function(At){_t(At,"caption").fold(function(){var un=ke.fromTag("caption");Er(un,ke.fromText("Caption")),zy(At,un,0),r.selection.setCursorLocation(un.dom,0)},function(un){Br("caption")(vt)&&ku("td",At).each(function(Yt){return r.selection.setCursorLocation(Yt.dom,0)}),Fo(un)}),Vu(r,At.dom,ra)})})},pe=function(vt){r.focus()},ue=function(vt,At){return At===void 0&&(At=!1),R(function(un,Yt){var qr=Ps(s,un,Yt);vt(un,qr,At).each(pe)})},_e=function(){return R(function(vt,At){var un=Ps(s,vt,At),Yt=br(We,ke.fromDom(r.getDoc()),_.none());return N4(vt,un,Yt)})},Fe=function(){return R(function(vt,At){var un=Ps(s,vt,At);return P4(vt,un)})},ut=function(vt,At){return At().each(function(un){var Yt=Ne(un,function(qr){return ya(qr)});R(function(qr,Oa){var go=vu(ke.fromDom(r.getDoc())),Cn=T1(s,Oa,Yt,go);vt(qr,Cn).each(pe)})})},xn=function(vt){return function(At,un){return oo(un,"type").each(function(Yt){ue(vt(Yt),un.no_events)})}};er({mceTableSplitCells:function(){return ue(o.unmergeCells)},mceTableMergeCells:function(){return ue(o.mergeCells)},mceTableInsertRowBefore:function(){return ue(o.insertRowsBefore)},mceTableInsertRowAfter:function(){return ue(o.insertRowsAfter)},mceTableInsertColBefore:function(){return ue(o.insertColumnsBefore)},mceTableInsertColAfter:function(){return ue(o.insertColumnsAfter)},mceTableDeleteCol:function(){return ue(o.deleteColumn)},mceTableDeleteRow:function(){return ue(o.deleteRow)},mceTableCutCol:function(){return Fe().each(function(vt){f.setColumns(vt),ue(o.deleteColumn)})},mceTableCutRow:function(){return _e().each(function(vt){f.setRows(vt),ue(o.deleteRow)})},mceTableCopyCol:function(){return Fe().each(function(vt){return f.setColumns(vt)})},mceTableCopyRow:function(){return _e().each(function(vt){return f.setRows(vt)})},mceTablePasteColBefore:function(){return ut(o.pasteColsBefore,f.getColumns)},mceTablePasteColAfter:function(){return ut(o.pasteColsAfter,f.getColumns)},mceTablePasteRowBefore:function(){return ut(o.pasteRowsBefore,f.getRows)},mceTablePasteRowAfter:function(){return ut(o.pasteRowsAfter,f.getRows)},mceTableDelete:b,mceTableCellToggleClass:ie,mceTableToggleClass:P,mceTableToggleCaption:Te,mceTableSizingMode:function(vt,At){return x(At)},mceTableCellType:xn(function(vt){return vt==="th"?o.makeCellsHeader:o.unmakeCellsHeader}),mceTableColType:xn(function(vt){return vt==="th"?o.makeColumnsHeader:o.unmakeColumnsHeader}),mceTableRowType:xn(function(vt){switch(vt){case"header":return o.makeRowsHeader;case"footer":return o.makeRowsFooter;default:return o.makeRowsBody}})},function(vt,At){return r.addCommand(At,vt)}),er({mceTableProps:je(yb,r,!1),mceTableRowProps:je(Oi,r),mceTableCellProps:je(X4,r,s)},function(vt,At){return r.addCommand(At,function(){return vt()})}),r.addCommand("mceInsertTable",function(vt,At){Kt(At)&&Ua(At).length>0?nb(r,At.rows,At.columns,At.options,"Invalid values for mceInsertTable - rows and columns values are required to insert a table."):yb(r,!0)}),r.addCommand("mceTableApplyCellStyle",function(vt,At){var un=function(Oa){return"tablecell"+Oa.toLowerCase().replace("-","")};if(Kt(At)){var Yt=Ja(s);if(Yt.length!==0){var qr=gi(At,function(Oa,go){return r.formatter.has(un(go))&&dt(Oa)});J(qr)||(er(qr,function(Oa,go){it(Yt,function(Cn){Wu.normal(r,Cn.dom).setFormat(un(go),Oa)})}),M(Yt[0]).each(function(Oa){return Vu(r,Oa.dom,Cd)}))}}})},Yh=function(r,o,u){var s=yc(r),f=function(m){return ii(Is(r)).bind(function(b){return vr(b,s).map(function(x){var M=Ps(u,x,b);return m(x,M)})}).getOr("")};er({mceTableRowType:function(){return f(o.getTableRowType)},mceTableCellType:function(){return f(o.getTableCellType)},mceTableColType:function(){return f(o.getTableColType)}},function(m,b){return r.addQueryValueHandler(b,m)})},aS=function(){var r=rf(),o=rf();return{getRows:r.get,setRows:function(u){u.fold(r.clear,r.set),o.clear()},clearRows:r.clear,getColumns:o.get,setColumns:function(u){u.fold(o.clear,o.set),r.clear()},clearColumns:o.clear}},Sb={remove_similar:!0,inherit:!1},uf=Re({selector:"td,th"},Sb),oS={tablecellbackgroundcolor:Re({styles:{backgroundColor:"%value"}},uf),tablecellverticalalign:Re({styles:{"vertical-align":"%value"}},uf),tablecellbordercolor:Re({styles:{borderColor:"%value"}},uf),tablecellclass:Re({classes:["%value"]},uf),tableclass:Re({selector:"table",classes:["%value"]},Sb),tablecellborderstyle:Re({styles:{borderStyle:"%value"}},uf),tablecellborderwidth:Re({styles:{borderWidth:"%value"}},uf)},iS=function(r){r.formatter.register(oS)},xb=Bu.generate([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),Jh=function(r){return r===void 0&&(r=void 0),xb.none(r)},el=Re(Re({},xb),{none:Jh}),Jd=function(r,o,u,s,f){f===void 0&&(f=ge);var m=s===1;if(!m&&u<=0)return el.first(r[0]);if(m&&u>=r.length-1)return el.last(r[r.length-1]);var b=u+s,x=r[b];return f(x)?el.middle(o,x):Jd(r,o,b,s,f)},Cb=function(r,o){return vr(r,o).bind(function(u){var s=fc(u),f=Ke(s,function(m){return sn(r,m)});return f.map(function(m){return{index:m,all:s}})})},uS=function(r,o,u){var s=Cb(r,u);return s.fold(function(){return el.none(r)},function(f){return Jd(f.all,r,f.index,1,o)})},cS=function(r,o,u){var s=Cb(r,u);return s.fold(function(){return el.none()},function(f){return Jd(f.all,r,f.index,-1,o)})},sS=function(r,o,u,s){return{start:r,soffset:o,finish:u,foffset:s}},dv={create:sS},Zh=Bu.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),lt=function(r,o,u,s){return r.fold(o,u,s)},Tb=function(r){return r.fold(wt,wt,wt)},lS=Zh.before,fS=Zh.on,mv=Zh.after,mo={before:lS,on:fS,after:mv,cata:lt,getStart:Tb},Zd=Bu.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),vS=function(r){return Zd.exact(r.start,r.soffset,r.finish,r.foffset)},dS=function(r){return r.match({domRange:function(o){return ke.fromDom(o.startContainer)},relative:function(o,u){return mo.getStart(o)},exact:function(o,u,s,f){return o}})},Qh=Zd.domRange,mS=Zd.relative,gS=Zd.exact,Ob=function(r){var o=dS(r);return ic(o)},kb=dv.create,Tc={domRange:Qh,relative:mS,exact:gS,exactFromRange:vS,getWin:Ob,range:kb},hS=function(r,o){var u=r.document.createRange();return u.selectNode(o.dom),u},pS=function(r,o){var u=r.document.createRange();return Ab(u,o),u},Ab=function(r,o){return r.selectNodeContents(o.dom)},bS=function(r,o){o.fold(function(u){r.setStartBefore(u.dom)},function(u,s){r.setStart(u.dom,s)},function(u){r.setStartAfter(u.dom)})},yS=function(r,o){o.fold(function(u){r.setEndBefore(u.dom)},function(u,s){r.setEnd(u.dom,s)},function(u){r.setEndAfter(u.dom)})},Rn=function(r,o,u){var s=r.document.createRange();return bS(s,o),yS(s,u),s},Qd=function(r,o,u,s,f){var m=r.document.createRange();return m.setStart(o.dom,u),m.setEnd(s.dom,f),m},cs=function(r){return{left:r.left,top:r.top,right:r.right,bottom:r.bottom,width:r.width,height:r.height}},Gu=function(r){var o=r.getClientRects(),u=o.length>0?o[0]:r.getBoundingClientRect();return u.width>0||u.height>0?_.some(u).map(cs):_.none()},ss=Bu.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),Ao=function(r,o,u){return o(ke.fromDom(u.startContainer),u.startOffset,ke.fromDom(u.endContainer),u.endOffset)},em=function(r,o){return o.match({domRange:function(u){return{ltr:Ae(u),rtl:_.none}},relative:function(u,s){return{ltr:cr(function(){return Rn(r,u,s)}),rtl:cr(function(){return _.some(Rn(r,s,u))})}},exact:function(u,s,f,m){return{ltr:cr(function(){return Qd(r,u,s,f,m)}),rtl:cr(function(){return _.some(Qd(r,f,m,u,s))})}}})},gv=function(r,o){var u=o.ltr();if(u.collapsed){var s=o.rtl().filter(function(f){return f.collapsed===!1});return s.map(function(f){return ss.rtl(ke.fromDom(f.endContainer),f.endOffset,ke.fromDom(f.startContainer),f.startOffset)}).getOrThunk(function(){return Ao(r,ss.ltr,u)})}else return Ao(r,ss.ltr,u)},cf=function(r,o){var u=em(r,o);return gv(r,u)},ls=function(r,o){var u=cf(r,o);return u.match({ltr:function(s,f,m,b){var x=r.document.createRange();return x.setStart(s.dom,f),x.setEnd(m.dom,b),x},rtl:function(s,f,m,b){var x=r.document.createRange();return x.setStart(m.dom,b),x.setEnd(s.dom,f),x}})};ss.ltr,ss.rtl;var wS=function(r,o,u,s,f){if(f===0)return 0;if(o===s)return f-1;for(var m=s,b=1;b<f;b++){var x=r(b),M=Math.abs(o-x.left);if(u<=x.bottom){if(u<x.top||M>m)return b-1;m=M}}return 0},Mb=function(r,o,u){return o>=r.left&&o<=r.right&&u>=r.top&&u<=r.bottom},SS=function(r,o,u,s,f){var m=function(R){var P=r.dom.createRange();return P.setStart(o.dom,R),P.collapse(!0),P},b=function(R){var P=m(R);return P.getBoundingClientRect()},x=Zv(o).length,M=wS(b,u,s,f.right,x);return m(M)},xS=function(r,o,u,s){var f=r.dom.createRange();f.selectNode(o.dom);var m=f.getClientRects(),b=gt(m,function(x){return Mb(x,u,s)?_.some(x):_.none()});return b.map(function(x){return SS(r,o,u,s,x)})},on=function(r,o,u,s){var f=r.dom.createRange(),m=I(o);return gt(m,function(b){return f.selectNode(b.dom),Mb(f.getBoundingClientRect(),u,s)?Gi(r,b,u,s):_.none()})},Gi=function(r,o,u,s){return Ko(o)?xS(r,o,u,s):on(r,o,u,s)},sf=function(r,o,u,s){var f=r.dom.createRange();f.selectNode(o.dom);var m=f.getBoundingClientRect(),b=Math.max(m.left,Math.min(m.right,u)),x=Math.max(m.top,Math.min(m.bottom,s));return Gi(r,o,b,x)},Eb=!0,hv=!1,vn=function(r,o){return o-r.left<r.right-o?Eb:hv},Db=function(r,o,u){var s=r.dom.createRange();return s.selectNode(o.dom),s.collapse(u),s},_b=function(r,o,u){var s=r.dom.createRange();s.selectNode(o.dom);var f=s.getBoundingClientRect(),m=vn(f,u),b=m===Eb?fd:vd;return b(o).map(function(x){return Db(r,x,m)})},tm=function(r,o,u){var s=o.dom.getBoundingClientRect(),f=vn(s,u);return _.some(Db(r,o,f))},zb=function(r,o,u){var s=I(o).length===0?tm:_b;return s(r,o,u)},nm=function(r,o,u){var s,f;return _.from((f=(s=r.dom).caretPositionFromPoint)===null||f===void 0?void 0:f.call(s,o,u)).bind(function(m){if(m.offsetNode===null)return _.none();var b=r.dom.createRange();return b.setStart(m.offsetNode,m.offset),b.collapse(),_.some(b)})},tl=function(r,o,u){var s,f;return _.from((f=(s=r.dom).caretRangeFromPoint)===null||f===void 0?void 0:f.call(s,o,u))},Rb=function(r,o,u,s){var f=r.dom.createRange();f.selectNode(o.dom);var m=f.getBoundingClientRect(),b=Math.max(m.left,Math.min(m.right,u)),x=Math.max(m.top,Math.min(m.bottom,s));return sf(r,o,b,x)},CS=function(r,o,u){return ke.fromPoint(r,o,u).bind(function(s){var f=function(){return zb(r,s,o)};return I(s).length===0?f():Rb(r,s,o,u).orThunk(f)})},TS=function(){return document.caretPositionFromPoint?nm:document.caretRangeFromPoint?tl:CS}(),OS=function(r,o,u){var s=ke.fromDom(r.document);return TS(s,o,u).map(function(f){return dv.create(ke.fromDom(f.startContainer),f.startOffset,ke.fromDom(f.endContainer),f.endOffset)})},fs=function(r,o){var u=Tn(r);return u==="input"?mo.after(r):Ct(["br","img"],u)?o===0?mo.before(r):mo.after(r):mo.on(r,o)},nl=function(r,o){var u=r.fold(mo.before,fs,mo.after),s=o.fold(mo.before,fs,mo.after);return Tc.relative(u,s)},ep=function(r,o,u,s){var f=fs(r,o),m=fs(u,s);return Tc.relative(f,m)},Bb=function(r){return r.match({domRange:function(o){var u=ke.fromDom(o.startContainer),s=ke.fromDom(o.endContainer);return ep(u,o.startOffset,s,o.endOffset)},relative:nl,exact:ep})},kS=function(r,o,u,s){var f=iu(r),m=f.dom.createRange();return m.setStart(r.dom,o),m.setEnd(u.dom,s),m},AS=function(r,o,u,s){var f=kS(r,o,u,s),m=sn(r,u)&&o===s;return f.collapsed&&!m},rm=function(r){return _.from(r.getSelection())},tp=function(r,o){rm(r).each(function(u){u.removeAllRanges(),u.addRange(o)})},np=function(r,o,u,s,f){var m=Qd(r,o,u,s,f);tp(r,m)},MS=function(r,o,u,s,f,m){o.collapse(u.dom,s),o.extend(f.dom,m)},rp=function(r,o){return cf(r,o).match({ltr:function(u,s,f,m){np(r,u,s,f,m)},rtl:function(u,s,f,m){rm(r).each(function(b){if(b.setBaseAndExtent)b.setBaseAndExtent(u.dom,s,f.dom,m);else if(b.extend)try{MS(r,b,u,s,f,m)}catch{np(r,f,m,u,s)}else np(r,f,m,u,s)})}})},am=function(r,o,u,s,f){var m=ep(o,u,s,f);rp(r,m)},om=function(r,o,u){var s=nl(o,u);rp(r,s)},ap=function(r){var o=Tc.getWin(r).dom,u=function(f,m,b,x){return Qd(o,f,m,b,x)},s=Bb(r);return cf(o,s).match({ltr:u,rtl:u})},op=function(r){if(r.rangeCount>0){var o=r.getRangeAt(0),u=r.getRangeAt(r.rangeCount-1);return _.some(dv.create(ke.fromDom(o.startContainer),o.startOffset,ke.fromDom(u.endContainer),u.endOffset))}else return _.none()},Fb=function(r){if(r.anchorNode===null||r.focusNode===null)return op(r);var o=ke.fromDom(r.anchorNode),u=ke.fromDom(r.focusNode);return AS(o,r.anchorOffset,u,r.focusOffset)?_.some(dv.create(o,r.anchorOffset,u,r.focusOffset)):op(r)},ip=function(r,o,u){u===void 0&&(u=!0);var s=u?pS:hS,f=s(r,o);tp(r,f)},im=function(r){return rm(r).filter(function(o){return o.rangeCount>0}).bind(Fb)},Hb=function(r){return im(r).map(function(o){return Tc.exact(o.start,o.soffset,o.finish,o.foffset)})},Ib=function(r,o){var u=ls(r,o);return Gu(u)},ES=function(r,o,u){return OS(r,o,u)},$b=function(r){rm(r).each(function(o){return o.removeAllRanges()})},Lb=tinymce.util.Tools.resolve("tinymce.util.VK"),up=function(r,o,u){return Vb(r,o,uS(u,Xf))},Pb=function(r,o,u){return Vb(r,o,cS(u,Xf))},Nb=function(r,o){var u=Tc.exact(o,0,o,0);return ap(u)},Vb=function(r,o,u){return u.fold(_.none,_.none,function(s,f){return fd(f).map(function(m){return Nb(r,m)})},function(s){return r.execCommand("mceTableInsertRowAfter"),up(r,o,s)})},DS=["table","li","dl"],_S=function(r,o,u){if(r.keyCode===Lb.TAB){var s=bc(o),f=function(x){var M=Tn(x);return sn(x,s)||Ct(DS,M)},m=o.selection.getRng(),b=ke.fromDom(r.shiftKey?m.startContainer:m.endContainer);kl(b,f).each(function(x){r.preventDefault(),vr(x,f).each(u.clear),o.selection.collapse(r.shiftKey);var M=r.shiftKey?Pb:up,R=M(o,f,x);R.each(function(P){o.selection.setRng(P)})})}},zS=function(r,o){return{selection:r,kill:o}},lf={create:zS},RS=function(r,o,u,s){return{start:mo.on(r,o),finish:mo.on(u,s)}},Ub={create:RS},Wb=function(r,o){var u=ls(r,o);return dv.create(ke.fromDom(u.startContainer),u.startOffset,ke.fromDom(u.endContainer),u.endOffset)},rl=Ub.create,jb=function(r,o,u,s,f,m,b){return sn(u,f)&&s===m?_.none():Ar(u,"td,th",o).bind(function(x){return Ar(f,"td,th",o).bind(function(M){return Gb(r,o,x,M,b)})})},Gb=function(r,o,u,s,f){return sn(u,s)?_.none():ed(u,s,o).bind(function(m){var b=m.boxes.getOr([]);return b.length>1?(f(r,b,m.start,m.finish),_.some(lf.create(_.some(rl(u,0,u,Iu(u))),!0))):_.none()})},qb=function(r,o,u,s,f){var m=function(b){return f.clearBeforeUpdate(u),f.selectRange(u,b.boxes,b.start,b.finish),b.boxes};return og(s,r,o,f.firstSelectedSelector,f.lastSelectedSelector).map(m)},um=function(r,o){return{item:r,mode:o}},Kb=function(r,o,u,s){return s===void 0&&(s=ff),r.property().parent(o).map(function(f){return um(f,s)})},ff=function(r,o,u,s){return s===void 0&&(s=pv),u.sibling(r,o).map(function(f){return um(f,s)})},pv=function(r,o,u,s){s===void 0&&(s=pv);var f=r.property().children(o),m=u.first(f);return m.map(function(b){return um(b,s)})},BS=[{current:Kb,next:ff,fallback:_.none()},{current:ff,next:pv,fallback:_.some(Kb)},{current:pv,next:pv,fallback:_.some(ff)}],Xb=function(r,o,u,s,f){f===void 0&&(f=BS);var m=Se(f,function(b){return b.current===u});return m.bind(function(b){return b.current(r,o,s,b.next).orThunk(function(){return b.fallback.bind(function(x){return Xb(r,o,x,s)})})})},cm=function(){var r=function(u,s){return u.query().prevSibling(s)},o=function(u){return u.length>0?_.some(u[u.length-1]):_.none()};return{sibling:r,first:o}},FS=function(){var r=function(u,s){return u.query().nextSibling(s)},o=function(u){return u.length>0?_.some(u[0]):_.none()};return{sibling:r,first:o}},Yb={left:cm,right:FS},bv=function(r,o,u,s,f,m){var b=Xb(r,o,s,f);return b.bind(function(x){return m(x.item)?_.none():u(x.item)?_.some(x.item):bv(r,x.item,u,x.mode,f,m)})},HS=function(r,o,u,s){return bv(r,o,u,ff,Yb.left(),s)},Jb=function(r,o,u,s){return bv(r,o,u,ff,Yb.right(),s)},cp=function(r){return function(o){return r.property().children(o).length===0}},Zb=function(r,o,u){return Qb(r,o,cp(r),u)},IS=function(r,o,u){return e2(r,o,cp(r),u)},Qb=HS,e2=Jb,sm=Nf(),yv=function(r,o){return Zb(sm,r,o)},sp=function(r,o){return IS(sm,r,o)},t2=function(r,o,u){return Qb(sm,r,o,u)},n2=function(r,o,u){return e2(sm,r,o,u)},r2=function(r,o,u){return ja(r,o,u).isSome()},lm=Bu.generate([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),$S=function(r,o,u){var s=r.getRect(o),f=r.getRect(u);return f.right>s.left&&f.left<s.right},LS=function(r){return Ar(r,"tr")},PS=function(r,o,u,s,f,m,b){return Ar(s,"td,th",b).bind(function(x){return Ar(o,"td,th",b).map(function(M){return sn(x,M)?sn(s,x)&&Iu(x)===f?m(M):lm.none("in same cell"):pt(LS,[x,M]).fold(function(){return $S(r,M,x)?lm.success():m(M)},function(R){return m(M)})})}).getOr(lm.none("default"))},NS=function(r,o,u,s,f){return r.fold(o,u,s,f)},vf=Re(Re({},lm),{verify:PS,cata:NS}),VS=function(r,o,u,s){return{parent:r,children:o,element:u,index:s}},US=function(r){return Or(r).bind(function(o){var u=I(o);return WS(u,r).map(function(s){return VS(o,u,r,s)})})},WS=function(r,o){return Ke(r,je(sn,o))},lp=function(r){return Tn(r)==="br"},fp=function(r,o,u){return o(r,u).bind(function(s){return Ko(s)&&Zv(s).trim().length===0?fp(s,o,u):_.some(s)})},jS=function(r,o,u){return u.traverse(o).orThunk(function(){return fp(o,u.gather,r)}).map(u.relative)},fm=function(r,o){return te(r,o).filter(lp).orThunk(function(){return te(r,o-1).filter(lp)})},a2=function(r,o,u,s){return fm(o,u).bind(function(f){return s.traverse(f).fold(function(){return fp(f,s.gather,r).map(s.relative)},function(m){return US(m).map(function(b){return mo.on(b.parent,b.index)})})})},o2=function(r,o,u,s){var f=lp(o)?jS(r,o,s):a2(r,o,u,s);return f.map(function(m){return{start:m,finish:m}})},GS=function(r){return vf.cata(r,function(o){return _.none()},function(){return _.none()},function(o){return _.some(Yl(o,0))},function(o){return _.some(Yl(o,Iu(o)))})},vm=function(r,o){return{left:r.left,top:r.top+o,right:r.right,bottom:r.bottom+o}},dm=function(r,o){return{left:r.left,top:r.top-o,right:r.right,bottom:r.bottom-o}},i2=function(r,o,u){return{left:r.left+o,top:r.top+u,right:r.right+o,bottom:r.bottom+u}},qS=function(r){return r.top},KS=function(r){return r.bottom},u2=function(r,o,u){return u>=0&&u<Iu(o)?r.getRangedRect(o,u,o,u+1):u>0?r.getRangedRect(o,u-1,o,u):_.none()},mm=function(r){return{left:r.left,top:r.top,right:r.right,bottom:r.bottom}},vp=function(r,o){return _.some(r.getRect(o))},dp=function(r,o,u){return Wn(o)?vp(r,o).map(mm):Ko(o)?u2(r,o,u).map(mm):_.none()},c2=function(r,o){return Wn(o)?vp(r,o).map(mm):Ko(o)?r.getRangedRect(o,0,o,Iu(o)).map(mm):_.none()},Oc=5,XS=100,qu=Bu.generate([{none:[]},{retry:["caret"]}]),YS=function(r,o){return r.left<o.left||Math.abs(o.right-r.left)<1||r.left>o.right},s2=function(r,o,u){return Uv(o,xh).fold(rn,function(s){return c2(r,s).exists(function(f){return YS(u,f)})})},JS=function(r,o,u,s,f){var m=vm(f,Oc);return Math.abs(u.bottom-s.bottom)<1||u.top>f.bottom?qu.retry(m):u.top===f.bottom?qu.retry(vm(f,1)):s2(r,o,f)?qu.retry(i2(m,Oc,0)):qu.none()},ZS=function(r,o,u,s,f){var m=dm(f,Oc);return Math.abs(u.top-s.top)<1||u.bottom<f.top?qu.retry(m):u.bottom===f.top?qu.retry(dm(f,1)):s2(r,o,f)?qu.retry(i2(m,Oc,0)):qu.none()},QS={point:qS,adjuster:ZS,move:dm,gather:yv},ex={point:KS,adjuster:JS,move:vm,gather:sp},tx=function(r,o,u){return r.elementFromPoint(o,u).filter(function(s){return Tn(s)==="table"}).isSome()},nx=function(r,o,u,s,f){return mp(r,o,u,o.move(s,Oc),f)},mp=function(r,o,u,s,f){return f===0?_.some(s):tx(r,s.left,o.point(s))?nx(r,o,u,s,f-1):r.situsFromPoint(s.left,o.point(s)).bind(function(m){return m.start.fold(_.none,function(b){return c2(r,b).bind(function(x){return o.adjuster(r,b,x,u,s).fold(_.none,function(M){return mp(r,o,u,M,f-1)})}).orThunk(function(){return _.some(s)})},_.none)})},rx=function(r,o){return r.situsFromPoint(o.left,o.bottom+Oc)},ax=function(r,o){return r.situsFromPoint(o.left,o.top-Oc)},ox=function(r,o,u){return r.point(o)>u.getInnerHeight()?_.some(r.point(o)-u.getInnerHeight()):r.point(o)<0?_.some(-r.point(o)):_.none()},l2=function(r,o,u){var s=r.move(u,Oc),f=mp(o,r,u,s,XS).getOr(s);return ox(r,f,o).fold(function(){return o.situsFromPoint(f.left,r.point(f))},function(m){return o.scrollBy(0,m),o.situsFromPoint(f.left,r.point(f)-m)})},wv={tryUp:je(l2,QS),tryDown:je(l2,ex),ieTryUp:ax,ieTryDown:rx,getJumpSize:Ae(Oc)},ix=20,ht=function(r,o,u){return r.getSelection().bind(function(s){return o2(o,s.finish,s.foffset,u).fold(function(){return _.some(Yl(s.finish,s.foffset))},function(f){var m=r.fromSitus(f),b=vf.verify(r,s.finish,s.foffset,m.finish,m.foffset,u.failure,o);return GS(b)})})},gp=function(r,o,u,s,f,m){return m===0?_.none():ux(r,o,u,s,f).bind(function(b){var x=r.fromSitus(b),M=vf.verify(r,u,s,x.finish,x.foffset,f.failure,o);return vf.cata(M,function(){return _.none()},function(){return _.some(b)},function(R){return sn(u,R)&&s===0?gm(r,u,s,dm,f):gp(r,o,R,0,f,m-1)},function(R){return sn(u,R)&&s===Iu(R)?gm(r,u,s,vm,f):gp(r,o,R,Iu(R),f,m-1)})})},gm=function(r,o,u,s,f){return dp(r,o,u).bind(function(m){return f2(r,f,s(m,wv.getJumpSize()))})},f2=function(r,o,u){var s=xt().browser;return s.isChrome()||s.isSafari()||s.isFirefox()||s.isEdge()?o.otherRetry(r,u):s.isIE()?o.ieRetry(r,u):_.none()},ux=function(r,o,u,s,f){return dp(r,u,s).bind(function(m){return f2(r,f,m)})},v2=function(r,o,u){return ht(r,o,u).bind(function(s){return gp(r,o,s.element,s.offset,u,ix).map(r.fromSitus)})},hm=function(r,o){return r2(r,function(u){return Or(u).exists(function(s){return sn(s,o)})})},hp=function(r,o,u,s,f){return Ar(s,"td,th",o).bind(function(m){return Ar(m,"table",o).bind(function(b){return hm(f,b)?v2(r,o,u).bind(function(x){return Ar(x.finish,"td,th",o).map(function(M){return{start:m,finish:M,range:x}})}):_.none()})})},d2=function(r,o,u,s,f,m){return xt().browser.isIE()?_.none():m(s,o).orThunk(function(){return hp(r,o,u,s,f).map(function(b){var x=b.range;return lf.create(_.some(rl(x.start,x.soffset,x.finish,x.foffset)),!0)})})},cx=function(r,o){return Ar(r,"tr",o).bind(function(u){return Ar(u,"table",o).bind(function(s){var f=Ro(s,"tr");return sn(u,f[0])?t2(s,function(m){return vd(m).isSome()},o).map(function(m){var b=Iu(m);return lf.create(_.some(rl(m,b,m,b)),!0)}):_.none()})})},zt=function(r,o){return Ar(r,"tr",o).bind(function(u){return Ar(u,"table",o).bind(function(s){var f=Ro(s,"tr");return sn(u,f[f.length-1])?n2(s,function(m){return fd(m).isSome()},o).map(function(m){return lf.create(_.some(rl(m,0,m,0)),!0)}):_.none()})})},m2=function(r,o,u,s,f,m,b){return hp(r,u,s,f,m).bind(function(x){return Gb(o,u,x.start,x.finish,b)})},Nt=function(r,o){return Ar(r,"td,th",o)},g2=function(r,o,u,s){var f=rf(),m=f.clear,b=function(P){f.on(function(ie){s.clearBeforeUpdate(o),Nt(P.target,u).each(function(Te){ed(ie,Te,u).each(function(pe){var ue=pe.boxes.getOr([]);if(ue.length===1){var _e=ue[0],Fe=$g(_e)==="false",ut=Nc(Sd(P.target),_e,sn);Fe&&ut&&(s.selectRange(o,ue,_e,_e),r.selectContents(_e))}else ue.length>1&&(s.selectRange(o,ue,pe.start,pe.finish),r.selectContents(Te))})})})},x=function(P){s.clear(o),Nt(P.target,u).each(f.set)},M=function(P){b(P)},R=function(P){b(P),m()};return{clearstate:m,mousedown:x,mouseover:M,mouseup:R}},h2={traverse:E,gather:sp,relative:mo.before,otherRetry:wv.tryDown,ieRetry:wv.ieTryDown,failure:vf.failedDown},p2={traverse:w,gather:yv,relative:mo.before,otherRetry:wv.tryUp,ieRetry:wv.ieTryUp,failure:vf.failedUp},df=function(r){return function(o){return o===r}},pp=df(38),pm=df(40),bm=function(r){return r>=37&&r<=40},sx={isBackward:df(37),isForward:df(39)},Ot={isBackward:df(39),isForward:df(37)},lx=function(r){var o=r!==void 0?r.dom:document,u=o.body.scrollLeft||o.documentElement.scrollLeft,s=o.body.scrollTop||o.documentElement.scrollTop;return lr(u,s)},b2=function(r,o,u){var s=u!==void 0?u.dom:document,f=s.defaultView;f&&f.scrollBy(r,o)},ym=function(r){var o=function(Fe,ut){return ke.fromPoint(ke.fromDom(r.document),Fe,ut)},u=function(Fe){return Fe.dom.getBoundingClientRect()},s=function(Fe,ut,xn,vt){var At=Tc.exact(Fe,ut,xn,vt);return Ib(r,At)},f=function(){return Hb(r).map(function(Fe){return Wb(r,Fe)})},m=function(Fe){var ut=Tc.relative(Fe.start,Fe.finish);return Wb(r,ut)},b=function(Fe,ut){return ES(r,Fe,ut).map(function(xn){return Ub.create(xn.start,xn.soffset,xn.finish,xn.foffset)})},x=function(){$b(r)},M=function(Fe){Fe===void 0&&(Fe=!1),Hb(r).each(function(ut){return ut.fold(function(xn){return xn.collapse(Fe)},function(xn,vt){var At=Fe?xn:vt;om(r,At,At)},function(xn,vt,At,un){var Yt=Fe?xn:At,qr=Fe?vt:un;am(r,Yt,qr,Yt,qr)})})},R=function(Fe){ip(r,Fe,!1)},P=function(Fe){ip(r,Fe)},ie=function(Fe){am(r,Fe.start,Fe.soffset,Fe.finish,Fe.foffset)},Te=function(Fe,ut){om(r,Fe,ut)},pe=function(){return r.innerHeight},ue=function(){var Fe=lx(ke.fromDom(r.document));return Fe.top},_e=function(Fe,ut){b2(Fe,ut,ke.fromDom(r.document))};return{elementFromPoint:o,getRect:u,getRangedRect:s,getSelection:f,fromSitus:m,situsFromPoint:b,clearSelection:x,collapseSelection:M,setSelection:ie,setRelativeSelection:Te,selectNode:R,selectContents:P,getInnerHeight:pe,getScrollY:ue,scrollBy:_e}},al=function(r,o){return{rows:r,cols:o}},y2=function(r,o,u,s){var f=ym(r),m=g2(f,o,u,s);return{clearstate:m.clearstate,mousedown:m.mousedown,mouseover:m.mouseover,mouseup:m.mouseup}},w2=function(r,o,u,s){var f=ym(r),m=function(){return s.clear(o),_.none()},b=function(M,R,P,ie,Te,pe){var ue=M.raw,_e=ue.which,Fe=ue.shiftKey===!0,ut=rg(o,s.selectedSelector).fold(function(){return bm(_e)&&!Fe&&s.clearBeforeUpdate(o),pm(_e)&&Fe?je(m2,f,o,u,h2,ie,R,s.selectRange):pp(_e)&&Fe?je(m2,f,o,u,p2,ie,R,s.selectRange):pm(_e)?je(d2,f,u,h2,ie,R,zt):pp(_e)?je(d2,f,u,p2,ie,R,cx):_.none},function(xn){var vt=function(At){return function(){var un=gt(At,function(Yt){return qb(Yt.rows,Yt.cols,o,xn,s)});return un.fold(function(){return Pi(o,s.firstSelectedSelector,s.lastSelectedSelector).map(function(Yt){var qr=pm(_e)||pe.isForward(_e)?mo.after:mo.before;return f.setRelativeSelection(mo.on(Yt.first,0),qr(Yt.table)),s.clear(o),lf.create(_.none(),!0)})},function(Yt){return _.some(lf.create(_.none(),!0))})}};return pm(_e)&&Fe?vt([al(1,0)]):pp(_e)&&Fe?vt([al(-1,0)]):pe.isBackward(_e)&&Fe?vt([al(0,-1),al(-1,0)]):pe.isForward(_e)&&Fe?vt([al(0,1),al(1,0)]):bm(_e)&&!Fe?m:_.none});return ut()},x=function(M,R,P,ie,Te){return rg(o,s.selectedSelector).fold(function(){var pe=M.raw,ue=pe.which,_e=pe.shiftKey===!0;return _e&&bm(ue)?jb(o,u,R,P,ie,Te,s.selectRange):_.none()},_.none)};return{keydown:b,keyup:x}},bp=function(r,o,u,s){var f=ym(r);return function(m,b){s.clearBeforeUpdate(o),ed(m,b,u).each(function(x){var M=x.boxes.getOr([]);s.selectRange(o,M,x.start,x.finish),f.selectContents(b),f.collapseSelection()})}},fx=function(r,o){it(o,function(u){Bg(r,u)})},S2=function(r){return function(o){na(o,r)}},vx=function(r){return function(o){fx(o,r)}},dx=function(r){var o=S2(r.selected),u=vx([r.selected,r.lastSelected,r.firstSelected]),s=function(m){var b=Ro(m,r.selectedSelector);it(b,u)},f=function(m,b,x,M){s(m),it(b,o),na(x,r.firstSelected),na(M,r.lastSelected)};return{clearBeforeUpdate:s,clear:s,selectRange:f,selectedSelector:r.selectedSelector,firstSelectedSelector:r.firstSelectedSelector,lastSelectedSelector:r.lastSelectedSelector}},mx=function(r,o,u){var s=function(M){ur(M,r.selected),ur(M,r.firstSelected),ur(M,r.lastSelected)},f=function(M){Yr(M,r.selected,"1")},m=function(M){b(M),u()},b=function(M){var R=Ro(M,r.selectedSelector+","+r.firstSelectedSelector+","+r.lastSelectedSelector);it(R,s)},x=function(M,R,P,ie){m(M),it(R,f),Yr(P,r.firstSelected,"1"),Yr(ie,r.lastSelected,"1"),o(R,P,ie)};return{clearBeforeUpdate:b,clear:m,selectRange:x,selectedSelector:r.selectedSelector,firstSelectedSelector:r.firstSelectedSelector,lastSelectedSelector:r.lastSelectedSelector}},gx={byClass:dx,byAttr:mx},hx=function(r,o){var u=r.slice(0,o[o.length-1].row+1),s=Rd(u);return xe(s,function(f){var m=f.cells.slice(0,o[o.length-1].column+1);return Ne(m,function(b){return b.element})})},px=function(r,o){var u=r.slice(o[0].row+o[0].rowspan-1,r.length),s=Rd(u);return xe(s,function(f){var m=f.cells.slice(o[0].column+o[0].colspan-1,f.cells.length);return Ne(m,function(b){return b.element})})},bx=function(r,o,u){var s=Wt.fromTable(r),f=hu(s,o);return f.map(function(m){var b=rs(s,u,!1),x=hx(b,m),M=px(b,m);return{upOrLeftCells:x,downOrRightCells:M}})},x2=tinymce.util.Tools.resolve("tinymce.Env"),yp=function(r){return Jn(ke.fromDom(r.target),"ephox-snooker-resizer-bar")===!1};function bn(r,o,u){var s=function(b,x,M){u.targets().each(function(R){var P=vr(x);P.each(function(ie){var Te=o0(r),pe=br(We,ke.fromDom(r.getDoc()),Te),ue=bx(ie,R,pe);u3(r,b,x,M,ue)})})},f=function(){return c3(r)},m=gx.byAttr(Ls,s,f);return r.on("init",function(b){var x=r.getWin(),M=bc(r),R=yc(r),P=function(){var Cn=r.selection,Rt=ke.fromDom(Cn.getStart()),dn=ke.fromDom(Cn.getEnd()),Vn=pt(vr,[Rt,dn]);Vn.fold(function(){return m.clear(M)},We)},ie=y2(x,M,R,m),Te=w2(x,M,R,m),pe=bp(x,M,R,m),ue=function(Cn){return Cn.raw.shiftKey===!0};r.on("TableSelectorChange",function(Cn){return pe(Cn.start,Cn.finish)});var _e=function(Cn,Rt){ue(Cn)&&(Rt.kill&&Cn.kill(),Rt.selection.each(function(dn){var Vn=Tc.relative(dn.start,dn.finish),xr=ls(x,Vn);r.selection.setRng(xr)}))},Fe=function(Cn){var Rt=js(Cn);if(Rt.raw.shiftKey&&bm(Rt.raw.which)){var dn=r.selection.getRng(),Vn=ke.fromDom(dn.startContainer),xr=ke.fromDom(dn.endContainer);Te.keyup(Rt,Vn,dn.startOffset,xr,dn.endOffset).each(function(kc){_e(Rt,kc)})}},ut=function(Cn){var Rt=js(Cn);o().each(function(Nn){return Nn.hideBars()});var dn=r.selection.getRng(),Vn=ke.fromDom(dn.startContainer),xr=ke.fromDom(dn.endContainer),kc=$o(sx,Ot)(ke.fromDom(r.selection.getStart()));Te.keydown(Rt,Vn,dn.startOffset,xr,dn.endOffset,kc).each(function(Nn){_e(Rt,Nn)}),o().each(function(Nn){return Nn.showBars()})},xn=function(Cn){return Cn.button===0},vt=function(Cn){return Cn.buttons===void 0||x2.browser.isEdge()&&Cn.buttons===0?!0:(Cn.buttons&1)!==0},At=function(Cn){ie.clearstate()},un=function(Cn){xn(Cn)&&yp(Cn)&&ie.mousedown(js(Cn))},Yt=function(Cn){vt(Cn)&&yp(Cn)&&ie.mouseover(js(Cn))},qr=function(Cn){xn(Cn)&&yp(Cn)&&ie.mouseup(js(Cn))},Oa=function(){var Cn=os(ke.fromDom(M)),Rt=os(0),dn=function(Vn){var xr=ke.fromDom(Vn.target);if(Tn(xr)==="td"||Tn(xr)==="th"){var kc=Cn.get(),Nn=Rt.get();sn(kc,xr)&&Vn.timeStamp-Nn<300&&(Vn.preventDefault(),pe(xr,xr))}Cn.set(xr),Rt.set(Vn.timeStamp)};return{touchEnd:dn}},go=Oa();r.on("dragstart",At),r.on("mousedown",un),r.on("mouseover",Yt),r.on("mouseup",qr),r.on("touchend",go.touchEnd),r.on("keyup",Fe),r.on("keydown",ut),r.on("NodeChange",P)}),{clear:m.clear}}var C2=function(r,o){return _t(r,o).isSome()},wm=function(r,o){var u=os(_.none()),s=os([]),f=_.none(),m=Br("caption"),b=function(Rt){return f.forall(function(dn){return!dn[Rt]})},x=function(){return Vl(Is(r),yc(r))},M=function(){return Vl(rt(r),yc(r))},R=function(){return x().bind(function(Rt){return sc(bi(vr(Rt),M().bind(vr),function(dn,Vn){return sn(dn,Vn)?m(Rt)?_.some(kg(Rt)):_.some(Ps(o,dn,Rt)):_.none()}))})},P=function(Rt){var dn=vr(Rt.element);return dn.map(function(Vn){var xr=Wt.fromTable(Vn),kc=hu(xr,Rt).getOr([]),Nn=or(kc,function(ki,Ra){return Ra.isLocked&&(ki.onAny=!0,Ra.column===0?ki.onFirst=!0:Ra.column+Ra.colspan>=xr.grid.columns&&(ki.onLast=!0)),ki},{onAny:!1,onFirst:!1,onLast:!1});return{mergeable:mh(xr,Rt).isSome(),unmergeable:gh(xr,Rt).isSome(),locked:Nn}})},ie=function(){u.set(cr(R)()),f=u.get().bind(P),it(s.get(),function(Rt){return Rt()})},Te=function(Rt){return Rt(),s.set(s.get().concat([Rt])),function(){s.set(It(s.get(),function(dn){return dn!==Rt}))}},pe=function(Rt,dn){return Te(function(){return u.get().fold(function(){Rt.setDisabled(!0)},function(Vn){Rt.setDisabled(dn(Vn))})})},ue=function(Rt,dn,Vn){return Te(function(){return u.get().fold(function(){Rt.setDisabled(!0),Rt.setActive(!1)},function(xr){Rt.setDisabled(dn(xr)),Rt.setActive(Vn(xr))})})},_e=function(Rt){return f.exists(function(dn){return dn.locked[Rt]})},Fe=function(Rt){return pe(Rt,function(dn){return!1})},ut=function(Rt){return pe(Rt,function(dn){return m(dn.element)})},xn=function(Rt){return function(dn){return pe(dn,function(Vn){return m(Vn.element)||_e(Rt)})}},vt=function(Rt){return function(dn){return pe(dn,function(Vn){return m(Vn.element)||Rt().isNone()})}},At=function(Rt,dn){return function(Vn){return pe(Vn,function(xr){return m(xr.element)||Rt().isNone()||_e(dn)})}},un=function(Rt){return pe(Rt,function(dn){return b("mergeable")})},Yt=function(Rt){return pe(Rt,function(dn){return b("unmergeable")})},qr=function(Rt){return ue(Rt,rn,function(dn){var Vn=vr(dn.element,yc(r));return Vn.exists(function(xr){return C2(xr,"caption")})})},Oa=function(Rt,dn){return function(Vn){return ue(Vn,function(xr){return m(xr.element)},function(){return r.queryCommandValue(Rt)===dn})}},go=Oa("mceTableRowType","header"),Cn=Oa("mceTableColType","th");return r.on("NodeChange ExecCommand TableSelectorChange",ie),{onSetupTable:Fe,onSetupCellOrRow:ut,onSetupColumn:xn,onSetupPasteable:vt,onSetupPasteableColumn:At,onSetupMergeable:un,onSetupUnmergeable:Yt,resetTargets:ie,onSetupTableWithCaption:qr,onSetupTableRowHeaders:go,onSetupTableColumnHeaders:Cn,targets:u.get}},T2=function(r,o,u,s){r.ui.registry.addMenuButton("table",{tooltip:"Table",icon:"table",fetch:function(x){return x("inserttable | cell row column | advtablesort | tableprops deletetable")}});var f=function(x){return function(){return r.execCommand(x)}};r.ui.registry.addButton("tableprops",{tooltip:"Table properties",onAction:f("mceTableProps"),icon:"table",onSetup:u.onSetupTable}),r.ui.registry.addButton("tabledelete",{tooltip:"Delete table",onAction:f("mceTableDelete"),icon:"table-delete-table",onSetup:u.onSetupTable}),r.ui.registry.addButton("tablecellprops",{tooltip:"Cell properties",onAction:f("mceTableCellProps"),icon:"table-cell-properties",onSetup:u.onSetupCellOrRow}),r.ui.registry.addButton("tablemergecells",{tooltip:"Merge cells",onAction:f("mceTableMergeCells"),icon:"table-merge-cells",onSetup:u.onSetupMergeable}),r.ui.registry.addButton("tablesplitcells",{tooltip:"Split cell",onAction:f("mceTableSplitCells"),icon:"table-split-cells",onSetup:u.onSetupUnmergeable}),r.ui.registry.addButton("tableinsertrowbefore",{tooltip:"Insert row before",onAction:f("mceTableInsertRowBefore"),icon:"table-insert-row-above",onSetup:u.onSetupCellOrRow}),r.ui.registry.addButton("tableinsertrowafter",{tooltip:"Insert row after",onAction:f("mceTableInsertRowAfter"),icon:"table-insert-row-after",onSetup:u.onSetupCellOrRow}),r.ui.registry.addButton("tabledeleterow",{tooltip:"Delete row",onAction:f("mceTableDeleteRow"),icon:"table-delete-row",onSetup:u.onSetupCellOrRow}),r.ui.registry.addButton("tablerowprops",{tooltip:"Row properties",onAction:f("mceTableRowProps"),icon:"table-row-properties",onSetup:u.onSetupCellOrRow}),r.ui.registry.addButton("tableinsertcolbefore",{tooltip:"Insert column before",onAction:f("mceTableInsertColBefore"),icon:"table-insert-column-before",onSetup:u.onSetupColumn("onFirst")}),r.ui.registry.addButton("tableinsertcolafter",{tooltip:"Insert column after",onAction:f("mceTableInsertColAfter"),icon:"table-insert-column-after",onSetup:u.onSetupColumn("onLast")}),r.ui.registry.addButton("tabledeletecol",{tooltip:"Delete column",onAction:f("mceTableDeleteCol"),icon:"table-delete-column",onSetup:u.onSetupColumn("onAny")}),r.ui.registry.addButton("tablecutrow",{tooltip:"Cut row",icon:"cut-row",onAction:f("mceTableCutRow"),onSetup:u.onSetupCellOrRow}),r.ui.registry.addButton("tablecopyrow",{tooltip:"Copy row",icon:"duplicate-row",onAction:f("mceTableCopyRow"),onSetup:u.onSetupCellOrRow}),r.ui.registry.addButton("tablepasterowbefore",{tooltip:"Paste row before",icon:"paste-row-before",onAction:f("mceTablePasteRowBefore"),onSetup:u.onSetupPasteable(s.getRows)}),r.ui.registry.addButton("tablepasterowafter",{tooltip:"Paste row after",icon:"paste-row-after",onAction:f("mceTablePasteRowAfter"),onSetup:u.onSetupPasteable(s.getRows)}),r.ui.registry.addButton("tablecutcol",{tooltip:"Cut column",icon:"cut-column",onAction:f("mceTableCutCol"),onSetup:u.onSetupColumn("onAny")}),r.ui.registry.addButton("tablecopycol",{tooltip:"Copy column",icon:"duplicate-column",onAction:f("mceTableCopyCol"),onSetup:u.onSetupColumn("onAny")}),r.ui.registry.addButton("tablepastecolbefore",{tooltip:"Paste column before",icon:"paste-column-before",onAction:f("mceTablePasteColBefore"),onSetup:u.onSetupPasteableColumn(s.getColumns,"onFirst")}),r.ui.registry.addButton("tablepastecolafter",{tooltip:"Paste column after",icon:"paste-column-after",onAction:f("mceTablePasteColAfter"),onSetup:u.onSetupPasteableColumn(s.getColumns,"onLast")}),r.ui.registry.addButton("tableinsertdialog",{tooltip:"Insert table",onAction:f("mceInsertTable"),icon:"table"});var m=lv(Zf(r));m.length!==0&&r.ui.registry.addMenuButton("tableclass",{icon:"table-classes",tooltip:"Table styles",fetch:fv(r,o,m,"tableclass",function(x){return r.execCommand("mceTableToggleClass",!1,x)}),onSetup:u.onSetupTable});var b=lv(eh(r));b.length!==0&&r.ui.registry.addMenuButton("tablecellclass",{icon:"table-cell-classes",tooltip:"Cell styles",fetch:fv(r,o,b,"tablecellclass",function(x){return r.execCommand("mceTableCellToggleClass",!1,x)}),onSetup:u.onSetupCellOrRow}),r.ui.registry.addMenuButton("tablecellvalign",{icon:"vertical-align",tooltip:"Vertical align",fetch:fv(r,o,nf,"tablecellverticalalign",af(r,"vertical-align")),onSetup:u.onSetupCellOrRow}),r.ui.registry.addMenuButton("tablecellborderwidth",{icon:"border-width",tooltip:"Border width",fetch:fv(r,o,J1(r),"tablecellborderwidth",af(r,"border-width")),onSetup:u.onSetupCellOrRow}),r.ui.registry.addMenuButton("tablecellborderstyle",{icon:"border-style",tooltip:"Border style",fetch:fv(r,o,ui(r),"tablecellborderstyle",af(r,"border-style")),onSetup:u.onSetupCellOrRow}),r.ui.registry.addToggleButton("tablecaption",{tooltip:"Table caption",onAction:f("mceTableToggleCaption"),icon:"table-caption",onSetup:u.onSetupTableWithCaption}),r.ui.registry.addMenuButton("tablecellbackgroundcolor",{icon:"cell-background-color",tooltip:"Background color",fetch:function(x){return x(Kd(r,i0(r),"background-color"))},onSetup:u.onSetupCellOrRow}),r.ui.registry.addMenuButton("tablecellbordercolor",{icon:"cell-border-color",tooltip:"Border color",fetch:function(x){return x(Kd(r,rh(r),"border-color"))},onSetup:u.onSetupCellOrRow}),r.ui.registry.addToggleButton("tablerowheader",{tooltip:"Row header",icon:"table-top-header",onAction:Nh(r),onSetup:u.onSetupTableRowHeaders}),r.ui.registry.addToggleButton("tablecolheader",{tooltip:"Column header",icon:"table-left-header",onAction:Vh(r),onSetup:u.onSetupTableColumnHeaders})},O2=function(r){var o=function(s){return r.dom.is(s,"table")&&r.getBody().contains(s)},u=d3(r);u.length>0&&r.ui.registry.addContextToolbar("table",{predicate:o,items:u,scope:"node",position:"node"})},k2=function(r,o,u,s){var f=function(pe){return function(){return r.execCommand(pe)}},m=function(pe){r.execCommand("mceInsertTable",!1,{rows:pe.numRows,columns:pe.numColumns})},b={text:"Table properties",onSetup:u.onSetupTable,onAction:f("mceTableProps")},x={text:"Delete table",icon:"table-delete-table",onSetup:u.onSetupTable,onAction:f("mceTableDelete")};r.ui.registry.addMenuItem("tableinsertrowbefore",{text:"Insert row before",icon:"table-insert-row-above",onAction:f("mceTableInsertRowBefore"),onSetup:u.onSetupCellOrRow}),r.ui.registry.addMenuItem("tableinsertrowafter",{text:"Insert row after",icon:"table-insert-row-after",onAction:f("mceTableInsertRowAfter"),onSetup:u.onSetupCellOrRow}),r.ui.registry.addMenuItem("tabledeleterow",{text:"Delete row",icon:"table-delete-row",onAction:f("mceTableDeleteRow"),onSetup:u.onSetupCellOrRow}),r.ui.registry.addMenuItem("tablerowprops",{text:"Row properties",icon:"table-row-properties",onAction:f("mceTableRowProps"),onSetup:u.onSetupCellOrRow}),r.ui.registry.addMenuItem("tablecutrow",{text:"Cut row",icon:"cut-row",onAction:f("mceTableCutRow"),onSetup:u.onSetupCellOrRow}),r.ui.registry.addMenuItem("tablecopyrow",{text:"Copy row",icon:"duplicate-row",onAction:f("mceTableCopyRow"),onSetup:u.onSetupCellOrRow}),r.ui.registry.addMenuItem("tablepasterowbefore",{text:"Paste row before",icon:"paste-row-before",onAction:f("mceTablePasteRowBefore"),onSetup:u.onSetupPasteable(s.getRows)}),r.ui.registry.addMenuItem("tablepasterowafter",{text:"Paste row after",icon:"paste-row-after",onAction:f("mceTablePasteRowAfter"),onSetup:u.onSetupPasteable(s.getRows)});var M={type:"nestedmenuitem",text:"Row",getSubmenuItems:Ae("tableinsertrowbefore tableinsertrowafter tabledeleterow tablerowprops | tablecutrow tablecopyrow tablepasterowbefore tablepasterowafter")};r.ui.registry.addMenuItem("tableinsertcolumnbefore",{text:"Insert column before",icon:"table-insert-column-before",onAction:f("mceTableInsertColBefore"),onSetup:u.onSetupColumn("onFirst")}),r.ui.registry.addMenuItem("tableinsertcolumnafter",{text:"Insert column after",icon:"table-insert-column-after",onAction:f("mceTableInsertColAfter"),onSetup:u.onSetupColumn("onLast")}),r.ui.registry.addMenuItem("tabledeletecolumn",{text:"Delete column",icon:"table-delete-column",onAction:f("mceTableDeleteCol"),onSetup:u.onSetupColumn("onAny")}),r.ui.registry.addMenuItem("tablecutcolumn",{text:"Cut column",icon:"cut-column",onAction:f("mceTableCutCol"),onSetup:u.onSetupColumn("onAny")}),r.ui.registry.addMenuItem("tablecopycolumn",{text:"Copy column",icon:"duplicate-column",onAction:f("mceTableCopyCol"),onSetup:u.onSetupColumn("onAny")}),r.ui.registry.addMenuItem("tablepastecolumnbefore",{text:"Paste column before",icon:"paste-column-before",onAction:f("mceTablePasteColBefore"),onSetup:u.onSetupPasteableColumn(s.getColumns,"onFirst")}),r.ui.registry.addMenuItem("tablepastecolumnafter",{text:"Paste column after",icon:"paste-column-after",onAction:f("mceTablePasteColAfter"),onSetup:u.onSetupPasteableColumn(s.getColumns,"onLast")});var R={type:"nestedmenuitem",text:"Column",getSubmenuItems:Ae("tableinsertcolumnbefore tableinsertcolumnafter tabledeletecolumn | tablecutcolumn tablecopycolumn tablepastecolumnbefore tablepastecolumnafter")};r.ui.registry.addMenuItem("tablecellprops",{text:"Cell properties",icon:"table-cell-properties",onAction:f("mceTableCellProps"),onSetup:u.onSetupCellOrRow}),r.ui.registry.addMenuItem("tablemergecells",{text:"Merge cells",icon:"table-merge-cells",onAction:f("mceTableMergeCells"),onSetup:u.onSetupMergeable}),r.ui.registry.addMenuItem("tablesplitcells",{text:"Split cell",icon:"table-split-cells",onAction:f("mceTableSplitCells"),onSetup:u.onSetupUnmergeable});var P={type:"nestedmenuitem",text:"Cell",getSubmenuItems:Ae("tablecellprops tablemergecells tablesplitcells")};Q1(r)===!1?r.ui.registry.addMenuItem("inserttable",{text:"Table",icon:"table",onAction:f("mceInsertTable")}):r.ui.registry.addNestedMenuItem("inserttable",{text:"Table",icon:"table",getSubmenuItems:function(){return[{type:"fancymenuitem",fancytype:"inserttable",onAction:m}]}}),r.ui.registry.addMenuItem("inserttabledialog",{text:"Insert table",icon:"table",onAction:f("mceInsertTable")}),r.ui.registry.addMenuItem("tableprops",b),r.ui.registry.addMenuItem("deletetable",x),r.ui.registry.addNestedMenuItem("row",M),r.ui.registry.addNestedMenuItem("column",R),r.ui.registry.addNestedMenuItem("cell",P),r.ui.registry.addContextMenu("table",{update:function(){return u.resetTargets(),u.targets().fold(Ae(""),function(pe){return Tn(pe.element)==="caption"?"tableprops deletetable":"cell row column | advtablesort | tableprops deletetable"})}});var ie=lv(Zf(r));ie.length!==0&&r.ui.registry.addNestedMenuItem("tableclass",{icon:"table-classes",text:"Table styles",getSubmenuItems:function(){return Uu(r,o,ie,"tableclass",function(pe){return r.execCommand("mceTableToggleClass",!1,pe)})},onSetup:u.onSetupTable});var Te=lv(eh(r));Te.length!==0&&r.ui.registry.addNestedMenuItem("tablecellclass",{icon:"table-cell-classes",text:"Cell styles",getSubmenuItems:function(){return Uu(r,o,Te,"tablecellclass",function(pe){return r.execCommand("mceTableCellToggleClass",!1,pe)})},onSetup:u.onSetupCellOrRow}),r.ui.registry.addNestedMenuItem("tablecellvalign",{icon:"vertical-align",text:"Vertical align",getSubmenuItems:function(){return Uu(r,o,nf,"tablecellverticalalign",af(r,"vertical-align"))},onSetup:u.onSetupCellOrRow}),r.ui.registry.addNestedMenuItem("tablecellborderwidth",{icon:"border-width",text:"Border width",getSubmenuItems:function(){return Uu(r,o,J1(r),"tablecellborderwidth",af(r,"border-width"))},onSetup:u.onSetupCellOrRow}),r.ui.registry.addNestedMenuItem("tablecellborderstyle",{icon:"border-style",text:"Border style",getSubmenuItems:function(){return Uu(r,o,ui(r),"tablecellborderstyle",af(r,"border-style"))},onSetup:u.onSetupCellOrRow}),r.ui.registry.addToggleMenuItem("tablecaption",{icon:"table-caption",text:"Table caption",onAction:f("mceTableToggleCaption"),onSetup:u.onSetupTableWithCaption}),r.ui.registry.addNestedMenuItem("tablecellbackgroundcolor",{icon:"cell-background-color",text:"Background color",getSubmenuItems:function(){return Kd(r,i0(r),"background-color")},onSetup:u.onSetupCellOrRow}),r.ui.registry.addNestedMenuItem("tablecellbordercolor",{icon:"cell-border-color",text:"Border color",getSubmenuItems:function(){return Kd(r,rh(r),"border-color")},onSetup:u.onSetupCellOrRow}),r.ui.registry.addToggleMenuItem("tablerowheader",{text:"Row header",icon:"table-top-header",onAction:Nh(r),onSetup:u.onSetupTableRowHeaders}),r.ui.registry.addToggleMenuItem("tablecolheader",{text:"Column header",icon:"table-left-header",onAction:Vh(r),onSetup:u.onSetupTableColumnHeaders})},A2=function(r){var o=t1(function(){return bc(r)},function(){return ii(Is(r),yc(r))},Ls.selectedSelector),u=wm(r,o),s=Ad(r),f=bn(r,s.lazyResize,u),m=A4(r,f,s.lazyWire),b=aS();return wb(r,m,f,o,b),Yh(r,m,o),Vi(r,o,m),k2(r,o,u,b),T2(r,o,u,b),O2(r),r.on("PreInit",function(){r.serializer.addTempAttr(Ls.firstSelected),r.serializer.addTempAttr(Ls.lastSelected),iS(r)}),Sc(r)&&r.on("keydown",function(x){_S(x,r,f)}),r.on("remove",function(){s.destroy()}),I4(r,b,s,u)};function M2(){Wy.add("table",A2)}M2()})();(function(){var nn=tinymce.util.Tools.resolve("tinymce.PluginManager");function Mt(){nn.add("contextmenu",function(){})}Mt()})();(function(){var nn=tinymce.util.Tools.resolve("tinymce.PluginManager"),Mt=function(oe){var Xe=typeof oe;return oe===null?"null":Xe==="object"&&(Array.prototype.isPrototypeOf(oe)||oe.constructor&&oe.constructor.name==="Array")?"array":Xe==="object"&&(String.prototype.isPrototypeOf(oe)||oe.constructor&&oe.constructor.name==="String")?"string":Xe},Fn=function(oe){return function(Xe){return Mt(Xe)===oe}},Qt=function(oe){return function(Xe){return typeof Xe===oe}},dt=Fn("string"),Kt=Qt("boolean"),kt=function(oe){return oe==null},$t=function(oe){return!kt(oe)},Ze=Qt("function"),mn=Qt("number"),Lt=function(){},Oe=function(oe,Xe){return function(st){return oe(Xe(st))}},tt=function(oe){return function(){return oe}},jt=function(oe){return oe},We=tt(!1),be=tt(!0),en=function(){return Ae},Ae=function(){var oe=function(ft){return ft()},Xe=jt,st={fold:function(ft,hn){return ft()},isSome:We,isNone:be,getOr:Xe,getOrThunk:oe,getOrDie:function(ft){throw new Error(ft||"error: getOrDie called on none.")},getOrNull:tt(null),getOrUndefined:tt(void 0),or:Xe,orThunk:oe,map:en,each:Lt,bind:en,exists:We,forall:be,filter:function(){return en()},toArray:function(){return[]},toString:tt("none()")};return st}(),wt=function(oe){var Xe=tt(oe),st=function(){return hn},ft=function(yn){return yn(oe)},hn={fold:function(yn,Tr){return Tr(oe)},isSome:be,isNone:We,getOr:Xe,getOrThunk:Xe,getOrDie:Xe,getOrNull:Xe,getOrUndefined:Xe,or:st,orThunk:st,map:function(yn){return wt(yn(oe))},each:function(yn){yn(oe)},bind:ft,exists:ft,forall:ft,filter:function(yn){return yn(oe)?hn:Ae},toArray:function(){return[oe]},toString:function(){return"some("+oe+")"}};return hn},j=function(oe){return oe==null?Ae:wt(oe)},je={some:wt,none:en,from:j},Ge=function(oe,Xe){for(var st=oe.length,ft=new Array(st),hn=0;hn<st;hn++){var yn=oe[hn];ft[hn]=Xe(yn,hn)}return ft},Pn=function(oe,Xe){for(var st=0,ft=oe.length;st<ft;st++){var hn=oe[st];Xe(hn,st)}},rn=function(oe,Xe){for(var st=[],ft=0,hn=oe.length;ft<hn;ft++){var yn=oe[ft];Xe(yn,ft)&&st.push(yn)}return st},ge=9,Le=11,qe=1,gn=3,L=function(oe,Xe){var st=Xe||document,ft=st.createElement("div");if(ft.innerHTML=oe,!ft.hasChildNodes()||ft.childNodes.length>1)throw console.error("HTML does not have a single root node",oe),new Error("HTML must have a single root node");return Ft(ft.childNodes[0])},_=function(oe,Xe){var st=Xe||document,ft=st.createElement(oe);return Ft(ft)},He=function(oe,Xe){var st=Xe||document,ft=st.createTextNode(oe);return Ft(ft)},Ft=function(oe){if(oe==null)throw new Error("Node cannot be null or undefined");return{dom:oe}},Gt=function(oe,Xe,st){return je.from(oe.dom.elementFromPoint(Xe,st)).map(Ft)},Xt={fromHtml:L,fromTag:_,fromText:He,fromDom:Ft,fromPoint:Gt},Ct=function(oe,Xe){var st=oe.dom;if(st.nodeType!==qe)return!1;var ft=st;if(ft.matches!==void 0)return ft.matches(Xe);if(ft.msMatchesSelector!==void 0)return ft.msMatchesSelector(Xe);if(ft.webkitMatchesSelector!==void 0)return ft.webkitMatchesSelector(Xe);if(ft.mozMatchesSelector!==void 0)return ft.mozMatchesSelector(Xe);throw new Error("Browser lacks native selectors")};typeof window<"u"||Function("return this;")();var p=function(oe){var Xe=oe.dom.nodeName;return Xe.toLowerCase()},tn=function(oe){return oe.dom.nodeType},Ne=function(oe){return function(Xe){return tn(Xe)===oe}},it=Ne(qe),Gn=Ne(gn),Dr=Ne(ge),It=Ne(Le),Hn=function(oe){return function(Xe){return it(Xe)&&p(Xe)===oe}},or=function(oe){return Xt.fromDom(oe.dom.ownerDocument)},_r=function(oe){return Dr(oe)?oe:or(oe)},Se=function(oe){return je.from(oe.dom.parentNode).map(Xt.fromDom)},Ke=function(oe){return Ge(oe.dom.childNodes,Xt.fromDom)},$r=function(oe,Xe,st){if(dt(st)||Kt(st)||mn(st))oe.setAttribute(Xe,st+"");else throw console.error("Invalid call to Attribute.set. Key ",Xe,":: Value ",st,":: Element ",oe),new Error("Attribute value was not simple")},xe=function(oe,Xe,st){$r(oe.dom,Xe,st)},Ce=function(oe,Xe){oe.dom.removeAttribute(Xe)},X=function(oe){return It(oe)&&$t(oe.dom.host)},ce=Ze(Element.prototype.attachShadow)&&Ze(Node.prototype.getRootNode),Y=ce?function(oe){return Xt.fromDom(oe.dom.getRootNode())}:_r,Z=function(oe){var Xe=Y(oe);return X(Xe)?je.some(Xe):je.none()},Me=function(oe){return Xt.fromDom(oe.dom.host)},ze=function(oe){var Xe=Gn(oe)?oe.dom.parentNode:oe.dom;if(Xe==null||Xe.ownerDocument===null)return!1;var st=Xe.ownerDocument;return Z(Xt.fromDom(Xe)).fold(function(){return st.body.contains(Xe)},Oe(ze,Me))},mt=function(oe,Xe,st){for(var ft=oe.dom,hn=Ze(st)?st:We;ft.parentNode;){ft=ft.parentNode;var yn=Xt.fromDom(ft);if(Xe(yn))return je.some(yn);if(hn(yn))break}return je.none()},gt=function(oe,Xe,st){return mt(oe,function(ft){return Ct(ft,Xe)},st)},Re=function(oe){return oe.style!==void 0&&Ze(oe.style.getPropertyValue)},cn=function(oe,Xe){var st=oe.dom,ft=window.getComputedStyle(st),hn=ft.getPropertyValue(Xe);return hn===""&&!ze(oe)?cr(st,Xe):hn},cr=function(oe,Xe){return Re(oe)?oe.style.getPropertyValue(Xe):""},ir=function(oe){return cn(oe,"direction")==="rtl"?"rtl":"ltr"},Eo=function(oe,Xe){return rn(Ke(oe),Xe)},wo=function(oe,Xe){return Eo(oe,function(st){return Ct(st,Xe)})},Xn=function(oe){return Se(oe).filter(it)},Cr=function(oe,Xe){var st=Xe?gt(oe,"ol,ul"):je.some(oe);return st.getOr(oe)},zr=Hn("li"),qn=function(oe,Xe){var st=oe.selection.getSelectedBlocks();st.length>0&&(Pn(st,function(ft){var hn=Xt.fromDom(ft),yn=zr(hn),Tr=Cr(hn,yn),ct=Xn(Tr);ct.each(function(pn){var mr=ir(pn);if(mr!==Xe?xe(Tr,"dir",Xe):ir(Tr)!==Xe&&Ce(Tr,"dir"),yn){var Aa=wo(Tr,"li[dir]");Pn(Aa,function(Go){return Ce(Go,"dir")})}})}),oe.nodeChanged())},Zn=function(oe){oe.addCommand("mceDirectionLTR",function(){qn(oe,"ltr")}),oe.addCommand("mceDirectionRTL",function(){qn(oe,"rtl")})},So=function(oe,Xe){return function(st){var ft=function(hn){var yn=Xt.fromDom(hn.element);st.setActive(ir(yn)===Xe)};return oe.on("NodeChange",ft),function(){return oe.off("NodeChange",ft)}}},sr=function(oe){oe.ui.registry.addToggleButton("ltr",{tooltip:"Left to right",icon:"ltr",onAction:function(){return oe.execCommand("mceDirectionLTR")},onSetup:So(oe,"ltr")}),oe.ui.registry.addToggleButton("rtl",{tooltip:"Right to left",icon:"rtl",onAction:function(){return oe.execCommand("mceDirectionRTL")},onSetup:So(oe,"rtl")})};function Qn(){nn.add("directionality",function(oe){Zn(oe),sr(oe)})}Qn()})();(function(){var nn=tinymce.util.Tools.resolve("tinymce.PluginManager"),Mt=function(Oe){var tt=Oe.getParam("nonbreaking_force_tab",0);return typeof tt=="boolean"?tt===!0?3:0:tt},Fn=function(Oe){return Oe.getParam("nonbreaking_wrap",!0,"boolean")},Qt=function(Oe,tt){for(var jt="",We=0;We<tt;We++)jt+=Oe;return jt},dt=function(Oe){return Oe.plugins.visualchars?Oe.plugins.visualchars.isEnabled():!1},Kt=function(Oe,tt){var jt=function(){return dt(Oe)?"mce-nbsp-wrap mce-nbsp":"mce-nbsp-wrap"},We=function(){return'<span class="'+jt()+'" contenteditable="false">'+Qt("&nbsp;",tt)+"</span>"},be=Fn(Oe),en=be||Oe.plugins.visualchars?We():Qt("&nbsp;",tt);Oe.undoManager.transact(function(){return Oe.insertContent(en)})},kt=function(Oe){Oe.addCommand("mceNonBreaking",function(){Kt(Oe,1)})},$t=tinymce.util.Tools.resolve("tinymce.util.VK"),Ze=function(Oe){var tt=Mt(Oe);tt>0&&Oe.on("keydown",function(jt){if(jt.keyCode===$t.TAB&&!jt.isDefaultPrevented()){if(jt.shiftKey)return;jt.preventDefault(),jt.stopImmediatePropagation(),Kt(Oe,tt)}})},mn=function(Oe){var tt=function(){return Oe.execCommand("mceNonBreaking")};Oe.ui.registry.addButton("nonbreaking",{icon:"non-breaking",tooltip:"Nonbreaking space",onAction:tt}),Oe.ui.registry.addMenuItem("nonbreaking",{icon:"non-breaking",text:"Nonbreaking space",onAction:tt})};function Lt(){nn.add("nonbreaking",function(Oe){kt(Oe),mn(Oe),Ze(Oe)})}Lt()})();(function(){var nn=tinymce.util.Tools.resolve("tinymce.PluginManager"),Mt=tinymce.util.Tools.resolve("tinymce.Env"),Fn=function(Oe){return Oe.getParam("pagebreak_separator","<!-- pagebreak -->")},Qt=function(Oe){return Oe.getParam("pagebreak_split_block",!1)},dt="mce-pagebreak",Kt=function(Oe){var tt='<img src="'+Mt.transparentSrc+'" class="'+dt+'" data-mce-resize="false" data-mce-placeholder />';return Oe?"<p>"+tt+"</p>":tt},kt=function(Oe){var tt=Fn(Oe),jt=function(){return Qt(Oe)},We=new RegExp(tt.replace(/[\?\.\*\[\]\(\)\{\}\+\^\$\:]/g,function(be){return"\\"+be}),"gi");Oe.on("BeforeSetContent",function(be){be.content=be.content.replace(We,Kt(jt()))}),Oe.on("PreInit",function(){Oe.serializer.addNodeFilter("img",function(be){for(var en=be.length,Ae,wt;en--;)if(Ae=be[en],wt=Ae.attr("class"),wt&&wt.indexOf(dt)!==-1){var j=Ae.parent;if(Oe.schema.getBlockElements()[j.name]&&jt()){j.type=3,j.value=tt,j.raw=!0,Ae.remove();continue}Ae.type=3,Ae.value=tt,Ae.raw=!0}})})},$t=function(Oe){Oe.addCommand("mcePageBreak",function(){Oe.insertContent(Kt(Qt(Oe)))})},Ze=function(Oe){Oe.on("ResolveName",function(tt){tt.target.nodeName==="IMG"&&Oe.dom.hasClass(tt.target,dt)&&(tt.name="pagebreak")})},mn=function(Oe){var tt=function(){return Oe.execCommand("mcePageBreak")};Oe.ui.registry.addButton("pagebreak",{icon:"page-break",tooltip:"Page break",onAction:tt}),Oe.ui.registry.addMenuItem("pagebreak",{text:"Page break",icon:"page-break",onAction:tt})};function Lt(){nn.add("pagebreak",function(Oe){$t(Oe),mn(Oe),kt(Oe),Ze(Oe)})}Lt()})();tinymce.PluginManager.add("letterspacing",function(nn,Mt){function Fn(Kt){var kt=nn.dom,$t=nn.selection.getSelectedBlocks();Qt.each($t,function(Ze){if(kt.getStyle(Ze,"text-indent")){var mn="";Ze&&Ze.children[0]&&Ze.children[0].attributes&&Ze.children[0].attributes.style&&(mn=(mn=(mn=Ze.children[0].attributes.style.textContent.match(/font-size:?(.+?)"?[;}]/))?mn[1]:!1)?2*(parseInt(mn)+parseInt(Kt||0))+"px":2*(parseInt(Kt||0)+16)+"px"),kt.setStyle(Ze,"text-indent",mn||"2em")}}),nn.undoManager.transact(function(){nn.focus(),nn.formatter.apply("letterspacing",{value:Kt})})}var Qt=tinymce.util.Tools.resolve("tinymce.util.Tools"),dt=nn.getParam("letterspacing","0px 1px 2px 4px 6px 8px 10px 20px 40px");return nn.on("init",function(){nn.formatter.register({letterspacing:{inline:"span",toggle:!1,styles:{"letter-spacing":"%value"},clear_child_styles:!0}})}),nn.ui.registry.getAll().icons.letterspacing||nn.ui.registry.addIcon("letterspacing",'<svg t="1610616201691" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="969" width="24" height="24"><path d="M682.666667 704l128 106.666667-128 106.666666v-85.333333H341.333333v85.333333L213.333333 810.666667l128-106.666667v85.333333h341.333334v-85.333333zM170.666667 170.666667v682.666666H85.333333V170.666667h85.333334z m768 0v682.666666h-85.333334V170.666667h85.333334z m-394.666667 0l202.666667 469.333333h-89.6l-38.4-93.866667h-213.333334L366.933333 640H277.333333l202.666667-469.333333h64zM512 255.146667L432.213333 469.333333h159.573334L512 255.146667z" p-id="970" fill="#222f3e"></path></svg>'),nn.ui.registry.addMenuButton("letterspacing",{icon:"letterspacing",tooltip:"",fetch:function(Kt){var kt=dt.split(" ").map(function($t){return{type:"togglemenuitem",text:$t,onAction:function(){Fn($t)}}});Kt(kt)}}),{getMetadata:function(){return{name:"",url:"https://github.com/Five-great/tinymce-plugins"}}}});const{emitter:Nj}=JT(),Vj='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 3C2.22386 3 2 3.22386 2 3.5V4.5C2 4.77614 2.22386 5 2.5 5H21.5C21.7761 5 22 4.77614 22 4.5V3.5C22 3.22386 21.7761 3 21.5 3H2.5Z" fill="currentColor"/><path d="M6.19133 14.4465L11 9.63788V21.467C11 21.7615 11.2388 22.0003 11.5333 22.0003H12.4667C12.7612 22.0003 13 21.7615 13 21.467V9.61452L17.832 14.4465C18.0403 14.6548 18.378 14.6548 18.5863 14.4465L19.2462 13.7866C19.4545 13.5783 19.4545 13.2406 19.2462 13.0323L12.458 6.2441C12.3362 6.12232 12.1702 6.07174 12.0117 6.09237C11.8531 6.07174 11.6871 6.12232 11.5653 6.2441L4.77712 13.0323C4.56884 13.2406 4.56884 13.5783 4.77712 13.7866L5.43709 14.4465C5.64537 14.6548 5.98305 14.6548 6.19133 14.4465Z" fill="currentColor"/></svg>',Uj='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M11 6.36207L9.19133 4.5534C8.98305 4.34513 8.64537 4.34513 8.43709 4.55341L7.77712 5.21337C7.56884 5.42165 7.56884 5.75934 7.77712 5.96762L11.5653 9.75584C11.6871 9.87762 11.8531 9.9282 12.0117 9.90757C12.1702 9.9282 12.3362 9.87762 12.458 9.75584L16.2462 5.96762C16.4545 5.75934 16.4545 5.42165 16.2462 5.21337L15.5863 4.55341C15.378 4.34513 15.0403 4.34513 14.832 4.5534L13 6.38542V1.53297C13 1.23841 12.7612 0.999634 12.4667 0.999634H11.5333C11.2388 0.999634 11 1.23841 11 1.53297V6.36207Z" fill="currentColor"/><path d="M11 17.5499L9.19133 19.3586C8.98305 19.5669 8.64537 19.5669 8.43709 19.3586L7.77712 18.6986C7.56884 18.4903 7.56884 18.1527 7.77712 17.9444L11.5653 14.1562C11.6871 14.0344 11.8531 13.9838 12.0117 14.0044C12.1702 13.9838 12.3362 14.0344 12.458 14.1562L16.2462 17.9444C16.4545 18.1527 16.4545 18.4903 16.2462 18.6986L15.5863 19.3586C15.378 19.5669 15.0403 19.5669 14.832 19.3586L13 17.5266V22.379C13 22.6736 12.7612 22.9124 12.4667 22.9124H11.5333C11.2388 22.9124 11 22.6736 11 22.379V17.5499Z" fill="currentColor"/><path d="M2.5 10.9999C2.22386 10.9999 2 11.2238 2 11.4999V12.4999C2 12.7761 2.22386 12.9999 2.5 12.9999H21.5C21.7761 12.9999 22 12.7761 22 12.4999V11.4999C22 11.2238 21.7761 10.9999 21.5 10.9999H2.5Z" fill="currentColor"/></svg>',Wj='<svg t="1713518245725" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="17410" width="24" height="24"><path d="M508.842667 42.666667a42.666667 42.666667 0 0 1 42.666666 42.666666V725.333333a42.666667 42.666667 0 0 1-85.333333 0l0-640a42.666667 42.666667 0 0 1 42.666667-42.666666z" fill="#373C43" p-id="17411"></path><path d="M502.314667 707.84l275.541333-266.069333a42.666667 42.666667 0 1 1 59.306667 61.44L531.029333 798.634667a42.538667 42.538667 0 0 1-60.16-0.853334l-291.242666-298.666666a42.666667 42.666667 0 0 1 61.098666-59.605334l261.589334 268.245334z" fill="#373C43" p-id="17412"></path><path d="M935.509333 981.333333m-42.666666 0l-768 0q-42.666667 0-42.666667-42.666666l0 0q0-42.666667 42.666667-42.666667l768 0q42.666667 0 42.666666 42.666667l0 0q0 42.666667-42.666666 42.666666Z" fill="#8D9399" p-id="17413"></path></svg>',jj=xu.IconManager.has("vertical-content");jj||xu.IconManager.add("vertical-content",{icons:{"top-align":Vj,"center-align":Uj,"bottom-align":Wj}});const Gj={name:"vertical-content",plugin:function(nn){const Mt=nn.targetElm,Fn=nn.settings.vertical_align,Qt={"top-align":{component:null,tooltip:""},"center-align":{component:null,tooltip:","},"bottom-align":{component:null,tooltip:","}};for(const dt in Qt)nn.ui.registry.addToggleButton(dt,{icon:dt,tooltip:Qt[dt].tooltip,onAction:Kt=>{for(const kt in Qt)if(kt===dt){const $t=Kt.isActive()?"":dt;Nj.emit("vertical-change-"+Mt.id,$t),Qt[dt].component.setActive(!Kt.isActive())}else Qt[kt].component.isActive()&&Qt[kt].component.setActive(!1)},onSetup(Kt){return Fn===dt&&Kt.setActive(!0),kt=>Qt[dt].component=kt}});return{getMetadata:function(){return{name:"Vertical align",url:"https://dataease.io"}}}}},qj=Object.freeze(Object.defineProperty({__proto__:null,default:Gj},Symbol.toStringTag,{value:"Module"})),HA=Object.assign({"./vertical-content.ts":qj});for(const nn in HA){const Mt=HA[nn].default;xu.PluginManager.get(Mt.name)||xu.PluginManager.add(Mt.name,Mt.plugin)}const Kj=Cj({__name:"DeRichTextView",props:{scale:{type:Number,required:!1,default:1},element:{type:Object},editMode:{type:String,require:!1,default:"edit"},active:{type:Boolean,require:!1,default:!1},disabled:{type:Boolean,default:!1},showPosition:{type:String,required:!1,default:"preview"},themes:{type:String,default:"dark"},suffixId:{type:String,required:!1,default:"common"}},setup(nn,{expose:Mt}){const Fn=_j(),Qt=Ic(""),dt=Bj(),{canvasViewInfo:Kt,mobileInPc:kt}=Tj(dt),$t=Ic(!1),Ze=Lj(),mn=nn,{element:Lt,editMode:Oe,active:tt,disabled:jt,showPosition:We,suffixId:be}=Oj(mn),en=kj({emptyValue:"-",data:null,viewDataInfo:null,totalItems:0,firstRender:!0,previewFirstRender:!0}),Ae=Ic({}),wt=Ic({}),j=Ic({}),je=Ic([]),Ge=Ic(!1),Pn=Ic(!0),rn=Ic(!1),ge="tinymce-view-"+Lt.value.id+"-"+be.value+"-"+We.value,Le=Ic(""),qe=Ze.fontList.map(Y=>Y.name),gn=()=>{let Y="";return $j.concat(Ze.fontList.map(Z=>({name:Z.name,value:Z.name}))).forEach(Z=>{Y=Y+Z.name+"="+Z.name+";"}),Y},L=Ic({selector:"#"+ge,toolbar_items_size:"small",language_url:YT("./tinymce-dataease-private/langs/zh_CN.js"),language:"zh_CN",skin_url:YT("./tinymce-dataease-private/skins/ui/oxide"),content_css:YT("./tinymce-dataease-private/skins/content/default/content.css"),plugins:"vertical-content advlist autolink link image lists charmap  media wordcount table contextmenu directionality pagebreak letterspacing",toolbar:"undo redo | fontselect fontsizeselect |forecolor backcolor bold italic letterspacing |underline strikethrough link lineheight| formatselect |top-align center-align bottom-align | alignleft aligncenter alignright | bullist numlist | blockquote subscript superscript removeformat | table image ",toolbar_location:"/",font_formats:gn(),fontsize_formats:"12px 14px 16px 18px 20px 22px 24px 28px 32px 36px 42px 48px 56px 72px",menubar:!1,placeholder:"",outer_placeholder:"",inline:!0,branding:!1,icons:"vertical-content",vertical_align:Lt.value.propValue.verticalAlign,table_default_attributes:{width:"400"},table_default_styles:{width:"400px"},setup:function(Y){let Z=null,Me=null;Y.on("init",()=>{const ze=Y.getDoc();ze.addEventListener("mousedown",gt=>{Ef(()=>{Me=gt.target.closest(".ephox-snooker-resizer-bar-dragging"),Me&&(Z=Me.cloneNode(!0),Z.style.zIndex=9999,Me.style.display="none",Me.parentNode.appendChild(Z))})}),ze.addEventListener("mousemove",gt=>{if(Z)if(Z.offsetHeight>Z.offsetWidth){const Re=gt.movementX*mn.scale;Z.style.left=`${Z.offsetLeft+Re}px`}else{const Re=gt.movementY*mn.scale;Z.style.top=`${Z.offsetTop+Re}px`}}),ze.addEventListener("mouseup",gt=>{Z&&(Me.style.display="",Z&&Z.parentNode.removeChild(Z),Z=null,Me=null)});const mt=(gt,Re)=>{Ef(()=>{const cn=ze.getElementById("mceResizeHandlene"),cr=ze.getElementById("mceResizeHandlese"),ir=ze.getElementById("mceResizeHandlesw");cn&&(cn.style.left=`${gt}px`),cr&&(cr.style.left=`${gt}px`,cr.style.top=`${Re}px`),ir&&(ir.style.top=`${Re}px`)})};Y.on("ObjectSelected",gt=>{gt.target.nodeName==="TABLE"&&mt(gt.target.offsetWidth+gt.target.offsetLeft,gt.target.offsetHeight+gt.target.offsetTop)}),Y.on("ObjectResized",function(gt){const{target:Re,width:cn,height:cr,origin:ir}=gt;Re.nodeName==="TABLE"&&ir.indexOf("corner")>-1?(Re.style.width=`${cn}px`,Re.style.height=`${cr}px`):Re.nodeName==="TABLE"&&ir.indexOf("bar-col")>-1})})}}),_=Gm(()=>Oe.value==="edit");OA(()=>tt.value,Y=>{if(!Y){const Z=xu.editors[ge];rn.value&&(Lt.value.propValue.textValue=Z==null?void 0:Z.getContent()),Lt.value.editing=!1,rn.value=!1,_r(),Le.value=p(Lt.value.propValue.textValue),Z.setContent(Le.value)}}),OA(()=>Le.value,()=>{if(rn.value){const Y=xu.editors[ge];Lt.value.propValue.textValue=Y==null?void 0:Y.getContent()}Ge.value&&rn.value&&(Fn.recordSnapshotCache("renderChart",Lt.value.id),tn(Le.value))});const He={"top-align":{},"center-align":{margin:"auto"},"bottom-align":{"margin-top":"auto"}},Ft=Gm(()=>{const Y=Lt.value.propValue.verticalAlign;return Y?He[Y]:{}});JT({name:"vertical-change-"+ge,callback:Y=>{Lt.value.propValue.verticalAlign=Y}});const Gt=()=>{JT({name:"fieldSelect-"+Lt.value.id,callback:function(Y){Ne(Y)}}),xu.init({}),Le.value=p(Lt.value.propValue.textValue)},Xt=()=>{rn.value||(Le.value=p(Lt.value.propValue.textValue),xu.editors[ge].setContent(Le.value))},Ct=()=>{setTimeout(()=>{document.querySelectorAll("p").forEach(Z=>{Z.getAttribute("onclick")&&Z.getAttribute("onclick").includes("event.stopPropagation()")||Z.setAttribute("onclick","event.stopPropagation()")})},1e3)},p=Y=>{const Z=Y.match(/\[(.+?)\]/g);if(Z){const Me=X(en.viewDataInfo);Z.forEach(ze=>{if(je.value.includes(ze)){const mt=ze.slice(1,-1);let gt=wt.value[mt]!==void 0?wt.value[mt]:null,Re=gt||en.emptyValue;if(Me&&Me[mt]){const cn=Me[mt];Re=`<span style="color:${cn.color};background-color: ${cn.backgroundColor}">${Re}</span>`}Ge.value?Y=Y.replace(ze,Re):Y=Y.replace(ze,gt?Re:"[...]")}})}return Y=Y.replace('class="base-selected"',""),Y=Y.replace(/href="#\//g,'href="/#/'),Y=Y.replace(/href=\\"#\//g,'href=\\"/#/'),Y=Y.replace(/href=\\"#\//g,'href=\\"/#/'),Gn(),tn(Y),Ct(),Y},tn=Y=>{const Z=/font-family:\s*([^;"]+);/g;let Me;for(;(Me=Z.exec(Y))!==null;){const ze=Me[1].trim();qe.includes(ze)&&Ze.setCurrentFont(ze)}},Ne=Y=>{const Z=xu.editors[ge],ze='<span id="'+("changeText-"+zj())+'"><span class="mceNonEditable" contenteditable="false" data-mce-content="['+Y.name+']">['+Y.name+"]</span></span>",mt='<span id="attachValue">&nbsp;</span>';Z.insertContent(ze),Z.insertContent(mt),Fn.resetStyleChangeTimes()},it=()=>{if(rn.value){const Y=xu.activeEditor.selection.getNode();Gn(Y)}},Gn=Y=>{const Z=xu.get(ge);if(Z!=null&&Z.dom){const Me=Z.dom.select(".base-selected");if(Me&&Me.forEach(ze=>{ze.removeAttribute("class")}),Y){const ze=Y.parentElement;if(ze&&ze.id&&ze.id.indexOf("changeText")>-1){const mt="#"+ze.id,gt=Z.dom.select(mt)[0];gt.setAttribute("class","base-selected"),Z.selection.select(gt)}}}},Dr=Gm(()=>["canvas","canvasDataV","edit"].includes(We.value)&&_.value&&rn.value===!1&&!$t.value&&!jt.value&&!kt.value),It=Gm(()=>Dr.value&&(Le.value==null||Le.value=="")&&!$t.value),Hn=Gm(()=>!(Lt.value.canvasId.includes("Group")&&!tt.value)),or=()=>{setTimeout(()=>{Dr.value&&Hn.value&&(rn.value=!0,Lt.value.editing=!0,Le.value=Lt.value.propValue.textValue,xu.editors[ge].setContent(Le.value),_r())})},_r=()=>{Pn.value=!1,Ef(()=>{Pn.value=!0,Se()})},Se=()=>{setTimeout(()=>{const Y=document.getElementById(ge),Z=document.createRange(),Me=window.getSelection();Y.childNodes&&(Z.setStart(Y.childNodes[Y.childNodes.length-1],1),Z.collapse(!1),Me.removeAllRanges(),Me.addRange(Z)),Y.focus&&Y.focus(),xu.init({selector:ge,plugins:"table",setup:function(ze){ze.on("init",function(){console.info("====init====")})}})},100)},Ke=Y=>{var Z,Me;en.emptyValue=((Me=(Z=Y==null?void 0:Y.senior)==null?void 0:Z.functionCfg)==null?void 0:Me.emptyDataStrategy)==="custom"?Y.senior.functionCfg.emptyDataCustomValue||"":"-"},$r=(Y,Z)=>{if($t.value=!1,Ke(Y),Y.tableId||Y.dataFrom==="template"){const Me=JSON.parse(JSON.stringify(Y));Rj(Me).then(ze=>{if(ze.code&&ze.code!==0)$t.value=!0,Qt.value=ze.msg;else{en.data=ze==null?void 0:ze.data,en.viewDataInfo=ze,en.totalItems=ze==null?void 0:ze.totalItems;const mt=Kt.value[Lt.value.id];ze.data&&(mt.curFields=ze.data.fields),dt.setViewDataDetails(Lt.value.id,ze),Ge.value=!0,xe(ze)}Z==null||Z(),Ef(()=>{Ge.value=!0})}).catch(()=>{Ef(()=>{Ge.value=!0}),Z==null||Z()})}else if(Y.tableId)Ef(()=>{Ge.value=!0}),Z==null||Z();else{en.data=[],en.viewDataInfo={},en.totalItems=0;const Me=Kt.value[Lt.value.id];Me&&(Me.curFields=[],dt.setViewDataDetails(Lt.value.id,en.viewDataInfo),Ge.value=!0,xe(Me)),Ge.value=!0,Z==null||Z(),Ef(()=>{Ge.value=!0})}},xe=Y=>{if(je.value=[],Ae.value={},wt.value={},j.value={},Y.data&&Y.data.sourceFields){const Z=JSON.stringify(Y.xAxis)+JSON.stringify(Y.xAxisExt)+JSON.stringify(Y.yAxis)+JSON.stringify(Y.yAxisExt);Y.data.sourceFields.forEach(Re=>{Z.indexOf(Re.id)>-1&&je.value.push(`[${Re.name}]`)}),Z.indexOf('"*"')>-1&&je.value.push("[*]");const Me=Y.data.fields.reduce((Re,cn)=>(Re[cn.dataeaseName]=cn.id,Re),{}),ze=Y.data.fields.reduce((Re,cn)=>(Re[cn.dataeaseName]=cn.name,Re),{}),mt=Y.data.tableRow[0];if(Y.type==="rich-text"){let Re=JSON.parse(JSON.stringify(Y.yAxis));const cn=[],cr=[];Re.forEach(ir=>{cn.push(ir.dataeaseName),cr[ir.dataeaseName]=ir.formatterCfg})}const gt=Y.yAxis.reduce((Re,cn)=>(Re[cn.dataeaseName]=cn,Re),{});for(const Re in mt){Ae.value[Me[Re]]=mt[Re];let cn=mt[Re];const cr=mt[Re],ir=gt[Re];ir&&ir.formatterCfg&&(cn=Hj(cn,ir.formatterCfg)),wt.value[ze[Re]]=cn,j.value[ze[Re]]=cr}}Lt.value.propValue.innerType=Y.type,Lt.value.propValue.render=Y.render,Y.type==="rich-text"&&Ef(()=>{Xt(),RA.emit("initCurFields-"+Lt.value.id)})},Ce=Y=>{Ke(Y),Xt(),RA.emit("initCurFields-"+Lt.value.id)},X=Y=>{if(!Y||!Y.senior)return;const{threshold:Z}=Ij(Y.senior);if(!Z.enable)return;const Me={},ze=Z.tableThreshold??[];if((ze==null?void 0:ze.length)>0)for(let mt=0;mt<ze.length;mt++){const gt=ze[mt];let Re="none",cn="none";Me[gt.field.name]={color:BA(j.value[gt.field.name],Re,gt,"color"),backgroundColor:BA(j.value[gt.field.name],cn,gt,"backgroundColor")}}return Me},ce=Gm(()=>[{"--de-canvas-scale":mn.scale}]);return Aj(()=>{Gt()}),Mt({calcData:$r,renderChart:Ce}),(Y,Z)=>(_y(),kA("div",{class:DA(["rich-main-class",{"edit-model":rn.value}]),onKeydown:Z[1]||(Z[1]=_A(()=>{},["stop"])),onKeyup:Z[2]||(Z[2]=_A(()=>{},["stop"])),onDblclick:or,onClick:it,style:MA(ce.value)},[$t.value?(_y(),AA(Fj,{key:0,"err-msg":Qt.value},null,8,["err-msg"])):XT("",!0),Pn.value&&!$t.value?(_y(),AA(EA(Dj),{key:1,modelValue:Le.value,"onUpdate:modelValue":Z[0]||(Z[0]=Me=>Le.value=Me),class:"custom-text-content",style:MA(Ft.value),id:ge,init:L.value,disabled:!rn.value||EA(jt)},null,8,["modelValue","style","init","disabled"])):XT("",!0),It.value?(_y(),kA("div",{key:2,class:DA(["rich-placeholder",{"rich-placeholder--dark":nn.themes==="dark"}])},Mj(L.value.outer_placeholder),3)):XT("",!0)],38))}});const AG=Pj(Kj,[["__scopeId","data-v-4c8dd075"]]);export{AG as default};
