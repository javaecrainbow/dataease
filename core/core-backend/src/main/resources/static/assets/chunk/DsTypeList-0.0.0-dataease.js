import"./index-0.0.0-dataease.js";import{j as S,_ as T,k as U,e as A}from"./index-0.0.0-dataease2.js";import{t as d,n as L,d as m}from"./option-0.0.0-dataease.js";import{i as M}from"./datasource-list-0.0.0-dataease.js";import{d as O,s as V,m as X,f as c,M as p,Z as f,aa as v,N as _,a7 as x,k as D,i as C,g as y,q as Z,j as k}from"./vue-0.0.0-dataease.js";import{_ as j}from"./_plugin-vue_export-helper-0.0.0-dataease.js";import"./library-0.0.0-dataease.js";import"./lodash-0.0.0-dataease.js";import"./axios-0.0.0-dataease.js";import"./echarts-0.0.0-dataease.js";import"./tinymce-0.0.0-dataease.js";import"./user-0.0.0-dataease.js";const $={class:"ds-type-list"},H={class:"title-form_primary"},J={class:"item-container"},W=["onClick"],q={class:"db-name"},z=O({__name:"DsTypeList",props:{currentType:{type:String,default:"OLTP"},filterText:{type:String,default:""},latestUseTypes:{type:Array}},emits:["selectDsType"],setup(E,{emit:b}){const n=E,{t:w}=S(),i=V([]),I=X(()=>{if(n.currentType=="all")return d.map((e,a)=>({name:L[e],dbList:i.value[a].filter(t=>t.name.toLowerCase().includes(n.filterText.trim()))}));if(n.currentType==="latestUse"){let e=[],a=[];n.latestUseTypes.forEach(s=>{m.forEach(r=>{r.type===s&&e.indexOf(r.catalog)===-1&&e.push(r.catalog)})});let t=[];return e.forEach(s=>{n.latestUseTypes.forEach(r=>{m.forEach(l=>{l.type===r&&l.catalog===s&&t.push(l)})})}),t=t.filter(s=>s.name.toLowerCase().includes(n.filterText.trim())),a.push({name:w("data_source.recently_created"),dbList:t}),a}const o=d.findIndex(e=>n.currentType===e);return[{name:L[n.currentType],dbList:i.value[o].filter(e=>e.name.toLowerCase().includes(n.filterText.trim()))}]});(()=>{const o=[[],[],[],[],[]];m.forEach(e=>{const a=d.findIndex(t=>t===e.catalog);a!==-1&&o[a].push(e)}),i.value=o.map(e=>e.sort((a,t)=>a.name.toLowerCase().charCodeAt(0)-t.name.toLowerCase().charCodeAt(0)))})();const N=o=>{o.forEach(e=>{const{name:a,category:t,type:s,icon:r,extraParams:l,staticMap:R}=e,h={name:a,catalog:t,type:s,icon:r,extraParams:l,isPlugin:!0,staticMap:R},g=d.findIndex(u=>u===h.catalog);if(g!==-1){let u=JSON.parse(JSON.stringify(i.value));u[g].push(h),i.value=u}})},P=b,B=({type:o})=>{P("selectDsType",o)};return(o,e)=>{const a=A;return c(),p("div",$,[(c(!0),p(f,null,v(I.value,t=>(c(),p(f,{key:t.name},[_("div",H,x(t.name),1),_("div",J,[(c(!0),p(f,null,v(t.dbList,s=>(c(),p("div",{key:s.type,class:"db-card",onClick:r=>B(s)},[D(a,{class:"icon-border"},{default:C(()=>[s.isPlugin?(c(),y(T,{key:0,"static-content":s.icon},null,8,["static-content"])):(c(),y(T,{key:1},{default:C(()=>[(c(),y(Z(k(M)[s.type]),{class:"svg-icon"}))]),_:2},1024))]),_:2},1024),_("p",q,x(s.name),1)],8,W))),128))])],64))),128)),D(k(U),{jsname:"L2NvbXBvbmVudC9wbHVnaW5zLWhhbmRsZXIvRHNDYXRlZ29yeUhhbmRsZXI=",onLoadDsPlugin:N})])}}});const ie=j(z,[["__scopeId","data-v-e1a321f8"]]);export{ie as default};
