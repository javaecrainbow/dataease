import"./index-0.0.0-dataease.js";import{E as V}from"./el-dialog-0.0.0-dataease.js";import{w as C,n as E}from"./index-0.0.0-dataease2.js";import S from"./RowAuth-0.0.0-dataease.js";import{s as F}from"./snapshot-0.0.0-dataease.js";import{d as x,r as f,m as B,f as L,g as N,i as r,R as A,n as D,S as I,k as l,a6 as u,a7 as m,N as p}from"./vue-0.0.0-dataease.js";const M={class:"tree-cont"},R={class:"content"},H=x({__name:"FilterTree",emits:["filter-data"],setup($,{expose:_,emit:h}){const v=h,g=A("filedList",()=>[]),a=f(),i=f(!1),n=B(()=>g().reduce((t,e)=>(e.id!=="-1"&&(t[e.id]=e),t),{}));I("filedList",n);const y=()=>{i.value=!1},T=F(),b=()=>{a.value.submit()},k=t=>{const{logic:e,items:s,errorMessage:o}=t;if(o){C.error({message:o,type:"error",showClose:!0});return}c(s),v("filter-data",{logic:e,items:s}),T.recordSnapshotCache(),i.value=!1},c=t=>{t.forEach(e=>{var s,o;(o=(s=e==null?void 0:e.subTree)==null?void 0:s.items)!=null&&o.length?c(e.subTree.items||[]):e.field&&delete e.field})},d=t=>{t.forEach(e=>{var s,o;(o=(s=e==null?void 0:e.subTree)==null?void 0:s.items)!=null&&o.length?d(e.subTree.items):n.value[e.fieldId]&&(e.field=n.value[e.fieldId])})};return _({init:t=>{i.value=!0,D(()=>{d(t.items||[]),a.value.init(t||{})})}}),(t,e)=>{const s=E,o=V;return L(),N(o,{width:"896px","append-to-body":"",title:"添加过滤","destroy-on-close":"",class:"de-dialog-form filter-tree-cont",modelValue:i.value,"onUpdate:modelValue":e[0]||(e[0]=w=>i.value=w)},{footer:r(()=>[l(s,{secondary:"",onClick:y},{default:r(()=>[u(m(t.$t("chart.cancel")),1)]),_:1}),l(s,{type:"primary",onClick:b},{default:r(()=>[u(m(t.$t("chart.confirm")),1)]),_:1})]),default:r(()=>[p("div",M,[p("div",R,[l(S,{onSave:k,ref_key:"rowAuth",ref:a},null,512)])])]),_:1},8,["modelValue"])}}});export{H as _};
