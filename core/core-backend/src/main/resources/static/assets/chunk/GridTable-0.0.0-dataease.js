import{p as n}from"./index-0.0.0-dataease.js";import{E as P}from"./el-table-column-0.0.0-dataease.js";import"./el-checkbox-0.0.0-dataease.js";import"./el-tag-0.0.0-dataease.js";import"./el-tooltip-0.0.0-dataease.js";import"./el-popper-0.0.0-dataease.js";import{E as T}from"./el-pagination-0.0.0-dataease.js";import"./index-0.0.0-dataease2.js";import"./el-select-0.0.0-dataease.js";import{E as R}from"./EmptyBackground-0.0.0-dataease.js";import{d as B,ah as I,al as j,_ as G,m as v,r as k,w as y,f as D,M as E,k as d,i as S,a5 as C,aC as _,j as x,a0 as F,V as O,p as V,n as z}from"./vue-0.0.0-dataease.js";import{_ as W}from"./_plugin-vue_export-helper-0.0.0-dataease.js";const L=(o,m)=>{const t=[],{columns:l}=o,[f]=m.slots.default(),{children:p=[]}=f||{};return l!=null&&l.length?(p.forEach(u=>{const{prop:b,key:h,type:e}=u.props||{};(l.includes(b)||h==="_operation"||e==="selection")&&t.push(u)}),t):p},M={key:0,class:"pagination-cont"},N=B({__name:"GridTable",props:{columns:n.arrayOf(n.string),isSearch:n.bool.def(!1),showPagination:n.bool.def(!0),multipleSelection:n.array.def(()=>[]),pagination:n.object,isRememberSelected:n.bool.def(!1),selectedFlags:n.string.def("id"),tableData:n.array,emptyDesc:n.string,emptyImg:n.string,border:n.bool.def(!1)},setup(o,{expose:m}){const t=o,l=I(),f=()=>{Object.keys(l).forEach(a=>{a.startsWith("on")?["onSizeChange","onCurrentChange"].includes(a)?e.paginationEvent[a.slice(2)]=l[a]:e.tableEvent[a.slice(2)]=l[a]:e.tableAttrs[a]=l[a]})},p=a=>{i.value.toggleRowSelection(a,!0)},u=()=>{i.value.toggleAllSelection()},b=()=>{i.value.clearSelection()},h=a=>{e.multipleSelectionCache=[...e.multipleSelectionCache,...a];const s=e.multipleSelectionCache.map(c=>c[t.selectedFlags]),r=[];t.tableData.forEach(c=>{const g=s.indexOf(c[t.selectedFlags]);g!==-1&&(i.value.toggleRowSelection(c,!0),r.push(g))}),r.sort().reduceRight((c,g)=>{e.multipleSelectionCache.splice(g,1)},0)};j(()=>{f()});const e=G({paginationEvent:{},paginationDefault:{currentPage:1,pageSizes:[10,20,50,100],pageSize:10,layout:"total, prev, pager, next, sizes, jumper",total:0},multipleSelectionCache:[],tableEvent:{},tableAttrs:{}}),w=v(()=>t.emptyImg?t.emptyImg:t.isSearch?"tree":"noneWhite"),i=k(null),A=v(()=>[...e.multipleSelectionCache,...t.multipleSelection]);return y(t.pagination,()=>{e.paginationDefault={...e.paginationDefault,...t.pagination}},{deep:!0,immediate:!0}),y(t.tableData,()=>{if(z(()=>{i.value.doLayout()}),!t.isRememberSelected)return;const a=[...t.multipleSelection];z(()=>{h(a)})},{deep:!0}),m({toggleRowSelection:p,clearSelection:b,toggleAllSelection:u,multipleSelectionAll:A}),(a,s)=>(D(),E("div",{class:O(["flex-table",!o.tableData.length&&"no-data"])},[d(x(P),C({"header-cell-class-name":"header-cell",ref_key:"table",ref:i,border:o.border},e.tableAttrs,{data:o.tableData,style:{width:"100%"}},_(e.tableEvent)),{empty:S(()=>[d(R,{description:t.emptyDesc?t.emptyDesc:"暂无数据","img-type":w.value||"noneWhite"},null,8,["description","img-type"])]),default:S(()=>[d(L,{columns:o.columns},{default:S(()=>[V(a.$slots,"default",{},void 0,!0)]),_:3},8,["columns"])]),_:3},16,["border","data"]),o.showPagination&&o.tableData.length?(D(),E("div",M,[d(x(T),C({"current-page":e.paginationDefault.currentPage,"onUpdate:currentPage":s[0]||(s[0]=r=>e.paginationDefault.currentPage=r),"page-size":e.paginationDefault.pageSize,"onUpdate:pageSize":s[1]||(s[1]=r=>e.paginationDefault.pageSize=r),background:""},e.paginationDefault,_(e.paginationEvent)),null,16,["current-page","page-size"])])):F("",!0)],2))}});const ae=W(N,[["__scopeId","data-v-c4a65a7f"]]);export{ae as G};
