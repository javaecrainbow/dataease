import"./index-0.0.0-dataease.js";import{j as W,J as O,_ as Y,e as ee,y as te,n as le}from"./index-0.0.0-dataease2.js";import{E as ae}from"./el-col-0.0.0-dataease.js";import{E as oe,a as re}from"./el-collapse-item-0.0.0-dataease.js";import{E as ie}from"./el-divider-0.0.0-dataease.js";import"./el-tag-0.0.0-dataease.js";import{E as se,a as ne}from"./el-select-0.0.0-dataease.js";import"./el-popper-0.0.0-dataease.js";import{E as pe}from"./el-row-0.0.0-dataease.js";import"./el-tooltip-0.0.0-dataease.js";import{f as p,M as h,a8 as ce,d as me,r as ue,_ as de,w as b,o as fe,e as R,g as _,i as r,k as l,V as T,j as s,U as m,X as u,N as d,a7 as v,aa as k,Z as S,a6 as _e,a0 as ve}from"./vue-0.0.0-dataease.js";import{i as he}from"./icon_left_outlined-0.0.0-dataease.js";import{n as we,b as ye}from"./templateMarket-0.0.0-dataease.js";import ge from"./TemplateMarketPreviewItem-0.0.0-dataease.js";import{i as xe}from"./imgUtils-0.0.0-dataease.js";import{E as be}from"./index-0.0.0-dataease4.js";import{_ as Te}from"./_plugin-vue_export-helper-0.0.0-dataease.js";import"./library-0.0.0-dataease.js";import"./lodash-0.0.0-dataease.js";import"./axios-0.0.0-dataease.js";import"./echarts-0.0.0-dataease.js";import"./tinymce-0.0.0-dataease.js";import"./user-0.0.0-dataease.js";import"./row-0.0.0-dataease.js";import"./index-0.0.0-dataease12.js";import"./index-0.0.0-dataease14.js";import"./strings-0.0.0-dataease.js";import"./index-0.0.0-dataease5.js";import"./dvMain-0.0.0-dataease.js";import"./chart-0.0.0-dataease.js";import"./formatter-0.0.0-dataease.js";import"./dataVisualization-0.0.0-dataease2.js";import"./util-0.0.0-dataease.js";import"./util-0.0.0-dataease2.js";import"./chart-0.0.0-dataease2.js";import"./app-0.0.0-dataease.js";import"./antv-0.0.0-dataease.js";import"./extends-0.0.0-dataease.js";import"./sysParameter-0.0.0-dataease.js";import"./TableTooltip-0.0.0-dataease.js";import"./_commonjs-dynamic-modules-0.0.0-dataease.js";import"./appearance-0.0.0-dataease.js";import"./font-0.0.0-dataease.js";const ke={width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function Se(C,w){return p(),h("svg",ke,w[0]||(w[0]=[ce('<g filter="url(#filter0_d_2346_358803)"><path d="M8 4H20C26.6274 4 32 9.37258 32 16C32 22.6274 26.6274 28 20 28H8V4Z" fill="white"></path></g><g filter="url(#filter1_d_2346_358803)"><path fill-rule="evenodd" clip-rule="evenodd" d="M20 5H8V27H20C26.0751 27 31 22.0751 31 16C31 9.92487 26.0751 5 20 5ZM8 4V28H20C26.6274 28 32 22.6274 32 16C32 9.37258 26.6274 4 20 4H8Z" fill="#DEE0E3"></path></g><path d="M20.1391 16.0005L16.0732 20.0663C15.9756 20.164 15.9756 20.3223 16.0732 20.4199L16.4268 20.7735C16.5244 20.8711 16.6827 20.8711 16.7803 20.7735L21.1997 16.354C21.395 16.1588 21.395 15.8422 21.1997 15.6469L16.7803 11.2275C16.6827 11.1299 16.5244 11.1299 16.4268 11.2275L16.0732 11.5811C15.9756 11.6787 15.9756 11.837 16.0732 11.9346L20.1391 16.0005Z" fill="#3370FF"></path><defs><filter id="filter0_d_2346_358803" x="0" y="0" width="40" height="40" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB"><feFlood flood-opacity="0" result="BackgroundImageFix"></feFlood><feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"></feColorMatrix><feOffset dy="4"></feOffset><feGaussianBlur stdDeviation="4"></feGaussianBlur><feComposite in2="hardAlpha" operator="out"></feComposite><feColorMatrix type="matrix" values="0 0 0 0 0.121569 0 0 0 0 0.137255 0 0 0 0 0.160784 0 0 0 0.1 0"></feColorMatrix><feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_2346_358803"></feBlend><feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_2346_358803" result="shape"></feBlend></filter><filter id="filter1_d_2346_358803" x="0" y="0" width="40" height="40" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB"><feFlood flood-opacity="0" result="BackgroundImageFix"></feFlood><feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"></feColorMatrix><feOffset dy="4"></feOffset><feGaussianBlur stdDeviation="4"></feGaussianBlur><feComposite in2="hardAlpha" operator="out"></feComposite><feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.1 0"></feColorMatrix><feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_2346_358803"></feBlend><feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_2346_358803" result="shape"></feBlend></filter></defs>',4)]))}const Ce={render:Se},Ae={class:"custom-breadcrumb-item-to"},Ee={style:{"text-align":"center"}},Fe={class:"template-title"},Ve={style:{flex:"1","text-align":"right"}},Be=["src"],Me=me({__name:"MarketPreviewV2",props:{previewId:{type:String,default:null},templateShowList:{type:Array,default:()=>[]},createAuth:{type:Object,default(){return{PANEL:!1,SCREEN:!1}}}},emits:["templateApply","closeDialog","closePreview"],setup(C,{emit:w}){const{t:i}=W(),y=C,F=w,g=ue([]),e=de({hasResult:!0,extFilterActive:!1,asideActive:!0,previewVisible:!1,templatePreviewUrl:null,marketTabs:null,marketActiveTab:null,searchText:null,panelGroupList:[],curApplyTemplate:null,folderSelectShow:!1,baseUrl:"https://dataease.io/templates",marketTemplatePreviewShowList:[],categories:[],networkStatus:!0,curTemplate:null,templateSourceType:"all",templateSourceOptions:[{value:"all",label:i("work_branch.all_source")},{value:"market",label:i("work_branch.template_market_official")},{value:"manage",label:i("template_manage.name")}],templateType:"all",templateTypeOptions:[{value:"all",label:i("work_branch.all_types")},{value:"PANEL",label:i("work_branch.dashboard")},{value:"SCREEN",label:i("work_branch.big_screen")}]});b(()=>e.templateType,()=>{A()}),b(()=>e.searchText,()=>{A()}),b(()=>y.previewId,()=>{e.marketTemplatePreviewShowList.forEach(a=>{a.contents.forEach(t=>{y.previewId===t.id&&E(t)})})}),b(()=>e.templateSourceType,()=>{A()});const I=()=>{ye().then(a=>{e.baseUrl=a.data.baseUrl,e.marketTemplatePreviewShowList=a.data.contents,e.hasResult=!0,e.categories=a.data.categories,g.value=O(e.categories),y.previewId&&e.marketTemplatePreviewShowList.forEach(t=>{t.contents.forEach(c=>{y.previewId===c.id&&E(c)})})}).catch(()=>{e.networkStatus=!1})},N=a=>{F("templateApply",a)},A=()=>{e.hasResult=!1,e.marketTemplatePreviewShowList.forEach(a=>{a.showFlag=G(a.category.source),a.contents.forEach(t=>{t.showFlag=D(t),t.showFlag&&(e.hasResult=!0)})}),g.value=O(e.categories)},G=a=>e.templateSourceType==="all"||a===e.templateSourceType||a==="public",D=a=>{let t=!1,c=!1,f=!1;return(e.templateType==="all"||a.templateType===e.templateType)&&(t=!0),(!e.searchText||a.title.indexOf(e.searchText)>-1)&&(c=!0),(e.templateSourceType==="all"||a.source===e.templateSourceType)&&(f=!0),t&&c&&f},E=a=>{e.curTemplate=a,a.thumbnail.indexOf("http")>-1||a.thumbnail.indexOf("static-resource")>-1?e.templatePreviewUrl=a.thumbnail:e.templatePreviewUrl=e.baseUrl+a.thumbnail},V=a=>{e.asideActive=a},$=()=>{e.extFilterActive=!e.extFilterActive,e.marketActiveTab=e.marketTabs[0]},H=()=>{F("closePreview")},Z=a=>e.curTemplate&&e.curTemplate.id===a.id;return fe(()=>{I()}),(a,t)=>{const c=Y,f=ee,B=be,z=R("ArrowRight"),n=pe,j=te,J=R("Filter"),M=se,P=ne,X=ie,q=oe,K=re,U=ae,Q=le;return p(),_(n,{style:{width:"100%"}},{default:r(()=>[l(n,{style:{display:"table",width:"100%"}},{default:r(()=>[l(U,{style:{float:"left"},class:T(e.asideActive?"aside-active":"aside-inActive")},{default:r(()=>[l(B,{class:"box-item",effect:"dark",content:s(i)("relation.expand"),placement:"right"},{default:r(()=>[m(l(f,{class:"insert",onClick:t[0]||(t[0]=o=>V(!0))},{default:r(()=>[l(c,{name:"market-expand"},{default:r(()=>[l(s(Ce),{class:"svg-icon"})]),_:1})]),_:1},512),[[u,!e.asideActive]])]),_:1},8,["content"]),m(l(n,{style:{padding:"24px 12px 0"}},{default:r(()=>[l(n,{style:{"align-items":"center"}},{default:r(()=>[d("span",{class:"custom-breadcrumb-item",onClick:t[1]||(t[1]=o=>H())},v(s(i)("template_manage.template_center")),1),l(f,null,{default:r(()=>[l(z)]),_:1}),d("span",Ae,v(s(i)("template_manage.preview")),1),l(B,{class:"box-item",effect:"dark",content:s(i)("relation.retract"),placement:"right"},{default:r(()=>[d("div",{onClick:t[2]||(t[2]=o=>V(!1)),class:"insert-retract"},[l(f,null,{default:r(()=>[l(c,{name:"icon_left_outlined"},{default:r(()=>[l(s(he),{class:"svg-icon"})]),_:1})]),_:1})])]),_:1},8,["content"])]),_:1}),l(n,{class:"margin-top16 search-area"},{default:r(()=>[l(j,{modelValue:e.searchText,"onUpdate:modelValue":t[3]||(t[3]=o=>e.searchText=o),"prefix-icon":"Search",class:"title-name-search",placeholder:s(i)("visualization.enter_template_name_tips"),clearable:""},null,8,["modelValue","placeholder"]),l(f,{class:T(["insert-filter filter-icon-span",e.extFilterActive?"filter-icon-active":""]),onClick:t[4]||(t[4]=o=>$())},{default:r(()=>[l(J)]),_:1},8,["class"])]),_:1}),m(l(n,null,{default:r(()=>[l(P,{modelValue:e.templateType,"onUpdate:modelValue":t[5]||(t[5]=o=>e.templateType=o),style:{"margin-top":"8px"},placeholder:s(i)("common.selectText")},{default:r(()=>[(p(!0),h(S,null,k(e.templateTypeOptions,o=>(p(),_(M,{key:o.value,label:o.label,value:o.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},512),[[u,e.extFilterActive]]),m(l(n,null,{default:r(()=>[l(P,{modelValue:e.templateSourceType,"onUpdate:modelValue":t[6]||(t[6]=o=>e.templateSourceType=o),style:{"margin-top":"8px"},placeholder:s(i)("common.selectText")},{default:r(()=>[(p(!0),h(S,null,k(e.templateSourceOptions,o=>(p(),_(M,{key:o.value,label:o.label,value:o.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},512),[[u,e.extFilterActive]]),l(X)]),_:1},512),[[u,e.asideActive]]),m(l(n,{class:T(["aside-list",e.extFilterActive?"aside-list-filter-active":""])},{default:r(()=>[m(l(K,{modelValue:g.value,"onUpdate:modelValue":t[7]||(t[7]=o=>g.value=o),class:"market-collapse"},{default:r(()=>[(p(!0),h(S,null,k(e.marketTemplatePreviewShowList,(o,L)=>m((p(),_(q,{themes:"light",name:o.category.label,key:L,title:o.category.label},{default:r(()=>[(p(!0),h(S,null,k(o.contents,x=>m((p(),_(ge,{key:x.id,template:x,"base-url":e.baseUrl,active:Z(x),onPreviewTemplate:E},null,8,["template","base-url","active"])),[[u,x.showFlag]])),128))]),_:2},1032,["name","title"])),[[u,o.showFlag]])),128))]),_:1},8,["modelValue"]),[[u,e.hasResult]]),m(l(n,{class:"custom-position"},{default:r(()=>[d("div",Ee,[l(c,{name:"no_result"},{default:r(()=>[l(s(we),{style:{"margin-bottom":"16px","font-size":"75px"},class:"svg-icon"})]),_:1}),t[9]||(t[9]=d("br",null,null,-1)),d("span",null,v(s(i)("work_branch.relevant_templates_found")),1)])]),_:1},512),[[u,!e.hasResult]])]),_:1},8,["class"]),[[u,e.asideActive]])]),_:1},8,["class"]),l(U,{style:{float:"left"},class:T(["main-area",e.asideActive?"main-area-active":""])},{default:r(()=>[e.curTemplate?(p(),_(n,{key:0},{default:r(()=>{var o;return[d("span",Fe,v(e.curTemplate.title),1),d("div",Ve,[l(Q,{style:{float:"right"},type:"primary",disabled:!C.createAuth[(o=e.curTemplate)==null?void 0:o.templateType],onClick:t[8]||(t[8]=L=>N(e.curTemplate))},{default:r(()=>[_e(v(s(i)("visualization.apply_this_template")),1)]),_:1},8,["disabled"])])]}),_:1})):ve("",!0),l(n,{class:"img-main"},{default:r(()=>[d("img",{style:{height:"100%"},src:s(xe)(e.templatePreviewUrl),alt:""},null,8,Be)]),_:1})]),_:1},8,["class"])]),_:1})]),_:1})}}});const bt=Te(Me,[["__scopeId","data-v-929accb2"]]);export{bt as default};
