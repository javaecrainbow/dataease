import{u as x}from"./index-0.0.0-dataease.js";import"./el-form-0.0.0-dataease.js";import{E as G}from"./el-row-0.0.0-dataease.js";import{E as $}from"./el-upload-0.0.0-dataease.js";import"./el-progress-0.0.0-dataease.js";import{j as J,w as T,n as W,e as q}from"./index-0.0.0-dataease2.js";import{E as A}from"./el-radio-button-0.0.0-dataease.js";import"./el-input-number-0.0.0-dataease.js";import"./el-radio-0.0.0-dataease.js";import"./el-radio-group-0.0.0-dataease.js";import{E as H,a as K}from"./el-form-item-0.0.0-dataease.js";import{E as Q}from"./el-checkbox-0.0.0-dataease.js";import{C as X}from"./chart-0.0.0-dataease.js";import{u as k,i as v,b as Y}from"./imgUtils-0.0.0-dataease.js";import{s as Z}from"./snapshot-0.0.0-dataease.js";import ee from"./ImgViewDialog-0.0.0-dataease.js";import{d as te}from"./dvMain-0.0.0-dataease.js";import{d as oe,r as ie,ai as le,_ as ae,o as se,w as ne,e as re,f as g,M as h,N as m,k as l,i as n,j as o,a6 as u,a7 as f,V as d,a0 as C,g as me}from"./vue-0.0.0-dataease.js";import{d as de}from"./lodash-0.0.0-dataease.js";import{_ as pe}from"./_plugin-vue_export-helper-0.0.0-dataease.js";import"./library-0.0.0-dataease.js";import"./row-0.0.0-dataease.js";import"./axios-0.0.0-dataease.js";import"./echarts-0.0.0-dataease.js";import"./tinymce-0.0.0-dataease.js";import"./user-0.0.0-dataease.js";import"./index-0.0.0-dataease4.js";import"./position-0.0.0-dataease.js";import"./index-0.0.0-dataease5.js";import"./index-0.0.0-dataease15.js";import"./formatter-0.0.0-dataease.js";import"./util-0.0.0-dataease.js";import"./dataVisualization-0.0.0-dataease2.js";import"./eventBus-0.0.0-dataease.js";import"./el-dialog-0.0.0-dataease.js";import"./use-dialog-0.0.0-dataease.js";import"./refs-0.0.0-dataease.js";import"./util-0.0.0-dataease2.js";import"./chart-0.0.0-dataease2.js";import"./app-0.0.0-dataease.js";import"./antv-0.0.0-dataease.js";import"./extends-0.0.0-dataease.js";import"./sysParameter-0.0.0-dataease.js";import"./TableTooltip-0.0.0-dataease.js";import"./el-col-0.0.0-dataease.js";import"./_commonjs-dynamic-modules-0.0.0-dataease.js";import"./appearance-0.0.0-dataease.js";import"./font-0.0.0-dataease.js";const ue={class:"mobile-background-selector"},ce={class:"indented-container"},ge={class:"indented-item"},fe={class:"indented-container"},be=15e6,_e=oe({__name:"MobileBackgroundSelector",props:{themes:{default:"light"}},emits:["styleChange"],setup(Se,{emit:V}){const y=Z(),{t:E}=J(),b=ie(null),_=te(),{canvasStyleData:e}=le(_),I=V,a=ae({fileList:[],dialogImageUrl:"",dialogVisible:!1,uploadDisabled:!1}),w=()=>{b.value.click()},M=()=>{T.success("图片大小不符合")},U=t=>{const i=t.target.files[0];if(i.size>be){M();return}k(i,p=>{e.value.mobileSetting.background=p,a.fileList=[{url:v(e.value.mobileSetting.background)}],r()})},S=()=>{e.value.mobileSetting.background?a.fileList.push({url:v(e.value.mobileSetting.background)}):a.fileList=[]},z=()=>{a.uploadDisabled=!1,e.value.mobileSetting.background=null,a.fileList=[],r()},B=t=>{a.dialogImageUrl=t.url,a.dialogVisible=!0},N=t=>{k(t.file,i=>{e.value.mobileSetting.background=i,r()})},r=()=>{L()},L=()=>{I("styleChange");const t=de(e.value);_.setCanvasStyle(t),x().emitter.emit("onMobileStatusChange",{type:"setCanvasStyle",value:JSON.parse(JSON.stringify(o(t)))}),y.recordSnapshotCache()};return se(()=>{S()}),ne(()=>e.value.mobileSetting.background,()=>{S()}),(t,i)=>{const p=Q,c=K,P=A,D=re("Plus"),j=q,O=$,F=G,R=H;return g(),h("div",ue,[m("input",{id:"input",ref_key:"files",ref:b,type:"file",accept:".jpeg,.jpg,.png,.gif,.svg",hidden:"",onClick:i[0]||(i[0]=s=>{s.target.value=""}),onChange:U},null,544),l(p,{size:"small",effect:t.themes,modelValue:o(e).mobileSetting.customSetting,"onUpdate:modelValue":i[1]||(i[1]=s=>o(e).mobileSetting.customSetting=s),onChange:r},{default:n(()=>[u(f(t.$t("visualization.mobile_style_setting_tips")),1)]),_:1},8,["effect","modelValue"]),l(R,{"label-position":"top",style:{width:"100%","padding-left":"22px","margin-bottom":"16px"}},{default:n(()=>[l(c,{class:d(["form-item no-margin-bottom","form-item-"+t.themes])},{default:n(()=>[l(p,{size:"small",effect:t.themes,disabled:!o(e).mobileSetting.customSetting,modelValue:o(e).mobileSetting.backgroundColorSelect,"onUpdate:modelValue":i[2]||(i[2]=s=>o(e).mobileSetting.backgroundColorSelect=s),onChange:r},{default:n(()=>[u(f(t.$t("chart.color")),1)]),_:1},8,["effect","disabled","modelValue"])]),_:1},8,["class"]),m("div",ce,[m("div",ge,[l(c,{class:d(["form-item","form-item-"+t.themes])},{default:n(()=>[l(P,{modelValue:o(e).mobileSetting.color,"onUpdate:modelValue":i[3]||(i[3]=s=>o(e).mobileSetting.color=s),effect:t.themes,disabled:!o(e).mobileSetting.backgroundColorSelect,"trigger-width":108,"is-custom":"","show-alpha":"",class:"color-picker-style",predefine:o(X),onChange:r},null,8,["modelValue","effect","disabled","predefine"])]),_:1},8,["class"])])]),l(c,{class:d(["form-item no-margin-bottom","form-item-"+t.themes])},{default:n(()=>[l(p,{size:"small",effect:t.themes,disabled:!o(e).mobileSetting.customSetting,modelValue:o(e).mobileSetting.backgroundImageEnable,"onUpdate:modelValue":i[4]||(i[4]=s=>o(e).mobileSetting.backgroundImageEnable=s),onChange:r},{default:n(()=>[u(f(o(E)("visualization.background")),1)]),_:1},8,["effect","disabled","modelValue"])]),_:1},8,["class"]),m("div",fe,[m("div",{class:d(["indented-item",{disabled:!o(e).mobileSetting.backgroundImageEnable}])},[m("div",{class:d(["avatar-uploader-container",`img-area_${t.themes}`])},[l(O,{action:"",effect:t.themes,accept:".jpeg,.jpg,.png,.gif,.svg",class:"avatar-uploader","list-type":"picture-card","on-preview":B,"on-remove":z,"before-upload":o(Y),"http-request":N,"file-list":a.fileList,disabled:!o(e).mobileSetting.backgroundImageEnable},{default:n(()=>[l(j,null,{default:n(()=>[l(D)]),_:1})]),_:1},8,["effect","before-upload","file-list","disabled"]),l(F,null,{default:n(()=>[o(e).mobileSetting.background?C("",!0):(g(),h("span",{key:0,style:{"margin-top":"2px"},class:d(["image-hint",`image-hint_${t.themes}`])}," 支持JPG、PNG、GIF、SVG，大小不超过 1M ",2)),o(e).mobileSetting.background?(g(),me(o(W),{key:1,size:"small",style:{margin:"8px 0 0 -4px"},text:"",onClick:w,disabled:!o(e).mobileSetting.backgroundImageEnable},{default:n(()=>i[6]||(i[6]=[u(" 重新上传 ")])),_:1},8,["disabled"])):C("",!0)]),_:1})],2),l(ee,{modelValue:a.dialogVisible,"onUpdate:modelValue":i[5]||(i[5]=s=>a.dialogVisible=s),"image-url":a.dialogImageUrl},null,8,["modelValue","image-url"])],2)])]),_:1})])}}});const ct=pe(_e,[["__scopeId","data-v-19b977fd"]]);export{ct as default};
