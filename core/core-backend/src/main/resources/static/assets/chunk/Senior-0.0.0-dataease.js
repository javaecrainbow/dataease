import"./index-0.0.0-dataease.js";import{E as me}from"./el-row-0.0.0-dataease.js";import{E as pe,a as ue}from"./el-collapse-item-0.0.0-dataease.js";import{d as ce,ai as de,r as R,t as fe,w as he,m as L,f as s,g as d,i,M as V,k as n,j as e,a0 as m,N as c,V as u,Z as F,ac as U,a7 as ge}from"./vue-0.0.0-dataease.js";import{i as W}from"./icon_delete-trash_outlined-0.0.0-dataease.js";import{i as z}from"./icon_edit_outlined-0.0.0-dataease.js";import{j as ve,k as Ce,e as S,w as G}from"./index-0.0.0-dataease2.js";import _e from"./FunctionCfg-0.0.0-dataease.js";import be from"./ScrollCfg-0.0.0-dataease.js";import ye from"./AssistLine-0.0.0-dataease.js";import ke from"./Threshold-0.0.0-dataease.js";import Ae from"./MapMapping-0.0.0-dataease.js";import{C as _}from"./CollapseSwitchItem-0.0.0-dataease.js";import{useAppStoreWithOut as Ie}from"./app-0.0.0-dataease.js";import{L as Ve,a as Se}from"./LinkageSet-0.0.0-dataease.js";import{b as Z,w as we,x as Me,y as xe,g as Le,z as je,q as qe}from"./canvasUtils-0.0.0-dataease.js";import{d as Ee}from"./dvMain-0.0.0-dataease.js";import{i as Ne}from"./StringUtils-0.0.0-dataease.js";import{B as Oe}from"./chart-0.0.0-dataease.js";import Be from"./BubbleAnimateCfg-0.0.0-dataease.js";import{_ as De}from"./CarouselSetting.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";import{I as w}from"./index-0.0.0-dataease23.js";import{x as Je,d as Te}from"./lodash-0.0.0-dataease.js";import{_ as Pe}from"./_plugin-vue_export-helper-0.0.0-dataease.js";import"./library-0.0.0-dataease.js";import"./row-0.0.0-dataease.js";import"./index-0.0.0-dataease12.js";import"./index-0.0.0-dataease4.js";import"./axios-0.0.0-dataease.js";import"./echarts-0.0.0-dataease.js";import"./tinymce-0.0.0-dataease.js";import"./user-0.0.0-dataease.js";import"./el-form-0.0.0-dataease.js";import"./el-tag-0.0.0-dataease.js";import"./el-select-0.0.0-dataease.js";import"./index-0.0.0-dataease14.js";import"./strings-0.0.0-dataease.js";import"./index-0.0.0-dataease5.js";import"./el-popper-0.0.0-dataease.js";import"./el-radio-group-0.0.0-dataease.js";import"./el-radio-0.0.0-dataease.js";import"./el-radio-button-0.0.0-dataease.js";import"./el-input-number-0.0.0-dataease.js";import"./index-0.0.0-dataease15.js";import"./position-0.0.0-dataease.js";import"./el-slider-0.0.0-dataease.js";import"./el-tooltip-0.0.0-dataease.js";import"./el-form-item-0.0.0-dataease.js";import"./el-checkbox-0.0.0-dataease.js";import"./util-0.0.0-dataease2.js";import"./chart-0.0.0-dataease2.js";import"./el-dialog-0.0.0-dataease.js";import"./use-dialog-0.0.0-dataease.js";import"./refs-0.0.0-dataease.js";import"./el-col-0.0.0-dataease.js";import"./icon_info_outlined-0.0.0-dataease.js";import"./AssistLineEdit-0.0.0-dataease.js";import"./icon_add_outlined-0.0.0-dataease.js";import"./attr-0.0.0-dataease20.js";import"./field-list-0.0.0-dataease.js";import"./TableThresholdEdit-0.0.0-dataease.js";import"./icon_info_filled-0.0.0-dataease.js";import"./TextLabelThresholdEdit-0.0.0-dataease.js";import"./TextThresholdEdit-0.0.0-dataease.js";import"./el-space-0.0.0-dataease.js";import"./PictureGroupThresholdEdit-0.0.0-dataease.js";import"./imgUtils-0.0.0-dataease.js";import"./util-0.0.0-dataease.js";import"./el-pagination-0.0.0-dataease.js";import"./el-table-column-0.0.0-dataease.js";import"./el-switch-0.0.0-dataease.js";import"./el-footer-0.0.0-dataease.js";import"./el-aside-0.0.0-dataease.js";import"./el-tree-0.0.0-dataease.js";import"./el-tree-select-0.0.0-dataease.js";import"./chart-list-0.0.0-dataease.js";import"./dv-link-target-0.0.0-dataease.js";import"./dv-dashboard-spine-0.0.0-dataease.js";import"./dv-folder-0.0.0-dataease.js";import"./dataVisualization-0.0.0-dataease.js";import"./dataset-0.0.0-dataease.js";import"./CodeMirror-0.0.0-dataease.js";import"./snapshot-0.0.0-dataease.js";import"./dataVisualization-0.0.0-dataease2.js";import"./eventBus-0.0.0-dataease.js";import"./EmptyBackground-0.0.0-dataease.js";import"./el-empty-0.0.0-dataease.js";import"./none-0.0.0-dataease.js";import"./nothing-tree-0.0.0-dataease.js";import"./dv-empty-0.0.0-dataease.js";import"./el-popover-0.0.0-dataease.js";import"./dropdown-0.0.0-dataease.js";import"./formatter-0.0.0-dataease.js";import"./antv-0.0.0-dataease.js";import"./extends-0.0.0-dataease.js";import"./sysParameter-0.0.0-dataease.js";import"./TableTooltip-0.0.0-dataease.js";import"./_commonjs-dynamic-modules-0.0.0-dataease.js";import"./appearance-0.0.0-dataease.js";import"./font-0.0.0-dataease.js";const Re={class:"inner-container"},Fe={class:"right-btns"},Ue=["title"],We=["title","disabled"],ze={class:"inner-container"},Ge={class:"right-btns"},Ze=["title"],Ke=["title","disabled"],$e={key:1,class:"no-senior"},He=ce({__name:"Senior",props:{chart:{type:Object,required:!0},quotaData:{type:Array,required:!0},quotaExtData:{type:Array,required:!0},fieldsData:{type:Array,required:!0},themes:{type:String,default:"dark"},properties:{type:Array,required:!1,default:()=>[]},propertyInnerAll:{type:Object,required:!1,default:()=>({})}},emits:["onFunctionCfgChange","onAssistLineChange","onScrollCfgChange","onThresholdChange","onMapMappingChange","onBubbleAnimateChange"],setup(K,{emit:$}){const b=Ee(),{nowPanelTrackInfo:H,nowPanelJumpInfo:Q,dvInfo:h,componentData:Qe,curComponent:j}=de(b),{t:f}=ve(),q=R(null),E=R(null),N={attrActiveNames:[],styleActiveNames:[]},v=$,l=K,{chart:t,themes:r,properties:A,propertyInnerAll:C}=fe(l);he(()=>{var a;return(a=t.value)==null?void 0:a.senior},()=>{var a;t.value.senior=Je(((a=t.value)==null?void 0:a.senior)||{},Te(Oe.senior))});const O=L(()=>{var y;let a=0,o=0;return(y=l.fieldsData)==null||y.forEach(x=>{const k=l.chart.id+"#"+x.id;H.value[k]&&a++,Q.value[k]&&o++}),{linkageCount:a,jumpCount:o}}),M=a=>{v("onFunctionCfgChange",a)},B=a=>{v("onAssistLineChange",a)},D=a=>{v("onScrollCfgChange",a)},J=a=>{v("onThresholdChange",a)},X=a=>{v("onMapMappingChange",a)},T=a=>{v("onBubbleAnimateChange",a)},g=a=>{var o;return(o=A==null?void 0:A.value)==null?void 0:o.includes(a)},Y=()=>{if(!h.value.id){G.warning("请先保存当前页面");return}Z(()=>{q.value.dialogInit({id:t.value.id})})},ee=()=>{if(!h.value.id){G.warning("请先保存当前页面");return}Z(()=>{E.value.dialogInit({id:t.value.id})})},te=["map-mapping","function-cfg","assist-line","scroll-cfg","threshold","jump-set","linkage","bubble-animate"],oe=["chart-mix","chart-mix-stack","chart-mix-group"],P=L(()=>!Ne(A.value,...te)&&oe.includes(t.value.type)),ae=()=>{const a={sourceDvId:h.value.id,sourceViewId:t.value.id,activeStatus:t.value.jumpActive};we(a).then(o=>{b.setNowPanelJumpInfo(o.data)})},ne=()=>{const a={dvId:h.value.id,sourceViewId:t.value.id,activeStatus:t.value.linkageActive};Me(a).then(o=>{b.setNowPanelTrackInfo(o.data)})},re=Ie(),ie=L(()=>re.getIsDataEaseBi),le=()=>{xe({dvId:h.value.id,sourceViewId:t.value.id}).then(a=>{Le(h.value.id).then(o=>{b.setNowPanelTrackInfo(o.data)})})},se=()=>{je({sourceDvId:h.value.id,sourceViewId:t.value.id}).then(a=>{qe(h.value.id).then(o=>{b.setNowPanelJumpInfo(o.data)})})};return(a,o)=>{const y=pe,x=ue,k=me;return s(),d(k,{class:u(["view-panel","senior-"+e(r)])},{default:i(()=>[P.value?m("",!0):(s(),V("div",{key:0,onKeydown:o[8]||(o[8]=U(()=>{},["stop"])),onKeyup:o[9]||(o[9]=U(()=>{},["stop"])),class:"attr-style"},[n(k,{class:"de-collapse-style"},{default:i(()=>[n(x,{modelValue:N.attrActiveNames,"onUpdate:modelValue":o[7]||(o[7]=I=>N.attrActiveNames=I),class:"style-collapse"},{default:i(()=>{var I;return[g("function-cfg")?(s(),d(y,{key:0,effect:e(r),name:"function",title:e(f)("chart.function_cfg"),onModelChange:M},{default:i(()=>[n(_e,{themes:e(r),chart:l.chart,"property-inner":e(C)["function-cfg"],onOnFunctionCfgChange:M},null,8,["themes","chart","property-inner"])]),_:1},8,["effect","title"])):m("",!0),g("map-mapping")?(s(),d(y,{key:1,effect:e(r),name:"mapMapping",title:e(f)("chart.place_name_mapping"),onModelChange:M},{default:i(()=>[n(Ae,{themes:e(r),chart:l.chart,"property-inner":e(C)["function-cfg"],onOnMapMappingChange:X},null,8,["themes","chart","property-inner"])]),_:1},8,["effect","title"])):m("",!0),g("assist-line")?(s(),d(_,{key:2,effect:e(r),title:e(f)("chart.assist_line"),"change-model":e(t).senior.assistLineCfg,modelValue:e(t).senior.assistLineCfg.enable,"onUpdate:modelValue":o[0]||(o[0]=p=>e(t).senior.assistLineCfg.enable=p),name:"analyse",onModelChange:o[1]||(o[1]=p=>B({data:p}))},{default:i(()=>[n(ye,{chart:l.chart,themes:e(r),"quota-data":l.quotaData,"quota-ext-data":l.quotaExtData,"property-inner":e(C)["assist-line"],onOnAssistLineChange:B},null,8,["chart","themes","quota-data","quota-ext-data","property-inner"])]),_:1},8,["effect","title","change-model","modelValue"])):m("",!0),g("scroll-cfg")?(s(),d(_,{key:3,effect:e(r),title:e(f)("chart.scroll_cfg"),"change-model":e(t).senior.scrollCfg,modelValue:e(t).senior.scrollCfg.open,"onUpdate:modelValue":o[2]||(o[2]=p=>e(t).senior.scrollCfg.open=p),name:"scroll",onModelChange:D},{default:i(()=>[n(be,{themes:e(r),chart:l.chart,"property-inner":e(C)["scroll-cfg"],onOnScrollCfgChange:D},null,8,["themes","chart","property-inner"])]),_:1},8,["effect","title","change-model","modelValue"])):m("",!0),g("threshold")?(s(),d(_,{key:4,effect:e(r),title:e(f)("chart.threshold"),"change-model":e(t).senior.threshold,modelValue:e(t).senior.threshold.enable,"onUpdate:modelValue":o[3]||(o[3]=p=>e(t).senior.threshold.enable=p),name:"threshold",onModelChange:J},{default:i(()=>[n(ke,{themes:e(r),chart:l.chart,"property-inner":e(C).threshold,onOnThresholdChange:J},null,8,["themes","chart","property-inner"])]),_:1},8,["effect","title","change-model","modelValue"])):m("",!0),e(t).id?(s(),d(e(Ce),{key:5,chart:e(t),themes:e(r),"is-screen":e(h).type==="dataV",jsname:"L2NvbXBvbmVudC90aHJlc2hvbGQtd2FybmluZy9TZW5pb3JIYW5kbGVy"},null,8,["chart","themes","is-screen"])):m("",!0),g("linkage")?(s(),d(_,{key:6,themes:e(r),name:"linkage",title:"联动设置",modelValue:e(t).linkageActive,"onUpdate:modelValue":o[4]||(o[4]=p=>e(t).linkageActive=p),onModelChange:ne},{default:i(()=>[c("div",Re,[c("span",{class:u(["label","label-"+l.themes])},"联动设置",2),c("span",Fe,[O.value.linkageCount>0?(s(),V(F,{key:0},[c("span",{class:u(["set-text-info",{"set-text-info-dark":e(r)==="dark"}])}," 已设置 ",2),c("button",{class:u(["label-"+l.themes,"circle-button_icon"]),title:e(f)("chart.delete"),style:{margin:"0 8px"},onClick:le},[n(e(S),null,{default:i(()=>[n(e(w),null,{default:i(()=>[n(e(W),{class:u([e(t).linkageActive&&"primary-color","svg-icon"])},null,8,["class"])]),_:1})]),_:1})],10,Ue)],64)):m("",!0),c("button",{class:u(["label-"+l.themes,"circle-button_icon"]),title:e(f)("chart.edit"),onClick:ee,disabled:!e(t).linkageActive},[n(e(S),null,{default:i(()=>[n(e(w),null,{default:i(()=>[n(e(z),{class:u([e(t).linkageActive&&"primary-color","svg-icon"])},null,8,["class"])]),_:1})]),_:1})],10,We)])])]),_:1},8,["themes","modelValue"])):m("",!0),g("jump-set")&&!ie.value?(s(),d(_,{key:7,themes:e(r),name:"jumpSet",title:"跳转设置",modelValue:e(t).jumpActive,"onUpdate:modelValue":o[5]||(o[5]=p=>e(t).jumpActive=p),onModelChange:ae},{default:i(()=>[c("div",ze,[c("span",{class:u(["label","label-"+l.themes])},"跳转设置",2),c("span",Ge,[O.value.jumpCount?(s(),V(F,{key:0},[c("span",{class:u(["set-text-info",{"set-text-info-dark":e(r)==="dark"}])}," 已设置 ",2),c("button",{class:u(["label-"+l.themes,"circle-button_icon"]),title:e(f)("chart.delete"),style:{margin:"0 8px"},onClick:se},[n(e(S),null,{default:i(()=>[n(e(w),null,{default:i(()=>[n(e(W),{class:u([e(t).jumpActive&&"primary-color","svg-icon"])},null,8,["class"])]),_:1})]),_:1})],10,Ze)],64)):m("",!0),c("button",{class:u(["label-"+l.themes,"circle-button_icon"]),title:e(f)("chart.edit"),onClick:Y,disabled:!e(t).jumpActive},[n(e(S),null,{default:i(()=>[n(e(w),null,{default:i(()=>[n(e(z),{class:u([e(t).jumpActive&&"primary-color","svg-icon"])},null,8,["class"])]),_:1})]),_:1})],10,Ke)])])]),_:1},8,["themes","modelValue"])):m("",!0),g("bubble-animate")?(s(),d(_,{key:8,effect:e(r),title:"气泡动效","change-model":e(t).senior.bubbleCfg,modelValue:e(t).senior.bubbleCfg.enable,"onUpdate:modelValue":o[6]||(o[6]=p=>e(t).senior.bubbleCfg.enable=p),name:"bubbleAnimate",onModelChange:T},{default:i(()=>[n(Be,{themes:e(r),chart:l.chart,"property-inner":e(C)["bubble-animate"],onOnBubbleAnimateChange:T},null,8,["themes","chart","property-inner"])]),_:1},8,["effect","change-model","modelValue"])):m("",!0),((I=e(j))==null?void 0:I.innerType)==="picture-group"?(s(),d(De,{key:9,element:e(j),themes:e(r)},null,8,["element","themes"])):m("",!0)]}),_:1},8,["modelValue"])]),_:1})],32)),P.value?(s(),V("div",$e,ge(e(f)("chart.chart_no_senior")),1)):m("",!0),n(Ve,{ref_key:"linkJumpRef",ref:q},null,512),n(Se,{ref_key:"linkageRef",ref:E},null,512)]),_:1},8,["class"])}}});const zo=Pe(He,[["__scopeId","data-v-87c108a2"]]);export{zo as default};
