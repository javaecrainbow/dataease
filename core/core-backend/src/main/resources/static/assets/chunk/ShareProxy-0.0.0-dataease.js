var u=Object.defineProperty;var a=(n,t,e)=>t in n?u(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var c=(n,t,e)=>(a(n,typeof t!="symbol"?t+"":t,e),e);import{aC as d,d as l}from"./index-0.0.0-dataease2.js";import{a as h}from"./index-0.0.0-dataease.js";const{wsCache:x}=h();class f{constructor(){c(this,"uuid");this.uuid=""}getTicket(){const t=window.location.href,e=t.lastIndexOf("?");if(e==-1)return null;const s=t.substring(e+1),r=/([^&=]+)=([^&]*)/g;let o;for(;(o=r.exec(s))!==null;)if(decodeURIComponent(o[1])==="ticket")return decodeURIComponent(o[2]);return null}setUuid(){const t=window.location.href,e=t.lastIndexOf("?"),s=t.substring(t.lastIndexOf("de-link/")+8,e>0?e:t.length);this.uuid=s}async loadProxy(){if(this.setUuid(),!this.uuid)return null;const t=this.uuid,e="/share/proxyInfo",s=d(),r=this.getTicket(),o={uuid:t,ciphertext:null,inIframe:s,ticket:r},i=x.get(`link-${t}`);return i&&(o.ciphertext=i),(await l.post({url:e,data:o})).data}}const k=new f;export{k as s};
