import{a as Te,b as Ie}from"./index-0.0.0-dataease.js";import{E as We}from"./el-empty-0.0.0-dataease.js";import{a as Me}from"./el-table-column-0.0.0-dataease.js";import"./el-checkbox-0.0.0-dataease.js";import"./el-tag-0.0.0-dataease.js";import{j as Ne,k as q,_ as P,e as Ue,y as Ye}from"./index-0.0.0-dataease2.js";import{E as Fe}from"./el-row-0.0.0-dataease.js";import{E as $e}from"./el-col-0.0.0-dataease.js";import{E as Be,a as Ge}from"./el-select-0.0.0-dataease.js";import"./el-popper-0.0.0-dataease.js";import{a as je,E as Ae}from"./el-tabs-0.0.0-dataease.js";import"./el-tooltip-0.0.0-dataease.js";import{f as n,M as p,N as y,d as Oe,r as _,_ as ze,m as R,o as Ze,ab as qe,j as s,U as Pe,k as l,i as o,g as i,a0 as u,V as D,a9 as H,Z as E,aa as N,a7 as f,q as U,a6 as Re,ac as L,W as He}from"./vue-0.0.0-dataease.js";import{v as Je,i as Qe}from"./visual-star-0.0.0-dataease.js";import{i as Xe}from"./icon_search-outline_outlined-0.0.0-dataease.js";import{S as Ke,i as et,a as tt}from"./ShareGrid-0.0.0-dataease.js";import{i as J}from"./icon_dashboard_outlined-0.0.0-dataease.js";import{i as Q}from"./icon_operation-analysis_outlined-0.0.0-dataease.js";import{d as X}from"./dv-dashboard-spine-mobile-0.0.0-dataease.js";import{i as K}from"./icon_pc_outlined-0.0.0-dataease.js";import{G as at}from"./GridTable-0.0.0-dataease.js";import{d as ot}from"./dayjs.min-0.0.0-dataease.js";import{s as V}from"./ShortcutOption-0.0.0-dataease.js";import{i as nt}from"./interactive-0.0.0-dataease.js";import{f as ee}from"./dataVisualization-0.0.0-dataease.js";import{useUserStoreWithOut as lt}from"./user-0.0.0-dataease.js";import rt from"./ShareHandler-0.0.0-dataease.js";import{useAppStoreWithOut as st}from"./app-0.0.0-dataease.js";import{u as it}from"./share-0.0.0-dataease.js";import{E as ct}from"./index-0.0.0-dataease4.js";import{_ as dt}from"./_plugin-vue_export-helper-0.0.0-dataease.js";import"./library-0.0.0-dataease.js";import"./lodash-0.0.0-dataease.js";import"./index-0.0.0-dataease5.js";import"./axios-0.0.0-dataease.js";import"./echarts-0.0.0-dataease.js";import"./tinymce-0.0.0-dataease.js";import"./row-0.0.0-dataease.js";import"./index-0.0.0-dataease14.js";import"./strings-0.0.0-dataease.js";import"./el-pagination-0.0.0-dataease.js";import"./EmptyBackground-0.0.0-dataease.js";import"./none-0.0.0-dataease.js";import"./nothing-tree-0.0.0-dataease.js";import"./dataset-0.0.0-dataease.js";import"./datasource-0.0.0-dataease.js";import"./el-dialog-0.0.0-dataease.js";import"./use-dialog-0.0.0-dataease.js";import"./refs-0.0.0-dataease.js";import"./el-date-picker-0.0.0-dataease.js";import"./arrays-0.0.0-dataease.js";import"./index-0.0.0-dataease15.js";import"./el-switch-0.0.0-dataease.js";import"./icon_admin_outlined-0.0.0-dataease.js";import"./ShareTicket-0.0.0-dataease.js";import"./icon_left_outlined-0.0.0-dataease.js";import"./de-copy-0.0.0-dataease.js";import"./icon_refresh_outlined-0.0.0-dataease.js";import"./dv-info-0.0.0-dataease.js";import"./icon_delete-trash_outlined-0.0.0-dataease.js";import"./icon_edit_outlined-0.0.0-dataease.js";import"./icon_add_outlined-0.0.0-dataease.js";import"./index-0.0.0-dataease16.js";const pt={t:"1708236511731",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"4218","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"200",height:"200"};function ut(Y,C){return n(),p("svg",pt,C[0]||(C[0]=[y("path",{d:"M414.252575 821.425145c3.034288-2.311839 6.357556-4.045718 9.969804-5.201637l1.444899-0.86694 0.14449 0.28898c3.034288-0.866939 6.068576-1.300409 9.247354-1.300409 19.072668 0 34.533089 15.46042 34.533089 34.533089 0 12.715112-6.791026 23.696345-17.049809 29.764921l-229.160999 118.481728c-10.836743 3.467758-20.951037 0.57796-30.487372-8.669395-9.536334-9.102864-12.570622-20.228588-9.102864-33.23268l52.883307-307.76351L11.992663 426.823197c-10.258784-10.403274-14.015521-20.951037-11.270213-32.07676 4.045718-16.47185 12.281642-22.684916 24.129815-26.008184C128.162551 353.422323 234.073656 337.961902 342.441089 322.068012c47.248201-97.53069 94.207422-192.894031 141.311133-286.090024 5.057147-9.969804 14.448991-15.46042 29.042473-15.460421 14.593481 0 20.806547 3.756738 27.597573 15.460421 10.547764 19.217158 57.940454 114.5805 142.322562 286.090024l318.166784 46.670241c10.981233 4.623677 18.061239 11.270213 20.951037 20.084098 2.889798 8.813885 2.167349 19.361648-2.167348 31.78778L867.083957 570.590659l-0.14449-0.14449c-6.213066 6.213066-14.737971 9.969804-24.274305 9.969804-19.072668 0-34.533089-15.46042-34.533089-34.533089 0-7.368985 2.311839-14.593481 6.646536-20.517567l-0.43347-0.28898 101.865387-99.698039-259.50388-36.555947c-5.346127 0.43347-10.258784-1.300409-14.737971-5.057147-4.479187-3.901228-9.247354-10.403274-14.304501-19.795118L512.794695 132.208269l-116.314379 235.807535c-4.045718 7.080006-9.102864 12.426132-15.026951 15.7494-5.924086 3.323268-13.293072 5.057147-22.251446 5.057147L107.211514 425.522788 294.759419 608.591506c6.213066 6.646536 9.969804 11.992663 11.125723 15.89389 1.155919 3.901228 1.155919 10.836743 0 20.517567l-42.480034 256.469592 150.847467-80.04741z m344.608438-30.342882l103.743756-103.743756c13.437562-13.437562 35.255538-13.437562 48.83759 0 13.437562 13.437562 13.437562 35.255538 0 48.83759L807.698603 839.919853l103.743756 103.743756c13.437562 13.437562 13.437562 35.255538 0 48.83759-13.437562 13.437562-35.255538 13.437562-48.83759 0L758.861013 888.612953l-103.743756 103.743756c-13.437562 13.437562-35.255538 13.437562-48.83759 0-13.437562-13.437562-13.437562-35.255538 0-48.837589l103.743756-103.743757-103.743756-103.743756c-13.437562-13.437562-13.437562-35.255538 0-48.83759 13.437562-13.437562 35.255538-13.437562 48.83759 0l103.743756 103.888246z m0 0","p-id":"4219"},null,-1)]))}const mt={render:ut},_t={class:"custom-tabs-label"},ft={key:1},vt={key:2,class:"panel-table"},ht={class:"ellipsis",style:{"max-width":"250px"}},bt={key:0},yt={key:1},kt={key:2},wt={key:3},gt=Oe({__name:"ShortcutTable",props:{expand:{type:Boolean,default:!1}},setup(Y){const C=lt(),{resolve:F}=H(),{t:r}=Ne(),te=nt(),{wsCache:ae}=Te(),oe=st(),ne=Ie(),le=it(),{push:$}=H(),re=ae.get("app.desktop"),k=_(),c=_("recent"),x=_("all_types"),h=ze({tableData:[],curTypeList:[],tableColumn:[]}),B=R(()=>te.getData),T=R(()=>le.getShareDisable),G={panel:J,panelMobile:X,dashboard:J,dashboardMobile:X,screen:Q,dataV:Q,dataset:et,datasource:tt},j=t=>t&&["dashboard","panel","dataV","screen"].includes(t.type),A=t=>{(t.paneName==="recent"||t.paneName==="store")&&(g.value=!0,V.setBusiFlag(t.paneName),h.curTypeList=V.getBusiList().filter(a=>a==="all_types"||I.includes(a)),h.tableColumn=V.getColmunList(),w())},se=()=>{const t=["panel","screen","dataset","datasource"],a=[];for(const d in B.value)B.value[d].menuAuth&&a.push(t[parseInt(d)]);return S.value[0].disabled=!(a!=null&&a.length),S.value[1].disabled=!a.includes("panel")&&!a.includes("screen"),a},ie=()=>{w()},ce=t=>{const a=F({path:"/preview",query:{dvId:t}});window.open(a.href,"_blank")},de=t=>{const a=F({path:"/dataset-form",query:{id:t}});window.open(a.href,"_blank")},pe=(t,a,d)=>ot(new Date(d)).format("YYYY-MM-DD HH:mm:ss"),ue={screen:r("work_branch.big_data_screen"),dataV:r("work_branch.big_data_screen"),dashboard:r("work_branch.dashboard"),panel:r("work_branch.dashboard"),dataset:r("work_branch.data_set"),datasource:r("work_branch.data_source")},w=()=>{g.value=!0;const t=x.value==="all_types"?"":x.value;V.loadData({type:t,keyword:k.value,asc:!W.value}).then(a=>{h.tableData=a.data}).finally(()=>{O.value=ye(),z.value=ke(),g.value=!1})},S=_([{title:r("work_branch.recently_used"),name:"recent",disabled:!1},{title:r("work_branch.my_collection"),name:"store",disabled:!1},{title:r("visualization.share_out"),name:"share",disabled:!1}]),me=t=>{S.value.push(t)},I=se();Ze(()=>{I.length&&A({paneName:"recent",uid:0,slots:void 0,props:void 0,active:!1,index:"",isClosable:!1})});const W=_(!0),g=_(!1),_e=t=>{W.value=!0;const a=t.order.substring(0,t.order.indexOf("ending"));W.value=a==="desc",w()},fe=t=>{if(t){const a=c.value==="recent"?t.id:t.resourceId;if(["dashboard","panel"].includes(t.type))window.open("#/panel/index?dvId="+a,"_self");else if(["dataV","screen"].includes(t.type))window.open("#/screen/index?dvId="+a,"_self");else if(["dataset"].includes(t.type)){const d=ne.getToken&&oe.getIsIframe?"dataset-embedded":"dataset";$({name:d,params:{id:a}})}else["datasource"].includes(t.type)&&$({name:"datasource",params:{id:a}})}},ve=t=>{g.value=t},he=t=>{const a={id:t.id,type:t.type};ee(a).then(()=>{t.favorite=!t.favorite})},be=t=>{const a={id:t.resourceId,type:t.type==="dataV"?"screen":"panel"};ee(a).then(()=>{w()})},O=_(),z=_(""),ye=()=>k.value?"tree":"noneWhite",ke=()=>k.value?r("work_branch.relevant_content_found"):c.value==="recent"?r("work_branch.no_content_yet"):c.value==="store"?r("work_branch.no_favorites_yet"):"";return(t,a)=>{const d=ct,we=Ae,ge=je,Ce=Be,xe=Ge,Z=$e,b=P,v=Ue,Se=Ye,De=Fe,Ee=P,M=Me,Le=We,Ve=qe("loading");return s(I).length?Pe((n(),p("div",{key:0,class:D(["dashboard-type",Y.expand&&"expand"])},[l(ge,{modelValue:c.value,"onUpdate:modelValue":a[0]||(a[0]=e=>c.value=e),class:"dashboard-type-tabs",onTabClick:A},{default:o(()=>[(n(!0),p(E,null,N(S.value.filter(e=>!T.value||e.name!=="share"),e=>(n(),i(we,{key:e.name,disabled:e.disabled,label:e.title,name:e.name},{label:o(()=>[y("span",_t,[e.disabled?(n(),i(d,{key:0,placement:"top",content:s(r)("work_branch.permission_denied")},{default:o(()=>[y("span",null,f(e.title),1)]),_:2},1032,["content"])):(n(),p("span",ft,f(e.title),1))])]),_:2},1032,["disabled","label","name"]))),128))]),_:1},8,["modelValue"]),T.value?u("",!0):(n(),i(Ke,{key:0,"active-name":c.value,onSetLoading:ve},null,8,["active-name"])),c.value==="recent"||c.value==="store"?(n(),i(De,{key:1},{default:o(()=>[l(Z,{span:12},{default:o(()=>[l(xe,{"popper-class":"menu-panel-select_popper",class:"select-type-list",modelValue:x.value,"onUpdate:modelValue":a[1]||(a[1]=e=>x.value=e),onChange:w},{default:o(()=>[(n(!0),p(E,null,N(h.curTypeList,e=>(n(),i(Ce,{key:e,label:s(r)(`auth.${e}`),value:e},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(Z,{class:"search",span:12},{default:o(()=>[l(Se,{modelValue:k.value,"onUpdate:modelValue":a[2]||(a[2]=e=>k.value=e),clearable:"",onChange:ie,placeholder:s(r)("work_branch.search_keyword")},{prefix:o(()=>[l(v,null,{default:o(()=>[l(b,{name:"icon_search-outline_outlined"},{default:o(()=>[l(s(Xe),{class:"svg-icon"})]),_:1})]),_:1})]),_:1},8,["modelValue","placeholder"])]),_:1})]),_:1})):u("",!0),c.value==="recent"||c.value==="store"?(n(),p("div",vt,[l(at,{"show-pagination":!1,"table-data":h.tableData,onSortChange:_e,onCellClick:fe,"empty-desc":z.value,"empty-img":O.value,class:"workbranch-grid"},{default:o(()=>[l(M,{key:"name",width:"280",prop:"name",label:s(r)("common.name")},{default:o(e=>[y("div",{class:D(["name-content",{"jump-active":j(e.row)}])},[e.row.extFlag?(n(),i(v,{key:0,style:{"margin-right":"12px","font-size":"18px"}},{default:o(()=>[l(b,null,{default:o(()=>[(n(),i(U(G[e.row.type+"Mobile"]),{class:"svg-icon"}))]),_:2},1024)]),_:2},1024)):(n(),i(v,{key:1,class:D(`main-color color-${e.row.type}`)},{default:o(()=>[l(b,null,{default:o(()=>[(n(),i(U(G[e.row.type]),{class:"svg-icon"}))]),_:2},1024)]),_:2},1032,["class"])),l(d,{placement:"top"},{content:o(()=>[Re(f(e.row.name),1)]),default:o(()=>[y("span",ht,f(e.row.name),1)]),_:2},1024),c.value==="recent"&&["screen","panel"].includes(e.row.type)?(n(),i(v,{key:2,class:"custom-icon",onClick:L(m=>he(e.row),["stop"]),style:He({color:e.row.favorite?"#FFC60A":"#646A73"})},{default:o(()=>[l(Ee,null,{default:o(()=>[(n(),i(U(e.row.favorite?s(Je):s(Qe))))]),_:2},1024)]),_:2},1032,["onClick","style"])):u("",!0)],2)]),_:1},8,["label"]),(n(!0),p(E,null,N(h.tableColumn,e=>(n(),i(M,{key:e.label,prop:e.field,"show-overflow-tooltip":"",sortable:e.type==="time",label:e.label},{default:o(m=>[y("span",{class:D({"jump-active":j(m.row)})},[e.type&&e.type==="time"?(n(),p("span",bt,f(pe(null,null,m.row[e.field])),1)):e.field&&e.field==="type"?(n(),p("span",yt,f(ue[m.row[e.field]]),1)):s(re)&&e.field&&e.field.endsWith("tor")?(n(),p("span",kt,f(s(C).getName),1)):(n(),p("span",wt,f(m.row[e.field]),1))],2)]),_:2},1032,["prop","sortable","label"]))),128)),l(M,{width:"100",fixed:"right",key:"_operation",label:t.$t("common.operate")},{default:o(e=>[["dashboard","dataV","panel","screen"].includes(e.row.type)?(n(),p(E,{key:0},[l(d,{effect:"dark",content:s(r)("work_branch.new_page_preview"),placement:"top"},{default:o(()=>[l(v,{class:"hover-icon hover-icon-in-table",onClick:L(m=>ce(c.value==="recent"?e.row.id:e.row.resourceId),["stop"])},{default:o(()=>[l(b,{name:"icon_pc_outlined"},{default:o(()=>[l(s(K),{class:"svg-icon"})]),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["content"]),T.value?u("",!0):(n(),i(rt,{key:0,"in-grid":!0,weight:e.row.weight,"resource-id":c.value==="recent"?e.row.id:e.row.resourceId,"resource-type":e.row.type},null,8,["weight","resource-id","resource-type"])),c.value==="store"?(n(),i(d,{key:1,effect:"dark",content:s(r)("work_branch.cancel_favorites"),placement:"top"},{default:o(()=>[l(v,{class:"hover-icon hover-icon-in-table",onClick:L(m=>be(e.row),["stop"])},{default:o(()=>[l(b,{name:"icon_cancel_store"},{default:o(()=>[l(s(mt),{class:"svg-icon"})]),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["content"])):u("",!0)],64)):u("",!0),["dataset"].includes(e.row.type)?(n(),i(d,{key:1,effect:"dark",content:s(r)("work_branch.open_dataset"),placement:"top"},{default:o(()=>[l(v,{class:"hover-icon hover-icon-in-table",onClick:L(m=>de(c.value==="recent"?e.row.id:e.row.resourceId),["stop"])},{default:o(()=>[l(b,{name:"icon_pc_outlined"},{default:o(()=>[l(s(K),{class:"svg-icon"})]),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["content"])):u("",!0)]),_:1},8,["label"])]),_:1},8,["table-data","empty-desc","empty-img"])])):u("",!0),l(s(q),{jsname:"L21lbnUvZGF0YS9kYXRhLWZpbGxpbmcvZmlsbC9UYWJQYW5l",onLoaded:me}),c.value==="data-filling"?(n(),i(s(q),{key:3,jsname:"L21lbnUvZGF0YS9kYXRhLWZpbGxpbmcvZmlsbC9UYWJQYW5lVGFibGU="})):u("",!0)],2)),[[Ve,g.value]]):(n(),i(Le,{key:1,class:"dashboard-type",description:s(r)("work_branch.administrator_for_authorization")},null,8,["description"]))}}});const Wa=dt(gt,[["__scopeId","data-v-26391ec8"]]);export{Wa as default};
