import"./index-0.0.0-dataease.js";import{E as re}from"./el-dialog-0.0.0-dataease.js";import{j as me,y as se,e as ne,n as de}from"./index-0.0.0-dataease2.js";import"./el-form-0.0.0-dataease.js";import{E as fe}from"./el-col-0.0.0-dataease.js";import"./el-tag-0.0.0-dataease.js";import{E as ue,a as ce}from"./el-select-0.0.0-dataease.js";import"./el-popper-0.0.0-dataease.js";import"./el-radio-group-0.0.0-dataease.js";import{E as ie,a as be}from"./el-radio-0.0.0-dataease.js";import{a as ge,E as Te}from"./el-form-item-0.0.0-dataease.js";import{E as he}from"./el-checkbox-0.0.0-dataease.js";import{E as we}from"./el-divider-0.0.0-dataease.js";import{d as ve,w as Fe,_ as Se,R as H,r as K,o as Ve,e as Ne,f as u,M as I,k as o,i as r,g as S,a6 as c,a7 as i,j as s,V as g,a0 as U,U as k,X as A,N as q,Z as x,aa as E,n as ye}from"./vue-0.0.0-dataease.js";import{J as Q}from"./chart-0.0.0-dataease.js";import Ie from"./CustomAggrEdit-0.0.0-dataease.js";import{d as R,x as xe}from"./lodash-0.0.0-dataease.js";import{_ as Ce}from"./_plugin-vue_export-helper-0.0.0-dataease.js";import"./library-0.0.0-dataease.js";import"./use-dialog-0.0.0-dataease.js";import"./refs-0.0.0-dataease.js";import"./axios-0.0.0-dataease.js";import"./echarts-0.0.0-dataease.js";import"./tinymce-0.0.0-dataease.js";import"./user-0.0.0-dataease.js";import"./row-0.0.0-dataease.js";import"./index-0.0.0-dataease4.js";import"./index-0.0.0-dataease14.js";import"./strings-0.0.0-dataease.js";import"./index-0.0.0-dataease5.js";import"./formatter-0.0.0-dataease.js";import"./el-row-0.0.0-dataease.js";import"./el-popover-0.0.0-dataease.js";import"./dropdown-0.0.0-dataease.js";import"./el-tooltip-0.0.0-dataease.js";import"./icon_info_outlined-0.0.0-dataease.js";import"./icon_search-outline_outlined-0.0.0-dataease.js";import"./icon_adjustment_outlined-0.0.0-dataease.js";import"./icon_edit_outlined-0.0.0-dataease.js";import"./icon_delete-trash_outlined-0.0.0-dataease.js";import"./CodeMirror-0.0.0-dataease.js";import"./dataset-0.0.0-dataease.js";import"./attr-0.0.0-dataease20.js";import"./field-list-0.0.0-dataease.js";const Ee=ve({__name:"TableTotalSelector",props:{chart:{type:Object,required:!0},themes:{type:String,default:"dark"},propertyInner:{type:Array}},emits:["onTableTotalChange"],setup(a,{emit:W}){const{t:m}=me(),$=a;Fe([()=>$.chart.customAttr.tableTotal,()=>$.chart.yAxis],()=>{X()},{deep:!0});const M=[{name:m("chart.sum"),value:"SUM"},{name:m("chart.avg"),value:"AVG"},{name:m("chart.max"),value:"MAX"},{name:m("chart.min"),value:"MIN"},{name:m("commons.custom"),value:"CUSTOM"}],t=Se({tableTotalForm:R(Q),rowSubTotalItem:{},rowTotalItem:{},colSubTotalItem:{},colTotalItem:{},totalCfg:[],totalCfgAttr:"",totalItem:{}}),Y=W,h=n=>{Y("onTableTotalChange",t.tableTotalForm,n)},X=()=>{var d,w;const n=(w=(d=$.chart)==null?void 0:d.customAttr)==null?void 0:w.tableTotal;n&&(t.tableTotalForm=xe(R(n),R(Q)));const e=$.chart.yAxis;if((e==null?void 0:e.length)>0){const N=e.map(F=>F.dataeaseName);N.indexOf(t.tableTotalForm.row.totalSortField)===-1&&(t.tableTotalForm.row.totalSortField=e[0].dataeaseName),N.indexOf(t.tableTotalForm.col.totalSortField)===-1&&(t.tableTotalForm.col.totalSortField=e[0].dataeaseName)}else t.tableTotalForm.row.totalSortField="",t.tableTotalForm.col.totalSortField="";[{...t.tableTotalForm.row.calcTotals},{...t.tableTotalForm.row.calcSubTotals},{...t.tableTotalForm.col.calcTotals},{...t.tableTotalForm.col.calcSubTotals}].forEach(N=>{_(N.cfg,e)}),[[t.rowTotalItem,t.tableTotalForm.row.calcTotals.cfg],[t.rowSubTotalItem,t.tableTotalForm.row.calcSubTotals.cfg],[t.colTotalItem,t.tableTotalForm.col.calcTotals.cfg],[t.colSubTotalItem,t.tableTotalForm.col.calcSubTotals.cfg]].forEach(N=>{const[F,v]=N;if(!v.length){F.dataeaseName="",F.aggregation="",F.originName="";return}const y=v.findIndex(V=>V.dataeaseName===F.dataeaseName);y!==-1?F.aggregation=v[y].aggregation:(F.dataeaseName=v[0].dataeaseName,F.aggregation=v[0].aggregation,F.originName=v[0].originName)})},C=n=>{var e;return(e=$.propertyInner)==null?void 0:e.includes(n)},L=(n,e)=>{for(let b=0;b<e.length;b++){const f=e[b];if(f.dataeaseName===n.dataeaseName){n.aggregation=f.aggregation,n.originName=f.originName;return}}},O=(n,e,b)=>{for(let f=0;f<e.length;f++){const d=e[f];if(d.dataeaseName===n.dataeaseName){d.aggregation=n.aggregation;break}}n.aggregation=="CUSTOM"&&!n.originName||h(b)},_=(n,e)=>{if(!n.length){e.forEach(f=>{n.push({dataeaseName:f.dataeaseName,aggregation:"SUM"})});return}if(!e.length){n.splice(0,n.length);return}const b=n.reduce((f,d)=>(f[d.dataeaseName]=d,f),{});n.splice(0,n.length),e.forEach(f=>{n.push({dataeaseName:f.dataeaseName,aggregation:b[f.dataeaseName]?b[f.dataeaseName].aggregation:"SUM",originName:b[f.dataeaseName]?b[f.dataeaseName].originName:""})})},J=H("quota",()=>[]),ee=H("dimension",()=>[]),G=K(),B=K(!1),D=(n,e,b)=>{B.value=!0,t.totalCfg=e,t.totalCfgAttr=b,t.totalItem=n,ye(()=>{G.value.initEdit(n,J().filter(f=>f.id!=="-1"))})},P=()=>{B.value=!1},te=()=>{var e;G.value.setFieldForm();const n=R(G.value.fieldForm);(e=t.totalCfg)==null||e.forEach(b=>{b.dataeaseName===n.dataeaseName&&(b.originName=n.originName,le(b),t.totalItem.originName=b.originName)}),P(),h(t.totalCfgAttr)},le=n=>{n.extField=2,n.chartId=$.chart.id,n.datasetGroupId=$.chart.tableId,n.lastSyncTime=null,n.columnIndex=ee().length+J().length,n.deExtractType=n.deType};return Ve(()=>{X()}),(n,e)=>{const b=we,f=he,d=ge,w=ie,N=be,F=se,v=ue,y=ce,V=fe,j=Ne("Setting"),z=ne,ae=Te,Z=de,oe=re;return u(),I(x,null,[o(ae,{ref:"tableTotalForm",model:t.tableTotalForm,"label-position":"top"},{default:r(()=>{var p;return[C("row")?(u(),S(b,{key:0,"content-position":"center",class:g("divider-style-"+a.themes)},{default:r(()=>[c(i(s(m)("chart.row_cfg")),1)]),_:1},8,["class"])):U("",!0),k(o(d,{label:s(m)("chart.total_show"),class:g(["form-item","form-item-"+a.themes])},{default:r(()=>[o(f,{effect:a.themes,modelValue:t.tableTotalForm.row.showGrandTotals,"onUpdate:modelValue":e[0]||(e[0]=l=>t.tableTotalForm.row.showGrandTotals=l),onChange:e[1]||(e[1]=l=>h("row.showGrandTotals"))},{default:r(()=>[c(i(s(m)("chart.show")),1)]),_:1},8,["effect","modelValue"])]),_:1},8,["label","class"]),[[A,C("row")]]),k(q("div",null,[o(d,{label:s(m)("chart.total_position"),class:g(["form-item","form-item-"+a.themes])},{default:r(()=>[o(N,{effect:a.themes,modelValue:t.tableTotalForm.row.reverseLayout,"onUpdate:modelValue":e[2]||(e[2]=l=>t.tableTotalForm.row.reverseLayout=l),onChange:e[3]||(e[3]=l=>h("row.reverseLayout"))},{default:r(()=>[o(w,{effect:a.themes,label:!0},{default:r(()=>[c(i(s(m)("chart.total_pos_top")),1)]),_:1},8,["effect"]),o(w,{effect:a.themes,label:!1},{default:r(()=>[c(i(s(m)("chart.total_pos_bottom")),1)]),_:1},8,["effect"])]),_:1},8,["effect","modelValue"])]),_:1},8,["label","class"]),o(d,{label:s(m)("chart.total_label"),class:g(["form-item","form-item-"+a.themes])},{default:r(()=>[o(F,{effect:a.themes,placeholder:s(m)("chart.total_label"),size:"small",maxlength:"20",modelValue:t.tableTotalForm.row.label,"onUpdate:modelValue":e[4]||(e[4]=l=>t.tableTotalForm.row.label=l),clearable:"",onBlur:e[5]||(e[5]=l=>h("row.label"))},null,8,["effect","placeholder","modelValue"])]),_:1},8,["label","class"]),o(d,{label:s(m)("chart.aggregation"),class:g(["form-item","form-item-"+a.themes])},{default:r(()=>[o(V,{span:11},{default:r(()=>[o(y,{effect:a.themes,modelValue:t.rowTotalItem.dataeaseName,"onUpdate:modelValue":e[6]||(e[6]=l=>t.rowTotalItem.dataeaseName=l),placeholder:s(m)("chart.aggregation"),onChange:e[7]||(e[7]=l=>L(t.rowTotalItem,t.tableTotalForm.row.calcTotals.cfg))},{default:r(()=>[(u(!0),I(x,null,E(a.chart.yAxis,l=>(u(),S(v,{key:l.dataeaseName,label:l.name,value:l.dataeaseName},null,8,["label","value"]))),128))]),_:1},8,["effect","modelValue","placeholder"])]),_:1}),o(V,{span:t.rowTotalItem.aggregation==="CUSTOM"?8:11,offset:2},{default:r(()=>[o(y,{effect:a.themes,modelValue:t.rowTotalItem.aggregation,"onUpdate:modelValue":e[8]||(e[8]=l=>t.rowTotalItem.aggregation=l),placeholder:s(m)("chart.aggregation"),onChange:e[9]||(e[9]=l=>O(t.rowTotalItem,t.tableTotalForm.row.calcTotals.cfg,"row.calcTotals.cfg"))},{default:r(()=>[(u(),I(x,null,E(M,l=>o(v,{key:l.value,label:l.name,value:l.value},null,8,["label","value"])),64))]),_:1},8,["effect","modelValue","placeholder"])]),_:1},8,["span"]),t.rowTotalItem.aggregation==="CUSTOM"?(u(),S(V,{key:0,span:2,offset:1},{default:r(()=>[o(z,null,{default:r(()=>[o(j,{onClick:e[10]||(e[10]=l=>D(t.rowTotalItem,t.tableTotalForm.row.calcTotals.cfg,"row.calcTotals.cfg"))})]),_:1})]),_:1})):U("",!0)]),_:1},8,["label","class"]),a.chart.type==="table-pivot"?(u(),S(d,{key:0,label:s(m)("chart.total_sort"),class:g(["form-item","form-item-"+a.themes])},{default:r(()=>[o(N,{effect:a.themes,modelValue:t.tableTotalForm.row.totalSort,"onUpdate:modelValue":e[11]||(e[11]=l=>t.tableTotalForm.row.totalSort=l),onChange:e[12]||(e[12]=l=>h("row.totalSort"))},{default:r(()=>[o(w,{effect:a.themes,label:"none"},{default:r(()=>[c(i(s(m)("chart.total_sort_none")),1)]),_:1},8,["effect"]),o(w,{effect:a.themes,label:"asc"},{default:r(()=>[c(i(s(m)("chart.total_sort_asc")),1)]),_:1},8,["effect"]),o(w,{effect:a.themes,label:"desc"},{default:r(()=>[c(i(s(m)("chart.total_sort_desc")),1)]),_:1},8,["effect"])]),_:1},8,["effect","modelValue"])]),_:1},8,["label","class"])):U("",!0),a.chart.type==="table-pivot"&&t.tableTotalForm.row.totalSort!=="none"?(u(),S(d,{key:1,label:s(m)("chart.total_sort_field"),class:g(["form-item","form-item-"+a.themes])},{default:r(()=>[o(y,{effect:a.themes,modelValue:t.tableTotalForm.row.totalSortField,"onUpdate:modelValue":e[13]||(e[13]=l=>t.tableTotalForm.row.totalSortField=l),class:"form-item-select",placeholder:s(m)("chart.total_sort_field"),onChange:e[14]||(e[14]=l=>h("row.totalSortField"))},{default:r(()=>[(u(!0),I(x,null,E(a.chart.yAxis,l=>(u(),S(v,{key:l.dataeaseName,label:l.name,value:l.dataeaseName},null,8,["label","value"]))),128))]),_:1},8,["effect","modelValue","placeholder"])]),_:1},8,["label","class"])):U("",!0)],512),[[A,C("row")&&t.tableTotalForm.row.showGrandTotals]]),k(o(d,{label:s(m)("chart.sub_total_show"),class:g(["form-item","form-item-"+a.themes])},{default:r(()=>[o(f,{effect:a.themes,modelValue:t.tableTotalForm.row.showSubTotals,"onUpdate:modelValue":e[15]||(e[15]=l=>t.tableTotalForm.row.showSubTotals=l),disabled:a.chart.xAxis.length<2,onChange:e[16]||(e[16]=l=>h("row"))},{default:r(()=>[c(i(s(m)("chart.show")),1)]),_:1},8,["effect","modelValue","disabled"])]),_:1},8,["label","class"]),[[A,C("row")]]),k(q("div",null,[o(d,{label:s(m)("chart.total_position"),class:g(["form-item","form-item-"+a.themes])},{default:r(()=>[o(N,{effect:a.themes,modelValue:t.tableTotalForm.row.reverseSubLayout,"onUpdate:modelValue":e[17]||(e[17]=l=>t.tableTotalForm.row.reverseSubLayout=l),disabled:a.chart.xAxis.length<2,onChange:e[18]||(e[18]=l=>h("row"))},{default:r(()=>[o(w,{effect:a.themes,label:!0},{default:r(()=>[c(i(s(m)("chart.total_pos_top")),1)]),_:1},8,["effect"]),o(w,{effect:a.themes,label:!1},{default:r(()=>[c(i(s(m)("chart.total_pos_bottom")),1)]),_:1},8,["effect"])]),_:1},8,["effect","modelValue","disabled"])]),_:1},8,["label","class"]),o(d,{label:s(m)("chart.total_label"),class:g(["form-item","form-item-"+a.themes])},{default:r(()=>[o(F,{effect:a.themes,disabled:a.chart.xAxis.length<2,placeholder:s(m)("chart.total_label"),modelValue:t.tableTotalForm.row.subLabel,"onUpdate:modelValue":e[19]||(e[19]=l=>t.tableTotalForm.row.subLabel=l),size:"small",maxlength:"20",clearable:"",onBlur:h},null,8,["effect","disabled","placeholder","modelValue"])]),_:1},8,["label","class"]),o(d,{label:s(m)("chart.aggregation"),class:g(["form-item","form-item-"+a.themes])},{default:r(()=>[o(V,{span:11},{default:r(()=>[o(y,{effect:a.themes,modelValue:t.rowSubTotalItem.dataeaseName,"onUpdate:modelValue":e[20]||(e[20]=l=>t.rowSubTotalItem.dataeaseName=l),disabled:a.chart.xAxis.length<2,placeholder:s(m)("chart.aggregation"),onChange:e[21]||(e[21]=l=>L(t.rowSubTotalItem,t.tableTotalForm.row.calcSubTotals.cfg))},{default:r(()=>[(u(!0),I(x,null,E(a.chart.yAxis,l=>(u(),S(v,{key:l.dataeaseName,label:l.name,value:l.dataeaseName},null,8,["label","value"]))),128))]),_:1},8,["effect","modelValue","disabled","placeholder"])]),_:1}),o(V,{span:t.rowSubTotalItem.aggregation==="CUSTOM"?8:11,offset:2},{default:r(()=>[o(y,{effect:a.themes,modelValue:t.rowSubTotalItem.aggregation,"onUpdate:modelValue":e[22]||(e[22]=l=>t.rowSubTotalItem.aggregation=l),disabled:a.chart.xAxis.length<2,placeholder:s(m)("chart.aggregation"),onChange:e[23]||(e[23]=l=>O(t.rowSubTotalItem,t.tableTotalForm.row.calcSubTotals.cfg,"row"))},{default:r(()=>[(u(),I(x,null,E(M,l=>o(v,{key:l.value,label:l.name,value:l.value},null,8,["label","value"])),64))]),_:1},8,["effect","modelValue","disabled","placeholder"])]),_:1},8,["span"]),t.rowSubTotalItem.aggregation==="CUSTOM"?(u(),S(V,{key:0,span:2,offset:1},{default:r(()=>[o(z,null,{default:r(()=>[o(j,{onClick:e[24]||(e[24]=l=>D(t.rowSubTotalItem,t.tableTotalForm.row.calcSubTotals.cfg,"row.calcSubTotals.cfg"))})]),_:1})]),_:1})):U("",!0)]),_:1},8,["label","class"])],512),[[A,C("row")&&t.tableTotalForm.row.showSubTotals]]),C("col")?(u(),S(b,{key:1,"content-position":"center",class:g("divider-style-"+a.themes)},{default:r(()=>[c(i(s(m)("chart.col_cfg")),1)]),_:1},8,["class"])):U("",!0),k(o(d,{label:s(m)("chart.total_show"),class:g(["form-item","form-item-"+a.themes])},{default:r(()=>[o(f,{effect:a.themes,modelValue:t.tableTotalForm.col.showGrandTotals,"onUpdate:modelValue":e[25]||(e[25]=l=>t.tableTotalForm.col.showGrandTotals=l),onChange:e[26]||(e[26]=l=>h("col"))},{default:r(()=>[c(i(s(m)("chart.show")),1)]),_:1},8,["effect","modelValue"])]),_:1},8,["label","class"]),[[A,C("col")]]),k(q("div",null,[o(d,{label:s(m)("chart.total_position"),class:g(["form-item","form-item-"+a.themes])},{default:r(()=>[o(N,{effect:a.themes,modelValue:t.tableTotalForm.col.reverseLayout,"onUpdate:modelValue":e[27]||(e[27]=l=>t.tableTotalForm.col.reverseLayout=l),onChange:e[28]||(e[28]=l=>h("col"))},{default:r(()=>[o(w,{effect:a.themes,label:!0},{default:r(()=>[c(i(s(m)("chart.total_pos_left")),1)]),_:1},8,["effect"]),o(w,{effect:a.themes,label:!1},{default:r(()=>[c(i(s(m)("chart.total_pos_right")),1)]),_:1},8,["effect"])]),_:1},8,["effect","modelValue"])]),_:1},8,["label","class"]),o(d,{label:s(m)("chart.total_label"),class:g(["form-item","form-item-"+a.themes])},{default:r(()=>[o(F,{effect:a.themes,placeholder:s(m)("chart.total_label"),size:"small",maxlength:"20",modelValue:t.tableTotalForm.col.label,"onUpdate:modelValue":e[29]||(e[29]=l=>t.tableTotalForm.col.label=l),clearable:"",onBlur:e[30]||(e[30]=l=>h("col"))},null,8,["effect","placeholder","modelValue"])]),_:1},8,["label","class"]),o(d,{label:s(m)("chart.aggregation"),class:g(["form-item","form-item-"+a.themes])},{default:r(()=>[o(V,{span:11},{default:r(()=>[o(y,{effect:a.themes,modelValue:t.colTotalItem.dataeaseName,"onUpdate:modelValue":e[31]||(e[31]=l=>t.colTotalItem.dataeaseName=l),placeholder:s(m)("chart.aggregation"),onChange:e[32]||(e[32]=l=>L(t.colTotalItem,t.tableTotalForm.col.calcTotals.cfg))},{default:r(()=>[(u(!0),I(x,null,E(a.chart.yAxis,l=>(u(),S(v,{key:l.dataeaseName,label:l.name,value:l.dataeaseName},null,8,["label","value"]))),128))]),_:1},8,["effect","modelValue","placeholder"])]),_:1}),o(V,{span:t.colTotalItem.aggregation==="CUSTOM"?8:11,offset:2},{default:r(()=>[o(y,{effect:a.themes,modelValue:t.colTotalItem.aggregation,"onUpdate:modelValue":e[33]||(e[33]=l=>t.colTotalItem.aggregation=l),placeholder:s(m)("chart.aggregation"),onChange:e[34]||(e[34]=l=>O(t.colTotalItem,t.tableTotalForm.col.calcTotals.cfg,"col.calcTotals.cfg"))},{default:r(()=>[(u(),I(x,null,E(M,l=>o(v,{key:l.value,label:l.name,value:l.value},null,8,["label","value"])),64))]),_:1},8,["effect","modelValue","placeholder"])]),_:1},8,["span"]),t.colTotalItem.aggregation==="CUSTOM"?(u(),S(V,{key:0,span:2,offset:1},{default:r(()=>[o(z,null,{default:r(()=>[o(j,{onClick:e[35]||(e[35]=l=>D(t.colTotalItem,t.tableTotalForm.col.calcTotals.cfg,"col.calcTotals.cfg"))})]),_:1})]),_:1})):U("",!0)]),_:1},8,["label","class"]),a.chart.type==="table-pivot"?(u(),S(d,{key:0,label:s(m)("chart.total_sort"),class:g(["form-item","form-item-"+a.themes])},{default:r(()=>[o(N,{effect:a.themes,modelValue:t.tableTotalForm.col.totalSort,"onUpdate:modelValue":e[36]||(e[36]=l=>t.tableTotalForm.col.totalSort=l),onChange:e[37]||(e[37]=l=>h("col"))},{default:r(()=>[o(w,{effect:a.themes,label:"none"},{default:r(()=>[c(i(s(m)("chart.total_sort_none")),1)]),_:1},8,["effect"]),o(w,{effect:a.themes,label:"asc"},{default:r(()=>[c(i(s(m)("chart.total_sort_asc")),1)]),_:1},8,["effect"]),o(w,{effect:a.themes,label:"desc"},{default:r(()=>[c(i(s(m)("chart.total_sort_desc")),1)]),_:1},8,["effect"])]),_:1},8,["effect","modelValue"])]),_:1},8,["label","class"])):U("",!0),k(o(d,{label:s(m)("chart.total_sort_field"),class:"form-item"},{default:r(()=>[o(y,{effect:a.themes,modelValue:t.tableTotalForm.col.totalSortField,"onUpdate:modelValue":e[38]||(e[38]=l=>t.tableTotalForm.col.totalSortField=l),class:"form-item-select",placeholder:s(m)("chart.total_sort_field"),onChange:e[39]||(e[39]=l=>h("col"))},{default:r(()=>[(u(!0),I(x,null,E(a.chart.yAxis,l=>(u(),S(v,{key:l.dataeaseName,label:l.name,value:l.dataeaseName},null,8,["label","value"]))),128))]),_:1},8,["effect","modelValue","placeholder"])]),_:1},8,["label"]),[[A,a.chart.type==="table-pivot"&&((p=t.tableTotalForm.col)==null?void 0:p.totalSort)!=="none"]])],512),[[A,C("col")&&t.tableTotalForm.col.showGrandTotals]]),k(o(d,{label:s(m)("chart.sub_total_show"),class:g(["form-item","form-item-"+a.themes])},{default:r(()=>[o(f,{effect:a.themes,modelValue:t.tableTotalForm.col.showSubTotals,"onUpdate:modelValue":e[40]||(e[40]=l=>t.tableTotalForm.col.showSubTotals=l),disabled:a.chart.xAxisExt.length<2,onChange:e[41]||(e[41]=l=>h("col"))},{default:r(()=>[c(i(s(m)("chart.show")),1)]),_:1},8,["effect","modelValue","disabled"])]),_:1},8,["label","class"]),[[A,C("col")]]),k(q("div",null,[o(d,{label:s(m)("chart.total_position"),class:g(["form-item","form-item-"+a.themes])},{default:r(()=>{var l;return[o(N,{effect:a.themes,modelValue:t.tableTotalForm.col.reverseSubLayout,"onUpdate:modelValue":e[42]||(e[42]=T=>t.tableTotalForm.col.reverseSubLayout=T),disabled:((l=a.chart.xAxisExt)==null?void 0:l.length)<2,onChange:e[43]||(e[43]=T=>h("col"))},{default:r(()=>[o(w,{effect:a.themes,label:!0},{default:r(()=>[c(i(s(m)("chart.total_pos_left")),1)]),_:1},8,["effect"]),o(w,{effect:a.themes,label:!1},{default:r(()=>[c(i(s(m)("chart.total_pos_right")),1)]),_:1},8,["effect"])]),_:1},8,["effect","modelValue","disabled"])]}),_:1},8,["label","class"]),o(d,{label:s(m)("chart.total_label"),class:g(["form-item","form-item-"+a.themes])},{default:r(()=>{var l;return[o(F,{effect:a.themes,disabled:((l=a.chart.xAxisExt)==null?void 0:l.length)<2,placeholder:s(m)("chart.total_label"),modelValue:t.tableTotalForm.col.subLabel,"onUpdate:modelValue":e[44]||(e[44]=T=>t.tableTotalForm.col.subLabel=T),size:"small",maxlength:"20",clearable:"",onChange:e[45]||(e[45]=T=>h("col"))},null,8,["effect","disabled","placeholder","modelValue"])]}),_:1},8,["label","class"]),o(d,{label:s(m)("chart.aggregation"),class:g(["form-item","form-item-"+a.themes])},{default:r(()=>[o(V,{span:11},{default:r(()=>{var l;return[o(y,{effect:a.themes,modelValue:t.colSubTotalItem.dataeaseName,"onUpdate:modelValue":e[46]||(e[46]=T=>t.colSubTotalItem.dataeaseName=T),disabled:((l=a.chart.xAxisExt)==null?void 0:l.length)<2,placeholder:s(m)("chart.aggregation"),onChange:e[47]||(e[47]=T=>L(t.colSubTotalItem,t.tableTotalForm.col.calcSubTotals.cfg))},{default:r(()=>[(u(!0),I(x,null,E(a.chart.yAxis,T=>(u(),S(v,{key:T.dataeaseName,label:T.name,value:T.dataeaseName},null,8,["label","value"]))),128))]),_:1},8,["effect","modelValue","disabled","placeholder"])]}),_:1}),o(V,{span:t.colSubTotalItem.aggregation==="CUSTOM"?8:11,offset:2},{default:r(()=>{var l;return[o(y,{effect:a.themes,modelValue:t.colSubTotalItem.aggregation,"onUpdate:modelValue":e[48]||(e[48]=T=>t.colSubTotalItem.aggregation=T),disabled:((l=a.chart.xAxisExt)==null?void 0:l.length)<2,placeholder:s(m)("chart.aggregation"),onChange:e[49]||(e[49]=T=>O(t.colSubTotalItem,t.tableTotalForm.col.calcSubTotals.cfg,"col.calcSubTotals.cfg"))},{default:r(()=>[(u(),I(x,null,E(M,T=>o(v,{key:T.value,label:T.name,value:T.value},null,8,["label","value"])),64))]),_:1},8,["effect","modelValue","disabled","placeholder"])]}),_:1},8,["span"]),t.colSubTotalItem.aggregation==="CUSTOM"?(u(),S(V,{key:0,span:2,offset:1},{default:r(()=>[o(z,null,{default:r(()=>[o(j,{onClick:e[50]||(e[50]=l=>D(t.colSubTotalItem,t.tableTotalForm.col.calcSubTotals.cfg,"col.calcSubTotals.cfg"))})]),_:1})]),_:1})):U("",!0)]),_:1},8,["label","class"])],512),[[A,C("col")&&t.tableTotalForm.col.showSubTotals]])]}),_:1},8,["model"]),o(oe,{modelValue:B.value,"onUpdate:modelValue":e[53]||(e[53]=p=>B.value=p),width:"1000px",title:"自定义聚合公式","close-on-click-modal":!1},{footer:r(()=>[o(Z,{secondary:"",onClick:e[51]||(e[51]=p=>P())},{default:r(()=>[c(i(s(m)("dataset.cancel")),1)]),_:1}),o(Z,{type:"primary",onClick:e[52]||(e[52]=p=>te())},{default:r(()=>[c(i(s(m)("dataset.confirm")),1)]),_:1})]),default:r(()=>[o(Ie,{ref_key:"calcEdit",ref:G},null,512)]),_:1},8,["modelValue"])],64)}}});const vt=Ce(Ee,[["__scopeId","data-v-ec08310f"]]);export{vt as default};
