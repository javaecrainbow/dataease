import F from"./UnionFieldList-0.0.0-dataease.js";import I from"./UnionItemEdit-0.0.0-dataease.js";import{K as b}from"./dataset-0.0.0-dataease.js";import{d as l}from"./lodash-0.0.0-dataease.js";import{d as O,r as y,_ as N,ab as T,f as r,M as f,N as _,U as k,a7 as D,g,a0 as v}from"./vue-0.0.0-dataease.js";import{_ as x}from"./_plugin-vue_export-helper-0.0.0-dataease.js";import"./index-0.0.0-dataease.js";import"./library-0.0.0-dataease.js";import"./el-table-column-0.0.0-dataease.js";import"./index-0.0.0-dataease4.js";import"./index-0.0.0-dataease2.js";import"./axios-0.0.0-dataease.js";import"./echarts-0.0.0-dataease.js";import"./tinymce-0.0.0-dataease.js";import"./user-0.0.0-dataease.js";import"./el-checkbox-0.0.0-dataease.js";import"./index-0.0.0-dataease5.js";import"./el-tag-0.0.0-dataease.js";import"./icon_search-outline_outlined-0.0.0-dataease.js";import"./el-tooltip-0.0.0-dataease.js";import"./el-popper-0.0.0-dataease.js";import"./attr-0.0.0-dataease20.js";import"./field-list-0.0.0-dataease.js";import"./el-select-0.0.0-dataease.js";import"./index-0.0.0-dataease14.js";import"./strings-0.0.0-dataease.js";import"./icon_right-association-0.0.0-dataease.js";import"./icon_add_outlined-0.0.0-dataease.js";import"./join-join-0.0.0-dataease.js";import"./icon_delete-trash_outlined-0.0.0-dataease.js";const P={style:{height:"100%","overflow-y":"auto"}},V={class:"field-style"},q={class:"fields"},K=["title"],L={class:"fields"},M=["title"],z=O({__name:"UnionEdit",props:{editArr:{type:Array,default:()=>[]}},setup(U,{expose:E}){const w=t=>{i.currentDsFields=t},C=t=>{e.currentDsFields=t},S=t=>{t!==void 0?e.unionFields.splice(t,1):e.unionFields.push({parentField:null,currentField:null})},c={info:"",tableName:"",type:"db",datasourceId:"",id:"",unionType:"left",unionFields:[],currentDsFields:[],sqlVariableDetails:null,confirm:!1,isShadow:!1,flag:""},n=y([]),s=y([]),e=N(l(c)),i=N(l(c)),m=U,A=()=>{Object.assign(e,l(c)),Object.assign(i,l(c)),n.value=[],s.value=[]},j=()=>{e.confirm=!1,e.isShadow=!1,e.flag="",i.confirm=!1,i.isShadow=!1,i.flag="",Object.assign(e,l(m.editArr[0])),Object.assign(i,l(m.editArr[1])),B()},h=t=>["datasourceId","id","info","tableName","type"].reduce((o,a)=>(o[a]=t[a],o),{}),B=async()=>{const[t,o]=m.editArr,[a,p]=await Promise.all([b(h(t)),b(h(o))]);n.value=p,n.value.forEach(d=>{d.checked=o.currentDsFields.map(u=>u.originName).includes(d.originName)}),s.value=a,s.value.forEach(d=>{d.checked=t.currentDsFields.map(u=>u.originName).includes(d.originName)})};return E({node:e,parent:i,clearState:A,initState:j}),(t,o)=>{const a=T("loading");return r(),f("div",P,[_("div",V,[k((r(),f("div",q,[_("p",{title:i.tableName},D(i.tableName),9,K),n.value.length?(r(),g(F,{key:0,"field-list":n.value,node:i,onCheckedFields:w},null,8,["field-list","node"])):v("",!0)])),[[a,!n.value.length]]),k((r(),f("div",L,[_("p",{title:e.tableName},D(e.tableName),9,M),s.value.length?(r(),g(F,{key:0,"field-list":s.value,node:e,onCheckedFields:C},null,8,["field-list","node"])):v("",!0)])),[[a,!s.value.length]])]),e.tableName?(r(),g(I,{key:0,"parent-field-list":n.value,"node-field-list":s.value,node:e,onChangeUnionType:o[0]||(o[0]=p=>e.unionType=p),onChangeUnionFields:S,"table-name":i.tableName},null,8,["parent-field-list","node-field-list","node","table-name"])):v("",!0)])}}});const be=x(z,[["__scopeId","data-v-d9c7bf12"]]);export{be as default};
