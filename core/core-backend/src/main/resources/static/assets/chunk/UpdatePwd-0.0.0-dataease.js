import"./index-0.0.0-dataease.js";import"./el-form-0.0.0-dataease.js";import{j as y,d as P,w as b,n as h}from"./index-0.0.0-dataease2.js";import{E as v,a as V}from"./el-form-item-0.0.0-dataease.js";import{r as _}from"./encryption-0.0.0-dataease.js";import{l as x}from"./logout-0.0.0-dataease.js";import{_ as d}from"./CustomPassword.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";import{d as E}from"./lodash-0.0.0-dataease.js";import{d as q,_ as F,r as U,f as C,g as $,i as p,k as m,j as s,a6 as k,a7 as B}from"./vue-0.0.0-dataease.js";import{_ as I}from"./_plugin-vue_export-helper-0.0.0-dataease.js";import"./library-0.0.0-dataease.js";import"./axios-0.0.0-dataease.js";import"./echarts-0.0.0-dataease.js";import"./tinymce-0.0.0-dataease.js";import"./user-0.0.0-dataease.js";import"./_commonjs-dynamic-modules-0.0.0-dataease.js";import"./base64-0.0.0-dataease.js";import"./app-0.0.0-dataease.js";import"./interactive-0.0.0-dataease.js";import"./dataVisualization-0.0.0-dataease.js";import"./dataset-0.0.0-dataease.js";import"./datasource-0.0.0-dataease.js";import"./icon_visible_outlined-0.0.0-dataease.js";import"./icon_invisible_outlined-0.0.0-dataease.js";const j=q({__name:"UpdatePwd",setup(z){const{t:e}=y(),t=F(E({pwd:"",newPwd:"",confirm:""})),u=(n,o,r)=>{o===t.pwd&&r(new Error(e("system.be_the_same")));const l=/^.*(?=.{6,20})(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[~!@#$%^&*()_+\-\={}|":<>?`[\];',.\/])[a-zA-Z0-9~!@#$%^&*()_+\-\={}|":<>?`[\];',.\/]*$/;if(new RegExp(l).test(o))r();else{const a=e("user.pwd_pattern_error");r(new Error(a))}},c=(n,o,r)=>{o!==t.newPwd?r(new Error(e("system.twice_are_inconsistent"))):r()},f={pwd:[{required:!0,message:e("common.require"),trigger:"blur"},{min:6,max:20,message:e("commons.input_limit",[6,20]),trigger:"blur"}],newPwd:[{required:!0,message:e("common.require"),trigger:"blur"},{validator:u,trigger:"blur"}],confirm:[{required:!0,message:e("common.require"),trigger:"blur"},{min:6,max:20,message:e("commons.input_limit",[6,20]),trigger:"blur"},{validator:c,trigger:"blur"}]},i=U(),g=()=>{i.value.validate(n=>{if(n){const o=_(t.pwd),r=_(t.newPwd);P.post({url:"/user/modifyPwd",data:{pwd:o,newPwd:r}}).then(()=>{b.success(e("system.log_in_again")),x()})}})};return(n,o)=>{const r=V,l=h,w=v;return C(),$(w,{ref_key:"updatePwdForm",ref:i,"require-asterisk-position":"right",model:t,rules:f,class:"mt16","label-width":"80px","label-position":"top"},{default:p(()=>[m(r,{label:s(e)("system.original_password"),prop:"pwd"},{default:p(()=>[m(s(d),{modelValue:t.pwd,"onUpdate:modelValue":o[0]||(o[0]=a=>t.pwd=a),"show-password":"",type:"password",placeholder:s(e)("system.the_original_password")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),m(r,{label:s(e)("system.new_password"),prop:"newPwd"},{default:p(()=>[m(s(d),{modelValue:t.newPwd,"onUpdate:modelValue":o[1]||(o[1]=a=>t.newPwd=a),"show-password":"",type:"password",placeholder:s(e)("system.the_new_password")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),m(r,{label:s(e)("system.confirm_password"),prop:"confirm"},{default:p(()=>[m(s(d),{modelValue:t.confirm,"onUpdate:modelValue":o[2]||(o[2]=a=>t.confirm=a),"show-password":"",type:"password",placeholder:s(e)("system.the_confirmation_password")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),m(l,{onClick:g,type:"primary"},{default:p(()=>[k(B(s(e)("common.save")),1)]),_:1})]),_:1},8,["model"])}}});const pe=I(j,[["__scopeId","data-v-c9cc9c55"]]);export{pe as default};
