import{d as J,r as ue,_ as ie,m as h,w as oe,o as ce,$ as de,f,M as g,U as Z,j as n,V as M,ad as I,k as D,i as R,g as Y,a0 as j,ac as T,K as me,N as Q}from"./vue-0.0.0-dataease.js";import{$ as pe,aa as X,ad as C,a0 as S,z as fe,a2 as be,Z as ve,a1 as Ne,e as H,y as he}from"./index-0.0.0-dataease2.js";import{l as ge,A as m,i as Ve,a3 as E,aG as ye,ak as we,h as _e,a6 as W,w as Ie}from"./index-0.0.0-dataease.js";import{h as V}from"./lodash-0.0.0-dataease.js";import{v as q}from"./index-0.0.0-dataease15.js";const Ee=ge({id:{type:String,default:void 0},step:{type:Number,default:1},stepStrictly:Boolean,max:{type:Number,default:Number.POSITIVE_INFINITY},effect:{type:String,values:["dark","light","plain"],default:"light"},min:{type:Number,default:Number.NEGATIVE_INFINITY},modelValue:Number,readonly:Boolean,disabled:Boolean,size:pe,controls:{type:Boolean,default:!0},controlsPosition:{type:String,default:"",values:["","right"]},valueOnClear:{type:[String,Number,null],validator:s=>s===null||m(s)||["min","max"].includes(s),default:null},name:String,label:String,placeholder:String,precision:{type:Number,validator:s=>s>=0&&s===Number.parseInt(`${s}`,10)},validateEvent:{type:Boolean,default:!0}}),Ce={[X]:(s,k)=>s!==k,blur:s=>s instanceof FocusEvent,focus:s=>s instanceof FocusEvent,[C]:s=>m(s)||V(s),[S]:s=>m(s)||V(s)},Se=["aria-label","onKeydown"],ke={key:0,xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 12 12"},Pe=Q("path",{d:"M5.99952 7.93206L10.0654 3.86619C10.163 3.76856 10.3213 3.76856 10.4189 3.86619L10.7725 4.21975C10.8701 4.31738 10.8701 4.47567 10.7725 4.5733L6.35307 8.99272C6.15781 9.18798 5.84122 9.18798 5.64596 8.99272L1.22654 4.5733C1.12891 4.47567 1.12891 4.31738 1.22654 4.21975L1.5801 3.86619C1.67773 3.76856 1.83602 3.76856 1.93365 3.86619L5.99952 7.93206Z"},null,-1),xe=[Pe],Ae=["aria-label","onKeydown"],Le={key:0,xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 12 12"},Be=Q("path",{d:"M6.00048 4.06794L1.93462 8.13381C1.83699 8.23144 1.6787 8.23144 1.58107 8.13381L1.22751 7.78025C1.12988 7.68262 1.12988 7.52433 1.22751 7.4267L5.64693 3.00728C5.84219 2.81202 6.15878 2.81202 6.35404 3.00728L10.7735 7.4267C10.8711 7.52433 10.8711 7.68262 10.7735 7.78025L10.4199 8.13381C10.3223 8.23144 10.164 8.23144 10.0663 8.13381L6.00048 4.06794Z"},null,-1),Fe=[Be],Me=J({name:"ElInputNumber"}),De=J({...Me,props:Ee,emits:Ce,setup(s,{expose:k,emit:d}){const a=s,{t:z}=fe(),c=Ve("input-number"),v=ue(),u=ie({currentValue:a.modelValue,userInput:null}),{formItem:b}=be(),K=h(()=>m(a.modelValue)&&y(a.modelValue,-1)<a.min),O=h(()=>m(a.modelValue)&&y(a.modelValue)>a.max),ee=h(()=>{const e=$(a.step);return E(a.precision)?Math.max($(a.modelValue),e):(e>a.precision,a.precision)}),P=h(()=>a.controls&&a.controlsPosition==="right"),U=ve(),N=Ne(),x=h(()=>{if(u.userInput!==null)return u.userInput;let e=u.currentValue;if(V(e))return"";if(m(e)){if(Number.isNaN(e))return"";E(a.precision)||(e=e.toFixed(a.precision))}return e}),A=(e,t)=>{if(E(t)&&(t=ee.value),t===0)return Math.round(e);let r=String(e);const l=r.indexOf(".");if(l===-1||!r.replace(".","").split("")[l+t])return e;const w=r.length;return r.charAt(w-1)==="5"&&(r=`${r.slice(0,Math.max(0,w-1))}6`),Number.parseFloat(Number(r).toFixed(t))},$=e=>{if(V(e))return 0;const t=e.toString(),r=t.indexOf(".");let l=0;return r!==-1&&(l=t.length-r-1),l},y=(e,t=1)=>m(e)?A(e+a.step*t):u.currentValue,L=()=>{if(a.readonly||N.value||O.value)return;const e=Number(x.value)||0,t=y(e);F(t),d(C,u.currentValue)},B=()=>{if(a.readonly||N.value||K.value)return;const e=Number(x.value)||0,t=y(e,-1);F(t),d(C,u.currentValue)},G=(e,t)=>{const{max:r,min:l,step:i,precision:p,stepStrictly:w,valueOnClear:_}=a;let o=Number(e);if(V(e)||Number.isNaN(o))return null;if(e===""){if(_===null)return null;o=me(_)?{min:l,max:r}[_]:_}return w&&(o=A(Math.round(o/i)*i,p)),E(p)||(o=A(o,p)),(o>r||o<l)&&(o=o>r?r:l,t&&d(S,o)),o},F=e=>{var t;const r=u.currentValue,l=G(e);r!==l&&(u.userInput=null,d(S,l),d(X,l,r),a.validateEvent&&((t=b==null?void 0:b.validate)==null||t.call(b,"change").catch(i=>W())),u.currentValue=l)},te=e=>{u.userInput=e,d(C,e===""?null:Number(e))},ne=e=>{const t=e!==""?Number(e):"";(m(t)&&!Number.isNaN(t)||e==="")&&F(t),u.userInput=null},ae=()=>{var e,t;(t=(e=v.value)==null?void 0:e.focus)==null||t.call(e)},re=()=>{var e,t;(t=(e=v.value)==null?void 0:e.blur)==null||t.call(e)},se=e=>{d("focus",e)},le=e=>{var t;d("blur",e),a.validateEvent&&((t=b==null?void 0:b.validate)==null||t.call(b,"blur").catch(r=>W()))};return oe(()=>a.modelValue,e=>{u.currentValue=G(e,!0),u.userInput=null},{immediate:!0}),ce(()=>{var e;const{min:t,max:r,modelValue:l}=a,i=(e=v.value)==null?void 0:e.input;if(i.setAttribute("role","spinbutton"),Number.isFinite(r)?i.setAttribute("aria-valuemax",String(r)):i.removeAttribute("aria-valuemax"),Number.isFinite(t)?i.setAttribute("aria-valuemin",String(t)):i.removeAttribute("aria-valuemin"),i.setAttribute("aria-valuenow",String(u.currentValue)),i.setAttribute("aria-disabled",String(N.value)),!m(l)&&l!=null){let p=Number(l);Number.isNaN(p)&&(p=null),d(S,p)}}),de(()=>{var e;const t=(e=v.value)==null?void 0:e.input;t==null||t.setAttribute("aria-valuenow",`${u.currentValue}`)}),k({focus:ae,blur:re}),(e,t)=>(f(),g("div",{class:M([n(c).b(),n(c).m(n(U)),n(c).m(e.effect),n(c).is("disabled",n(N)),n(c).is("without-controls",!e.controls),n(c).is("controls-right",n(P))]),onDragstart:t[0]||(t[0]=T(()=>{},["prevent"]))},[e.controls?Z((f(),g("span",{key:0,role:"button","aria-label":n(z)("el.inputNumber.decrease"),class:M([n(c).e("decrease"),n(c).is("disabled",n(K))]),onKeydown:I(B,["enter"])},[D(n(H),null,{default:R(()=>[n(P)?(f(),g("svg",ke,xe)):(f(),Y(n(ye),{key:1}))]),_:1})],42,Se)),[[n(q),B]]):j("v-if",!0),e.controls?Z((f(),g("span",{key:1,role:"button","aria-label":n(z)("el.inputNumber.increase"),class:M([n(c).e("increase"),n(c).is("disabled",n(O))]),onKeydown:I(L,["enter"])},[D(n(H),null,{default:R(()=>[n(P)?(f(),g("svg",Le,Fe)):(f(),Y(n(we),{key:1}))]),_:1})],42,Ae)),[[n(q),L]]):j("v-if",!0),D(n(he),{id:e.id,ref_key:"input",ref:v,type:"number",step:e.step,"model-value":n(x),placeholder:e.placeholder,readonly:e.readonly,disabled:n(N),size:n(U),max:e.max,effect:e.effect,min:e.min,name:e.name,label:e.label,"validate-event":!1,onKeydown:[I(T(L,["prevent"]),["up"]),I(T(B,["prevent"]),["down"])],onBlur:le,onFocus:se,onInput:te,onChange:ne},null,8,["id","step","model-value","placeholder","readonly","disabled","size","max","effect","min","name","label","onKeydown"])],34))}});var Te=_e(De,[["__file","/Users/st/Desktop/vue/nxx-ui/packages/components/input-number/src/input-number.vue"]]);const Ge=Ie(Te);export{Ge as E};
