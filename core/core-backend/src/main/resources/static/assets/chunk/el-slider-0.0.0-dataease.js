import{E as Le}from"./el-input-number-0.0.0-dataease.js";import{c as Ee,E as Pe}from"./index-0.0.0-dataease4.js";import{l as fe,x as le,A as me,K as Me,t as ze,a6 as ye,i as ve,h as xe,w as pe}from"./index-0.0.0-dataease.js";import{$ as Ve,a0 as te,ad as ge,aa as Be,a2 as Ie,E as Ke,z as Re,a3 as Xe,Z as Ye}from"./index-0.0.0-dataease2.js";import{I as Ae,r as J,o as Fe,n as se,m as v,s as $e,R as We,w as re,d as ae,_ as Ce,t as ce,f as L,M as $,k as Ne,i as he,N as q,a7 as Ue,j as t,V as W,W as G,K as we,h as Oe,S as je,g as ie,a0 as ne,Z as oe,aa as ue}from"./vue-0.0.0-dataease.js";import{e as Se}from"./lodash-0.0.0-dataease.js";const Te=Symbol("sliderContextKey"),He=fe({modelValue:{type:le([Number,Array]),default:0},id:{type:String,default:void 0},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1},showInput:Boolean,showInputControls:{type:Boolean,default:!0},size:Ve,inputSize:Ve,showStops:Boolean,showTooltip:{type:Boolean,default:!0},tooltipTheme:{type:String,default:"dark"},formatTooltip:{type:le(Function),default:void 0},disabled:Boolean,range:Boolean,vertical:Boolean,height:String,debounce:{type:Number,default:300},label:{type:String,default:void 0},rangeStartLabel:{type:String,default:void 0},rangeEndLabel:{type:String,default:void 0},formatValueText:{type:le(Function),default:void 0},tooltipClass:{type:String,default:void 0},placement:{type:String,values:Ee,default:"top"},marks:{type:le(Object)},validateEvent:{type:Boolean,default:!0}}),de=e=>me(e)||Ae(e)&&e.every(me),Ze={[te]:de,[ge]:de,[Be]:de},_e=(e,l,u)=>{const a=J();return Fe(async()=>{e.range?(Array.isArray(e.modelValue)?(l.firstValue=Math.max(e.min,e.modelValue[0]),l.secondValue=Math.min(e.max,e.modelValue[1])):(l.firstValue=e.min,l.secondValue=e.max),l.oldValue=[l.firstValue,l.secondValue]):(typeof e.modelValue!="number"||Number.isNaN(e.modelValue)?l.firstValue=e.min:l.firstValue=Math.min(e.max,Math.max(e.min,e.modelValue)),l.oldValue=l.firstValue),Me(window,"resize",u),await se(),u()}),{sliderWrapper:a}},Ge=e=>v(()=>e.marks?Object.keys(e.marks).map(Number.parseFloat).sort((u,a)=>u-a).filter(u=>u<=e.max&&u>=e.min).map(u=>({point:u,position:(u-e.min)*100/(e.max-e.min),mark:e.marks[u]})):[]),qe=(e,l,u)=>{const{form:a,formItem:s}=Ie(),c=$e(),i=J(),y=J(),V={firstButton:i,secondButton:y},d=v(()=>e.disabled||(a==null?void 0:a.disabled)||!1),f=v(()=>Math.min(l.firstValue,l.secondValue)),r=v(()=>Math.max(l.firstValue,l.secondValue)),S=v(()=>e.range?`${100*(r.value-f.value)/(e.max-e.min)}%`:`${100*(l.firstValue-e.min)/(e.max-e.min)}%`),Y=v(()=>e.range?`${100*(f.value-e.min)/(e.max-e.min)}%`:"0%"),M=v(()=>e.vertical?{height:e.height}:{}),P=v(()=>e.vertical?{height:S.value,bottom:Y.value}:{width:S.value,left:Y.value}),x=()=>{c.value&&(l.sliderSize=c.value[`client${e.vertical?"Height":"Width"}`])},z=m=>{const h=e.min+m*(e.max-e.min)/100;if(!e.range)return i;let k;return Math.abs(f.value-h)<Math.abs(r.value-h)?k=l.firstValue<l.secondValue?"firstButton":"secondButton":k=l.firstValue>l.secondValue?"firstButton":"secondButton",V[k]},B=m=>{const h=z(m);return h.value.setPosition(m),h},p=m=>{l.firstValue=m,N(e.range?[f.value,r.value]:m)},C=m=>{l.secondValue=m,e.range&&N([f.value,r.value])},N=m=>{u(te,m),u(ge,m)},g=async()=>{await se(),u(Be,e.range?[f.value,r.value]:e.modelValue)},b=m=>{var h,k,j,H,Z,_;if(d.value||l.dragging)return;x();let K=0;if(e.vertical){const A=(j=(k=(h=m.touches)==null?void 0:h.item(0))==null?void 0:k.clientY)!=null?j:m.clientY;K=(c.value.getBoundingClientRect().bottom-A)/l.sliderSize*100}else{const A=(_=(Z=(H=m.touches)==null?void 0:H.item(0))==null?void 0:Z.clientX)!=null?_:m.clientX,F=c.value.getBoundingClientRect().left;K=(A-F)/l.sliderSize*100}if(!(K<0||K>100))return B(K)};return{elFormItem:s,slider:c,firstButton:i,secondButton:y,sliderDisabled:d,minValue:f,maxValue:r,runwayStyle:M,barStyle:P,resetSize:x,setPosition:B,emitChange:g,onSliderWrapperPrevent:m=>{var h,k;((h=V.firstButton.value)!=null&&h.dragging||(k=V.secondButton.value)!=null&&k.dragging)&&m.preventDefault()},onSliderClick:m=>{b(m)&&g()},onSliderDown:async m=>{const h=b(m);h&&(await se(),h.value.onButtonDown(m))},setFirstValue:p,setSecondValue:C}},{left:Je,down:Qe,right:De,up:el,home:ll,end:tl,pageUp:al,pageDown:nl}=Ke,ol=(e,l,u)=>{const a=J(),s=J(!1),c=v(()=>l.value instanceof Function),i=v(()=>c.value&&l.value(e.modelValue)||e.modelValue),y=Se(()=>{u.value&&(s.value=!0)},50),V=Se(()=>{u.value&&(s.value=!1)},50);return{tooltip:a,tooltipVisible:s,formatValue:i,displayTooltip:y,hideTooltip:V}},rl=(e,l,u)=>{const{disabled:a,min:s,max:c,step:i,showTooltip:y,tooltipTheme:V,precision:d,sliderSize:f,formatTooltip:r,emitChange:S,resetSize:Y,updateDragging:M}=We(Te),{tooltip:P,tooltipVisible:x,formatValue:z,displayTooltip:B,hideTooltip:p}=ol(e,r,y),C=J(),N=v(()=>`${(e.modelValue-s.value)/(c.value-s.value)*100}%`),g=v(()=>e.vertical?{bottom:N.value}:{left:N.value}),b=()=>{l.hovering=!0,B()},O=()=>{l.hovering=!1,l.dragging||p()},Q=o=>{a.value||(o.preventDefault(),A(o),window.addEventListener("mousemove",F),window.addEventListener("touchmove",F),window.addEventListener("mouseup",U),window.addEventListener("touchend",U),window.addEventListener("contextmenu",U),C.value.focus())},I=o=>{a.value||(l.newPosition=Number.parseFloat(N.value)+o/(c.value-s.value)*100,T(l.newPosition),S())},m=()=>{I(-i.value)},h=()=>{I(i.value)},k=()=>{I(-i.value*4)},j=()=>{I(i.value*4)},H=()=>{a.value||(T(0),S())},Z=()=>{a.value||(T(100),S())},_=o=>{let w=!0;[Je,Qe].includes(o.key)?m():[De,el].includes(o.key)?h():o.key===ll?H():o.key===tl?Z():o.key===nl?k():o.key===al?j():w=!1,w&&o.preventDefault()},K=o=>{let w,R;return o.type.startsWith("touch")?(R=o.touches[0].clientY,w=o.touches[0].clientX):(R=o.clientY,w=o.clientX),{clientX:w,clientY:R}},A=o=>{l.dragging=!0,l.isClick=!0;const{clientX:w,clientY:R}=K(o);e.vertical?l.startY=R:l.startX=w,l.startPosition=Number.parseFloat(N.value),l.newPosition=l.startPosition},F=o=>{if(l.dragging){l.isClick=!1,B(),Y();let w;const{clientX:R,clientY:n}=K(o);e.vertical?(l.currentY=n,w=(l.startY-l.currentY)/f.value*100):(l.currentX=R,w=(l.currentX-l.startX)/f.value*100),l.newPosition=l.startPosition+w,T(l.newPosition)}},U=()=>{l.dragging&&(setTimeout(()=>{l.dragging=!1,l.hovering||p(),l.isClick||T(l.newPosition),S()},0),window.removeEventListener("mousemove",F),window.removeEventListener("touchmove",F),window.removeEventListener("mouseup",U),window.removeEventListener("touchend",U),window.removeEventListener("contextmenu",U))},T=async o=>{if(o===null||Number.isNaN(+o))return;o<0?o=0:o>100&&(o=100);const w=100/((c.value-s.value)/i.value);let n=Math.round(o/w)*w*(c.value-s.value)*.01+s.value;n=Number.parseFloat(n.toFixed(d.value)),n!==e.modelValue&&u(te,n),!l.dragging&&e.modelValue!==l.oldValue&&(l.oldValue=e.modelValue),await se(),l.dragging&&B(),P.value.updatePopper()};return re(()=>l.dragging,o=>{M(o)}),{disabled:a,button:C,tooltip:P,tooltipVisible:x,showTooltip:y,wrapperStyle:g,formatValue:z,handleMouseEnter:b,handleMouseLeave:O,onButtonDown:Q,onKeyDown:_,tooltipTheme:V,setPosition:T}},sl=(e,l,u,a)=>({stops:v(()=>{if(!e.showStops||e.min>e.max)return[];if(e.step===0)return[];const i=(e.max-e.min)/e.step,y=100*e.step/(e.max-e.min),V=Array.from({length:i-1}).map((d,f)=>(f+1)*y);return e.range?V.filter(d=>d<100*(u.value-e.min)/(e.max-e.min)||d>100*(a.value-e.min)/(e.max-e.min)):V.filter(d=>d>100*(l.firstValue-e.min)/(e.max-e.min))}),getStopStyle:i=>e.vertical?{bottom:`${i}%`}:{left:`${i}%`}}),il=(e,l,u,a,s,c)=>{const i=d=>{s(te,d),s(ge,d)},y=()=>e.range?![u.value,a.value].every((d,f)=>d===l.oldValue[f]):e.modelValue!==l.oldValue,V=()=>{var d,f;if(e.min>e.max){ze("Slider","min should not be greater than max.");return}const r=e.modelValue;e.range&&Array.isArray(r)?r[1]<e.min?i([e.min,e.min]):r[0]>e.max?i([e.max,e.max]):r[0]<e.min?i([e.min,r[1]]):r[1]>e.max?i([r[0],e.max]):(l.firstValue=r[0],l.secondValue=r[1],y()&&(e.validateEvent&&((d=c==null?void 0:c.validate)==null||d.call(c,"change").catch(S=>ye())),l.oldValue=r.slice())):!e.range&&typeof r=="number"&&!Number.isNaN(r)&&(r<e.min?i(e.min):r>e.max?i(e.max):(l.firstValue=r,y()&&(e.validateEvent&&((f=c==null?void 0:c.validate)==null||f.call(c,"change").catch(S=>ye())),l.oldValue=r)))};V(),re(()=>l.dragging,d=>{d||V()}),re(()=>e.modelValue,(d,f)=>{l.dragging||Array.isArray(d)&&Array.isArray(f)&&d.every((r,S)=>r===f[S])&&l.firstValue===d[0]&&l.secondValue===d[1]||V()},{deep:!0}),re(()=>[e.min,e.max],()=>{V()})},ul=fe({modelValue:{type:Number,default:0},vertical:Boolean,tooltipClass:String,placement:{type:String,values:Ee,default:"top"}}),dl={[te]:e=>me(e)},ml=["tabindex"],cl=ae({name:"ElSliderButton"}),fl=ae({...cl,props:ul,emits:dl,setup(e,{expose:l,emit:u}){const a=e,s=ve("slider"),c=Ce({hovering:!1,dragging:!1,isClick:!1,startX:0,currentX:0,startY:0,currentY:0,startPosition:0,newPosition:0,oldValue:a.modelValue}),{disabled:i,button:y,tooltip:V,showTooltip:d,tooltipTheme:f,tooltipVisible:r,wrapperStyle:S,formatValue:Y,handleMouseEnter:M,handleMouseLeave:P,onButtonDown:x,onKeyDown:z,setPosition:B}=rl(a,c,u),{hovering:p,dragging:C}=ce(c);return l({onButtonDown:x,onKeyDown:z,setPosition:B,hovering:p,dragging:C}),(N,g)=>(L(),$("div",{ref_key:"button",ref:y,class:W([t(s).e("button-wrapper"),{hover:t(p),dragging:t(C)}]),style:G(t(S)),tabindex:t(i)?-1:0,onMouseenter:g[0]||(g[0]=(...b)=>t(M)&&t(M)(...b)),onMouseleave:g[1]||(g[1]=(...b)=>t(P)&&t(P)(...b)),onMousedown:g[2]||(g[2]=(...b)=>t(x)&&t(x)(...b)),onTouchstart:g[3]||(g[3]=(...b)=>t(x)&&t(x)(...b)),onFocus:g[4]||(g[4]=(...b)=>t(M)&&t(M)(...b)),onBlur:g[5]||(g[5]=(...b)=>t(P)&&t(P)(...b)),onKeydown:g[6]||(g[6]=(...b)=>t(z)&&t(z)(...b))},[Ne(t(Pe),{ref_key:"tooltip",ref:V,visible:t(r),placement:N.placement,"fallback-placements":["top","bottom","right","left"],"stop-popper-mouse-event":!1,"popper-class":N.tooltipClass,effect:t(f),disabled:!t(d),persistent:""},{content:he(()=>[q("span",null,Ue(t(Y)),1)]),default:he(()=>[q("div",{class:W([t(s).e("button"),{hover:t(p),dragging:t(C)}])},null,2)]),_:1},8,["visible","placement","popper-class","effect","disabled"])],46,ml))}});var ke=xe(fl,[["__file","/Users/st/Desktop/vue/nxx-ui/packages/components/slider/src/button.vue"]]);const vl=fe({mark:{type:le([String,Object]),default:void 0}});var gl=ae({name:"ElSliderMarker",props:vl,setup(e){const l=ve("slider"),u=v(()=>we(e.mark)?e.mark:e.mark.label),a=v(()=>we(e.mark)?void 0:e.mark.style);return()=>Oe("div",{class:l.e("marks-text"),style:a.value},u.value)}});const bl=["id","role","aria-label","aria-labelledby"],yl={key:1},Vl=ae({name:"ElSlider"}),hl=ae({...Vl,props:He,emits:Ze,setup(e,{expose:l,emit:u}){const a=e,s=ve("slider"),{t:c}=Re(),i=Ce({firstValue:0,secondValue:0,oldValue:0,dragging:!1,sliderSize:1}),{elFormItem:y,slider:V,firstButton:d,secondButton:f,sliderDisabled:r,minValue:S,maxValue:Y,runwayStyle:M,barStyle:P,resetSize:x,emitChange:z,onSliderWrapperPrevent:B,onSliderClick:p,onSliderDown:C,setFirstValue:N,setSecondValue:g}=qe(a,i,u),{stops:b,getStopStyle:O}=sl(a,i,S,Y),{inputId:Q,isLabeledByFormItem:I}=Xe(a,{formItemContext:y}),m=Ye(),h=v(()=>a.inputSize||m.value),k=v(()=>a.label||c("el.slider.defaultLabel",{min:a.min,max:a.max})),j=v(()=>a.range?a.rangeStartLabel||c("el.slider.defaultRangeStartLabel"):k.value),H=v(()=>a.formatValueText?a.formatValueText(T.value):`${T.value}`),Z=v(()=>a.rangeEndLabel||c("el.slider.defaultRangeEndLabel")),_=v(()=>a.formatValueText?a.formatValueText(o.value):`${o.value}`),K=v(()=>[s.b(),s.m(m.value),s.is("vertical",a.vertical),{[s.m("with-input")]:a.showInput}]),A=Ge(a);il(a,i,S,Y,u,y);const F=v(()=>{const n=[a.min,a.max,a.step].map(X=>{const D=`${X}`.split(".")[1];return D?D.length:0});return Math.max.apply(null,n)}),{sliderWrapper:U}=_e(a,i,x),{firstValue:T,secondValue:o,sliderSize:w}=ce(i),R=n=>{i.dragging=n};return je(Te,{...ce(a),sliderSize:w,disabled:r,precision:F,emitChange:z,resetSize:x,updateDragging:R}),l({onSliderClick:p}),(n,X)=>{var D,be;return L(),$("div",{id:n.range?t(Q):void 0,ref_key:"sliderWrapper",ref:U,class:W(t(K)),role:n.range?"group":void 0,"aria-label":n.range&&!t(I)?t(k):void 0,"aria-labelledby":n.range&&t(I)?(D=t(y))==null?void 0:D.labelId:void 0,onTouchstart:X[2]||(X[2]=(...E)=>t(B)&&t(B)(...E)),onTouchmove:X[3]||(X[3]=(...E)=>t(B)&&t(B)(...E))},[q("div",{ref_key:"slider",ref:V,class:W([t(s).e("runway"),{"show-input":n.showInput&&!n.range},t(s).is("disabled",t(r))]),style:G(t(M)),onMousedown:X[0]||(X[0]=(...E)=>t(C)&&t(C)(...E)),onTouchstart:X[1]||(X[1]=(...E)=>t(C)&&t(C)(...E))},[q("div",{class:W(t(s).e("bar")),style:G(t(P))},null,6),Ne(ke,{id:n.range?void 0:t(Q),ref_key:"firstButton",ref:d,"model-value":t(T),vertical:n.vertical,"tooltip-class":n.tooltipClass,placement:n.placement,role:"slider","aria-label":n.range||!t(I)?t(j):void 0,"aria-labelledby":!n.range&&t(I)?(be=t(y))==null?void 0:be.labelId:void 0,"aria-valuemin":n.min,"aria-valuemax":n.range?t(o):n.max,"aria-valuenow":t(T),"aria-valuetext":t(H),"aria-orientation":n.vertical?"vertical":"horizontal","aria-disabled":t(r),"onUpdate:modelValue":t(N)},null,8,["id","model-value","vertical","tooltip-class","placement","aria-label","aria-labelledby","aria-valuemin","aria-valuemax","aria-valuenow","aria-valuetext","aria-orientation","aria-disabled","onUpdate:modelValue"]),n.range?(L(),ie(ke,{key:0,ref_key:"secondButton",ref:f,"model-value":t(o),vertical:n.vertical,"tooltip-class":n.tooltipClass,placement:n.placement,role:"slider","aria-label":t(Z),"aria-valuemin":t(T),"aria-valuemax":n.max,"aria-valuenow":t(o),"aria-valuetext":t(_),"aria-orientation":n.vertical?"vertical":"horizontal","aria-disabled":t(r),"onUpdate:modelValue":t(g)},null,8,["model-value","vertical","tooltip-class","placement","aria-label","aria-valuemin","aria-valuemax","aria-valuenow","aria-valuetext","aria-orientation","aria-disabled","onUpdate:modelValue"])):ne("v-if",!0),n.showStops?(L(),$("div",yl,[(L(!0),$(oe,null,ue(t(b),(E,ee)=>(L(),$("div",{key:ee,class:W(t(s).e("stop")),style:G(t(O)(E))},null,6))),128))])):ne("v-if",!0),t(A).length>0?(L(),$(oe,{key:2},[q("div",null,[(L(!0),$(oe,null,ue(t(A),(E,ee)=>(L(),$("div",{key:ee,style:G(t(O)(E.position)),class:W([t(s).e("stop"),t(s).e("marks-stop")])},null,6))),128))]),q("div",{class:W(t(s).e("marks"))},[(L(!0),$(oe,null,ue(t(A),(E,ee)=>(L(),ie(t(gl),{key:ee,mark:E.mark,style:G(t(O)(E.position))},null,8,["mark","style"]))),128))],2)],64)):ne("v-if",!0)],38),n.showInput&&!n.range?(L(),ie(t(Le),{key:0,ref:"input","model-value":t(T),class:W(t(s).e("input")),step:n.step,disabled:t(r),controls:n.showInputControls,min:n.min,max:n.max,debounce:n.debounce,size:t(h),"onUpdate:modelValue":t(N),onChange:t(z)},null,8,["model-value","class","step","disabled","controls","min","max","debounce","size","onUpdate:modelValue","onChange"])):ne("v-if",!0)],42,bl)}}});var wl=xe(hl,[["__file","/Users/st/Desktop/vue/nxx-ui/packages/components/slider/src/slider.vue"]]);const Nl=pe(wl);export{Nl as E};
