import{d as _}from"./dayjs.min-0.0.0-dataease.js";import{t as be,u as ge,b as ke,T as J,a as he,c as Se,d as Pe,e as Te,D as _e,C as De}from"./el-date-picker-0.0.0-dataease.js";import{l as Ve,x as Ce,h as Re,i as Q}from"./index-0.0.0-dataease.js";import{z as xe,E as we}from"./index-0.0.0-dataease2.js";import{d as W,R as Ae,m as T,r as X,f as Ee,M as Oe,N as d,V as u,j as a,a7 as C,k as x,a0 as Me,I as B,S as ye,a5 as Ie}from"./vue-0.0.0-dataease.js";import{y as H}from"./lodash-0.0.0-dataease.js";const Be=Ve({...be,parsedValue:{type:Ce(Array)}}),He=["disabled"],Ne=W({__name:"panel-time-range",props:Be,emits:["pick","select-range","set-picker-option"],setup(f,{emit:l}){const o=f,v=(e,n)=>{const s=[];for(let r=e;r<=n;r++)s.push(r);return s},{t:S,lang:b}=xe(),t=Q("time"),m=Q("picker"),w=Ae("EP_PICKER_BASE"),{arrowControl:D,disabledHours:N,disabledMinutes:U,disabledSeconds:F,defaultValue:A}=w.props,g=T(()=>o.parsedValue[0]),k=T(()=>o.parsedValue[1]),Y=ge(o),Z=()=>{l("pick",Y.value,!1)},h=T(()=>o.format.includes("ss")),j=T(()=>o.format.includes("A")?"A":o.format.includes("a")?"a":""),ee=(e=!1)=>{l("pick",[g.value,k.value],e)},ne=e=>{K(e.millisecond(0),k.value)},ae=e=>{K(g.value,e.millisecond(0))},te=e=>{const n=e.map(r=>_(r).locale(b.value)),s=z(n);return n[0].isSame(s[0])&&n[1].isSame(s[1])},K=(e,n)=>{l("pick",[e,n],!0)},se=T(()=>g.value>k.value),V=X([0,2]),oe=(e,n)=>{l("select-range",e,n,"min"),V.value=[e,n]},$=T(()=>h.value?11:8),re=(e,n)=>{l("select-range",e,n,"max");const s=a($);V.value=[e+s,n+s]},le=e=>{const n=h.value?[0,3,6,11,14,17]:[0,3,8,11],s=["hours","minutes"].concat(h.value?["seconds"]:[]),i=(n.indexOf(V.value[0])+e+n.length)%n.length,c=n.length/2;i<c?y.start_emitSelectRange(s[i]):y.end_emitSelectRange(s[i-c])},ie=e=>{const n=e.code,{left:s,right:r,up:i,down:c}=we;if([s,r].includes(n)){le(n===s?-1:1),e.preventDefault();return}if([i,c].includes(n)){const p=n===i?-1:1,P=V.value[0]<$.value?"start":"end";y[`${P}_scrollDown`](p),e.preventDefault();return}},E=(e,n)=>{const s=N?N(e):[],r=e==="start",c=(n||(r?k.value:g.value)).hour(),p=r?v(c+1,23):v(0,c-1);return H(s,p)},O=(e,n,s)=>{const r=U?U(e,n):[],i=n==="start",c=s||(i?k.value:g.value),p=c.hour();if(e!==p)return r;const P=c.minute(),I=i?v(P+1,59):v(0,P-1);return H(r,I)},M=(e,n,s,r)=>{const i=F?F(e,n,s):[],c=s==="start",p=r||(c?k.value:g.value),P=p.hour(),I=p.minute();if(e!==P||n!==I)return i;const q=p.second(),ve=c?v(q+1,59):v(0,q-1);return H(i,ve)},z=([e,n])=>[L(e,"start",!0,n),L(n,"end",!1,e)],{getAvailableHours:ce,getAvailableMinutes:ue,getAvailableSeconds:pe}=ke(E,O,M),{timePickerOptions:y,getAvailableTime:L,onSetOption:G}=he({getAvailableHours:ce,getAvailableMinutes:ue,getAvailableSeconds:pe}),de=e=>e?B(e)?e.map(n=>_(n,o.format).locale(b.value)):_(e,o.format).locale(b.value):null,me=e=>e?B(e)?e.map(n=>n.format(o.format)):e.format(o.format):null,fe=()=>{if(B(A))return A.map(n=>_(n).locale(b.value));const e=_(A).locale(b.value);return[e,e.add(60,"m")]};return l("set-picker-option",["formatToString",me]),l("set-picker-option",["parseUserInput",de]),l("set-picker-option",["isValidValue",te]),l("set-picker-option",["handleKeydownInput",ie]),l("set-picker-option",["getDefaultValue",fe]),l("set-picker-option",["getRangeAvailableTime",z]),(e,n)=>e.actualVisible?(Ee(),Oe("div",{key:0,class:u([a(t).b("range-picker"),a(m).b("panel")])},[d("div",{class:u(a(t).be("range-picker","content"))},[d("div",{class:u(a(t).be("range-picker","cell"))},[d("div",{class:u(a(t).be("range-picker","header"))},C(a(S)("el.datepicker.startTime")),3),d("div",{class:u([a(t).be("range-picker","body"),a(t).be("panel","content"),a(t).is("arrow",a(D)),{"has-seconds":a(h)}])},[x(J,{ref:"minSpinner",role:"start","show-seconds":a(h),"am-pm-mode":a(j),"arrow-control":a(D),"spinner-date":a(g),"disabled-hours":E,"disabled-minutes":O,"disabled-seconds":M,onChange:ne,onSetOption:a(G),onSelectRange:oe},null,8,["show-seconds","am-pm-mode","arrow-control","spinner-date","onSetOption"])],2)],2),d("div",{class:u(a(t).be("range-picker","cell"))},[d("div",{class:u(a(t).be("range-picker","header"))},C(a(S)("el.datepicker.endTime")),3),d("div",{class:u([a(t).be("range-picker","body"),a(t).be("panel","content"),a(t).is("arrow",a(D)),{"has-seconds":a(h)}])},[x(J,{ref:"maxSpinner",role:"end","show-seconds":a(h),"am-pm-mode":a(j),"arrow-control":a(D),"spinner-date":a(k),"disabled-hours":E,"disabled-minutes":O,"disabled-seconds":M,onChange:ae,onSetOption:a(G),onSelectRange:re},null,8,["show-seconds","am-pm-mode","arrow-control","spinner-date","onSetOption"])],2)],2)],2),d("div",{class:u(a(t).be("panel","footer"))},[d("button",{type:"button",class:u([a(t).be("panel","btn"),"cancel"]),onClick:n[0]||(n[0]=s=>Z())},C(a(S)("el.datepicker.cancel")),3),d("button",{type:"button",class:u([a(t).be("panel","btn"),"confirm"]),disabled:a(se),onClick:n[1]||(n[1]=s=>ee())},C(a(S)("el.datepicker.confirm")),11,He)],2)],2)):Me("v-if",!0)}});var Ue=Re(Ne,[["__file","/Users/st/Desktop/vue/nxx-ui/packages/components/time-picker/src/time-picker-com/panel-time-range.vue"]]);_.extend(Se);var Fe=W({name:"ElTimePicker",install:null,props:{...Pe,isRange:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(f,l){const o=X(),[v,S]=f.isRange?["timerange",Ue]:["time",Te],b=t=>l.emit("update:modelValue",t);return ye("ElPopperOptions",f.popperOptions),l.expose({focus:t=>{var m;(m=o.value)==null||m.handleFocusInput(t)},blur:t=>{var m;(m=o.value)==null||m.handleBlurInput(t)},handleOpen:()=>{var t;(t=o.value)==null||t.handleOpen()},handleClose:()=>{var t;(t=o.value)==null||t.handleClose()}}),()=>{var t;const m=(t=f.format)!=null?t:_e;return x(De,Ie(f,{ref:o,type:v,format:m,"onUpdate:modelValue":b}),{default:w=>x(S,w,null)})}}});const R=Fe;R.install=f=>{f.component(R.name,R)};const qe=R;export{qe as E};
