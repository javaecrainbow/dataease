import{a as O,E as A}from"./el-select-0.0.0-dataease.js";import{_ as S}from"./el-tree-0.0.0-dataease.js";import{i as B,a7 as F,h as p}from"./index-0.0.0-dataease.js";import{p as K,k as D}from"./lodash-0.0.0-dataease.js";import{t as L,m as _,n as w,d as P,D as H,w as I,at as U,R,r as M,_ as E,o as $,h as m}from"./vue-0.0.0-dataease.js";import{ae as N,a0 as x,z as q}from"./index-0.0.0-dataease2.js";const z=(e,{attrs:s},{tree:a,key:d})=>{const h=B("tree-select"),r={...K(L(e),Object.keys(O.props)),...s,valueKey:d,popperClass:_(()=>{const c=[h.e("popper")];return e.popperClass&&c.push(e.popperClass),c.join(" ")}),filterMethod:(c="")=>{e.filterMethod&&e.filterMethod(c),w(()=>{var f;(f=a.value)==null||f.filter(c)})},onVisibleChange:c=>{var f;(f=s.onVisibleChange)==null||f.call(s,c),e.filterable&&c&&r.filterMethod()}};return r},G=P({extends:A,setup(e,s){const a=A.setup(e,s);delete a.selectOptionClick;const d=H().proxy;return w(()=>{a.select.cachedOptions.get(d.value)||a.select.onOptionCreate(d)}),a},methods:{selectOptionClick(){this.$el.parentElement.click()}}});function T(e){return e||e===0}function j(e){return Array.isArray(e)&&e.length}function V(e){return Array.isArray(e)?e:T(e)?[e]:[]}function b(e,s,a,d,h){for(let r=0;r<e.length;r++){const c=e[r];if(s(c,r,e,h))return d?d(c,r,e,h):c;{const f=a(c);if(j(f)){const l=b(f,s,a,d,c);if(l)return l}}}}const J=(e,{attrs:s,slots:a,emit:d},{select:h,tree:r,key:c})=>{I(()=>e.modelValue,()=>{e.showCheckbox&&w(()=>{const t=r.value;t&&!D(t.getCheckedKeys(),V(e.modelValue))&&t.setCheckedKeys(V(e.modelValue))})},{immediate:!0,deep:!0});const f=_(()=>({value:c.value,...e.props})),l=(t,n)=>{var o;const i=f.value[t];return U(i)?i(n,(o=r.value)==null?void 0:o.getNode(l("value",n))):n[i]},C=V(e.modelValue).map(t=>b(e.data||[],n=>l("value",n)===t,n=>l("children",n),(n,o,i,v)=>v&&l("value",v))).filter(t=>T(t));return{...K(L(e),Object.keys(S.props)),...s,nodeKey:c,expandOnClickNode:_(()=>!e.checkStrictly&&e.expandOnClickNode),defaultExpandedKeys:_(()=>e.defaultExpandedKeys?e.defaultExpandedKeys.concat(C):C),renderContent:(t,{node:n,data:o,store:i})=>t(G,{value:l("value",o),label:l("label",o),disabled:l("disabled",o)},e.renderContent?()=>e.renderContent(t,{node:n,data:o,store:i}):a.default?()=>a.default({node:n,data:o,store:i}):void 0),filterNodeMethod:(t,n,o)=>{var i;return e.filterNodeMethod?e.filterNodeMethod(t,n,o):t?(i=l("label",n))==null?void 0:i.includes(t):!0},onNodeClick:(t,n,o)=>{var i,v,k;if((i=s.onNodeClick)==null||i.call(s,t,n,o),!(e.showCheckbox&&e.checkOnClickNode))if(!e.showCheckbox&&(e.checkStrictly||n.isLeaf)){if(!l("disabled",t)){const u=(v=h.value)==null?void 0:v.options.get(l("value",t));(k=h.value)==null||k.handleOptionSelect(u,!0)}}else e.expandOnClickNode&&o.proxy.handleExpandIconClick()},onCheck:(t,n)=>{var o;(o=s.onCheck)==null||o.call(s,t,n);const i=l("value",t);if(e.checkStrictly)d(e.showBtn?N:x,e.multiple?n.checkedKeys:n.checkedKeys.includes(i)?i:void 0);else if(e.multiple)d(e.showBtn?N:x,r.value.getCheckedKeys(!0));else{const v=b([t],y=>!j(l("children",y))&&!l("disabled",y),y=>l("children",y)),k=v?l("value",v):void 0,u=T(e.modelValue)&&!!b([t],y=>l("value",y)===e.modelValue,y=>l("children",y));d(e.showBtn?N:x,k===e.modelValue||u?void 0:k)}}}},Q=P({name:"ElTreeSelect",inheritAttrs:!1,props:{...O.props,...S.props,showBtn:{type:Boolean,default:!1}},setup(e,s){const{slots:a,expose:d,emit:h}=s,r=B("select-tree"),{t:c}=q(),f=R("$custom-style-filter",{}),l=M(),C=M(),t=_(()=>e.nodeKey||e.valueKey||"value"),n=z(e,s,{select:l,tree:C,key:t}),o=J(e,s,{select:l,tree:C,key:t}),i=()=>{var u;h("treeSelectClear",(u=C.value)==null?void 0:u.setCheckedKeys([]))},v=()=>{var u;h("treeSelectConfirm",(u=C.value)==null?void 0:u.getCheckedKeys())},k=E({});return d(k),$(()=>{Object.assign(k,{...K(C.value,["filter","updateKeyChildren","getCheckedNodes","setCheckedNodes","getCheckedKeys","setCheckedKeys","setChecked","getHalfCheckedNodes","getHalfCheckedKeys","getCurrentKey","getCurrentNode","setCurrentKey","setCurrentNode","getNode","remove","append","insertBefore","insertAfter"]),...K(l.value,["focus","blur"])})}),()=>m(O,E({...n,ref:u=>l.value=u}),{...a,default:()=>[m(S,E({...o,showBtn:e.showBtn,ref:u=>C.value=u})),e.showBtn?m("div",{class:r.b("btn-group"),style:F(f,["border"])},[m("div",{onClick:i,class:r.b("btn"),style:{color:"#000000",background:"#ffffff"}},c("el.datepicker.clear")),m("div",{onClick:v,class:r.b("btn"),style:{color:"#ffffff",background:"#3370FF"}},c("el.datepicker.confirm"))]):null]})}});var g=p(Q,[["__file","/Users/st/Desktop/vue/nxx-ui/packages/components/tree-select/src/tree-select.vue"]]);g.install=e=>{e.component(g.name,g)};const W=g,ne=W;export{ne as E};
