import{J as X}from"./lodash-0.0.0-dataease.js";import{m as d,D as Q,d as tt,r as F,_ as et,j as b,w as nt,a as rt,h as B,ac as at}from"./vue-0.0.0-dataease.js";import{M as k,a2 as m,l as N,x as g,i as P,aC as ot}from"./index-0.0.0-dataease.js";import{m as st}from"./index-0.0.0-dataease2.js";const lt=t=>k?window.requestAnimationFrame(t):setTimeout(t,16),it=t=>k?window.cancelAnimationFrame(t):clearTimeout(t);var G=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function ct(t,e){return!!(t===e||G(t)&&G(e))}function ut(t,e){if(t.length!==e.length)return!1;for(var r=0;r<t.length;r++)if(!ct(t[r],e[r]))return!1;return!0}function dt(t,e){e===void 0&&(e=ut);var r=null;function i(){for(var a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];if(r&&r.lastThis===this&&e(a,r.lastArgs))return r.lastResult;var c=t.apply(this,a);return r={lastResult:c,lastArgs:a,lastThis:this},c}return i.clear=function(){r=null},i}const At=()=>{const e=Q().proxy.$props;return d(()=>{const r=(i,a,o)=>({});return e.perfMode?X(r):dt(r)})},Mt=50,_t="itemRendered",zt="scroll",mt="forward",ft="backward",Ct="auto",It="smart",xt="start",Ot="center",Dt="end",T="horizontal",q="vertical",vt="ltr",H="rtl",ht="negative",gt="positive-ascending",St="positive-descending",pt={[T]:"left",[q]:"top"},yt=20,w=m({type:g([Number,Function]),required:!0}),A=m({type:Number}),M=m({type:Number,default:2}),bt=m({type:String,values:["ltr","rtl"],default:"ltr"}),_=m({type:Number,default:0}),E=m({type:Number,required:!0}),V=m({type:String,values:["horizontal","vertical"],default:q}),$=N({className:{type:String,default:""},containerElement:{type:g([String,Object]),default:"div"},data:{type:g(Array),default:()=>st([])},direction:bt,height:{type:[String,Number],required:!0},innerElement:{type:[String,Object],default:"div"},style:{type:g([Object,String,Array])},useIsScrolling:{type:Boolean,default:!1},width:{type:[Number,String],required:!1},perfMode:{type:Boolean,default:!0},scrollbarAlwaysOn:{type:Boolean,default:!1}}),Ft=N({cache:M,estimatedItemSize:A,layout:V,initScrollOffset:_,total:E,itemSize:w,...$}),z={type:Number,default:6},j={type:Number,default:0},K={type:Number,default:2},Bt=N({columnCache:M,columnWidth:w,estimatedColumnWidth:A,estimatedRowHeight:A,initScrollLeft:_,initScrollTop:_,itemKey:{type:g(Function),default:({columnIndex:t,rowIndex:e})=>`${e}:${t}`},rowCache:M,rowHeight:w,totalColumn:E,totalRow:E,hScrollbarSize:z,vScrollbarSize:z,scrollbarStartGap:j,scrollbarEndGap:K,...$}),Tt=N({alwaysOn:Boolean,class:String,layout:V,total:E,ratio:{type:Number,required:!0},clientSize:{type:Number,required:!0},scrollFrom:{type:Number,required:!0},scrollbarSize:z,startGap:j,endGap:K,visible:Boolean}),Pt=(t,e)=>t<e?mt:ft,Gt=t=>t===vt||t===H||t===T,kt=t=>t===H;let v=null;function qt(t=!1){if(v===null||t){const e=document.createElement("div"),r=e.style;r.width="50px",r.height="50px",r.overflow="scroll",r.direction="rtl";const i=document.createElement("div"),a=i.style;return a.width="100px",a.height="100px",e.appendChild(i),document.body.appendChild(e),e.scrollLeft>0?v=St:(e.scrollLeft=1,e.scrollLeft===0?v=ht:v=gt),document.body.removeChild(e),v}return v}function Et({move:t,size:e,bar:r},i){const a={},o=`translate${r.axis}(${t}px)`;return a[r.size]=e,a.transform=o,a.msTransform=o,a.webkitTransform=o,i==="horizontal"?a.height="100%":a.width="100%",a}const Ht=tt({name:"ElVirtualScrollBar",props:Tt,emits:["scroll","start-move","stop-move"],setup(t,{emit:e}){const r=d(()=>t.startGap+t.endGap),i=P("virtual-scrollbar"),a=P("scrollbar"),o=F(),c=F();let C=null,R=null;const l=et({isDragging:!1,traveled:0}),s=d(()=>ot[t.layout]),I=d(()=>t.clientSize-b(r)),U=d(()=>({position:"absolute",width:`${T===t.layout?I.value:t.scrollbarSize}px`,height:`${T===t.layout?t.scrollbarSize:I.value}px`,[pt[t.layout]]:"2px",right:"2px",bottom:"2px",borderRadius:"4px"})),L=d(()=>{const n=t.ratio,u=t.clientSize;if(n>=100)return Number.POSITIVE_INFINITY;if(n>=50)return n*u/100;const f=u/3;return Math.floor(Math.min(Math.max(n*u,yt),f))}),W=d(()=>{if(!Number.isFinite(L.value))return{display:"none"};const n=`${L.value}px`;return Et({bar:s.value,size:n,move:l.traveled},t.layout)}),h=d(()=>Math.floor(t.clientSize-L.value-b(r))),Z=()=>{window.addEventListener("mousemove",p),window.addEventListener("mouseup",S);const n=b(c);n&&(R=document.onselectstart,document.onselectstart=()=>!1,n.addEventListener("touchmove",p),n.addEventListener("touchend",S))},x=()=>{window.removeEventListener("mousemove",p),window.removeEventListener("mouseup",S),document.onselectstart=R,R=null;const n=b(c);n&&(n.removeEventListener("touchmove",p),n.removeEventListener("touchend",S))},O=n=>{n.stopImmediatePropagation(),!(n.ctrlKey||[1,2].includes(n.button))&&(l.isDragging=!0,l[s.value.axis]=n.currentTarget[s.value.offset]-(n[s.value.client]-n.currentTarget.getBoundingClientRect()[s.value.direction]),e("start-move"),Z())},S=()=>{l.isDragging=!1,l[s.value.axis]=0,e("stop-move"),x()},p=n=>{const{isDragging:u}=l;if(!u||!c.value||!o.value)return;const f=l[s.value.axis];if(!f)return;it(C);const y=(o.value.getBoundingClientRect()[s.value.direction]-n[s.value.client])*-1,J=c.value[s.value.offset]-f,D=y-J;C=lt(()=>{l.traveled=Math.max(t.startGap,Math.min(D,h.value)),e("scroll",D,h.value)})},Y=n=>{const u=Math.abs(n.target.getBoundingClientRect()[s.value.direction]-n[s.value.client]),f=c.value[s.value.offset]/2,y=u-f;l.traveled=Math.max(0,Math.min(y,h.value)),e("scroll",y,h.value)};return nt(()=>t.scrollFrom,n=>{l.isDragging||(l.traveled=Math.ceil(n*h.value))}),rt(()=>{x()}),()=>B("div",{role:"presentation",ref:o,class:[i.b(),t.class,(t.alwaysOn||l.isDragging)&&"always-on"],style:U.value,onMousedown:at(Y,["stop","prevent"]),onTouchstartPrevent:O},B("div",{ref:c,class:a.e("thumb"),style:W.value,onMousedown:O},[]))}});export{Ct as A,ft as B,Ot as C,Mt as D,Dt as E,mt as F,T as H,_t as I,H as R,zt as S,q as V,qt as a,gt as b,it as c,ht as d,Ht as e,St as f,Pt as g,xt as h,kt as i,It as j,Ft as k,Tt as l,Gt as m,lt as r,At as u,Bt as v};
