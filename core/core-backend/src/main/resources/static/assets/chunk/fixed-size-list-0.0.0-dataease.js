import{c as mt,r as St,H as ht,V as vt,k as gt,I as at,S as ct,u as Ot,m as st,R as tt,a as rt,b as Tt,d as it,e as wt,B as Mt,F as Et,g as et,A as lt,f as Rt,C as ft,E as yt,h as xt,j as It}from"./el-virtual-list-0.0.0-dataease.js";import{i as Lt}from"./browser-0.0.0-dataease.js";import{i as bt,A as K,M as At}from"./index-0.0.0-dataease.js";import{d as _t,r as k,m as w,j as o,o as zt,$ as Nt,q as ut,h as U,K as dt,D as Ct,n as j,O as Ft}from"./vue-0.0.0-dataease.js";const Dt={[ht]:"deltaX",[vt]:"deltaY"},kt=({atEndEdge:r,atStartEdge:d,layout:S},L)=>{let M,h=0;const v=c=>c<0&&d.value||c>0&&r.value;return{hasReachedEdge:v,onWheel:c=>{mt(M);const O=c[Dt[S.value]];v(h)&&v(h+O)||(h+=O,Lt()||c.preventDefault(),M=St(()=>{L(h),h=0}))}}},Wt=({name:r,getOffset:d,getItemSize:S,getItemOffset:L,getEstimatedTotalSize:M,getStartIndexForOffset:h,getStopIndexForStartIndex:v,initCache:g,clearCache:c,validateProps:O})=>_t({name:r??"ElVirtualList",props:gt,emits:[at,ct],setup(e,{emit:m,expose:E}){O(e);const X=Ct(),C=bt("vl"),R=k(g(e,X)),F=Ot(),b=k(),W=k(),$=k(),a=k({isScrolling:!1,scrollDir:"forward",scrollOffset:K(e.initScrollOffset)?e.initScrollOffset:0,updateRequested:!1,isScrollbarDragging:!1,scrollbarAlwaysOn:e.scrollbarAlwaysOn}),H=w(()=>{const{total:t,cache:s}=e,{isScrolling:l,scrollDir:u,scrollOffset:n}=o(a);if(t===0)return[0,0,0,0];const i=h(e,n,o(R)),f=v(e,i,n,o(R)),z=!l||u===Mt?Math.max(1,s):1,N=!l||u===Et?Math.max(1,s):1;return[Math.max(0,i-z),Math.max(0,Math.min(t-1,f+N)),i,f]}),T=w(()=>M(e,o(R))),y=w(()=>st(e.layout)),Y=w(()=>[{position:"relative",[`overflow-${y.value?"x":"y"}`]:"scroll",WebkitOverflowScrolling:"touch",willChange:"transform"},{direction:e.direction,height:K(e.height)?`${e.height}px`:e.height,width:K(e.width)?`${e.width}px`:e.width},e.style]),Z=w(()=>{const t=o(T),s=o(y);return{height:s?"100%":`${t}px`,pointerEvents:o(a).isScrolling?"none":void 0,width:s?`${t}px`:"100%"}}),x=w(()=>y.value?e.width:e.height),{onWheel:J}=kt({atStartEdge:w(()=>a.value.scrollOffset<=0),atEndEdge:w(()=>a.value.scrollOffset>=T.value),layout:w(()=>e.layout)},t=>{var s,l;(l=(s=$.value).onMouseUp)==null||l.call(s),I(Math.min(a.value.scrollOffset+t,T.value-x.value))}),q=()=>{const{total:t}=e;if(t>0){const[n,i,f,z]=o(H);m(at,n,i,f,z)}const{scrollDir:s,scrollOffset:l,updateRequested:u}=o(a);m(ct,s,l,u)},V=t=>{const{clientHeight:s,scrollHeight:l,scrollTop:u}=t.currentTarget,n=o(a);if(n.scrollOffset===u)return;const i=Math.max(0,Math.min(u,l-s));a.value={...n,isScrolling:!0,scrollDir:et(n.scrollOffset,i),scrollOffset:i,updateRequested:!1},j(D)},Q=t=>{const{clientWidth:s,scrollLeft:l,scrollWidth:u}=t.currentTarget,n=o(a);if(n.scrollOffset===l)return;const{direction:i}=e;let f=l;if(i===tt)switch(rt()){case it:{f=-l;break}case Rt:{f=u-s-l;break}}f=Math.max(0,Math.min(f,u-s)),a.value={...n,isScrolling:!0,scrollDir:et(n.scrollOffset,f),scrollOffset:f,updateRequested:!1},j(D)},p=t=>{o(y)?Q(t):V(t),q()},G=(t,s)=>{const l=(T.value-x.value)/s*t;I(Math.min(T.value-x.value,l))},I=t=>{t=Math.max(t,0),t!==o(a).scrollOffset&&(a.value={...o(a),scrollOffset:t,scrollDir:et(o(a).scrollOffset,t),updateRequested:!0},j(D))},_=(t,s=lt)=>{const{scrollOffset:l}=o(a);t=Math.max(0,Math.min(t,e.total-1)),I(d(e,t,s,l,o(R)))},B=t=>{const{direction:s,itemSize:l,layout:u}=e,n=F.value(c&&l,c&&u,c&&s);let i;if(Ft(n,String(t)))i=n[t];else{const f=L(e,t,o(R)),z=S(e,t,o(R)),N=o(y),nt=s===tt,ot=N?f:0;n[t]=i={position:"absolute",left:nt?void 0:`${ot}px`,right:nt?`${ot}px`:void 0,top:N?0:`${f}px`,height:N?"100%":`${z}px`,width:N?`${z}px`:"100%"}}return i},D=()=>{a.value.isScrolling=!1,j(()=>{F.value(-1,null,null)})},P=()=>{const t=b.value;t&&(t.scrollTop=0)};zt(()=>{if(!At)return;const{initScrollOffset:t}=e,s=o(b);K(t)&&s&&(o(y)?s.scrollLeft=t:s.scrollTop=t),q()}),Nt(()=>{const{direction:t,layout:s}=e,{scrollOffset:l,updateRequested:u}=o(a),n=o(b);if(u&&n)if(s===ht)if(t===tt)switch(rt()){case it:{n.scrollLeft=-l;break}case Tt:{n.scrollLeft=l;break}default:{const{clientWidth:i,scrollWidth:f}=n;n.scrollLeft=f-i-l;break}}else n.scrollLeft=l;else n.scrollTop=l});const A={ns:C,clientSize:x,estimatedTotalSize:T,windowStyle:Y,windowRef:b,innerRef:W,innerStyle:Z,itemsToRender:H,scrollbarRef:$,states:a,getItemStyle:B,onScroll:p,onScrollbarScroll:G,onWheel:J,scrollTo:I,scrollToItem:_,resetScrollTop:P};return E({windowRef:b,innerRef:W,getItemStyleCache:F,scrollTo:I,scrollToItem:_,resetScrollTop:P,states:a}),A},render(e){var m;const{$slots:E,className:X,clientSize:C,containerElement:R,data:F,getItemStyle:b,innerElement:W,itemsToRender:$,innerStyle:a,layout:H,total:T,onScroll:y,onScrollbarScroll:Y,onWheel:Z,states:x,useIsScrolling:J,windowStyle:q,ns:V}=e,[Q,p]=$,G=ut(R),I=ut(W),_=[];if(T>0)for(let A=Q;A<=p;A++)_.push((m=E.default)==null?void 0:m.call(E,{data:F,key:A,index:A,isScrolling:J?x.isScrolling:void 0,style:b(A)}));const B=[U(I,{style:a,ref:"innerRef"},dt(I)?_:{default:()=>_})],D=U(wt,{ref:"scrollbarRef",clientSize:C,layout:H,onScroll:Y,ratio:C*100/this.estimatedTotalSize,scrollFrom:x.scrollOffset/(this.estimatedTotalSize-C),total:T}),P=U(G,{class:[V.e("window"),X],style:q,onScroll:y,onWheel:Z,ref:"windowRef",key:0},dt(G)?[B]:{default:()=>[B]});return U("div",{key:0,class:[V.e("wrapper"),x.scrollbarAlwaysOn?"always-on":""]},[P,D])}}),Gt=Wt({name:"ElFixedSizeList",getItemOffset:({itemSize:r},d)=>d*r,getItemSize:({itemSize:r})=>r,getEstimatedTotalSize:({total:r,itemSize:d})=>d*r,getOffset:({height:r,total:d,itemSize:S,layout:L,width:M},h,v,g)=>{const c=st(L)?M:r,O=Math.max(0,d*S-c),e=Math.min(O,h*S),m=Math.max(0,(h+1)*S-c);switch(v===It&&(g>=m-c&&g<=e+c?v=lt:v=ft),v){case xt:return e;case yt:return m;case ft:{const E=Math.round(m+(e-m)/2);return E<Math.ceil(c/2)?0:E>O+Math.floor(c/2)?O:E}case lt:default:return g>=m&&g<=e?g:g<m?m:e}},getStartIndexForOffset:({total:r,itemSize:d},S)=>Math.max(0,Math.min(r-1,Math.floor(S/d))),getStopIndexForStartIndex:({height:r,total:d,itemSize:S,layout:L,width:M},h,v)=>{const g=h*S,c=st(L)?M:r,O=Math.ceil((c+v-g)/S);return Math.max(0,Math.min(d-1,h+O-1))},initCache(){},clearCache:!0,validateProps(){}});export{Gt as F,Wt as c};
