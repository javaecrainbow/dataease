import{a as Da,b as La,P as St,u as Na}from"./index-0.0.0-dataease.js";import{E as Va}from"./el-drawer-0.0.0-dataease.js";import{j as $a,e as N,_ as y,n as z,k as Ma,w as U,x as Ae,y as Ia}from"./index-0.0.0-dataease2.js";import{E as Ha}from"./el-dialog-0.0.0-dataease.js";import{a as za,E as Ba}from"./el-table-column-0.0.0-dataease.js";import"./el-checkbox-0.0.0-dataease.js";import"./el-tag-0.0.0-dataease.js";import"./el-tooltip-0.0.0-dataease.js";import"./el-popper-0.0.0-dataease.js";import"./el-empty-0.0.0-dataease.js";import"./el-virtual-list-0.0.0-dataease.js";import{a as Pa,E as Oa}from"./el-table-v2-0.0.0-dataease.js";import{E as Ra}from"./el-row-0.0.0-dataease.js";import{E as Fa}from"./el-col-0.0.0-dataease.js";import{E as Ua,a as Za}from"./el-tabs-0.0.0-dataease.js";import{E as ja}from"./el-upload-0.0.0-dataease.js";import"./el-progress-0.0.0-dataease.js";import{E as Aa}from"./el-popover-0.0.0-dataease.js";import{E as qa}from"./el-divider-0.0.0-dataease.js";import{E as Ja}from"./el-tree-0.0.0-dataease.js";import{a as Wa,b as Ya,E as Ga}from"./el-dropdown-menu-0.0.0-dataease.js";import"./el-dropdown-item-0.0.0-dataease.js";import{f as i,M as f,a8 as Xa,N as u,d as Ka,u as Qa,a9 as eo,_ as X,m as oe,r as w,s as qe,w as to,o as ao,ab as Et,U as B,k as t,W as Je,j as e,i as a,a7 as r,a0 as p,Z as D,aa as We,V as q,a6 as m,g as v,X as le,q as de,ac as Ye,n as Dt,h as ue,am as oo}from"./vue-0.0.0-dataease.js";import{i as Lt}from"./icon_down_outlined-1-0.0.0-dataease.js";import{i as Nt}from"./icon_down_outlined-0.0.0-dataease.js";import{i as lo}from"./icon_copy_filled-0.0.0-dataease.js";import{i as so}from"./icon_dataset-0.0.0-dataease.js";import{i as no}from"./icon_delete-trash_outlined-0.0.0-dataease.js";import{i as io,_ as ro}from"./index.vue_vue_type_style_index_0_lang-0.0.0-dataease2.js";import{i as co}from"./icon_rename_outlined-0.0.0-dataease.js";import{d as Vt}from"./dv-folder-0.0.0-dataease.js";import{d as uo,i as po}from"./icon_file-add_outlined-0.0.0-dataease.js";import{i as $t}from"./icon_search-outline_outlined-0.0.0-dataease.js";import{d as mo,a as fo}from"./dv-sort-desc-0.0.0-dataease.js";import{i as Mt}from"./icon_add_outlined-0.0.0-dataease.js";import{i as _o}from"./icon_info_outlined-0.0.0-dataease.js";import{i as Ge}from"./icon_edit_outlined-0.0.0-dataease.js";import{i as It}from"./icon_replace_outlined-0.0.0-dataease.js";import{d as go}from"./option-0.0.0-dataease.js";import{a as vo}from"./el-aside-0.0.0-dataease.js";import{G as Ht}from"./GridTable-0.0.0-dataease.js";import zt from"./DeResourceArrow-0.0.0-dataease.js";import{_ as Bt}from"./HandleMore.vue_vue_type_style_index_0_lang-0.0.0-dataease.js";import{f as K}from"./attr-0.0.0-dataease20.js";import{h as ho,j as Co,k as yo,m as bo,n as wo,o as To,p as Pt,q as xo,r as Xe,t as ko,e as So,w as Eo,x as Ot,y as Do,z as Lo}from"./datasource-0.0.0-dataease.js";import No from"./CreatDsGroup-0.0.0-dataease2.js";import Vo from"./DatasetDetail-0.0.0-dataease.js";import{t as pe}from"./util-0.0.0-dataease.js";import{E as Ke}from"./EmptyBackground-0.0.0-dataease.js";import{d as Rt}from"./dayjs.min-0.0.0-dataease.js";import{useAppStoreWithOut as $o}from"./app-0.0.0-dataease.js";import{g as Z}from"./base64-0.0.0-dataease.js";import{_ as Mo}from"./index.vue_vue_type_style_index_0_lang-0.0.0-dataease3.js";import Io from"./ExcelInfo-0.0.0-dataease.js";import Ho from"./SheetTabs-0.0.0-dataease.js";import{_ as L}from"./BaseInfoItem.vue_vue_type_style_index_0_lang-0.0.0-dataease.js";import we from"./BaseInfoContent-0.0.0-dataease.js";import{u as zo}from"./useMoveLine-0.0.0-dataease.js";import{i as Bo}from"./interactive-0.0.0-dataease.js";import{t as Po}from"./treeSortUtils-0.0.0-dataease.js";import{i as Ft}from"./field-list-0.0.0-dataease.js";import{i as Ut}from"./datasource-list-0.0.0-dataease.js";import{d as F}from"./lodash-0.0.0-dataease.js";import{E as Oo}from"./index-0.0.0-dataease4.js";import{_ as Ro}from"./_plugin-vue_export-helper-0.0.0-dataease.js";import"./library-0.0.0-dataease.js";import"./use-dialog-0.0.0-dataease.js";import"./axios-0.0.0-dataease.js";import"./echarts-0.0.0-dataease.js";import"./tinymce-0.0.0-dataease.js";import"./user-0.0.0-dataease.js";import"./refs-0.0.0-dataease.js";import"./index-0.0.0-dataease5.js";import"./browser-0.0.0-dataease.js";import"./row-0.0.0-dataease.js";import"./strings-0.0.0-dataease.js";import"./dropdown-0.0.0-dataease.js";import"./index-0.0.0-dataease12.js";import"./el-pagination-0.0.0-dataease.js";import"./el-select-0.0.0-dataease.js";import"./index-0.0.0-dataease14.js";import"./icon_left_outlined-0.0.0-dataease.js";import"./icon_right_outlined-0.0.0-dataease.js";import"./el-form-0.0.0-dataease.js";import"./el-tree-select-0.0.0-dataease.js";import"./el-form-item-0.0.0-dataease.js";import"./nothing-tree-0.0.0-dataease.js";import"./none-0.0.0-dataease.js";import"./ApiHttpRequestDraw.vue_vue_type_style_index_0_lang-0.0.0-dataease.js";import"./icon_expand-right_filled-0.0.0-dataease.js";import"./ApiHttpRequestForm-0.0.0-dataease.js";import"./ApiKeyValue.vue_vue_type_style_index_0_lang-0.0.0-dataease.js";import"./ApiTestModel-0.0.0-dataease.js";import"./icon_drag_outlined-0.0.0-dataease.js";import"./vuedraggable-es-0.0.0-dataease.js";import"./ApiBody-0.0.0-dataease.js";import"./el-radio-group-0.0.0-dataease.js";import"./el-radio-0.0.0-dataease.js";import"./ApiVariable-0.0.0-dataease.js";import"./CodeEdit.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";import"./ApiAuthConfig.vue_vue_type_style_index_0_lang-0.0.0-dataease.js";import"./icon_close_outlined-0.0.0-dataease.js";import"./DsTypeList-0.0.0-dataease.js";import"./EditorDetail-0.0.0-dataease.js";import"./el-date-picker-0.0.0-dataease.js";import"./arrays-0.0.0-dataease.js";import"./index-0.0.0-dataease15.js";import"./el-input-number-0.0.0-dataease.js";import"./icon_calendar_outlined-0.0.0-dataease.js";import"./de-copy-0.0.0-dataease.js";import"./de-delete-0.0.0-dataease.js";import"./icon_warning_filled-0.0.0-dataease.js";import"./CustomPassword.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";import"./icon_visible_outlined-0.0.0-dataease.js";import"./icon_invisible_outlined-0.0.0-dataease.js";import"./el-checkbox-group-0.0.0-dataease.js";import"./ExcelDetail.vue_vue_type_style_index_0_lang-0.0.0-dataease.js";import"./icon_upload_outlined-0.0.0-dataease.js";import"./FinishPage-0.0.0-dataease.js";import"./PluginComponent.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";import"./dataVisualization-0.0.0-dataease.js";import"./dataset-0.0.0-dataease.js";const Fo={width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function Uo(P,k){return i(),f("svg",Fo,k[0]||(k[0]=[Xa('<g clip-path="url(#clip0_4327_361639)"><path d="M6 11.5C9.03757 11.5 11.5 9.03757 11.5 6C11.5 2.96243 9.03757 0.5 6 0.5C2.96243 0.5 0.5 2.96243 0.5 6C0.5 9.03757 2.96243 11.5 6 11.5Z" fill="#F54A45"></path><path d="M5.75 3.5C5.61193 3.5 5.5 3.61193 5.5 3.75V6.75C5.5 6.88807 5.61193 7 5.75 7H6.25C6.38807 7 6.5 6.88807 6.5 6.75V3.75C6.5 3.61193 6.38807 3.5 6.25 3.5H5.75Z" fill="white"></path><path d="M5.75 7.5C5.61193 7.5 5.5 7.61193 5.5 7.75V8.25C5.5 8.38807 5.61193 8.5 5.75 8.5H6.25C6.38807 8.5 6.5 8.38807 6.5 8.25V7.75C6.5 7.61193 6.38807 7.5 6.25 7.5H5.75Z" fill="white"></path></g><defs><clipPath id="clip0_4327_361639"><rect width="12" height="12" fill="white"></rect></clipPath></defs>',2)]))}const Zo={render:Uo},jo={width:"20",height:"20",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"};function Ao(P,k){return i(),f("svg",jo,k[0]||(k[0]=[u("g",{id:"icon_dataset_outlined"},[u("path",{id:"Union",d:"M0.833344 6.36987C0.833344 6.04308 1.02435 5.74646 1.32184 5.61123L9.65517 1.82335C9.87428 1.72376 10.1257 1.72376 10.3448 1.82335L18.6782 5.61123C18.9757 5.74646 19.1667 6.04308 19.1667 6.36987V14.4849C19.1667 14.8006 18.9883 15.0891 18.706 15.2303L10.3727 19.3969C10.1381 19.5142 9.86194 19.5142 9.62733 19.3969L1.294 15.2303C1.01168 15.0891 0.833344 14.8006 0.833344 14.4849V6.36987ZM16.0149 6.2314L10 3.49737L3.95267 6.24616L9.96664 8.83681L16.0149 6.2314ZM10.8333 10.2782V17.3032L17.5 13.9699V7.40638L10.8333 10.2782ZM2.50001 7.43512V13.9699L9.16668 17.3032V10.3069L2.50001 7.43512Z",fill:"currentColor"})],-1)]))}const Zt={render:Ao},qo={width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function Jo(P,k){return i(),f("svg",qo,k[0]||(k[0]=[u("g",{id:"icon_new-item_outlined"},[u("path",{id:"Vector",d:"M12.2493 1.16602C12.4041 1.16602 12.5524 1.22747 12.6618 1.33687C12.7712 1.44627 12.8327 1.59464 12.8327 1.74935V12.2493C12.8327 12.4041 12.7712 12.5524 12.6618 12.6618C12.5524 12.7712 12.4041 12.8327 12.2493 12.8327H1.74935C1.59464 12.8327 1.44627 12.7712 1.33687 12.6618C1.22747 12.5524 1.16602 12.4041 1.16602 12.2493V1.74935C1.16602 1.59464 1.22747 1.44627 1.33687 1.33687C1.44627 1.22747 1.59464 1.16602 1.74935 1.16602H12.2493ZM11.3743 2.33268H2.62435C2.55291 2.33269 2.48396 2.35892 2.43057 2.40639C2.37719 2.45386 2.34308 2.51928 2.33472 2.59022L2.33268 2.62435V11.3743C2.33269 11.4458 2.35892 11.5147 2.40639 11.5681C2.45386 11.6215 2.51928 11.6556 2.59022 11.664L2.62435 11.666H11.3743C11.4458 11.666 11.5147 11.6398 11.5681 11.5923C11.6215 11.5448 11.6556 11.4794 11.664 11.4085L11.666 11.3743V2.62435C11.666 2.54699 11.6353 2.47281 11.5806 2.41811C11.5259 2.36341 11.4517 2.33268 11.3743 2.33268ZM7.29102 4.08268C7.32932 4.08268 7.36724 4.09023 7.40263 4.10488C7.43802 4.11954 7.47017 4.14103 7.49725 4.16811C7.52434 4.19519 7.54582 4.22735 7.56048 4.26273C7.57514 4.29812 7.58268 4.33605 7.58268 4.37435V6.41602H9.62435C9.66265 6.41602 9.70058 6.42356 9.73597 6.43822C9.77135 6.45288 9.8035 6.47436 9.83059 6.50144C9.85767 6.52853 9.87916 6.56068 9.89381 6.59607C9.90847 6.63145 9.91602 6.66938 9.91602 6.70768V7.29102C9.91602 7.32932 9.90847 7.36725 9.89381 7.40263C9.87916 7.43802 9.85767 7.47017 9.83059 7.49726C9.8035 7.52434 9.77135 7.54582 9.73597 7.56048C9.70058 7.57514 9.66265 7.58268 9.62435 7.58268H7.58268V9.62435C7.58268 9.66265 7.57514 9.70058 7.56048 9.73597C7.54582 9.77135 7.52434 9.80351 7.49725 9.83059C7.47017 9.85767 7.43802 9.87916 7.40263 9.89381C7.36724 9.90847 7.32932 9.91602 7.29102 9.91602H6.70768C6.66938 9.91602 6.63145 9.90847 6.59607 9.89381C6.56068 9.87916 6.52853 9.85767 6.50144 9.83059C6.47436 9.80351 6.45288 9.77135 6.43822 9.73597C6.42356 9.70058 6.41602 9.66265 6.41602 9.62435V7.58268H4.37435C4.33605 7.58268 4.29812 7.57514 4.26273 7.56048C4.22735 7.54582 4.19519 7.52434 4.16811 7.49726C4.14103 7.47017 4.11954 7.43802 4.10488 7.40263C4.09023 7.36725 4.08268 7.32932 4.08268 7.29102V6.70768C4.08268 6.66938 4.09023 6.63145 4.10488 6.59607C4.11954 6.56068 4.14103 6.52853 4.16811 6.50144C4.19519 6.47436 4.22735 6.45288 4.26273 6.43822C4.29812 6.42356 4.33605 6.41602 4.37435 6.41602H6.41602V4.37435C6.41602 4.33605 6.42356 4.29812 6.43822 4.26273C6.45288 4.22735 6.47436 4.19519 6.50144 4.16811C6.52853 4.14103 6.56068 4.11954 6.59607 4.10488C6.63145 4.09023 6.66938 4.08268 6.70768 4.08268H7.29102Z",fill:"white"})],-1)]))}const Wo={render:Jo},Yo={width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"};function Go(P,k){return i(),f("svg",Yo,k[0]||(k[0]=[u("path",{d:"M5 3V21H19V3H5ZM4 1H20C20.5523 1 21 1.46904 21 2.04762V21.9524C21 22.531 20.5523 23 20 23H4C3.44772 23 3 22.531 3 21.9524V2.04762C3 1.46904 3.44772 1 4 1ZM7.5 7H11.5C11.7761 7 12 7.22386 12 7.5V8.5C12 8.77614 11.7761 9 11.5 9H7.5C7.22386 9 7 8.77614 7 8.5V7.5C7 7.22386 7.22386 7 7.5 7ZM7.5 11H16.5C16.7761 11 17 11.2239 17 11.5V12.5C17 12.7761 16.7761 13 16.5 13H7.5C7.22386 13 7 12.7761 7 12.5V11.5C7 11.2239 7.22386 11 7.5 11ZM7.5 15H16.5C16.7761 15 17 15.2239 17 15.5V16.5C17 16.7761 16.7761 17 16.5 17H7.5C7.22386 17 7 16.7761 7 16.5V15.5C7 15.2239 7.22386 15 7.5 15Z"},null,-1)]))}const jt={render:Go},Xo={width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function Ko(P,k){return i(),f("svg",Xo,k[0]||(k[0]=[u("g",{id:"icon_succeed_filled","clip-path":"url(#clip0_3515_155051)"},[u("path",{id:"Union",d:"M0.666016 7.99935C0.666016 12.0493 3.94935 15.3327 7.99935 15.3327C12.0494 15.3327 15.3327 12.0493 15.3327 7.99935C15.3327 3.94935 12.0494 0.666016 7.99935 0.666016C3.94935 0.666016 0.666016 3.94935 0.666016 7.99935ZM10.7617 5.9837C10.8242 5.92121 10.909 5.88611 10.9974 5.88611C11.0857 5.88611 11.1705 5.92121 11.233 5.9837L11.7044 6.45537C11.7668 6.51788 11.8019 6.60265 11.8019 6.69104C11.8019 6.77942 11.7668 6.86419 11.7044 6.9267L7.46169 11.1694C7.39918 11.2319 7.31441 11.267 7.22602 11.267C7.13763 11.267 7.05286 11.2319 6.99035 11.1694L4.55035 8.72903C4.48786 8.66652 4.45276 8.58176 4.45276 8.49337C4.45276 8.40498 4.48786 8.32021 4.55035 8.2577L5.02135 7.78604C5.08386 7.72354 5.16863 7.68844 5.25702 7.68844C5.34541 7.68844 5.43018 7.72354 5.49269 7.78604L7.22602 9.51937L10.7617 5.9837Z",fill:"#34C724"})],-1),u("defs",null,[u("clipPath",{id:"clip0_3515_155051"},[u("rect",{width:"16",height:"16",fill:"white"})])],-1)]))}const At={render:Ko},Qo={width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"};function el(P,k){return i(),f("svg",Qo,k[0]||(k[0]=[u("path",{d:"M12 23.0001C5.925 23.0001 1 18.0751 1 12.0001C1 5.92506 5.925 1.00006 12 1.00006C18.075 1.00006 23 5.92506 23 12.0001C23 18.0751 18.075 23.0001 12 23.0001Z"},null,-1),u("path",{d:"M12.0002 10.586L9.02524 7.61099C8.93147 7.51726 8.80432 7.4646 8.67174 7.4646C8.53916 7.4646 8.412 7.51726 8.31824 7.61099L7.61124 8.31799C7.5175 8.41176 7.46484 8.53891 7.46484 8.67149C7.46484 8.80407 7.5175 8.93123 7.61124 9.02499L10.5862 12L7.61124 14.975C7.5175 15.0688 7.46484 15.1959 7.46484 15.3285C7.46484 15.4611 7.5175 15.5882 7.61124 15.682L8.31824 16.389C8.412 16.4827 8.53916 16.5354 8.67174 16.5354C8.80432 16.5354 8.93147 16.4827 9.02524 16.389L12.0002 13.414L14.9752 16.389C15.069 16.4827 15.1962 16.5354 15.3287 16.5354C15.4613 16.5354 15.5885 16.4827 15.6822 16.389L16.3892 15.682C16.483 15.5882 16.5356 15.4611 16.5356 15.3285C16.5356 15.1959 16.483 15.0688 16.3892 14.975L13.4142 12L16.3892 9.02499C16.483 8.93123 16.5356 8.80407 16.5356 8.67149C16.5356 8.53891 16.483 8.41176 16.3892 8.31799L15.6822 7.61099C15.5885 7.51726 15.4613 7.4646 15.3287 7.4646C15.1962 7.4646 15.069 7.51726 14.9752 7.61099L12.0002 10.586Z",fill:"white"},null,-1)]))}const qt={render:el},tl={width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function al(P,k){return i(),f("svg",tl,k[0]||(k[0]=[u("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M12 21C16.9706 21 21 16.9706 21 12C21 7.02944 16.9706 3 12 3C7.02944 3 3 7.02944 3 12C3 16.9706 7.02944 21 12 21ZM12 23C5.92487 23 1 18.0751 1 12C1 5.92487 5.92487 1 12 1C18.0751 1 23 5.92487 23 12C23 18.0751 18.0751 23 12 23ZM11.5 16H12.5C12.7761 16 13 16.2239 13 16.5V17.5C13 17.7761 12.7761 18 12.5 18H11.5C11.2239 18 11 17.7761 11 17.5V16.5C11 16.2239 11.2239 16 11.5 16ZM8.04986 9.28171C8.06256 9.16994 8.07558 9.07696 8.0889 9.00277C8.28384 7.91718 8.77754 7.11884 9.57002 6.60771C10.1907 6.20257 10.9533 6 11.858 6C13.0467 6 14.0342 6.28786 14.8205 6.86359C15.6068 7.43932 16 8.29225 16 9.42239C16 10.1154 15.8291 10.6991 15.4872 11.1736C15.2873 11.4614 14.9034 11.8293 14.3353 12.277L13.7751 12.7168C13.4701 12.9567 13.2676 13.2366 13.1677 13.5564C13.1405 13.6437 13.1166 13.806 13.0959 14.0432C13.0735 14.3017 12.8572 14.5 12.5978 14.5H11.4784C11.2023 14.5 10.9784 14.2761 10.9784 14C10.9784 13.9846 10.9791 13.9692 10.9805 13.9539C11.0449 13.258 11.1139 12.8177 11.1874 12.6329C11.3241 12.289 11.6765 11.8932 12.2446 11.4454L12.8205 10.9897C13.0099 10.8457 13.9856 10.1586 13.9856 9.55033C13.9856 8.94201 13.8796 8.71826 13.5742 8.38441C13.2687 8.05055 12.5812 7.94309 11.9605 7.94309C11.3504 7.94309 10.829 8.10511 10.574 8.51559C10.4558 8.7057 10.3592 8.90851 10.2895 9.11544C10.2621 9.19685 10.2378 9.29927 10.2166 9.4227C10.1755 9.66273 9.96737 9.83819 9.72383 9.83819H8.54667C8.27052 9.8382 8.04666 9.61434 8.04666 9.33819C8.04666 9.31932 8.04772 9.30046 8.04986 9.28171Z",fill:"#1F2329"},null,-1)]))}const ol={render:al},ll={class:"datasource-manage"},sl={class:"resource-tree"},nl={class:"tree-header"},il={class:"icon-methods"},rl={class:"title"},cl={key:0,class:"flex-align-center"},dl={key:0,class:"ed-dropdown-menu__item--divided"},ul={class:"custom-tree-node",style:{position:"relative"}},pl=["title"],ml=["title"],fl={key:3,class:"icon-more"},_l={class:"datasource-info"},gl={class:"info-method"},vl=["title"],hl={class:"create-user"},Cl={class:"right-btn flex-align-center"},yl={class:"tab-border"},bl={key:0,class:"datasource-table"},wl={class:"search-operate"},Tl={class:"info-table"},xl={class:"flex-align-center"},kl={key:0,class:"api-card-content"},Sl={class:"name"},El=["title"],Dl={key:0,class:"de-tag error-color"},Ll={key:1,class:"de-tag success-color"},Nl={class:"req-title"},Vl={class:"req-value"},$l={key:0,class:"excel-table"},Ml={class:"sheet-table-content"},Il={class:"table-name"},Hl={class:"table-value"},zl={class:"table-name"},Bl={class:"table-value"},Pl={class:"flex-align-center icon"},Ol={class:"flex-align-center"},Rl={class:"flex-align-center"},Fl={class:"dialog-footer"};function Ul(P){return typeof P=="function"||Object.prototype.toString.call(P)==="[object Object]"&&!oo(P)}const Zl=Ka({__name:"index",setup(P){const k=Qa(),Jt=Bo(),{wsCache:Qe}=Da(),{t:l}=$a(),et=eo(),me=$o(),h=X({datasourceTree:[],dsTableData:[],paginationConfig:{currentPage:1,pageSize:10,total:0},curSortType:"time_desc",filterTable:[]}),J=X({paginationConfig:{currentPage:1,pageSize:10,total:0}}),Te=oe(()=>me.getIsDataEaseBi),tt=oe(()=>me.getIsIframe),xe=La(),at=o=>{if(Te.value){xe.clearState(),xe.setDatasourceId(n.id),xe.setTableName(o),Na().emitter.emit("changeCurrentComponent","DatasetEditor");return}et.push({path:"/dataset-form",query:{datasourceId:n.id,tableName:o}})},{width:ke,node:Wt}=zo("DATASOURCE"),Se=X({tableName:"",name:""}),Ee=w(!1),se=w(""),De=w(""),Le=w(!1),Yt=w([]),fe=w(!1),_e=w(!0),Q=w(),ee=w(""),ot=[{label:l("chart.move_to"),svgName:io,command:"move"},{label:l("data_set.rename"),svgName:co,command:"rename"},{label:l("common.delete"),divided:!0,svgName:no,command:"delete"}],lt=go.reduce((o,s)=>(o[s.type]=s.name,o),{}),Gt=oe(()=>[{label:l("datasource.create"),svgName:so,command:"datasource"},{label:l("deDataset.new_folder"),divided:!0,svgName:Vt,command:"folder"}]),Ne=w(!1),Xt=o=>{Object.assign(Se,o),Le.value=!0,Ne.value=!0,ho({tableName:o.tableName,datasourceId:n.id}).then(s=>{h.dsTableData=s.data}).finally(()=>{Ne.value=!1})};let Ve=[];const $e=o=>{h.datasourceTree=Po(Ve,o),h.curSortType=o,Qe.set("TreeSort-datasource",h.curSortType)},Kt=o=>{h.paginationConfig.currentPage=1,h.paginationConfig.pageSize=o},Me=o=>{h.paginationConfig.currentPage=o},Qt=o=>{J.paginationConfig.currentPage=1,J.paginationConfig.pageSize=o,Ue()},ea=o=>{J.paginationConfig.currentPage=o,Ue()};let st=0;const ta=o=>{st=o.scrollTop},nt=w(),aa=o=>o.map(s=>({key:s.originName,deType:s.deType,dataKey:s.originName,title:s.name,width:150,headerCellRenderer:({column:d})=>{let _;return t("div",{class:"flex-align-center"},[t(N,{style:{marginRight:"6px"}},{default:()=>[t(y,{className:`field-icon-${K[d.deType]}`},Ul(_=ue(Ft[K[d.deType]],{class:`svg-icon field-icon-${K[d.deType]}`}))?_:{default:()=>[_]})]}),t("span",{class:"ellipsis",title:d.title,style:{width:"120px"}},[d.title])])}})),Ie=w(!1),it=w([]),oa=o=>{Ie.value=!0,Eo(o).then(s=>{var d,_;it.value=aa(((d=s==null?void 0:s.data)==null?void 0:d.fields)||[]),gt.value=((_=s==null?void 0:s.data)==null?void 0:_.data)||[]}).finally(()=>{Ie.value=!1})},la=()=>{let o=X(F(A));Object.assign(o,F(n)),Co(o.id).then(s=>{if(s.data.type==="API"){let d=0;const _=JSON.parse(s.data.status);for(let b=0;b<_.length;b++){_[b].status==="Error"&&d++;for(let T=0;T<o.apiConfiguration.length;T++)n.apiConfiguration[T].name===_[T].name&&(n.apiConfiguration[T].status=_[T].status)}d===0?(ne(h.datasourceTree,o.id,Math.abs(o.extraFlag)),U.success(l("data_source.verification_successful"))):(ne(h.datasourceTree,o.id,-Math.abs(o.extraFlag)),U.error(l("data_source.verification_failed")))}else ne(h.datasourceTree,o.id,Math.abs(o.extraFlag)),U.success(l("data_source.verification_successful"))}).catch(()=>{ne(h.datasourceTree,o.id,-Math.abs(o.extraFlag))})},ge=w(!1),rt=w(""),sa=o=>{const{syncRate:s,simpleCronValue:d,simpleCronType:_,startTime:b,endTime:T,cron:M}=o;let O="-",R="-";b&&(O=Rt(new Date(b)).format("YYYY-MM-DD HH:mm:ss")),T&&(R=Rt(new Date(T)).format("YYYY-MM-DD HH:mm:ss"));let S=[];switch(s){case"RIGHTNOW":S.push(l("dataset.execute_once"));break;case"CRON":S.push(`${l("dataset.cron_config")}: ${M}`),S.push(`${l("dataset.start_time")}: ${O}`),S.push(`${l("dataset.end_time")}: ${R}`);break;case"SIMPLE_CRON":const I=l(`common.${_}`);S.push(`${l("dataset.simple_cron")}: ${l("common.every")}${d}${I}${l("data_source.update_once")}`),S.push(`${l("dataset.start_time")}: ${O}`),S.push(`${l("dataset.end_time")}: ${R}`);break}return S},na=o=>{rt.value=o,ge.value=!0},j=w([]),ia=o=>{j.value=o,j.value.forEach(s=>{lt[s.type]=s.name})},ra=o=>{if((j==null?void 0:j.value.length)===0||!o.leaf)return null;const s=j.value.filter(d=>d.type===o.type);return s&&s.length>0?s[0].icon:null},ca=o=>{const s=j.value.filter(d=>d.type===o);return s&&s.length>0?s[0].icon:null},da=o=>o.leaf?Ut[o.type]:Vt,ct=o=>{ee.value=o.value,oa({table:o.value,id:n.id})},ve=qe([]),dt=()=>{Me(1),h.filterTable=_t.value.filter(o=>o.tableName.toLowerCase().includes(se.value.toLowerCase())),h.paginationConfig.total=h.filterTable.length},ua=oe(()=>{const{currentPage:o,pageSize:s}=h.paginationConfig;return h.filterTable.slice((o-1)*s,o*s)}),A={name:"",createBy:"",creator:"",createTime:"",description:"",id:0,size:0,nodeType:"",type:"",fileName:"",configuration:null,syncSetting:null,apiConfiguration:[],weight:0,enableDataFill:!1,extraFlag:0},n=X(F(A)),ut=oe(()=>({creator:n.creator,createTime:pe(n.createTime)})),pa=(o,s,d,_)=>{let b=Ot,T=l("data_set.moved_successfully");switch(_){case"move":b=Ot,T=l("data_set.moved_successfully");break;case"rename":b=Lo,T=l("data_set.rename_successful");break;default:b=Do,T=l("data_source.create_successfully");break}b(o).then(M=>{M!==void 0&&(s(),U.success(T),te())}).finally(()=>{d()})},He=w(!1),ze=w(!1),te=()=>{Yt.value=[],He.value=!0;const o={busiFlag:"datasource"};Jt.setInteractive(o).then(s=>{const d=s||[];if(d.length&&d[0].id==="0"&&d[0].name==="root"){Ee.value=d[0].weight>=7,h.datasourceTree=d[0].children||[],Ve=F(e(h.datasourceTree)),$e(h.curSortType);return}Ve=F(e(h.datasourceTree)),h.datasourceTree=d,$e(h.curSortType)}).finally(()=>{ze.value=!0,He.value=!1,ma();const s=n.id;s&&(Object.assign(n,F(A)),pt(h.datasourceTree,s),setTimeout(()=>{he.value.setCurrentKey(n.id,!0)},100))})},ne=(o,s,d)=>{o.some(_=>{var b;return _.id===s?(_.extraFlag=d,!0):((b=_.children)!=null&&b.length&&ne(_.children,s,d),!1)})},pt=(o,s)=>{o.some(d=>{var _;return d.id===s?(Pe(d),!0):((_=d.children)!=null&&_.length&&pt(d.children,s),!1)})},Be=w(),mt=[{name:l("data_source.by_creation_time"),value:"time_asc"},{name:l("data_source.by_creation_time_de"),value:"time_desc",divided:!0},{name:l("data_source.order_by_name"),value:"name_asc"},{name:l("data_source.order_by_name_de"),value:"name_desc"}],ft=oe(()=>mt.find(o=>o.value===h.curSortType).name),_t=qe([]),gt=qe([]),Pe=o=>{if(!o.leaf){he.value.setCurrentKey(null);return}return yo(o.id).then(s=>{let{name:d,createBy:_,id:b,createTime:T,creator:M,type:O,pid:R,configuration:S,syncSetting:I,apiConfigurationStr:$,paramsStr:V,fileName:E,size:C,description:x,lastSyncTime:W,enableDataFill:H}=s.data;S&&(S=JSON.parse(Z.decode(S))),$&&($=JSON.parse(Z.decode($))),V&&(V=JSON.parse(Z.decode(V))),Object.assign(n,{name:d,pid:R,description:x,fileName:E,size:C,createTime:T,creator:M,createBy:_,id:b,type:O,configuration:S,syncSetting:I,apiConfiguration:$,paramsConfiguration:V,weight:o.weight,lastSyncTime:W,enableDataFill:H,extraFlag:o.extraFlag}),ee.value="",ie.value="config",se.value="",Me(1),bt(ie.value)})},Oe=o=>{Q.value.init(null,o==null?void 0:o.id)},Re=w(!1),he=w(),Ce=w([]),Fe=w(!0);to(De,o=>{he.value.filter(o)});const ma=()=>{Fe.value=!1,Dt(()=>{Fe.value=!0,Dt(()=>{var o;(o=nt.value)==null||o.setScrollTop(st)})})},vt=w([]),Ue=()=>{Re.value=!0,bo(J.paginationConfig.currentPage,J.paginationConfig.pageSize,n.id).then(o=>{vt.value=o.data.records,J.paginationConfig.total=o.data.total})},fa=o=>{wo({name:o.name,tableName:o.deTableName,datasourceId:n.id}).then(()=>{U.success(l("datasource.req_completed"))})},_a=()=>{To({datasourceId:n.id}).then(()=>{U.success(l("datasource.req_completed"))})},ga=o=>{o.id&&Ce.value.push(o.id)},va=o=>{o.id&&Ce.value.splice(Ce.value.indexOf(o.id),1)},ha=(o,s)=>{var d;return o?(d=s.name)==null?void 0:d.toLowerCase().includes(o.toLowerCase()):!0},ht=o=>(n.type==="Excel"&&(n.editType=o),Pt(n.id).then(s=>{var ye;let d=j.value.filter(be=>be.type==s.data.type),{name:_,createBy:b,id:T,createTime:M,creator:O,type:R,pid:S,configuration:I,syncSetting:$,apiConfigurationStr:V,paramsStr:E,fileName:C,size:x,description:W,lastSyncTime:H,enableDataFill:Y}=s.data;I&&(I=JSON.parse(Z.decode(I))),E&&(E=JSON.parse(Z.decode(E))),V&&(V=JSON.parse(Z.decode(V)));let re=X(F(A));Object.assign(re,{name:_,pid:S,description:W,fileName:C,size:x,createTime:M,creator:O,createBy:b,id:T,type:R,configuration:I,syncSetting:$,apiConfiguration:V,paramsConfiguration:E,lastSyncTime:H,enableDataFill:Y,isPlugin:d&&d.length>0,staticMap:(ye=d[0])==null?void 0:ye.staticMap}),Q.value.init(re)})),Ca=async o=>{await Pe(o),ht()},ya=async o=>{Pt(o.id).then(s=>{let{name:d,createBy:_,id:b,createTime:T,creator:M,type:O,pid:R,configuration:S,syncSetting:I,apiConfigurationStr:$,paramsStr:V,fileName:E,size:C,description:x,lastSyncTime:W}=s.data;S&&(S=JSON.parse(Z.decode(S))),V&&(V=JSON.parse(Z.decode(V))),$&&($=JSON.parse(Z.decode($)));let H=X(F(A));if(Object.assign(H,{name:d,pid:R,description:x,fileName:E,size:C,createTime:T,creator:M,createBy:_,id:b,type:O,configuration:S,syncSetting:I,apiConfiguration:$,paramsConfiguration:V,lastSyncTime:W}),H.id="",H.name=l("datasource.copy"),H.type==="API")for(let Y=0;Y<H.apiConfiguration.length;Y++)H.apiConfiguration[Y].deTableName="";Q.value.init(H)})},Ct=(o,s)=>{o==="datasource"&&Oe(s),o==="folder"&&Be.value.createInit(o,s||{})},yt=w(),ba=(o,s,d)=>{var _;if(o==="copy"){ya(s);return}if(o==="delete"){let b={confirmButtonText:l("common.sure"),cancelButtonText:l("common.cancel"),confirmButtonType:"danger",type:"warning",tip:"",autofocus:!1,showClose:!1};(_=s.children)!=null&&_.length?b.tip=l("data_source.operate_with_caution"):delete b.tip,d!=="folder"?xo(s.id).then(T=>{if(T===!0){const M=()=>{yt.value.getChartData({queryType:"datasource",num:s.id,label:s.name})};Ae.confirm("",{confirmButtonType:"danger",type:"warning",autofocus:!1,confirmButtonText:l("common.sure"),showClose:!1,dangerouslyUseHTMLString:!0,message:ue("div",null,[ue("p",{style:"margin-bottom: 8px;"},l("datasource.this_data_source")),ue("p",{class:"tip"},l("data_source.confirm_to_delete")),ue(z,{text:!0,onClick:M,style:"margin-left: -4px;"},l("data_source.view_blood_relationship"))])}).then(()=>{Xe(s.id).then(()=>{s.id===n.id&&Object.assign(n,F(A)),te(),U.success(l("dataset.delete_success"))})})}else Ae.confirm(l("datasource.this_data_source"),b).then(()=>{Xe(s.id).then(()=>{s.id===n.id&&Object.assign(n,F(A)),te(),U.success(l("dataset.delete_success"))})})}):Ae.confirm(l("data_set.delete_this_folder"),b).then(()=>{Xe(s.id).then(()=>{s.id===n.id&&Object.assign(n,F(A)),te(),U.success(l("dataset.delete_success"))})})}else Be.value.createInit(d,s,o)},bt=o=>{switch(o){case"config":ko({datasourceId:n.id}).then(s=>{ve.value=s.data.map(d=>{const{name:_,tableName:b}=d;return{value:_,label:b}}),ve.value.length&&!ee.value&&(ee.value=ve.value[0].value,n.type==="Excel"&&ct(ee)),_t.value=s.data});break;case"table":dt();break}},wa=()=>{te()};let wt=null;const Tt=o=>{wt=o},Ze=w(!1),je=w(!1),xt=o=>{const s=new FormData;return s.append("file",wt.raw),s.append("type",""),s.append("editType",o),s.append("id",n.id||0),Ze.value=o===0,je.value=o===1,So(s).then(d=>{(d==null?void 0:d.code)===0&&(n.editType=o,Q.value.init(n,n.id,d))}).finally(()=>{Ze.value=!1,je.value=!1})},ie=w("table"),Ta={children:"children",label:"name"},xa=()=>{const o=Qe.get("TreeSort-datasource");o&&(h.curSortType=o)};ao(()=>{n.id=k.params.id||k.query.id||"",xa(),te();const{opt:o}=et.currentRoute.value.query;o&&o==="create"&&Q.value.init(null,null)});const ae=w(!0),kt=o=>{ae.value=o},ka=()=>{me.setArrowSide(!0)},Sa=()=>{me.setArrowSide(!1)},Ea=o=>o?[{label:l("common.copy"),svgName:lo,command:"copy"}].concat(ot):ot;return(o,s)=>{const d=Oo,_=Ia,b=Wa,T=Ya,M=Ga,O=Ja,R=qa,S=Aa,I=ja,$=Ua,V=Za,E=za,C=Fa,x=Ra,W=Pa,H=Oa,Y=Ba,re=Ha,ye=Va,be=Et("permission"),ce=Et("loading");return B((i(),f("div",ll,[t(zt,{style:Je({left:(ae.value?e(ke)-12:0)+"px"}),onChangeSideTreeStatus:kt,isInside:!ae.value},null,8,["style","isInside"]),t(e(vo),{onMouseenter:ka,onMouseleave:Sa,class:q(["resource-area",{retract:!ae.value}]),ref_key:"node",ref:Wt,style:Je({width:e(ke)+"px"})},{default:a(()=>[t(zt,{isInside:!ae.value,style:Je({left:(ae.value?e(ke)-12:0)+"px"}),onChangeSideTreeStatus:kt},null,8,["isInside","style"]),u("div",sl,[u("div",nl,[u("div",il,[u("span",rl,r(e(l)("datasource.datasource")),1),Ee.value?(i(),f("div",cl,[t(d,{effect:"dark",content:e(l)("deDataset.new_folder"),placement:"top"},{default:a(()=>[t(e(N),{class:"custom-icon btn",style:{marginRight:"20px"},onClick:s[0]||(s[0]=c=>Ct("folder"))},{default:a(()=>[t(e(y),{name:"dv-new-folder"},{default:a(()=>[t(e(uo),{class:"svg-icon"})]),_:1})]),_:1})]),_:1},8,["content"]),t(d,{effect:"dark",content:e(l)("datasource.create"),placement:"top"},{default:a(()=>[t(e(N),{class:"custom-icon btn",onClick:Oe},{default:a(()=>[t(e(y),{name:"icon_file-add_outlined"},{default:a(()=>[t(e(po),{class:"svg-icon"})]),_:1})]),_:1})]),_:1},8,["content"])])):p("",!0)]),t(_,{placeholder:e(l)("commons.search"),modelValue:De.value,"onUpdate:modelValue":s[1]||(s[1]=c=>De.value=c),clearable:"",class:"search-bar"},{prefix:a(()=>[t(e(N),null,{default:a(()=>[t(e(y),{name:"icon_search-outline_outlined"},{default:a(()=>[t(e($t),{class:"svg-icon"})]),_:1})]),_:1})]),_:1},8,["placeholder","modelValue"]),t(M,{onCommand:$e,trigger:"click"},{dropdown:a(()=>[t(T,{style:{width:"246px"}},{default:a(()=>[(i(),f(D,null,We(mt,c=>(i(),f(D,{key:c.value},[t(b,{class:q(["ed-select-dropdown__item",c.value===h.curSortType&&"selected"]),command:c.value},{default:a(()=>[m(r(c.name),1)]),_:2},1032,["class","command"]),c.divided?(i(),f("li",dl)):p("",!0)],64))),64))]),_:1})]),default:a(()=>[t(e(N),{class:"filter-icon-span"},{default:a(()=>[t(d,{offset:16,effect:"dark",content:ft.value,placement:"top"},{default:a(()=>[h.curSortType.includes("asc")?(i(),v(e(y),{key:0,name:"dv-sort-asc",class:"opt-icon"},{default:a(()=>[t(e(mo),{class:"svg-icon opt-icon"})]),_:1})):p("",!0)]),_:1},8,["content"]),t(d,{offset:16,effect:"dark",content:ft.value,placement:"top"},{default:a(()=>[B(t(e(y),{name:"dv-sort-desc",class:"opt-icon"},{default:a(()=>[t(e(fo),{class:"svg-icon opt-icon"})]),_:1},512),[[le,h.curSortType.includes("desc")]])]),_:1},8,["content"])]),_:1})]),_:1})]),t(e(St),{onScroll:ta,ref_key:"scrollbarRef",ref:nt,class:"custom-tree"},{default:a(()=>[Fe.value?(i(),v(O,{key:0,menu:"",ref_key:"dsListTree",ref:he,"node-key":"id",onNodeExpand:ga,onNodeCollapse:va,"filter-node-method":ha,"default-expanded-keys":Ce.value,data:h.datasourceTree,props:Ta,onNodeClick:Pe},{default:a(({node:c,data:g})=>[u("span",ul,[t(e(N),{class:q(g.leaf&&"icon-border"),style:{"font-size":"18px"}},{default:a(()=>[t(e(y),{"static-content":ra(g)},{default:a(()=>[(i(),v(de(da(g)),{class:"svg-icon"}))]),_:2},1032,["static-content"])]),_:2},1032,["class"]),g.extraFlag<=-1?(i(),v(e(N),{key:0,style:{position:"absolute",top:"10px",left:"10px","font-size":"12px"}},{default:a(()=>[t(e(y),null,{default:a(()=>[t(e(Zo),{class:"svg-icon"})]),_:1})]),_:1})):p("",!0),g.extraFlag>-1?(i(),f("span",{key:1,title:c.label,class:q(["label-tooltip ellipsis",g.type==="Excel"&&"excel"])},r(c.label),11,pl)):(i(),v(d,{key:2,effect:"dark",content:`${e(l)("data_set.invalid_data_source")}: ${c.label}`,placement:"top"},{default:a(()=>[u("span",{title:c.label,class:q(["label-tooltip ellipsis",g.type==="Excel"&&"excel"])},r(c.label),11,ml)]),_:2},1032,["content"])),g.weight>=7?(i(),f("div",fl,[g.leaf?g.type!=="Excel"?(i(),v(e(N),{key:1,class:"hover-icon",onClick:Ye(G=>Ca(g),["stop"])},{default:a(()=>[t(e(y),{name:"icon_edit_outlined"},{default:a(()=>[t(e(Ge),{class:"svg-icon"})]),_:1})]),_:2},1032,["onClick"])):p("",!0):(i(),v(e(Bt),{key:0,"icon-size":"24px",onHandleCommand:G=>Ct(G,g),"menu-list":Gt.value,"icon-name":e(Mt),placement:"bottom-start"},null,8,["onHandleCommand","menu-list","icon-name"])),t(e(Bt),{onHandleCommand:G=>ba(G,g,g.leaf?"datasource":"folder"),"menu-list":Ea(!["Excel"].includes(g.type)&&g.leaf)},null,8,["onHandleCommand","menu-list"])])):p("",!0)])]),_:1},8,["default-expanded-keys","data"])):p("",!0)]),_:1},512)])]),_:1},8,["class","style"]),u("div",{class:q(["datasource-content",{auto:tt.value||Te.value,h100:Te.value||tt.value}])},[!h.datasourceTree.length&&ze.value?(i(),v(Ke,{key:0,description:e(l)("data_source.no_data_source"),"img-type":"none"},{default:a(()=>[Ee.value?(i(),v(e(z),{key:0,onClick:s[2]||(s[2]=()=>Oe()),type:"primary"},{icon:a(()=>[t(e(y),{name:"icon_add_outlined"},{default:a(()=>[t(e(Mt),{class:"svg-icon"})]),_:1})]),default:a(()=>[m(" "+r(e(l)("datasource.create")),1)]),_:1})):p("",!0)]),_:1},8,["description"])):n.id?(i(),f(D,{key:1},[u("div",_l,[u("div",gl,[t(e(N),{class:"icon-border"},{default:a(()=>[t(e(y),{"static-content":ca(n.type)},{default:a(()=>[(i(),v(de(e(Ut)[n.type]),{class:"svg-icon"}))]),_:1},8,["static-content"])]),_:1}),u("span",{title:n.name,class:"name ellipsis"},r(n.name),9,vl),t(R,{style:{margin:"0 12px"},direction:"vertical"}),u("span",hl,r(e(l)("visualization.create_by"))+":"+r(n.creator),1),t(S,{offset:8,"show-arrow":"",placement:"bottom",width:"290",trigger:"hover"},{reference:a(()=>[t(e(N),{size:"16px",class:"create-user"},{default:a(()=>[t(e(y),{name:"icon_info_outlined"},{default:a(()=>[t(e(_o),{class:"svg-icon"})]),_:1})]),_:1})]),default:a(()=>[t(Vo,{"create-time":ut.value.createTime,creator:ut.value.creator},null,8,["create-time","creator"])]),_:1}),u("div",Cl,[B((i(),v(e(z),{secondary:"",onClick:s[3]||(s[3]=c=>at(null))},{icon:a(()=>[t(e(y),{name:"icon_dataset_outlined"},{default:a(()=>[t(e(Zt),{class:"svg-icon"})]),_:1})]),default:a(()=>[m(" "+r(e(l)("data_set.a_new_dataset")),1)]),_:1})),[[be,["dataset"]]]),n.type!=="Excel"&&n.weight>=7?(i(),v(e(z),{key:0,secondary:"",onClick:la},{default:a(()=>[m(r(e(l)("datasource.validate")),1)]),_:1})):p("",!0),n.type==="Excel"?(i(),f(D,{key:1},[n.weight>=7?(i(),v(I,{key:0,action:"",multiple:!1,ref:"uploadAgain","show-file-list":!1,accept:".xls,.xlsx,.csv","on-change":Tt,"http-request":()=>xt(0),name:"file"},{trigger:a(()=>[B((i(),v(e(z),{class:"replace-excel",type:"primary"},{icon:a(()=>[t(e(y),{name:"icon_edit_outlined"},{default:a(()=>[t(e(Ge),{class:"svg-icon"})]),_:1})]),default:a(()=>[m(" "+r(e(l)("data_source.replace_data")),1)]),_:1})),[[ce,Ze.value]])]),_:1},8,["http-request"])):p("",!0),n.weight>=7?(i(),v(I,{key:1,action:"",multiple:!1,ref:"uploadAgain","show-file-list":!1,accept:".xls,.xlsx,.csv","on-change":Tt,"http-request":()=>xt(1),name:"file"},{trigger:a(()=>[B((i(),v(e(z),{type:"primary"},{icon:a(()=>[t(e(y),{name:"icon_new-item_outlined"},{default:a(()=>[t(e(Wo),{class:"svg-icon"})]),_:1})]),default:a(()=>[m(" "+r(e(l)("data_source.append_data")),1)]),_:1})),[[ce,je.value]])]),_:1},8,["http-request"])):p("",!0)],64)):n.weight>=7?(i(),v(e(z),{key:2,onClick:s[4]||(s[4]=c=>ht()),type:"primary"},{icon:a(()=>[t(e(y),{name:"icon_edit_outlined"},{default:a(()=>[t(e(Ge),{class:"svg-icon"})]),_:1})]),default:a(()=>[m(" "+r(e(l)("chart.edit")),1)]),_:1})):p("",!0)])]),u("div",yl,[t(V,{modelValue:ie.value,"onUpdate:modelValue":s[5]||(s[5]=c=>ie.value=c),onTabChange:bt},{default:a(()=>[t($,{label:e(l)("datasource.config"),name:"config"},null,8,["label"]),t($,{label:e(l)("datasource.table"),name:"table"},null,8,["label"])]),_:1},8,["modelValue"])])]),ie.value==="table"?(i(),f("div",bl,[u("div",wl,[t(_,{ref:"search",modelValue:se.value,"onUpdate:modelValue":s[6]||(s[6]=c=>se.value=c),placeholder:e(l)("commons.search"),clearable:"",onInput:dt,style:{width:"240px"}},{prefix:a(()=>[t(e(N),null,{default:a(()=>[t(e(y),{name:"icon_search-outline_outlined"},{default:a(()=>[t(e($t),{class:"svg-icon"})]),_:1})]),_:1})]),_:1},8,["modelValue","placeholder"])]),u("div",Tl,[t(Ht,{pagination:h.paginationConfig,"table-data":ua.value,"is-search":!!se.value.trim(),onSizeChange:Kt,onCurrentChange:Me},{default:a(()=>[t(E,{key:"tableName",prop:"tableName",label:e(l)("datasource.table_name")},null,8,["label"]),["api"].includes(n.type.toLowerCase())?(i(),v(E,{key:"status",prop:"status",label:e(l)("data_source.latest_update_status")},{default:a(c=>[u("div",xl,[c.row.status==="Completed"?(i(),f(D,{key:0},[t(e(N),{style:{"margin-right":"8px"}},{default:a(()=>[t(e(y),{name:"icon_succeed_filled"},{default:a(()=>[t(e(At),{class:"svg-icon"})]),_:1})]),_:1}),m(" "+r(e(l)("dataset.completed")),1)],64)):p("",!0),c.row.status==="UnderExecution"?(i(),f(D,{key:1},[m(r(e(l)("dataset.underway")),1)],64)):p("",!0),c.row.status==="Error"||c.row.status==="Warning"?(i(),f(D,{key:2},[t(e(N),{style:{"margin-right":"8px"}},{default:a(()=>[t(e(y),{class:"field-icon-red",name:"icon_close_filled"},{default:a(()=>[t(e(qt),{class:"svg-icon field-icon-red"})]),_:1})]),_:1}),m(" "+r(e(l)("dataset.error")),1)],64)):p("",!0)])]),_:1},8,["label"])):p("",!0),["excel","api"].includes(n.type.toLowerCase())?(i(),v(E,{key:"lastUpdateTime",prop:"lastUpdateTime",label:e(l)("data_source.latest_update_time")},{default:a(c=>[u("span",null,r(e(pe)(c.row.lastUpdateTime)),1)]),_:1},8,["label"])):p("",!0),t(E,{key:"__operation",label:e(l)("commons.operating"),fixed:"right",width:"108"},{default:a(c=>[t(d,{effect:"dark",content:e(l)("data_set.a_new_dataset"),placement:"top"},{default:a(()=>[B((i(),v(e(z),{onClick:Ye(g=>at(c.row.tableName),["stop"]),text:""},{icon:a(()=>[t(e(y),{name:"icon_dataset_outlined"},{default:a(()=>[t(e(Zt),{class:"svg-icon"})]),_:1})]),_:2},1032,["onClick"])),[[be,["dataset"]]])]),_:2},1032,["content"]),t(d,{effect:"dark",content:e(l)("visualization.details"),placement:"top"},{default:a(()=>[t(e(z),{onClick:Ye(g=>Xt(c.row),["stop"]),text:""},{icon:a(()=>[t(e(y),{name:"icon_describe_outlined"},{default:a(()=>[t(e(jt),{class:"svg-icon"})]),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),_:1},8,["label"])]),_:1},8,["pagination","table-data","is-search"])])])):(i(),f(D,{key:1},[t(we,{name:e(l)("datasource.base_info")},{default:a(c=>[c.active?(i(),f(D,{key:0},[t(x,{gutter:24},{default:a(()=>[t(C,{span:12},{default:a(()=>[t(L,{label:e(l)("auth.datasource")+e(l)("common.name")},{default:a(()=>[m(r(n.name),1)]),_:1},8,["label"])]),_:1}),t(C,{span:12},{default:a(()=>[t(L,{label:e(l)("datasource.type")},{default:a(()=>[m(r(e(lt)[n.type]),1)]),_:1},8,["label"])]),_:1})]),_:1}),t(x,{gutter:24},{default:a(()=>[n.type==="Excel"?(i(),v(C,{key:0,span:12},{default:a(()=>[t(L,{label:e(l)("data_source.document")},{default:a(()=>[t(Io,{name:n.fileName,size:n.size},null,8,["name","size"])]),_:1},8,["label"])]),_:1})):(i(),v(C,{key:1,span:24},{default:a(()=>[t(L,{label:e(l)("common.description")},{default:a(()=>[m(r(n.description),1)]),_:1},8,["label"])]),_:1}))]),_:1}),["Excel","API","es"].includes(n.type)?p("",!0):(i(),f(D,{key:0},[B(t(x,{gutter:24},{default:a(()=>[t(C,{span:12},{default:a(()=>[t(L,{label:e(l)("datasource.host")},{default:a(()=>[m(r(n.configuration.host),1)]),_:1},8,["label"])]),_:1})]),_:1},512),[[le,n.configuration.urlType!=="jdbcUrl"]]),B(t(x,{gutter:24},{default:a(()=>[t(C,{span:12},{default:a(()=>[t(L,{label:e(l)("datasource.port")},{default:a(()=>[m(r(n.configuration.port),1)]),_:1},8,["label"])]),_:1}),t(C,{span:12},{default:a(()=>[t(L,{label:e(l)("datasource.data_base")},{default:a(()=>[m(r(n.configuration.dataBase),1)]),_:1},8,["label"])]),_:1})]),_:1},512),[[le,n.configuration.urlType!=="jdbcUrl"]]),B(t(x,{gutter:24},{default:a(()=>[t(C,{span:12},{default:a(()=>[t(L,{label:e(l)("datasource.user_name")},{default:a(()=>[m(r(n.configuration.username),1)]),_:1},8,["label"])]),_:1}),t(C,{span:12},{default:a(()=>[t(L,{label:e(l)("datasource.extra_params")},{default:a(()=>[m(r(n.configuration.extraParams),1)]),_:1},8,["label"])]),_:1})]),_:1},512),[[le,n.configuration.urlType!=="jdbcUrl"]]),B(t(x,{gutter:24},{default:a(()=>[t(C,{span:12},{default:a(()=>[t(L,{label:e(l)("datasource.jdbcUrl")},{default:a(()=>[m(r(n.configuration.jdbcUrl),1)]),_:1},8,["label"])]),_:1})]),_:1},512),[[le,n.configuration.urlType==="jdbcUrl"]]),B(t(x,{gutter:24},{default:a(()=>[t(C,{span:12},{default:a(()=>[t(L,{label:e(l)("datasource.user_name")},{default:a(()=>[m(r(n.configuration.username),1)]),_:1},8,["label"])]),_:1})]),_:1},512),[[le,n.configuration.urlType==="jdbcUrl"]]),t(x,{gutter:24},{default:a(()=>[!["es","api"].includes(n.type.toLowerCase())&&n.configuration.urlType!=="jdbcUrl"?(i(),f("span",{key:0,class:"de-expand",onClick:s[7]||(s[7]=g=>_e.value=!_e.value)},[m(r(e(l)("data_source.ssh_settings"))+" ",1),t(e(N),null,{default:a(()=>[t(e(y),null,{default:a(()=>[(i(),v(de(_e.value?e(Nt):e(Lt))))]),_:1})]),_:1})])):p("",!0)]),_:1}),_e.value?(i(),f(D,{key:0},[n.configuration.useSSH?(i(),v(x,{key:0,gutter:24},{default:a(()=>[t(C,{span:12},{default:a(()=>[t(L,{label:e(l)("data_source.host")},{default:a(()=>[m(r(n.configuration.sshHost),1)]),_:1},8,["label"])]),_:1}),t(C,{span:12},{default:a(()=>[t(L,{label:e(l)("data_source.port")},{default:a(()=>[m(r(n.configuration.sshPort),1)]),_:1},8,["label"])]),_:1})]),_:1})):p("",!0),n.configuration.useSSH?(i(),v(x,{key:1,gutter:24},{default:a(()=>[t(C,{span:12},{default:a(()=>[t(L,{label:e(l)("datasource.user_name")},{default:a(()=>[m(r(n.configuration.sshUserName),1)]),_:1},8,["label"])]),_:1})]),_:1})):p("",!0)],64)):p("",!0),t(x,{gutter:24},{default:a(()=>[["es","api"].includes(n.type.toLowerCase())?p("",!0):(i(),f("span",{key:0,class:"de-expand",onClick:s[8]||(s[8]=g=>fe.value=!fe.value)},[m(r(e(l)("datasource.priority"))+" ",1),t(e(N),null,{default:a(()=>[t(e(y),null,{default:a(()=>[(i(),v(de(fe.value?e(Nt):e(Lt))))]),_:1})]),_:1})]))]),_:1}),fe.value?(i(),f(D,{key:1},[t(x,{gutter:24},{default:a(()=>[t(C,{span:12},{default:a(()=>[t(L,{label:e(l)("datasource.initial_pool_size")},{default:a(()=>[m(r(n.configuration.initialPoolSize||5),1)]),_:1},8,["label"])]),_:1}),t(C,{span:12},{default:a(()=>[t(L,{label:e(l)("datasource.min_pool_size")},{default:a(()=>[m(r(n.configuration.minPoolSize||5),1)]),_:1},8,["label"])]),_:1})]),_:1}),t(x,{gutter:24},{default:a(()=>[t(C,{span:12},{default:a(()=>[t(L,{label:e(l)("datasource.max_pool_size")},{default:a(()=>[m(r(n.configuration.maxPoolSize||5),1)]),_:1},8,["label"])]),_:1}),t(C,{span:12},{default:a(()=>[t(L,{value:n.configuration.queryTimeout,label:e(l)("datasource.query_timeout")},{default:a(()=>[m(r(n.configuration.queryTimeout||"30")+r(e(l)("common.second")),1)]),_:1},8,["value","label"])]),_:1})]),_:1})],64)):p("",!0)],64)),["es"].includes(n.type)?(i(),v(x,{key:1,gutter:24},{default:a(()=>[t(C,{span:12},{default:a(()=>[t(L,{label:e(l)("datasource.datasource_url")},{default:a(()=>[m(r(n.configuration.url),1)]),_:1},8,["label"])]),_:1})]),_:1})):p("",!0)],64)):p("",!0)]),_:1},8,["name"]),n.type==="API"?(i(),v(we,{key:0,name:e(l)("datasource.data_table")},{default:a(c=>[c.active?(i(),f("div",kl,[(i(!0),f(D,null,We(n.apiConfiguration,g=>(i(),f("div",{key:g.id,class:"api-card"},[t(x,null,{default:a(()=>[t(C,{span:19},{default:a(()=>[u("span",Sl,[u("span",{class:"ellipsis",title:g.name},r(g.name),9,El)]),g.status==="Error"?(i(),f("span",Dl,r(e(l)("datasource.invalid")),1)):p("",!0),g.status==="Success"?(i(),f("span",Ll,r(e(l)("datasource.valid")),1)):p("",!0)]),_:2},1024),t(C,{style:{"text-align":"right"},span:5},{default:a(()=>[t(e(z),{onClick:G=>fa(g),text:""},{icon:a(()=>[t(e(y),{name:"icon_replace_outlined"},{default:a(()=>[t(e(It),{class:"svg-icon"})]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024),t(x,null,{default:a(()=>[t(C,{span:19},{default:a(()=>[u("span",null,r(e(l)("data_source.data_time"))+" "+r(e(pe)(g.updateTime)),1)]),_:2},1024)]),_:2},1024),u("div",Nl,[u("span",null,r(e(l)("datasource.method")),1),u("span",null,r(e(l)("datasource.url")),1)]),u("div",Vl,[u("span",null,r(g.method),1),t(d,{w:"",effect:"dark",content:g.url,placement:"top"},{default:a(()=>[u("span",null,r(g.url),1)]),_:2},1032,["content"])])]))),128))])):p("",!0),t(e(z),{onClick:_a,class:"update-records",text:""},{icon:a(()=>[t(e(y),{name:"icon_replace_outlined"},{default:a(()=>[t(e(It),{class:"svg-icon"})]),_:1})]),default:a(()=>[m(" "+r(e(l)("data_source.update_all")),1)]),_:1})]),_:1},8,["name"])):p("",!0),n.type==="API"?(i(),v(we,{key:1,name:e(l)("dataset.update_setting"),time:n.lastSyncTime},{default:a(c=>[c.active?(i(),v(x,{key:0,gutter:24},{default:a(()=>[t(C,{span:12},{default:a(()=>[t(L,{label:e(l)("dataset.update_type")},{default:a(()=>[m(r(e(l)(`dataset.${n.syncSetting.updateType}`)),1)]),_:1},8,["label"])]),_:1}),t(C,{span:12},{default:a(()=>[t(L,{label:e(l)("dataset.execute_rate")},{default:a(()=>[(i(!0),f(D,null,We(sa(n.syncSetting),g=>(i(),f("p",{class:"value",key:g},r(g),1))),128))]),_:1},8,["label"])]),_:1})]),_:1})):p("",!0),t(e(z),{onClick:Ue,class:"update-records",text:""},{icon:a(()=>[t(e(y),{name:"icon_describe_outlined"},{default:a(()=>[t(e(jt),{class:"svg-icon"})]),_:1})]),default:a(()=>[m(" "+r(e(l)("dataset.update_records")),1)]),_:1})]),_:1},8,["name","time"])):p("",!0),n.type==="Excel"?(i(),v(we,{key:2,name:e(l)("dataset.data_preview")},{default:a(c=>[c.active?(i(),f("div",$l,[t(Ho,{"active-tab":ee.value,onTabClick:ct,"tab-list":ve.value},null,8,["active-tab","tab-list"]),u("div",Ml,[t(H,null,{default:a(({height:g,width:G})=>[B((i(),v(W,{columns:it.value,"header-class":"excel-header-cell",data:gt.value,width:G,height:g,fixed:""},{empty:a(()=>[t(Ke,{description:e(l)("data_set.no_data"),"img-type":"noneWhite"},null,8,["description"])]),_:2},1032,["columns","data","width","height"])),[[ce,Ie.value]])]),_:1})])])):p("",!0)]),_:1},8,["name"])):p("",!0)],64))],64)):ze.value?(i(),v(Ke,{key:2,description:e(l)("data_source.on_the_left"),"img-type":"select"},null,8,["description"])):p("",!0)],2),t(Mo,{onRefresh:wa,ref_key:"datasourceEditor",ref:Q},null,512),t(re,{title:e(l)("common.detail"),modelValue:Le.value,"onUpdate:modelValue":s[9]||(s[9]=c=>Le.value=c),class:"ds-table-drawer",width:"840px",top:"60px"},{default:a(()=>[t(x,{gutter:24},{default:a(()=>[t(C,{span:12},{default:a(()=>[u("p",Il,r(e(l)("datasource.table_name")),1),u("p",Hl,r(Se.tableName),1)]),_:1}),t(C,{span:12},{default:a(()=>[u("p",zl,r(e(l)("datasource.table_description")),1),u("p",Bl,r(Se.name||"-"),1)]),_:1})]),_:1}),t(e(St),null,{default:a(()=>[B((i(),v(Y,{"header-cell-class-name":"header-cell",data:h.dsTableData,stripe:"",style:{width:"100%"}},{default:a(()=>[t(E,{prop:"originName",label:e(l)("datasource.column_name")},null,8,["label"]),t(E,{prop:"type",label:e(l)("datasource.field_type")},{default:a(c=>[u("div",Pl,[t(e(N),null,{default:a(()=>[t(e(y),{class:q(`field-icon-${e(K)[c.row.deType]}`)},{default:a(()=>[(i(),v(de(e(Ft)[e(K)[c.row.deType]]),{class:q(["svg-icon",`field-icon-${e(K)[c.row.deType]}`])},null,8,["class"]))]),_:2},1032,["class"])]),_:2},1024),m(" "+r(e(l)(`dataset.${e(K)[c.row.deType]}`)+`${c.row.deType===3?"("+e(l)("dataset.float")+")":""}`),1)])]),_:1},8,["label"]),t(E,{prop:"name","show-overflow-tooltip":"",label:e(l)("datasource.field_description")},null,8,["label"])]),_:1},8,["data"])),[[ce,Ne.value]])]),_:1})]),_:1},8,["title","modelValue"]),t(No,{onFinish:pa,ref_key:"creatDsFolder",ref:Be},null,512),t(ye,{modelValue:Re.value,"onUpdate:modelValue":s[10]||(s[10]=c=>Re.value=c),title:e(l)("dataset.update_records"),"close-on-press-escape":!1,"close-on-click-modal":!1,"modal-class":"record-drawer",direction:"rtl",size:"840px"},{default:a(()=>[t(Ht,{pagination:J.paginationConfig,"table-data":vt.value,onSizeChange:Qt,onCurrentChange:ea},{default:a(()=>[t(E,{prop:"name",label:e(l)("datasource.data_table")},null,8,["label"]),t(E,{prop:"triggerType",label:e(l)("datasource.sync_rate")},{default:a(c=>[u("div",Ol,[c.row.triggerType==="CRON"?(i(),f(D,{key:0},[m(r(e(l)("datasource.cron_config")),1)],64)):p("",!0),c.row.triggerType==="RIGHTNOW"?(i(),f(D,{key:1},[m(r(e(l)("datasource.execute_once")),1)],64)):p("",!0),c.row.triggerType==="SIMPLE_CRON"?(i(),f(D,{key:2},[m(r(e(l)("datasource.simple_cron")),1)],64)):p("",!0),c.row.triggerType==="MANUAL"?(i(),f(D,{key:3},[m(r(e(l)("datasource.manual")),1)],64)):p("",!0)])]),_:1},8,["label"]),t(E,{prop:"startTime",label:e(l)("datasource.start_time")},{default:a(c=>[u("span",null,r(e(pe)(c.row.startTime)),1)]),_:1},8,["label"]),t(E,{prop:"endTime",label:e(l)("datasource.end_time")},{default:a(c=>[u("span",null,r(e(pe)(c.row.endTime)),1)]),_:1},8,["label"]),t(E,{prop:"taskStatus",label:e(l)("data_source.update_result")},{default:a(c=>[u("div",Rl,[c.row.taskStatus==="Completed"?(i(),f(D,{key:0},[t(e(N),{style:{"margin-right":"8px"}},{default:a(()=>[t(e(y),{name:"icon_succeed_filled"},{default:a(()=>[t(e(At),{class:"svg-icon"})]),_:1})]),_:1}),m(" "+r(e(l)("dataset.completed")),1)],64)):p("",!0),c.row.taskStatus==="UnderExecution"?(i(),f(D,{key:1},[m(r(e(l)("dataset.underway")),1)],64)):p("",!0),c.row.taskStatus==="Error"||c.row.taskStatus==="Warning"?(i(),f(D,{key:2},[t(e(N),{style:{"margin-right":"8px"}},{default:a(()=>[t(e(y),{class:"field-icon-red",name:"icon_close_filled"},{default:a(()=>[t(e(qt),{class:"svg-icon field-icon-red"})]),_:1})]),_:1}),m(" "+r(e(l)("dataset.error"))+" ",1),t(e(N),{onClick:g=>na(c.row.info),class:"error-info"},{default:a(()=>[t(e(y),{name:"icon-maybe_outlined"},{default:a(()=>[t(e(ol),{class:"svg-icon"})]),_:1})]),_:2},1032,["onClick"])],64)):p("",!0)])]),_:1},8,["label"])]),_:1},8,["pagination","table-data"])]),_:1},8,["modelValue","title"]),t(re,{modelValue:ge.value,"onUpdate:modelValue":s[12]||(s[12]=c=>ge.value=c),"close-on-press-escape":!1,"close-on-click-modal":!1,title:e(l)("data_source.failure_details"),width:"600px"},{footer:a(()=>[u("span",Fl,[t(e(z),{secondary:"",onClick:s[11]||(s[11]=c=>ge.value=!1)},{default:a(()=>[m(r(e(l)("chart.close")),1)]),_:1})])]),default:a(()=>[u("span",null,r(rt.value),1)]),_:1},8,["modelValue","title"]),t(ro,{ref_key:"relationChartRef",ref:yt},null,512),t(e(Ma),{jsname:"L2NvbXBvbmVudC9wbHVnaW5zLWhhbmRsZXIvRHNDYXRlZ29yeUhhbmRsZXI=",onLoadDsPlugin:ia})])),[[ce,He.value]])}}});const si=Ro(Zl,[["__scopeId","data-v-07ada388"]]);export{si as default};
