import{i as $}from"./interactive-0.0.0-dataease.js";import{j as F,d as W}from"./index-0.0.0-dataease2.js";import{s as g}from"./ShortcutOption-0.0.0-dataease.js";import{d as q,r as m,_ as E,m as M,o as P,f as i,M as l,k as p,i as y,j as n,N as f,Z as k,aa as L,a7 as V,a0 as j,a9 as z,g as D}from"./vue-0.0.0-dataease.js";import{a as A}from"./index-0.0.0-dataease.js";import O from"./Workbranch-0.0.0-dataease.js";import{n as H}from"./none-0.0.0-dataease.js";import{s as R,b as U}from"./index-0.0.0-dataease26.js";import{s as Z}from"./index-0.0.0-dataease53.js";import{s as G}from"./index-0.0.0-dataease27.js";import"./index-0.0.0-dataease24.js";import"./index-0.0.0-dataease54.js";import{_ as J}from"./_plugin-vue_export-helper-0.0.0-dataease.js";import"./dataVisualization-0.0.0-dataease.js";import"./dataset-0.0.0-dataease.js";import"./datasource-0.0.0-dataease.js";import"./app-0.0.0-dataease.js";import"./library-0.0.0-dataease.js";import"./lodash-0.0.0-dataease.js";import"./axios-0.0.0-dataease.js";import"./echarts-0.0.0-dataease.js";import"./tinymce-0.0.0-dataease.js";import"./user-0.0.0-dataease.js";import"./icon_dashboard-0.0.0-dataease.js";import"./index-0.0.0-dataease23.js";import"./use-route-0.0.0-dataease.js";const K={class:"mobile-panel-list"},Q={class:"workbranch-cell-group"},X={key:0,class:"empty-img-mobile"},Y=["src"],ee={class:"empty-tips"},te=q({__name:"index",emits:["setLoading"],setup(ae,{emit:T}){const C=z(),{t:_}=F(),{wsCache:c}=A("sessionStorage"),s=m("recent"),d=m(""),r=E({tableData:[],curTypeList:[]}),x=$(),o=T,w=()=>{o("setLoading",!0),g.loadData({type:"panel",keyword:"",asc:!1}).then(a=>{r.tableData=(a.data||[]).filter(e=>e.extFlag===1)}).finally(()=>{o("setLoading",!1),b()})},b=()=>{d.value=r.tableData.length?"":`暂无${{recent:"数据",store:"收藏",share:"分享"}[s.value]}`},B=()=>{o("setLoading",!0),W.post({url:"/share/query",data:{type:"panel",keyword:"",asc:!1}}).then(a=>{r.tableData=(a.data||[]).filter(e=>e.extFlag===1)}).finally(()=>{o("setLoading",!1),b()})},u=m([{title:_("work_branch.recent"),name:"recent",disabled:!1},{title:"我的收藏",name:"store",disabled:!1},{title:_("visualization.share_out"),name:"share",disabled:!1}]),h=M(()=>x.getData),S=(()=>{const a=["panel","screen","dataset","datasource"],e=[];for(const t in h.value)h.value[t].menuAuth&&e.push(a[parseInt(t)]);return u.value[0].disabled=!(e!=null&&e.length),u.value[1].disabled=!e.includes("panel")&&!e.includes("screen"),e})(),v=({name:a,disabled:e})=>{e||(a==="recent"||a==="store"?(o("setLoading",!0),g.setBusiFlag(a),w()):B())};P(()=>{s.value=c.get("activeTab")||"recent",c.set("activeTab",""),S.length&&v({name:s.value,disabled:!1})});const I=a=>{c.set("activeTab",s.value),C.push({path:"/panel/mobile",query:{dvId:a.resourceId}})},N=a=>new Date(a).toLocaleString();return(a,e)=>(i(),l("div",K,[p(n(G),null,{default:y(()=>[p(n(Z),{"safe-area-inset-top":"",title:"工作台"}),p(n(R),{onClickTab:v,active:s.value,"onUpdate:active":e[0]||(e[0]=t=>s.value=t)},{default:y(()=>[(i(!0),l(k,null,L(u.value,t=>(i(),D(n(U),{key:t.name,disabled:t.disabled,name:t.name,title:t.title},null,8,["disabled","name","title"]))),128))]),_:1},8,["active"])]),_:1}),f("div",Q,[(i(!0),l(k,null,L(r.tableData,t=>(i(),D(O,{onClick:ie=>I(t),key:t.id,size:"large",label:t.name,time:N(t.lastEditTime||t.time)},null,8,["onClick","label","time"]))),128))]),d.value?(i(),l("div",X,[f("img",{width:"125",height:"125",src:n(H),alt:""},null,8,Y),f("div",ee,V(d.value),1)])):j("",!0)]))}});const Ne=J(te,[["__scopeId","data-v-ec207bae"]]);export{Ne as default};
