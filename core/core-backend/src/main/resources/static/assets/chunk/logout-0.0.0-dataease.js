import{useUserStoreWithOut as l}from"./user-0.0.0-dataease.js";import{u as n,r}from"./index-0.0.0-dataease2.js";import{i as d}from"./interactive-0.0.0-dataease.js";import{a as h}from"./index-0.0.0-dataease.js";const{wsCache:o}=h(),a=n(),c=l(),s=d(),b=i=>{c.clear(),c.$reset(),a.clear(),a.$reset(),s.clear(),s.$reset(),f();let e="/workbranch/index";r.currentRoute.value.fullPath&&(e=r.currentRoute.value.fullPath);let t=window.location.pathname;if(t&&((t.includes("oidcbi/")||t.includes("casbi/"))&&(t=t.replace("oidcbi/",""),t=t.replace("casbi/","")),t=t.substring(0,t.length-1)),o.get("out_auth_platform")==="cas"){const u=window.location.href;window.location.href=t+"/casbi/cas/logout?service="+u;return}if(o.get("out_auth_platform")==="oidc"){window.location.href=t+"/oidcbi/oidc/logout";return}o.get("custom_auth_logout_url")&&(window.location.href=o.get("custom_auth_logout_url")),r.push(i?e:`/login?redirect=${e}`)},f=()=>{Object.keys(o.storage).forEach(e=>{(e.startsWith("de-plugin-")||e==="de-platform-client"||e==="pwd-validity-period"||e==="xpack-model-distributed")&&o.delete(e)})};export{b as l};
