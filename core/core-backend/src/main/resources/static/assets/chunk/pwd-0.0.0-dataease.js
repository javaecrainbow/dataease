import{a as $}from"./index-0.0.0-dataease.js";import{j as D,G as V,d as C,n as E}from"./index-0.0.0-dataease2.js";import"./el-form-0.0.0-dataease.js";import{a as q,E as B}from"./el-form-item-0.0.0-dataease.js";import{d as F,u as N,r as n,_ as S,o as z,ab as I,U as M,f as j,M as A,N as e,a7 as f,j as l,k as d,i as v,ac as T,a6 as U}from"./vue-0.0.0-dataease.js";import{useAppStoreWithOut as G}from"./app-0.0.0-dataease.js";import{r as O}from"./encryption-0.0.0-dataease.js";import{_ as P}from"./CustomPassword.vue_vue_type_script_setup_true_lang-0.0.0-dataease.js";import{_ as R}from"./_plugin-vue_export-helper-0.0.0-dataease.js";import"./library-0.0.0-dataease.js";import"./lodash-0.0.0-dataease.js";import"./axios-0.0.0-dataease.js";import"./echarts-0.0.0-dataease.js";import"./tinymce-0.0.0-dataease.js";import"./user-0.0.0-dataease.js";import"./_commonjs-dynamic-modules-0.0.0-dataease.js";import"./base64-0.0.0-dataease.js";import"./icon_visible_outlined-0.0.0-dataease.js";import"./icon_invisible_outlined-0.0.0-dataease.js";const W={class:"pwd-body"},Z={class:"pwd-wrapper"},H={class:"pwd-content"},J={class:"span-header"},K={class:"bi-text"},L={style:{"text-align":"center"}},Q={class:"input-layout"},X={class:"input-main"},Y={class:"div-input"},ee={class:"abs-input"},te={class:"input-text"},se={class:"auth-root-class"},oe=F({__name:"pwd",setup(ae){const y=N(),{wsCache:p}=$(),w=G(),{t:s}=D(),h=n(""),c=n(!0),g=n(),r=n({password:""}),b=S({password:[{required:!0,message:s("pblink.key_pwd"),trigger:"blur"},{required:!0,pattern:/^[A-Za-z\d!@#$%^&*()_+]{4,10}$/,message:s("pblink.pwd_format_error"),trigger:"blur"}]}),k=async o=>{o&&await o.validate((t,_)=>{if(t){const i=y.params.uuid,u=r.value.password,m=`${i},${u}`,a=O(m);C.post({url:"/share/validate",data:{ciphertext:a}}).then(x=>{x.data?(p.set(`link-${i}`,a),window.location.reload()):h.value="密码错误"})}else console.error("error submit!",_)})};return z(()=>{p.get(w.getDekey)||V().then(o=>{p.set(w.getDekey,o.data)}).finally(()=>{c.value=!1}),c.value=!1}),(o,t)=>{const _=q,i=B,u=E,m=I("loading");return M((j(),A("div",W,[e("div",Z,[e("div",H,[e("div",J,[e("div",K,[e("span",L,f(l(s)("pblink.key_pwd")),1)])]),e("div",Q,[e("div",X,[e("div",Y,[d(i,{ref_key:"pwdForm",ref:g,model:r.value,rules:b,size:"small",onSubmit:t[1]||(t[1]=T(()=>{},["stop","prevent"]))},{default:v(()=>[d(_,{label:"",prop:"password"},{default:v(()=>[d(l(P),{modelValue:r.value.password,"onUpdate:modelValue":t[0]||(t[0]=a=>r.value.password=a),maxlength:"10",minlength:"4","show-password":"",class:"real-input",placeholder:l(s)("pblink.input_placeholder")},null,8,["modelValue","placeholder"])]),_:1})]),_:1},8,["model","rules"])])]),e("div",ee,[e("div",te,f(h.value),1)])]),e("div",se,[d(u,{size:"small",type:"primary",onClick:t[2]||(t[2]=a=>k(g.value))},{default:v(()=>[U(f(l(s)("pblink.sure_bt")),1)]),_:1})])])])])),[[m,c.value]])}}});const $e=R(oe,[["__scopeId","data-v-49f755df"]]);export{$e as default};
