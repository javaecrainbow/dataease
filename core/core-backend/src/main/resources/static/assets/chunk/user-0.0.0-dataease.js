import{a as n}from"./library-0.0.0-dataease.js";import{a3 as o}from"./vue-0.0.0-dataease.js";import{a as u,ac as d,aa as h}from"./index-0.0.0-dataease.js";import"./lodash-0.0.0-dataease.js";const{wsCache:t}=u(),l=d(),g=o("user",{state:()=>({token:null,uid:null,name:null,oid:null,language:"zh-CN",exp:null}),getters:{getToken(){return this.token},getUid(){return this.uid},getName(){return this.name},getOid(){return this.oid},getLanguage(){return this.language},getExp(){return this.exp}},actions:{async setUser(){const e=t.get("app.desktop");let a=null;e?a={data:{uid:"1",name:"DataEase 用户",oid:"1",language:"zh-CN"}}:a=await(await n(()=>import("./user-0.0.0-dataease2.js"),[],import.meta.url)).userInfo();const r=a.data;r.token=t.get("user.token"),r.exp=t.get("user.exp"),["token","uid","name","oid","language","exp"].forEach(s=>{const i=s==="uid"?"id":s;this[s]=r[i],t.set("user."+s,this[s])}),this.setLanguage(this.language)},setToken(e){t.set("user.token",e),this.token=e},setExp(e){t.set("user.exp",e),this.exp=e},setUid(e){t.set("user.uid",e),this.uid=e},setName(e){t.set("user.name",e),this.name=e},setOid(e){t.set("user.oid",e),this.oid=e},setLanguage(e){(!e||e==="zh_CN")&&(e="zh-CN"),t.set("user.language",e),this.language=e,l.setLang(e)},clear(){["token","uid","name","oid","language","exp"].forEach(a=>t.delete("user."+a))}}}),f=()=>g(h);export{f as useUserStoreWithOut,g as userStore};
